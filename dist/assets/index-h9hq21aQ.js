(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const u of s)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function o(s){const u={};return s.integrity&&(u.integrity=s.integrity),s.referrerPolicy&&(u.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?u.credentials="include":s.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(s){if(s.ep)return;s.ep=!0;const u=o(s);fetch(s.href,u)}})();function np(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ql={exports:{}},Ir={},Xl={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cd;function Wh(){if(cd)return Te;cd=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),E=Symbol.iterator;function S(x){return x===null||typeof x!="object"?null:(x=E&&x[E]||x["@@iterator"],typeof x=="function"?x:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,P={};function N(x,G,te){this.props=x,this.context=G,this.refs=P,this.updater=te||w}N.prototype.isReactComponent={},N.prototype.setState=function(x,G){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,G,"setState")},N.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function R(){}R.prototype=N.prototype;function M(x,G,te){this.props=x,this.context=G,this.refs=P,this.updater=te||w}var L=M.prototype=new R;L.constructor=M,A(L,N.prototype),L.isPureReactComponent=!0;var b=Array.isArray,V=Object.prototype.hasOwnProperty,W={current:null},X={key:!0,ref:!0,__self:!0,__source:!0};function he(x,G,te){var ie,ae={},ve=null,Se=null;if(G!=null)for(ie in G.ref!==void 0&&(Se=G.ref),G.key!==void 0&&(ve=""+G.key),G)V.call(G,ie)&&!X.hasOwnProperty(ie)&&(ae[ie]=G[ie]);var Ee=arguments.length-2;if(Ee===1)ae.children=te;else if(1<Ee){for(var _e=Array(Ee),st=0;st<Ee;st++)_e[st]=arguments[st+2];ae.children=_e}if(x&&x.defaultProps)for(ie in Ee=x.defaultProps,Ee)ae[ie]===void 0&&(ae[ie]=Ee[ie]);return{$$typeof:t,type:x,key:ve,ref:Se,props:ae,_owner:W.current}}function Y(x,G){return{$$typeof:t,type:x.type,key:G,ref:x.ref,props:x.props,_owner:x._owner}}function de(x){return typeof x=="object"&&x!==null&&x.$$typeof===t}function ye(x){var G={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(te){return G[te]})}var Ce=/\/+/g;function J(x,G){return typeof x=="object"&&x!==null&&x.key!=null?ye(""+x.key):G.toString(36)}function re(x,G,te,ie,ae){var ve=typeof x;(ve==="undefined"||ve==="boolean")&&(x=null);var Se=!1;if(x===null)Se=!0;else switch(ve){case"string":case"number":Se=!0;break;case"object":switch(x.$$typeof){case t:case e:Se=!0}}if(Se)return Se=x,ae=ae(Se),x=ie===""?"."+J(Se,0):ie,b(ae)?(te="",x!=null&&(te=x.replace(Ce,"$&/")+"/"),re(ae,G,te,"",function(st){return st})):ae!=null&&(de(ae)&&(ae=Y(ae,te+(!ae.key||Se&&Se.key===ae.key?"":(""+ae.key).replace(Ce,"$&/")+"/")+x)),G.push(ae)),1;if(Se=0,ie=ie===""?".":ie+":",b(x))for(var Ee=0;Ee<x.length;Ee++){ve=x[Ee];var _e=ie+J(ve,Ee);Se+=re(ve,G,te,_e,ae)}else if(_e=S(x),typeof _e=="function")for(x=_e.call(x),Ee=0;!(ve=x.next()).done;)ve=ve.value,_e=ie+J(ve,Ee++),Se+=re(ve,G,te,_e,ae);else if(ve==="object")throw G=String(x),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return Se}function Pe(x,G,te){if(x==null)return x;var ie=[],ae=0;return re(x,ie,"","",function(ve){return G.call(te,ve,ae++)}),ie}function Me(x){if(x._status===-1){var G=x._result;G=G(),G.then(function(te){(x._status===0||x._status===-1)&&(x._status=1,x._result=te)},function(te){(x._status===0||x._status===-1)&&(x._status=2,x._result=te)}),x._status===-1&&(x._status=0,x._result=G)}if(x._status===1)return x._result.default;throw x._result}var ge={current:null},z={transition:null},q={ReactCurrentDispatcher:ge,ReactCurrentBatchConfig:z,ReactCurrentOwner:W};return Te.Children={map:Pe,forEach:function(x,G,te){Pe(x,function(){G.apply(this,arguments)},te)},count:function(x){var G=0;return Pe(x,function(){G++}),G},toArray:function(x){return Pe(x,function(G){return G})||[]},only:function(x){if(!de(x))throw Error("React.Children.only expected to receive a single React element child.");return x}},Te.Component=N,Te.Fragment=o,Te.Profiler=s,Te.PureComponent=M,Te.StrictMode=i,Te.Suspense=m,Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,Te.cloneElement=function(x,G,te){if(x==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+x+".");var ie=A({},x.props),ae=x.key,ve=x.ref,Se=x._owner;if(G!=null){if(G.ref!==void 0&&(ve=G.ref,Se=W.current),G.key!==void 0&&(ae=""+G.key),x.type&&x.type.defaultProps)var Ee=x.type.defaultProps;for(_e in G)V.call(G,_e)&&!X.hasOwnProperty(_e)&&(ie[_e]=G[_e]===void 0&&Ee!==void 0?Ee[_e]:G[_e])}var _e=arguments.length-2;if(_e===1)ie.children=te;else if(1<_e){Ee=Array(_e);for(var st=0;st<_e;st++)Ee[st]=arguments[st+2];ie.children=Ee}return{$$typeof:t,type:x.type,key:ae,ref:ve,props:ie,_owner:Se}},Te.createContext=function(x){return x={$$typeof:d,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},x.Provider={$$typeof:u,_context:x},x.Consumer=x},Te.createElement=he,Te.createFactory=function(x){var G=he.bind(null,x);return G.type=x,G},Te.createRef=function(){return{current:null}},Te.forwardRef=function(x){return{$$typeof:p,render:x}},Te.isValidElement=de,Te.lazy=function(x){return{$$typeof:y,_payload:{_status:-1,_result:x},_init:Me}},Te.memo=function(x,G){return{$$typeof:h,type:x,compare:G===void 0?null:G}},Te.startTransition=function(x){var G=z.transition;z.transition={};try{x()}finally{z.transition=G}},Te.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},Te.useCallback=function(x,G){return ge.current.useCallback(x,G)},Te.useContext=function(x){return ge.current.useContext(x)},Te.useDebugValue=function(){},Te.useDeferredValue=function(x){return ge.current.useDeferredValue(x)},Te.useEffect=function(x,G){return ge.current.useEffect(x,G)},Te.useId=function(){return ge.current.useId()},Te.useImperativeHandle=function(x,G,te){return ge.current.useImperativeHandle(x,G,te)},Te.useInsertionEffect=function(x,G){return ge.current.useInsertionEffect(x,G)},Te.useLayoutEffect=function(x,G){return ge.current.useLayoutEffect(x,G)},Te.useMemo=function(x,G){return ge.current.useMemo(x,G)},Te.useReducer=function(x,G,te){return ge.current.useReducer(x,G,te)},Te.useRef=function(x){return ge.current.useRef(x)},Te.useState=function(x){return ge.current.useState(x)},Te.useSyncExternalStore=function(x,G,te){return ge.current.useSyncExternalStore(x,G,te)},Te.useTransition=function(){return ge.current.useTransition()},Te.version="18.2.0",Te}var dd;function Ta(){return dd||(dd=1,Xl.exports=Wh()),Xl.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fd;function Yh(){if(fd)return Ir;fd=1;var t=Ta(),e=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function d(p,m,h){var y,E={},S=null,w=null;h!==void 0&&(S=""+h),m.key!==void 0&&(S=""+m.key),m.ref!==void 0&&(w=m.ref);for(y in m)i.call(m,y)&&!u.hasOwnProperty(y)&&(E[y]=m[y]);if(p&&p.defaultProps)for(y in m=p.defaultProps,m)E[y]===void 0&&(E[y]=m[y]);return{$$typeof:e,type:p,key:S,ref:w,props:E,_owner:s.current}}return Ir.Fragment=o,Ir.jsx=d,Ir.jsxs=d,Ir}var pd;function Qh(){return pd||(pd=1,Ql.exports=Yh()),Ql.exports}var C=Qh(),ue=Ta();const Xh=np(ue);var Ki={},Zl={exports:{}},Nt={},jl={exports:{}},ea={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var md;function Zh(){return md||(md=1,(function(t){function e(z,q){var x=z.length;z.push(q);e:for(;0<x;){var G=x-1>>>1,te=z[G];if(0<s(te,q))z[G]=q,z[x]=te,x=G;else break e}}function o(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var q=z[0],x=z.pop();if(x!==q){z[0]=x;e:for(var G=0,te=z.length,ie=te>>>1;G<ie;){var ae=2*(G+1)-1,ve=z[ae],Se=ae+1,Ee=z[Se];if(0>s(ve,x))Se<te&&0>s(Ee,ve)?(z[G]=Ee,z[Se]=x,G=Se):(z[G]=ve,z[ae]=x,G=ae);else if(Se<te&&0>s(Ee,x))z[G]=Ee,z[Se]=x,G=Se;else break e}}return q}function s(z,q){var x=z.sortIndex-q.sortIndex;return x!==0?x:z.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();t.unstable_now=function(){return d.now()-p}}var m=[],h=[],y=1,E=null,S=3,w=!1,A=!1,P=!1,N=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(z){for(var q=o(h);q!==null;){if(q.callback===null)i(h);else if(q.startTime<=z)i(h),q.sortIndex=q.expirationTime,e(m,q);else break;q=o(h)}}function b(z){if(P=!1,L(z),!A)if(o(m)!==null)A=!0,Me(V);else{var q=o(h);q!==null&&ge(b,q.startTime-z)}}function V(z,q){A=!1,P&&(P=!1,R(he),he=-1),w=!0;var x=S;try{for(L(q),E=o(m);E!==null&&(!(E.expirationTime>q)||z&&!ye());){var G=E.callback;if(typeof G=="function"){E.callback=null,S=E.priorityLevel;var te=G(E.expirationTime<=q);q=t.unstable_now(),typeof te=="function"?E.callback=te:E===o(m)&&i(m),L(q)}else i(m);E=o(m)}if(E!==null)var ie=!0;else{var ae=o(h);ae!==null&&ge(b,ae.startTime-q),ie=!1}return ie}finally{E=null,S=x,w=!1}}var W=!1,X=null,he=-1,Y=5,de=-1;function ye(){return!(t.unstable_now()-de<Y)}function Ce(){if(X!==null){var z=t.unstable_now();de=z;var q=!0;try{q=X(!0,z)}finally{q?J():(W=!1,X=null)}}else W=!1}var J;if(typeof M=="function")J=function(){M(Ce)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,Pe=re.port2;re.port1.onmessage=Ce,J=function(){Pe.postMessage(null)}}else J=function(){N(Ce,0)};function Me(z){X=z,W||(W=!0,J())}function ge(z,q){he=N(function(){z(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){A||w||(A=!0,Me(V))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_getFirstCallbackNode=function(){return o(m)},t.unstable_next=function(z){switch(S){case 1:case 2:case 3:var q=3;break;default:q=S}var x=S;S=q;try{return z()}finally{S=x}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var x=S;S=z;try{return q()}finally{S=x}},t.unstable_scheduleCallback=function(z,q,x){var G=t.unstable_now();switch(typeof x=="object"&&x!==null?(x=x.delay,x=typeof x=="number"&&0<x?G+x:G):x=G,z){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=x+te,z={id:y++,callback:q,priorityLevel:z,startTime:x,expirationTime:te,sortIndex:-1},x>G?(z.sortIndex=x,e(h,z),o(m)===null&&z===o(h)&&(P?(R(he),he=-1):P=!0,ge(b,x-G))):(z.sortIndex=te,e(m,z),A||w||(A=!0,Me(V))),z},t.unstable_shouldYield=ye,t.unstable_wrapCallback=function(z){var q=S;return function(){var x=S;S=q;try{return z.apply(this,arguments)}finally{S=x}}}})(ea)),ea}var hd;function jh(){return hd||(hd=1,jl.exports=Zh()),jl.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gd;function eg(){if(gd)return Nt;gd=1;var t=Ta(),e=jh();function o(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,l=1;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,s={};function u(n,r){d(n,r),d(n+"Capture",r)}function d(n,r){for(s[n]=r,n=0;n<r.length;n++)i.add(r[n])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},E={};function S(n){return m.call(E,n)?!0:m.call(y,n)?!1:h.test(n)?E[n]=!0:(y[n]=!0,!1)}function w(n,r,l,f){if(l!==null&&l.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return f?!1:l!==null?!l.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function A(n,r,l,f){if(r===null||typeof r>"u"||w(n,r,l,f))return!0;if(f)return!1;if(l!==null)switch(l.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function P(n,r,l,f,g,v,T){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=l,this.propertyName=n,this.type=r,this.sanitizeURL=v,this.removeEmptyString=T}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){N[n]=new P(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];N[r]=new P(r,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){N[n]=new P(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){N[n]=new P(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){N[n]=new P(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){N[n]=new P(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){N[n]=new P(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){N[n]=new P(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){N[n]=new P(n,5,!1,n.toLowerCase(),null,!1,!1)});var R=/[\-:]([a-z])/g;function M(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(R,M);N[r]=new P(r,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(R,M);N[r]=new P(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(R,M);N[r]=new P(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){N[n]=new P(n,1,!1,n.toLowerCase(),null,!1,!1)}),N.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){N[n]=new P(n,1,!1,n.toLowerCase(),null,!0,!0)});function L(n,r,l,f){var g=N.hasOwnProperty(r)?N[r]:null;(g!==null?g.type!==0:f||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(A(r,l,g,f)&&(l=null),f||g===null?S(r)&&(l===null?n.removeAttribute(r):n.setAttribute(r,""+l)):g.mustUseProperty?n[g.propertyName]=l===null?g.type===3?!1:"":l:(r=g.attributeName,f=g.attributeNamespace,l===null?n.removeAttribute(r):(g=g.type,l=g===3||g===4&&l===!0?"":""+l,f?n.setAttributeNS(f,r,l):n.setAttribute(r,l))))}var b=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,V=Symbol.for("react.element"),W=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),he=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),de=Symbol.for("react.provider"),ye=Symbol.for("react.context"),Ce=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),Pe=Symbol.for("react.memo"),Me=Symbol.for("react.lazy"),ge=Symbol.for("react.offscreen"),z=Symbol.iterator;function q(n){return n===null||typeof n!="object"?null:(n=z&&n[z]||n["@@iterator"],typeof n=="function"?n:null)}var x=Object.assign,G;function te(n){if(G===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);G=r&&r[1]||""}return`
`+G+n}var ie=!1;function ae(n,r){if(!n||ie)return"";ie=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(F){var f=F}Reflect.construct(n,[],r)}else{try{r.call()}catch(F){f=F}n.call(r.prototype)}else{try{throw Error()}catch(F){f=F}n()}}catch(F){if(F&&f&&typeof F.stack=="string"){for(var g=F.stack.split(`
`),v=f.stack.split(`
`),T=g.length-1,_=v.length-1;1<=T&&0<=_&&g[T]!==v[_];)_--;for(;1<=T&&0<=_;T--,_--)if(g[T]!==v[_]){if(T!==1||_!==1)do if(T--,_--,0>_||g[T]!==v[_]){var I=`
`+g[T].replace(" at new "," at ");return n.displayName&&I.includes("<anonymous>")&&(I=I.replace("<anonymous>",n.displayName)),I}while(1<=T&&0<=_);break}}}finally{ie=!1,Error.prepareStackTrace=l}return(n=n?n.displayName||n.name:"")?te(n):""}function ve(n){switch(n.tag){case 5:return te(n.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return n=ae(n.type,!1),n;case 11:return n=ae(n.type.render,!1),n;case 1:return n=ae(n.type,!0),n;default:return""}}function Se(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case X:return"Fragment";case W:return"Portal";case Y:return"Profiler";case he:return"StrictMode";case J:return"Suspense";case re:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case ye:return(n.displayName||"Context")+".Consumer";case de:return(n._context.displayName||"Context")+".Provider";case Ce:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Pe:return r=n.displayName||null,r!==null?r:Se(n.type)||"Memo";case Me:r=n._payload,n=n._init;try{return Se(n(r))}catch{}}return null}function Ee(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Se(r);case 8:return r===he?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function _e(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function st(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Be(n){var r=st(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),f=""+n[r];if(!n.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,v=l.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return g.call(this)},set:function(T){f=""+T,v.call(this,T)}}),Object.defineProperty(n,r,{enumerable:l.enumerable}),{getValue:function(){return f},setValue:function(T){f=""+T},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function an(n){n._valueTracker||(n._valueTracker=Be(n))}function Lr(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var l=r.getValue(),f="";return n&&(f=st(n)?n.checked?"true":"false":n.value),n=f,n!==l?(r.setValue(n),!0):!1}function io(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function bo(n,r){var l=r.checked;return x({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??n._wrapperState.initialChecked})}function Ur(n,r){var l=r.defaultValue==null?"":r.defaultValue,f=r.checked!=null?r.checked:r.defaultChecked;l=_e(r.value!=null?r.value:l),n._wrapperState={initialChecked:f,initialValue:l,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Ho(n,r){r=r.checked,r!=null&&L(n,"checked",r,!1)}function un(n,r){Ho(n,r);var l=_e(r.value),f=r.type;if(l!=null)f==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+l):n.value!==""+l&&(n.value=""+l);else if(f==="submit"||f==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?Bo(n,r.type,l):r.hasOwnProperty("defaultValue")&&Bo(n,r.type,_e(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function Fr(n,r,l){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var f=r.type;if(!(f!=="submit"&&f!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,l||r===n.value||(n.value=r),n.defaultValue=r}l=n.name,l!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,l!==""&&(n.name=l)}function Bo(n,r,l){(r!=="number"||io(n.ownerDocument)!==n)&&(l==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+l&&(n.defaultValue=""+l))}var ce=Array.isArray;function Z(n,r,l,f){if(n=n.options,r){r={};for(var g=0;g<l.length;g++)r["$"+l[g]]=!0;for(l=0;l<n.length;l++)g=r.hasOwnProperty("$"+n[l].value),n[l].selected!==g&&(n[l].selected=g),g&&f&&(n[l].defaultSelected=!0)}else{for(l=""+_e(l),r=null,g=0;g<n.length;g++){if(n[g].value===l){n[g].selected=!0,f&&(n[g].defaultSelected=!0);return}r!==null||n[g].disabled||(r=n[g])}r!==null&&(r.selected=!0)}}function ke(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(o(91));return x({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ge(n,r){var l=r.value;if(l==null){if(l=r.children,r=r.defaultValue,l!=null){if(r!=null)throw Error(o(92));if(ce(l)){if(1<l.length)throw Error(o(93));l=l[0]}r=l}r==null&&(r=""),l=r}n._wrapperState={initialValue:_e(l)}}function De(n,r){var l=_e(r.value),f=_e(r.defaultValue);l!=null&&(l=""+l,l!==n.value&&(n.value=l),r.defaultValue==null&&n.defaultValue!==l&&(n.defaultValue=l)),f!=null&&(n.defaultValue=""+f)}function Ze(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function lt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ct(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?lt(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Ke,Rt=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,l,f,g){MSApp.execUnsafeLocalFunction(function(){return n(r,l,f,g)})}:n})(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for(Ke=Ke||document.createElement("div"),Ke.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Ke.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function Ne(n,r){if(r){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=r;return}}n.textContent=r}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qe=["Webkit","ms","Moz","O"];Object.keys(me).forEach(function(n){qe.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),me[r]=me[n]})});function we(n,r,l){return r==null||typeof r=="boolean"||r===""?"":l||typeof r!="number"||r===0||me.hasOwnProperty(n)&&me[n]?(""+r).trim():r+"px"}function dt(n,r){n=n.style;for(var l in r)if(r.hasOwnProperty(l)){var f=l.indexOf("--")===0,g=we(l,r[l],f);l==="float"&&(l="cssFloat"),f?n.setProperty(l,g):n[l]=g}}var Tn=x({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function je(n,r){if(r){if(Tn[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(o(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(o(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(o(61))}if(r.style!=null&&typeof r.style!="object")throw Error(o(62))}}function Oe(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var We=null;function Ye(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ut=null,Ct=null,Qe=null;function Vr(n){if(n=dr(n)){if(typeof Ut!="function")throw Error(o(280));var r=n.stateNode;r&&(r=ai(r),Ut(n.stateNode,n.type,r))}}function qo(n){Ct?Qe?Qe.push(n):Qe=[n]:Ct=n}function Oo(){if(Ct){var n=Ct,r=Qe;if(Qe=Ct=null,Vr(n),r)for(n=0;n<r.length;n++)Vr(r[n])}}function so(n,r){return n(r)}function Ft(){}var Gr=!1;function br(n,r,l){if(Gr)return n(r,l);Gr=!0;try{return so(n,r,l)}finally{Gr=!1,(Ct!==null||Qe!==null)&&(Ft(),Oo())}}function zo(n,r){var l=n.stateNode;if(l===null)return null;var f=ai(l);if(f===null)return null;l=f[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(n=n.type,f=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!f;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(o(231,r,typeof l));return l}var ms=!1;if(p)try{var $o={};Object.defineProperty($o,"passive",{get:function(){ms=!0}}),window.addEventListener("test",$o,$o),window.removeEventListener("test",$o,$o)}catch{ms=!1}function em(n,r,l,f,g,v,T,_,I){var F=Array.prototype.slice.call(arguments,3);try{r.apply(l,F)}catch(B){this.onError(B)}}var Jo=!1,Hr=null,Br=!1,hs=null,tm={onError:function(n){Jo=!0,Hr=n}};function nm(n,r,l,f,g,v,T,_,I){Jo=!1,Hr=null,em.apply(tm,arguments)}function om(n,r,l,f,g,v,T,_,I){if(nm.apply(this,arguments),Jo){if(Jo){var F=Hr;Jo=!1,Hr=null}else throw Error(o(198));Br||(Br=!0,hs=F)}}function On(n){var r=n,l=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(l=r.return),n=r.return;while(n)}return r.tag===3?l:null}function Ma(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function Da(n){if(On(n)!==n)throw Error(o(188))}function rm(n){var r=n.alternate;if(!r){if(r=On(n),r===null)throw Error(o(188));return r!==n?null:n}for(var l=n,f=r;;){var g=l.return;if(g===null)break;var v=g.alternate;if(v===null){if(f=g.return,f!==null){l=f;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===l)return Da(g),n;if(v===f)return Da(g),r;v=v.sibling}throw Error(o(188))}if(l.return!==f.return)l=g,f=v;else{for(var T=!1,_=g.child;_;){if(_===l){T=!0,l=g,f=v;break}if(_===f){T=!0,f=g,l=v;break}_=_.sibling}if(!T){for(_=v.child;_;){if(_===l){T=!0,l=v,f=g;break}if(_===f){T=!0,f=v,l=g;break}_=_.sibling}if(!T)throw Error(o(189))}}if(l.alternate!==f)throw Error(o(190))}if(l.tag!==3)throw Error(o(188));return l.stateNode.current===l?n:r}function La(n){return n=rm(n),n!==null?Ua(n):null}function Ua(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=Ua(n);if(r!==null)return r;n=n.sibling}return null}var Fa=e.unstable_scheduleCallback,Va=e.unstable_cancelCallback,im=e.unstable_shouldYield,sm=e.unstable_requestPaint,$e=e.unstable_now,lm=e.unstable_getCurrentPriorityLevel,gs=e.unstable_ImmediatePriority,Ga=e.unstable_UserBlockingPriority,qr=e.unstable_NormalPriority,am=e.unstable_LowPriority,ba=e.unstable_IdlePriority,Or=null,tn=null;function um(n){if(tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(Or,n,void 0,(n.current.flags&128)===128)}catch{}}var $t=Math.clz32?Math.clz32:fm,cm=Math.log,dm=Math.LN2;function fm(n){return n>>>=0,n===0?32:31-(cm(n)/dm|0)|0}var zr=64,$r=4194304;function Ko(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Jr(n,r){var l=n.pendingLanes;if(l===0)return 0;var f=0,g=n.suspendedLanes,v=n.pingedLanes,T=l&268435455;if(T!==0){var _=T&~g;_!==0?f=Ko(_):(v&=T,v!==0&&(f=Ko(v)))}else T=l&~g,T!==0?f=Ko(T):v!==0&&(f=Ko(v));if(f===0)return 0;if(r!==0&&r!==f&&(r&g)===0&&(g=f&-f,v=r&-r,g>=v||g===16&&(v&4194240)!==0))return r;if((f&4)!==0&&(f|=l&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=f;0<r;)l=31-$t(r),g=1<<l,f|=n[l],r&=~g;return f}function pm(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mm(n,r){for(var l=n.suspendedLanes,f=n.pingedLanes,g=n.expirationTimes,v=n.pendingLanes;0<v;){var T=31-$t(v),_=1<<T,I=g[T];I===-1?((_&l)===0||(_&f)!==0)&&(g[T]=pm(_,r)):I<=r&&(n.expiredLanes|=_),v&=~_}}function ys(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Ha(){var n=zr;return zr<<=1,(zr&4194240)===0&&(zr=64),n}function vs(n){for(var r=[],l=0;31>l;l++)r.push(n);return r}function Wo(n,r,l){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-$t(r),n[r]=l}function hm(n,r){var l=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var f=n.eventTimes;for(n=n.expirationTimes;0<l;){var g=31-$t(l),v=1<<g;r[g]=0,f[g]=-1,n[g]=-1,l&=~v}}function Ss(n,r){var l=n.entangledLanes|=r;for(n=n.entanglements;l;){var f=31-$t(l),g=1<<f;g&r|n[f]&r&&(n[f]|=r),l&=~g}}var Re=0;function Ba(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var qa,Es,Oa,za,$a,Ts=!1,Kr=[],Cn=null,_n=null,wn=null,Yo=new Map,Qo=new Map,xn=[],gm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ja(n,r){switch(n){case"focusin":case"focusout":Cn=null;break;case"dragenter":case"dragleave":_n=null;break;case"mouseover":case"mouseout":wn=null;break;case"pointerover":case"pointerout":Yo.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qo.delete(r.pointerId)}}function Xo(n,r,l,f,g,v){return n===null||n.nativeEvent!==v?(n={blockedOn:r,domEventName:l,eventSystemFlags:f,nativeEvent:v,targetContainers:[g]},r!==null&&(r=dr(r),r!==null&&Es(r)),n):(n.eventSystemFlags|=f,r=n.targetContainers,g!==null&&r.indexOf(g)===-1&&r.push(g),n)}function ym(n,r,l,f,g){switch(r){case"focusin":return Cn=Xo(Cn,n,r,l,f,g),!0;case"dragenter":return _n=Xo(_n,n,r,l,f,g),!0;case"mouseover":return wn=Xo(wn,n,r,l,f,g),!0;case"pointerover":var v=g.pointerId;return Yo.set(v,Xo(Yo.get(v)||null,n,r,l,f,g)),!0;case"gotpointercapture":return v=g.pointerId,Qo.set(v,Xo(Qo.get(v)||null,n,r,l,f,g)),!0}return!1}function Ka(n){var r=zn(n.target);if(r!==null){var l=On(r);if(l!==null){if(r=l.tag,r===13){if(r=Ma(l),r!==null){n.blockedOn=r,$a(n.priority,function(){Oa(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Wr(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var l=_s(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(l===null){l=n.nativeEvent;var f=new l.constructor(l.type,l);We=f,l.target.dispatchEvent(f),We=null}else return r=dr(l),r!==null&&Es(r),n.blockedOn=l,!1;r.shift()}return!0}function Wa(n,r,l){Wr(n)&&l.delete(r)}function vm(){Ts=!1,Cn!==null&&Wr(Cn)&&(Cn=null),_n!==null&&Wr(_n)&&(_n=null),wn!==null&&Wr(wn)&&(wn=null),Yo.forEach(Wa),Qo.forEach(Wa)}function Zo(n,r){n.blockedOn===r&&(n.blockedOn=null,Ts||(Ts=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,vm)))}function jo(n){function r(g){return Zo(g,n)}if(0<Kr.length){Zo(Kr[0],n);for(var l=1;l<Kr.length;l++){var f=Kr[l];f.blockedOn===n&&(f.blockedOn=null)}}for(Cn!==null&&Zo(Cn,n),_n!==null&&Zo(_n,n),wn!==null&&Zo(wn,n),Yo.forEach(r),Qo.forEach(r),l=0;l<xn.length;l++)f=xn[l],f.blockedOn===n&&(f.blockedOn=null);for(;0<xn.length&&(l=xn[0],l.blockedOn===null);)Ka(l),l.blockedOn===null&&xn.shift()}var lo=b.ReactCurrentBatchConfig,Yr=!0;function Sm(n,r,l,f){var g=Re,v=lo.transition;lo.transition=null;try{Re=1,Cs(n,r,l,f)}finally{Re=g,lo.transition=v}}function Em(n,r,l,f){var g=Re,v=lo.transition;lo.transition=null;try{Re=4,Cs(n,r,l,f)}finally{Re=g,lo.transition=v}}function Cs(n,r,l,f){if(Yr){var g=_s(n,r,l,f);if(g===null)Hs(n,r,f,Qr,l),Ja(n,f);else if(ym(g,n,r,l,f))f.stopPropagation();else if(Ja(n,f),r&4&&-1<gm.indexOf(n)){for(;g!==null;){var v=dr(g);if(v!==null&&qa(v),v=_s(n,r,l,f),v===null&&Hs(n,r,f,Qr,l),v===g)break;g=v}g!==null&&f.stopPropagation()}else Hs(n,r,f,null,l)}}var Qr=null;function _s(n,r,l,f){if(Qr=null,n=Ye(f),n=zn(n),n!==null)if(r=On(n),r===null)n=null;else if(l=r.tag,l===13){if(n=Ma(r),n!==null)return n;n=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return Qr=n,null}function Ya(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lm()){case gs:return 1;case Ga:return 4;case qr:case am:return 16;case ba:return 536870912;default:return 16}default:return 16}}var In=null,ws=null,Xr=null;function Qa(){if(Xr)return Xr;var n,r=ws,l=r.length,f,g="value"in In?In.value:In.textContent,v=g.length;for(n=0;n<l&&r[n]===g[n];n++);var T=l-n;for(f=1;f<=T&&r[l-f]===g[v-f];f++);return Xr=g.slice(n,1<f?1-f:void 0)}function Zr(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function jr(){return!0}function Xa(){return!1}function kt(n){function r(l,f,g,v,T){this._reactName=l,this._targetInst=g,this.type=f,this.nativeEvent=v,this.target=T,this.currentTarget=null;for(var _ in n)n.hasOwnProperty(_)&&(l=n[_],this[_]=l?l(v):v[_]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?jr:Xa,this.isPropagationStopped=Xa,this}return x(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=jr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=jr)},persist:function(){},isPersistent:jr}),r}var ao={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xs=kt(ao),er=x({},ao,{view:0,detail:0}),Tm=kt(er),Is,As,tr,ei=x({},er,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==tr&&(tr&&n.type==="mousemove"?(Is=n.screenX-tr.screenX,As=n.screenY-tr.screenY):As=Is=0,tr=n),Is)},movementY:function(n){return"movementY"in n?n.movementY:As}}),Za=kt(ei),Cm=x({},ei,{dataTransfer:0}),_m=kt(Cm),wm=x({},er,{relatedTarget:0}),Ns=kt(wm),xm=x({},ao,{animationName:0,elapsedTime:0,pseudoElement:0}),Im=kt(xm),Am=x({},ao,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Nm=kt(Am),Rm=x({},ao,{data:0}),ja=kt(Rm),km={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dm(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Mm[n])?!!r[n]:!1}function Rs(){return Dm}var Lm=x({},er,{key:function(n){if(n.key){var r=km[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Zr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Pm[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rs,charCode:function(n){return n.type==="keypress"?Zr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Zr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Um=kt(Lm),Fm=x({},ei,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eu=kt(Fm),Vm=x({},er,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rs}),Gm=kt(Vm),bm=x({},ao,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hm=kt(bm),Bm=x({},ei,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),qm=kt(Bm),Om=[9,13,27,32],ks=p&&"CompositionEvent"in window,nr=null;p&&"documentMode"in document&&(nr=document.documentMode);var zm=p&&"TextEvent"in window&&!nr,tu=p&&(!ks||nr&&8<nr&&11>=nr),nu=" ",ou=!1;function ru(n,r){switch(n){case"keyup":return Om.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iu(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var uo=!1;function $m(n,r){switch(n){case"compositionend":return iu(r);case"keypress":return r.which!==32?null:(ou=!0,nu);case"textInput":return n=r.data,n===nu&&ou?null:n;default:return null}}function Jm(n,r){if(uo)return n==="compositionend"||!ks&&ru(n,r)?(n=Qa(),Xr=ws=In=null,uo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return tu&&r.locale!=="ko"?null:r.data;default:return null}}var Km={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function su(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!Km[n.type]:r==="textarea"}function lu(n,r,l,f){qo(f),r=ii(r,"onChange"),0<r.length&&(l=new xs("onChange","change",null,l,f),n.push({event:l,listeners:r}))}var or=null,rr=null;function Wm(n){xu(n,0)}function ti(n){var r=ho(n);if(Lr(r))return n}function Ym(n,r){if(n==="change")return r}var au=!1;if(p){var Ps;if(p){var Ms="oninput"in document;if(!Ms){var uu=document.createElement("div");uu.setAttribute("oninput","return;"),Ms=typeof uu.oninput=="function"}Ps=Ms}else Ps=!1;au=Ps&&(!document.documentMode||9<document.documentMode)}function cu(){or&&(or.detachEvent("onpropertychange",du),rr=or=null)}function du(n){if(n.propertyName==="value"&&ti(rr)){var r=[];lu(r,rr,n,Ye(n)),br(Wm,r)}}function Qm(n,r,l){n==="focusin"?(cu(),or=r,rr=l,or.attachEvent("onpropertychange",du)):n==="focusout"&&cu()}function Xm(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ti(rr)}function Zm(n,r){if(n==="click")return ti(r)}function jm(n,r){if(n==="input"||n==="change")return ti(r)}function eh(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Jt=typeof Object.is=="function"?Object.is:eh;function ir(n,r){if(Jt(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var l=Object.keys(n),f=Object.keys(r);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var g=l[f];if(!m.call(r,g)||!Jt(n[g],r[g]))return!1}return!0}function fu(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function pu(n,r){var l=fu(n);n=0;for(var f;l;){if(l.nodeType===3){if(f=n+l.textContent.length,n<=r&&f>=r)return{node:l,offset:r-n};n=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=fu(l)}}function mu(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?mu(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function hu(){for(var n=window,r=io();r instanceof n.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)n=r.contentWindow;else break;r=io(n.document)}return r}function Ds(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function th(n){var r=hu(),l=n.focusedElem,f=n.selectionRange;if(r!==l&&l&&l.ownerDocument&&mu(l.ownerDocument.documentElement,l)){if(f!==null&&Ds(l)){if(r=f.start,n=f.end,n===void 0&&(n=r),"selectionStart"in l)l.selectionStart=r,l.selectionEnd=Math.min(n,l.value.length);else if(n=(r=l.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var g=l.textContent.length,v=Math.min(f.start,g);f=f.end===void 0?v:Math.min(f.end,g),!n.extend&&v>f&&(g=f,f=v,v=g),g=pu(l,v);var T=pu(l,f);g&&T&&(n.rangeCount!==1||n.anchorNode!==g.node||n.anchorOffset!==g.offset||n.focusNode!==T.node||n.focusOffset!==T.offset)&&(r=r.createRange(),r.setStart(g.node,g.offset),n.removeAllRanges(),v>f?(n.addRange(r),n.extend(T.node,T.offset)):(r.setEnd(T.node,T.offset),n.addRange(r)))}}for(r=[],n=l;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<r.length;l++)n=r[l],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var nh=p&&"documentMode"in document&&11>=document.documentMode,co=null,Ls=null,sr=null,Us=!1;function gu(n,r,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Us||co==null||co!==io(f)||(f=co,"selectionStart"in f&&Ds(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),sr&&ir(sr,f)||(sr=f,f=ii(Ls,"onSelect"),0<f.length&&(r=new xs("onSelect","select",null,r,l),n.push({event:r,listeners:f}),r.target=co)))}function ni(n,r){var l={};return l[n.toLowerCase()]=r.toLowerCase(),l["Webkit"+n]="webkit"+r,l["Moz"+n]="moz"+r,l}var fo={animationend:ni("Animation","AnimationEnd"),animationiteration:ni("Animation","AnimationIteration"),animationstart:ni("Animation","AnimationStart"),transitionend:ni("Transition","TransitionEnd")},Fs={},yu={};p&&(yu=document.createElement("div").style,"AnimationEvent"in window||(delete fo.animationend.animation,delete fo.animationiteration.animation,delete fo.animationstart.animation),"TransitionEvent"in window||delete fo.transitionend.transition);function oi(n){if(Fs[n])return Fs[n];if(!fo[n])return n;var r=fo[n],l;for(l in r)if(r.hasOwnProperty(l)&&l in yu)return Fs[n]=r[l];return n}var vu=oi("animationend"),Su=oi("animationiteration"),Eu=oi("animationstart"),Tu=oi("transitionend"),Cu=new Map,_u="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function An(n,r){Cu.set(n,r),u(r,[n])}for(var Vs=0;Vs<_u.length;Vs++){var Gs=_u[Vs],oh=Gs.toLowerCase(),rh=Gs[0].toUpperCase()+Gs.slice(1);An(oh,"on"+rh)}An(vu,"onAnimationEnd"),An(Su,"onAnimationIteration"),An(Eu,"onAnimationStart"),An("dblclick","onDoubleClick"),An("focusin","onFocus"),An("focusout","onBlur"),An(Tu,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ih=new Set("cancel close invalid load scroll toggle".split(" ").concat(lr));function wu(n,r,l){var f=n.type||"unknown-event";n.currentTarget=l,om(f,r,void 0,n),n.currentTarget=null}function xu(n,r){r=(r&4)!==0;for(var l=0;l<n.length;l++){var f=n[l],g=f.event;f=f.listeners;e:{var v=void 0;if(r)for(var T=f.length-1;0<=T;T--){var _=f[T],I=_.instance,F=_.currentTarget;if(_=_.listener,I!==v&&g.isPropagationStopped())break e;wu(g,_,F),v=I}else for(T=0;T<f.length;T++){if(_=f[T],I=_.instance,F=_.currentTarget,_=_.listener,I!==v&&g.isPropagationStopped())break e;wu(g,_,F),v=I}}}if(Br)throw n=hs,Br=!1,hs=null,n}function Ue(n,r){var l=r[Js];l===void 0&&(l=r[Js]=new Set);var f=n+"__bubble";l.has(f)||(Iu(r,n,2,!1),l.add(f))}function bs(n,r,l){var f=0;r&&(f|=4),Iu(l,n,f,r)}var ri="_reactListening"+Math.random().toString(36).slice(2);function ar(n){if(!n[ri]){n[ri]=!0,i.forEach(function(l){l!=="selectionchange"&&(ih.has(l)||bs(l,!1,n),bs(l,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[ri]||(r[ri]=!0,bs("selectionchange",!1,r))}}function Iu(n,r,l,f){switch(Ya(r)){case 1:var g=Sm;break;case 4:g=Em;break;default:g=Cs}l=g.bind(null,r,l,n),g=void 0,!ms||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(g=!0),f?g!==void 0?n.addEventListener(r,l,{capture:!0,passive:g}):n.addEventListener(r,l,!0):g!==void 0?n.addEventListener(r,l,{passive:g}):n.addEventListener(r,l,!1)}function Hs(n,r,l,f,g){var v=f;if((r&1)===0&&(r&2)===0&&f!==null)e:for(;;){if(f===null)return;var T=f.tag;if(T===3||T===4){var _=f.stateNode.containerInfo;if(_===g||_.nodeType===8&&_.parentNode===g)break;if(T===4)for(T=f.return;T!==null;){var I=T.tag;if((I===3||I===4)&&(I=T.stateNode.containerInfo,I===g||I.nodeType===8&&I.parentNode===g))return;T=T.return}for(;_!==null;){if(T=zn(_),T===null)return;if(I=T.tag,I===5||I===6){f=v=T;continue e}_=_.parentNode}}f=f.return}br(function(){var F=v,B=Ye(l),O=[];e:{var H=Cu.get(n);if(H!==void 0){var Q=xs,ee=n;switch(n){case"keypress":if(Zr(l)===0)break e;case"keydown":case"keyup":Q=Um;break;case"focusin":ee="focus",Q=Ns;break;case"focusout":ee="blur",Q=Ns;break;case"beforeblur":case"afterblur":Q=Ns;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Za;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=_m;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=Gm;break;case vu:case Su:case Eu:Q=Im;break;case Tu:Q=Hm;break;case"scroll":Q=Tm;break;case"wheel":Q=qm;break;case"copy":case"cut":case"paste":Q=Nm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=eu}var ne=(r&4)!==0,Je=!ne&&n==="scroll",D=ne?H!==null?H+"Capture":null:H;ne=[];for(var k=F,U;k!==null;){U=k;var $=U.stateNode;if(U.tag===5&&$!==null&&(U=$,D!==null&&($=zo(k,D),$!=null&&ne.push(ur(k,$,U)))),Je)break;k=k.return}0<ne.length&&(H=new Q(H,ee,null,l,B),O.push({event:H,listeners:ne}))}}if((r&7)===0){e:{if(H=n==="mouseover"||n==="pointerover",Q=n==="mouseout"||n==="pointerout",H&&l!==We&&(ee=l.relatedTarget||l.fromElement)&&(zn(ee)||ee[cn]))break e;if((Q||H)&&(H=B.window===B?B:(H=B.ownerDocument)?H.defaultView||H.parentWindow:window,Q?(ee=l.relatedTarget||l.toElement,Q=F,ee=ee?zn(ee):null,ee!==null&&(Je=On(ee),ee!==Je||ee.tag!==5&&ee.tag!==6)&&(ee=null)):(Q=null,ee=F),Q!==ee)){if(ne=Za,$="onMouseLeave",D="onMouseEnter",k="mouse",(n==="pointerout"||n==="pointerover")&&(ne=eu,$="onPointerLeave",D="onPointerEnter",k="pointer"),Je=Q==null?H:ho(Q),U=ee==null?H:ho(ee),H=new ne($,k+"leave",Q,l,B),H.target=Je,H.relatedTarget=U,$=null,zn(B)===F&&(ne=new ne(D,k+"enter",ee,l,B),ne.target=U,ne.relatedTarget=Je,$=ne),Je=$,Q&&ee)t:{for(ne=Q,D=ee,k=0,U=ne;U;U=po(U))k++;for(U=0,$=D;$;$=po($))U++;for(;0<k-U;)ne=po(ne),k--;for(;0<U-k;)D=po(D),U--;for(;k--;){if(ne===D||D!==null&&ne===D.alternate)break t;ne=po(ne),D=po(D)}ne=null}else ne=null;Q!==null&&Au(O,H,Q,ne,!1),ee!==null&&Je!==null&&Au(O,Je,ee,ne,!0)}}e:{if(H=F?ho(F):window,Q=H.nodeName&&H.nodeName.toLowerCase(),Q==="select"||Q==="input"&&H.type==="file")var oe=Ym;else if(su(H))if(au)oe=jm;else{oe=Xm;var se=Qm}else(Q=H.nodeName)&&Q.toLowerCase()==="input"&&(H.type==="checkbox"||H.type==="radio")&&(oe=Zm);if(oe&&(oe=oe(n,F))){lu(O,oe,l,B);break e}se&&se(n,H,F),n==="focusout"&&(se=H._wrapperState)&&se.controlled&&H.type==="number"&&Bo(H,"number",H.value)}switch(se=F?ho(F):window,n){case"focusin":(su(se)||se.contentEditable==="true")&&(co=se,Ls=F,sr=null);break;case"focusout":sr=Ls=co=null;break;case"mousedown":Us=!0;break;case"contextmenu":case"mouseup":case"dragend":Us=!1,gu(O,l,B);break;case"selectionchange":if(nh)break;case"keydown":case"keyup":gu(O,l,B)}var le;if(ks)e:{switch(n){case"compositionstart":var fe="onCompositionStart";break e;case"compositionend":fe="onCompositionEnd";break e;case"compositionupdate":fe="onCompositionUpdate";break e}fe=void 0}else uo?ru(n,l)&&(fe="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(fe="onCompositionStart");fe&&(tu&&l.locale!=="ko"&&(uo||fe!=="onCompositionStart"?fe==="onCompositionEnd"&&uo&&(le=Qa()):(In=B,ws="value"in In?In.value:In.textContent,uo=!0)),se=ii(F,fe),0<se.length&&(fe=new ja(fe,n,null,l,B),O.push({event:fe,listeners:se}),le?fe.data=le:(le=iu(l),le!==null&&(fe.data=le)))),(le=zm?$m(n,l):Jm(n,l))&&(F=ii(F,"onBeforeInput"),0<F.length&&(B=new ja("onBeforeInput","beforeinput",null,l,B),O.push({event:B,listeners:F}),B.data=le))}xu(O,r)})}function ur(n,r,l){return{instance:n,listener:r,currentTarget:l}}function ii(n,r){for(var l=r+"Capture",f=[];n!==null;){var g=n,v=g.stateNode;g.tag===5&&v!==null&&(g=v,v=zo(n,l),v!=null&&f.unshift(ur(n,v,g)),v=zo(n,r),v!=null&&f.push(ur(n,v,g))),n=n.return}return f}function po(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Au(n,r,l,f,g){for(var v=r._reactName,T=[];l!==null&&l!==f;){var _=l,I=_.alternate,F=_.stateNode;if(I!==null&&I===f)break;_.tag===5&&F!==null&&(_=F,g?(I=zo(l,v),I!=null&&T.unshift(ur(l,I,_))):g||(I=zo(l,v),I!=null&&T.push(ur(l,I,_)))),l=l.return}T.length!==0&&n.push({event:r,listeners:T})}var sh=/\r\n?/g,lh=/\u0000|\uFFFD/g;function Nu(n){return(typeof n=="string"?n:""+n).replace(sh,`
`).replace(lh,"")}function si(n,r,l){if(r=Nu(r),Nu(n)!==r&&l)throw Error(o(425))}function li(){}var Bs=null,qs=null;function Os(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var zs=typeof setTimeout=="function"?setTimeout:void 0,ah=typeof clearTimeout=="function"?clearTimeout:void 0,Ru=typeof Promise=="function"?Promise:void 0,uh=typeof queueMicrotask=="function"?queueMicrotask:typeof Ru<"u"?function(n){return Ru.resolve(null).then(n).catch(ch)}:zs;function ch(n){setTimeout(function(){throw n})}function $s(n,r){var l=r,f=0;do{var g=l.nextSibling;if(n.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(f===0){n.removeChild(g),jo(r);return}f--}else l!=="$"&&l!=="$?"&&l!=="$!"||f++;l=g}while(l);jo(r)}function Nn(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function ku(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(r===0)return n;r--}else l==="/$"&&r++}n=n.previousSibling}return null}var mo=Math.random().toString(36).slice(2),nn="__reactFiber$"+mo,cr="__reactProps$"+mo,cn="__reactContainer$"+mo,Js="__reactEvents$"+mo,dh="__reactListeners$"+mo,fh="__reactHandles$"+mo;function zn(n){var r=n[nn];if(r)return r;for(var l=n.parentNode;l;){if(r=l[cn]||l[nn]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(n=ku(n);n!==null;){if(l=n[nn])return l;n=ku(n)}return r}n=l,l=n.parentNode}return null}function dr(n){return n=n[nn]||n[cn],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ho(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(o(33))}function ai(n){return n[cr]||null}var Ks=[],go=-1;function Rn(n){return{current:n}}function Fe(n){0>go||(n.current=Ks[go],Ks[go]=null,go--)}function Le(n,r){go++,Ks[go]=n.current,n.current=r}var kn={},ft=Rn(kn),_t=Rn(!1),$n=kn;function yo(n,r){var l=n.type.contextTypes;if(!l)return kn;var f=n.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===r)return f.__reactInternalMemoizedMaskedChildContext;var g={},v;for(v in l)g[v]=r[v];return f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=g),g}function wt(n){return n=n.childContextTypes,n!=null}function ui(){Fe(_t),Fe(ft)}function Pu(n,r,l){if(ft.current!==kn)throw Error(o(168));Le(ft,r),Le(_t,l)}function Mu(n,r,l){var f=n.stateNode;if(r=r.childContextTypes,typeof f.getChildContext!="function")return l;f=f.getChildContext();for(var g in f)if(!(g in r))throw Error(o(108,Ee(n)||"Unknown",g));return x({},l,f)}function ci(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||kn,$n=ft.current,Le(ft,n),Le(_t,_t.current),!0}function Du(n,r,l){var f=n.stateNode;if(!f)throw Error(o(169));l?(n=Mu(n,r,$n),f.__reactInternalMemoizedMergedChildContext=n,Fe(_t),Fe(ft),Le(ft,n)):Fe(_t),Le(_t,l)}var dn=null,di=!1,Ws=!1;function Lu(n){dn===null?dn=[n]:dn.push(n)}function ph(n){di=!0,Lu(n)}function Pn(){if(!Ws&&dn!==null){Ws=!0;var n=0,r=Re;try{var l=dn;for(Re=1;n<l.length;n++){var f=l[n];do f=f(!0);while(f!==null)}dn=null,di=!1}catch(g){throw dn!==null&&(dn=dn.slice(n+1)),Fa(gs,Pn),g}finally{Re=r,Ws=!1}}return null}var vo=[],So=0,fi=null,pi=0,Vt=[],Gt=0,Jn=null,fn=1,pn="";function Kn(n,r){vo[So++]=pi,vo[So++]=fi,fi=n,pi=r}function Uu(n,r,l){Vt[Gt++]=fn,Vt[Gt++]=pn,Vt[Gt++]=Jn,Jn=n;var f=fn;n=pn;var g=32-$t(f)-1;f&=~(1<<g),l+=1;var v=32-$t(r)+g;if(30<v){var T=g-g%5;v=(f&(1<<T)-1).toString(32),f>>=T,g-=T,fn=1<<32-$t(r)+g|l<<g|f,pn=v+n}else fn=1<<v|l<<g|f,pn=n}function Ys(n){n.return!==null&&(Kn(n,1),Uu(n,1,0))}function Qs(n){for(;n===fi;)fi=vo[--So],vo[So]=null,pi=vo[--So],vo[So]=null;for(;n===Jn;)Jn=Vt[--Gt],Vt[Gt]=null,pn=Vt[--Gt],Vt[Gt]=null,fn=Vt[--Gt],Vt[Gt]=null}var Pt=null,Mt=null,Ve=!1,Kt=null;function Fu(n,r){var l=qt(5,null,null,0);l.elementType="DELETED",l.stateNode=r,l.return=n,r=n.deletions,r===null?(n.deletions=[l],n.flags|=16):r.push(l)}function Vu(n,r){switch(n.tag){case 5:var l=n.type;return r=r.nodeType!==1||l.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,Pt=n,Mt=Nn(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,Pt=n,Mt=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(l=Jn!==null?{id:fn,overflow:pn}:null,n.memoizedState={dehydrated:r,treeContext:l,retryLane:1073741824},l=qt(18,null,null,0),l.stateNode=r,l.return=n,n.child=l,Pt=n,Mt=null,!0):!1;default:return!1}}function Xs(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Zs(n){if(Ve){var r=Mt;if(r){var l=r;if(!Vu(n,r)){if(Xs(n))throw Error(o(418));r=Nn(l.nextSibling);var f=Pt;r&&Vu(n,r)?Fu(f,l):(n.flags=n.flags&-4097|2,Ve=!1,Pt=n)}}else{if(Xs(n))throw Error(o(418));n.flags=n.flags&-4097|2,Ve=!1,Pt=n}}}function Gu(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Pt=n}function mi(n){if(n!==Pt)return!1;if(!Ve)return Gu(n),Ve=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!Os(n.type,n.memoizedProps)),r&&(r=Mt)){if(Xs(n))throw bu(),Error(o(418));for(;r;)Fu(n,r),r=Nn(r.nextSibling)}if(Gu(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"){if(r===0){Mt=Nn(n.nextSibling);break e}r--}else l!=="$"&&l!=="$!"&&l!=="$?"||r++}n=n.nextSibling}Mt=null}}else Mt=Pt?Nn(n.stateNode.nextSibling):null;return!0}function bu(){for(var n=Mt;n;)n=Nn(n.nextSibling)}function Eo(){Mt=Pt=null,Ve=!1}function js(n){Kt===null?Kt=[n]:Kt.push(n)}var mh=b.ReactCurrentBatchConfig;function Wt(n,r){if(n&&n.defaultProps){r=x({},r),n=n.defaultProps;for(var l in n)r[l]===void 0&&(r[l]=n[l]);return r}return r}var hi=Rn(null),gi=null,To=null,el=null;function tl(){el=To=gi=null}function nl(n){var r=hi.current;Fe(hi),n._currentValue=r}function ol(n,r,l){for(;n!==null;){var f=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,f!==null&&(f.childLanes|=r)):f!==null&&(f.childLanes&r)!==r&&(f.childLanes|=r),n===l)break;n=n.return}}function Co(n,r){gi=n,el=To=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&r)!==0&&(xt=!0),n.firstContext=null)}function bt(n){var r=n._currentValue;if(el!==n)if(n={context:n,memoizedValue:r,next:null},To===null){if(gi===null)throw Error(o(308));To=n,gi.dependencies={lanes:0,firstContext:n}}else To=To.next=n;return r}var Wn=null;function rl(n){Wn===null?Wn=[n]:Wn.push(n)}function Hu(n,r,l,f){var g=r.interleaved;return g===null?(l.next=l,rl(r)):(l.next=g.next,g.next=l),r.interleaved=l,mn(n,f)}function mn(n,r){n.lanes|=r;var l=n.alternate;for(l!==null&&(l.lanes|=r),l=n,n=n.return;n!==null;)n.childLanes|=r,l=n.alternate,l!==null&&(l.childLanes|=r),l=n,n=n.return;return l.tag===3?l.stateNode:null}var Mn=!1;function il(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bu(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function hn(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function Dn(n,r,l){var f=n.updateQueue;if(f===null)return null;if(f=f.shared,(xe&2)!==0){var g=f.pending;return g===null?r.next=r:(r.next=g.next,g.next=r),f.pending=r,mn(n,l)}return g=f.interleaved,g===null?(r.next=r,rl(f)):(r.next=g.next,g.next=r),f.interleaved=r,mn(n,l)}function yi(n,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194240)!==0)){var f=r.lanes;f&=n.pendingLanes,l|=f,r.lanes=l,Ss(n,l)}}function qu(n,r){var l=n.updateQueue,f=n.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var g=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var T={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};v===null?g=v=T:v=v.next=T,l=l.next}while(l!==null);v===null?g=v=r:v=v.next=r}else g=v=r;l={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:f.shared,effects:f.effects},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=r:n.next=r,l.lastBaseUpdate=r}function vi(n,r,l,f){var g=n.updateQueue;Mn=!1;var v=g.firstBaseUpdate,T=g.lastBaseUpdate,_=g.shared.pending;if(_!==null){g.shared.pending=null;var I=_,F=I.next;I.next=null,T===null?v=F:T.next=F,T=I;var B=n.alternate;B!==null&&(B=B.updateQueue,_=B.lastBaseUpdate,_!==T&&(_===null?B.firstBaseUpdate=F:_.next=F,B.lastBaseUpdate=I))}if(v!==null){var O=g.baseState;T=0,B=F=I=null,_=v;do{var H=_.lane,Q=_.eventTime;if((f&H)===H){B!==null&&(B=B.next={eventTime:Q,lane:0,tag:_.tag,payload:_.payload,callback:_.callback,next:null});e:{var ee=n,ne=_;switch(H=r,Q=l,ne.tag){case 1:if(ee=ne.payload,typeof ee=="function"){O=ee.call(Q,O,H);break e}O=ee;break e;case 3:ee.flags=ee.flags&-65537|128;case 0:if(ee=ne.payload,H=typeof ee=="function"?ee.call(Q,O,H):ee,H==null)break e;O=x({},O,H);break e;case 2:Mn=!0}}_.callback!==null&&_.lane!==0&&(n.flags|=64,H=g.effects,H===null?g.effects=[_]:H.push(_))}else Q={eventTime:Q,lane:H,tag:_.tag,payload:_.payload,callback:_.callback,next:null},B===null?(F=B=Q,I=O):B=B.next=Q,T|=H;if(_=_.next,_===null){if(_=g.shared.pending,_===null)break;H=_,_=H.next,H.next=null,g.lastBaseUpdate=H,g.shared.pending=null}}while(!0);if(B===null&&(I=O),g.baseState=I,g.firstBaseUpdate=F,g.lastBaseUpdate=B,r=g.shared.interleaved,r!==null){g=r;do T|=g.lane,g=g.next;while(g!==r)}else v===null&&(g.shared.lanes=0);Xn|=T,n.lanes=T,n.memoizedState=O}}function Ou(n,r,l){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var f=n[r],g=f.callback;if(g!==null){if(f.callback=null,f=l,typeof g!="function")throw Error(o(191,g));g.call(f)}}}var zu=new t.Component().refs;function sl(n,r,l,f){r=n.memoizedState,l=l(f,r),l=l==null?r:x({},r,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var Si={isMounted:function(n){return(n=n._reactInternals)?On(n)===n:!1},enqueueSetState:function(n,r,l){n=n._reactInternals;var f=St(),g=Vn(n),v=hn(f,g);v.payload=r,l!=null&&(v.callback=l),r=Dn(n,v,g),r!==null&&(Xt(r,n,g,f),yi(r,n,g))},enqueueReplaceState:function(n,r,l){n=n._reactInternals;var f=St(),g=Vn(n),v=hn(f,g);v.tag=1,v.payload=r,l!=null&&(v.callback=l),r=Dn(n,v,g),r!==null&&(Xt(r,n,g,f),yi(r,n,g))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var l=St(),f=Vn(n),g=hn(l,f);g.tag=2,r!=null&&(g.callback=r),r=Dn(n,g,f),r!==null&&(Xt(r,n,f,l),yi(r,n,f))}};function $u(n,r,l,f,g,v,T){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(f,v,T):r.prototype&&r.prototype.isPureReactComponent?!ir(l,f)||!ir(g,v):!0}function Ju(n,r,l){var f=!1,g=kn,v=r.contextType;return typeof v=="object"&&v!==null?v=bt(v):(g=wt(r)?$n:ft.current,f=r.contextTypes,v=(f=f!=null)?yo(n,g):kn),r=new r(l,v),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Si,n.stateNode=r,r._reactInternals=n,f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=g,n.__reactInternalMemoizedMaskedChildContext=v),r}function Ku(n,r,l,f){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,f),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,f),r.state!==n&&Si.enqueueReplaceState(r,r.state,null)}function ll(n,r,l,f){var g=n.stateNode;g.props=l,g.state=n.memoizedState,g.refs=zu,il(n);var v=r.contextType;typeof v=="object"&&v!==null?g.context=bt(v):(v=wt(r)?$n:ft.current,g.context=yo(n,v)),g.state=n.memoizedState,v=r.getDerivedStateFromProps,typeof v=="function"&&(sl(n,r,v,l),g.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(r=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),r!==g.state&&Si.enqueueReplaceState(g,g.state,null),vi(n,l,g,f),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308)}function fr(n,r,l){if(n=l.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(o(309));var f=l.stateNode}if(!f)throw Error(o(147,n));var g=f,v=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===v?r.ref:(r=function(T){var _=g.refs;_===zu&&(_=g.refs={}),T===null?delete _[v]:_[v]=T},r._stringRef=v,r)}if(typeof n!="string")throw Error(o(284));if(!l._owner)throw Error(o(290,n))}return n}function Ei(n,r){throw n=Object.prototype.toString.call(r),Error(o(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function Wu(n){var r=n._init;return r(n._payload)}function Yu(n){function r(D,k){if(n){var U=D.deletions;U===null?(D.deletions=[k],D.flags|=16):U.push(k)}}function l(D,k){if(!n)return null;for(;k!==null;)r(D,k),k=k.sibling;return null}function f(D,k){for(D=new Map;k!==null;)k.key!==null?D.set(k.key,k):D.set(k.index,k),k=k.sibling;return D}function g(D,k){return D=bn(D,k),D.index=0,D.sibling=null,D}function v(D,k,U){return D.index=U,n?(U=D.alternate,U!==null?(U=U.index,U<k?(D.flags|=2,k):U):(D.flags|=2,k)):(D.flags|=1048576,k)}function T(D){return n&&D.alternate===null&&(D.flags|=2),D}function _(D,k,U,$){return k===null||k.tag!==6?(k=zl(U,D.mode,$),k.return=D,k):(k=g(k,U),k.return=D,k)}function I(D,k,U,$){var oe=U.type;return oe===X?B(D,k,U.props.children,$,U.key):k!==null&&(k.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===Me&&Wu(oe)===k.type)?($=g(k,U.props),$.ref=fr(D,k,U),$.return=D,$):($=bi(U.type,U.key,U.props,null,D.mode,$),$.ref=fr(D,k,U),$.return=D,$)}function F(D,k,U,$){return k===null||k.tag!==4||k.stateNode.containerInfo!==U.containerInfo||k.stateNode.implementation!==U.implementation?(k=$l(U,D.mode,$),k.return=D,k):(k=g(k,U.children||[]),k.return=D,k)}function B(D,k,U,$,oe){return k===null||k.tag!==7?(k=to(U,D.mode,$,oe),k.return=D,k):(k=g(k,U),k.return=D,k)}function O(D,k,U){if(typeof k=="string"&&k!==""||typeof k=="number")return k=zl(""+k,D.mode,U),k.return=D,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case V:return U=bi(k.type,k.key,k.props,null,D.mode,U),U.ref=fr(D,null,k),U.return=D,U;case W:return k=$l(k,D.mode,U),k.return=D,k;case Me:var $=k._init;return O(D,$(k._payload),U)}if(ce(k)||q(k))return k=to(k,D.mode,U,null),k.return=D,k;Ei(D,k)}return null}function H(D,k,U,$){var oe=k!==null?k.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return oe!==null?null:_(D,k,""+U,$);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case V:return U.key===oe?I(D,k,U,$):null;case W:return U.key===oe?F(D,k,U,$):null;case Me:return oe=U._init,H(D,k,oe(U._payload),$)}if(ce(U)||q(U))return oe!==null?null:B(D,k,U,$,null);Ei(D,U)}return null}function Q(D,k,U,$,oe){if(typeof $=="string"&&$!==""||typeof $=="number")return D=D.get(U)||null,_(k,D,""+$,oe);if(typeof $=="object"&&$!==null){switch($.$$typeof){case V:return D=D.get($.key===null?U:$.key)||null,I(k,D,$,oe);case W:return D=D.get($.key===null?U:$.key)||null,F(k,D,$,oe);case Me:var se=$._init;return Q(D,k,U,se($._payload),oe)}if(ce($)||q($))return D=D.get(U)||null,B(k,D,$,oe,null);Ei(k,$)}return null}function ee(D,k,U,$){for(var oe=null,se=null,le=k,fe=k=0,rt=null;le!==null&&fe<U.length;fe++){le.index>fe?(rt=le,le=null):rt=le.sibling;var Ie=H(D,le,U[fe],$);if(Ie===null){le===null&&(le=rt);break}n&&le&&Ie.alternate===null&&r(D,le),k=v(Ie,k,fe),se===null?oe=Ie:se.sibling=Ie,se=Ie,le=rt}if(fe===U.length)return l(D,le),Ve&&Kn(D,fe),oe;if(le===null){for(;fe<U.length;fe++)le=O(D,U[fe],$),le!==null&&(k=v(le,k,fe),se===null?oe=le:se.sibling=le,se=le);return Ve&&Kn(D,fe),oe}for(le=f(D,le);fe<U.length;fe++)rt=Q(le,D,fe,U[fe],$),rt!==null&&(n&&rt.alternate!==null&&le.delete(rt.key===null?fe:rt.key),k=v(rt,k,fe),se===null?oe=rt:se.sibling=rt,se=rt);return n&&le.forEach(function(Hn){return r(D,Hn)}),Ve&&Kn(D,fe),oe}function ne(D,k,U,$){var oe=q(U);if(typeof oe!="function")throw Error(o(150));if(U=oe.call(U),U==null)throw Error(o(151));for(var se=oe=null,le=k,fe=k=0,rt=null,Ie=U.next();le!==null&&!Ie.done;fe++,Ie=U.next()){le.index>fe?(rt=le,le=null):rt=le.sibling;var Hn=H(D,le,Ie.value,$);if(Hn===null){le===null&&(le=rt);break}n&&le&&Hn.alternate===null&&r(D,le),k=v(Hn,k,fe),se===null?oe=Hn:se.sibling=Hn,se=Hn,le=rt}if(Ie.done)return l(D,le),Ve&&Kn(D,fe),oe;if(le===null){for(;!Ie.done;fe++,Ie=U.next())Ie=O(D,Ie.value,$),Ie!==null&&(k=v(Ie,k,fe),se===null?oe=Ie:se.sibling=Ie,se=Ie);return Ve&&Kn(D,fe),oe}for(le=f(D,le);!Ie.done;fe++,Ie=U.next())Ie=Q(le,D,fe,Ie.value,$),Ie!==null&&(n&&Ie.alternate!==null&&le.delete(Ie.key===null?fe:Ie.key),k=v(Ie,k,fe),se===null?oe=Ie:se.sibling=Ie,se=Ie);return n&&le.forEach(function(Kh){return r(D,Kh)}),Ve&&Kn(D,fe),oe}function Je(D,k,U,$){if(typeof U=="object"&&U!==null&&U.type===X&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case V:e:{for(var oe=U.key,se=k;se!==null;){if(se.key===oe){if(oe=U.type,oe===X){if(se.tag===7){l(D,se.sibling),k=g(se,U.props.children),k.return=D,D=k;break e}}else if(se.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===Me&&Wu(oe)===se.type){l(D,se.sibling),k=g(se,U.props),k.ref=fr(D,se,U),k.return=D,D=k;break e}l(D,se);break}else r(D,se);se=se.sibling}U.type===X?(k=to(U.props.children,D.mode,$,U.key),k.return=D,D=k):($=bi(U.type,U.key,U.props,null,D.mode,$),$.ref=fr(D,k,U),$.return=D,D=$)}return T(D);case W:e:{for(se=U.key;k!==null;){if(k.key===se)if(k.tag===4&&k.stateNode.containerInfo===U.containerInfo&&k.stateNode.implementation===U.implementation){l(D,k.sibling),k=g(k,U.children||[]),k.return=D,D=k;break e}else{l(D,k);break}else r(D,k);k=k.sibling}k=$l(U,D.mode,$),k.return=D,D=k}return T(D);case Me:return se=U._init,Je(D,k,se(U._payload),$)}if(ce(U))return ee(D,k,U,$);if(q(U))return ne(D,k,U,$);Ei(D,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,k!==null&&k.tag===6?(l(D,k.sibling),k=g(k,U),k.return=D,D=k):(l(D,k),k=zl(U,D.mode,$),k.return=D,D=k),T(D)):l(D,k)}return Je}var _o=Yu(!0),Qu=Yu(!1),pr={},on=Rn(pr),mr=Rn(pr),hr=Rn(pr);function Yn(n){if(n===pr)throw Error(o(174));return n}function al(n,r){switch(Le(hr,r),Le(mr,n),Le(on,pr),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:ct(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=ct(r,n)}Fe(on),Le(on,r)}function wo(){Fe(on),Fe(mr),Fe(hr)}function Xu(n){Yn(hr.current);var r=Yn(on.current),l=ct(r,n.type);r!==l&&(Le(mr,n),Le(on,l))}function ul(n){mr.current===n&&(Fe(on),Fe(mr))}var be=Rn(0);function Ti(n){for(var r=n;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var cl=[];function dl(){for(var n=0;n<cl.length;n++)cl[n]._workInProgressVersionPrimary=null;cl.length=0}var Ci=b.ReactCurrentDispatcher,fl=b.ReactCurrentBatchConfig,Qn=0,He=null,et=null,nt=null,_i=!1,gr=!1,yr=0,hh=0;function pt(){throw Error(o(321))}function pl(n,r){if(r===null)return!1;for(var l=0;l<r.length&&l<n.length;l++)if(!Jt(n[l],r[l]))return!1;return!0}function ml(n,r,l,f,g,v){if(Qn=v,He=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Ci.current=n===null||n.memoizedState===null?Sh:Eh,n=l(f,g),gr){v=0;do{if(gr=!1,yr=0,25<=v)throw Error(o(301));v+=1,nt=et=null,r.updateQueue=null,Ci.current=Th,n=l(f,g)}while(gr)}if(Ci.current=Ii,r=et!==null&&et.next!==null,Qn=0,nt=et=He=null,_i=!1,r)throw Error(o(300));return n}function hl(){var n=yr!==0;return yr=0,n}function rn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?He.memoizedState=nt=n:nt=nt.next=n,nt}function Ht(){if(et===null){var n=He.alternate;n=n!==null?n.memoizedState:null}else n=et.next;var r=nt===null?He.memoizedState:nt.next;if(r!==null)nt=r,et=n;else{if(n===null)throw Error(o(310));et=n,n={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},nt===null?He.memoizedState=nt=n:nt=nt.next=n}return nt}function vr(n,r){return typeof r=="function"?r(n):r}function gl(n){var r=Ht(),l=r.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=n;var f=et,g=f.baseQueue,v=l.pending;if(v!==null){if(g!==null){var T=g.next;g.next=v.next,v.next=T}f.baseQueue=g=v,l.pending=null}if(g!==null){v=g.next,f=f.baseState;var _=T=null,I=null,F=v;do{var B=F.lane;if((Qn&B)===B)I!==null&&(I=I.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),f=F.hasEagerState?F.eagerState:n(f,F.action);else{var O={lane:B,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};I===null?(_=I=O,T=f):I=I.next=O,He.lanes|=B,Xn|=B}F=F.next}while(F!==null&&F!==v);I===null?T=f:I.next=_,Jt(f,r.memoizedState)||(xt=!0),r.memoizedState=f,r.baseState=T,r.baseQueue=I,l.lastRenderedState=f}if(n=l.interleaved,n!==null){g=n;do v=g.lane,He.lanes|=v,Xn|=v,g=g.next;while(g!==n)}else g===null&&(l.lanes=0);return[r.memoizedState,l.dispatch]}function yl(n){var r=Ht(),l=r.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=n;var f=l.dispatch,g=l.pending,v=r.memoizedState;if(g!==null){l.pending=null;var T=g=g.next;do v=n(v,T.action),T=T.next;while(T!==g);Jt(v,r.memoizedState)||(xt=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),l.lastRenderedState=v}return[v,f]}function Zu(){}function ju(n,r){var l=He,f=Ht(),g=r(),v=!Jt(f.memoizedState,g);if(v&&(f.memoizedState=g,xt=!0),f=f.queue,vl(nc.bind(null,l,f,n),[n]),f.getSnapshot!==r||v||nt!==null&&nt.memoizedState.tag&1){if(l.flags|=2048,Sr(9,tc.bind(null,l,f,g,r),void 0,null),ot===null)throw Error(o(349));(Qn&30)!==0||ec(l,r,g)}return g}function ec(n,r,l){n.flags|=16384,n={getSnapshot:r,value:l},r=He.updateQueue,r===null?(r={lastEffect:null,stores:null},He.updateQueue=r,r.stores=[n]):(l=r.stores,l===null?r.stores=[n]:l.push(n))}function tc(n,r,l,f){r.value=l,r.getSnapshot=f,oc(r)&&rc(n)}function nc(n,r,l){return l(function(){oc(r)&&rc(n)})}function oc(n){var r=n.getSnapshot;n=n.value;try{var l=r();return!Jt(n,l)}catch{return!0}}function rc(n){var r=mn(n,1);r!==null&&Xt(r,n,1,-1)}function ic(n){var r=rn();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vr,lastRenderedState:n},r.queue=n,n=n.dispatch=vh.bind(null,He,n),[r.memoizedState,n]}function Sr(n,r,l,f){return n={tag:n,create:r,destroy:l,deps:f,next:null},r=He.updateQueue,r===null?(r={lastEffect:null,stores:null},He.updateQueue=r,r.lastEffect=n.next=n):(l=r.lastEffect,l===null?r.lastEffect=n.next=n:(f=l.next,l.next=n,n.next=f,r.lastEffect=n)),n}function sc(){return Ht().memoizedState}function wi(n,r,l,f){var g=rn();He.flags|=n,g.memoizedState=Sr(1|r,l,void 0,f===void 0?null:f)}function xi(n,r,l,f){var g=Ht();f=f===void 0?null:f;var v=void 0;if(et!==null){var T=et.memoizedState;if(v=T.destroy,f!==null&&pl(f,T.deps)){g.memoizedState=Sr(r,l,v,f);return}}He.flags|=n,g.memoizedState=Sr(1|r,l,v,f)}function lc(n,r){return wi(8390656,8,n,r)}function vl(n,r){return xi(2048,8,n,r)}function ac(n,r){return xi(4,2,n,r)}function uc(n,r){return xi(4,4,n,r)}function cc(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function dc(n,r,l){return l=l!=null?l.concat([n]):null,xi(4,4,cc.bind(null,r,n),l)}function Sl(){}function fc(n,r){var l=Ht();r=r===void 0?null:r;var f=l.memoizedState;return f!==null&&r!==null&&pl(r,f[1])?f[0]:(l.memoizedState=[n,r],n)}function pc(n,r){var l=Ht();r=r===void 0?null:r;var f=l.memoizedState;return f!==null&&r!==null&&pl(r,f[1])?f[0]:(n=n(),l.memoizedState=[n,r],n)}function mc(n,r,l){return(Qn&21)===0?(n.baseState&&(n.baseState=!1,xt=!0),n.memoizedState=l):(Jt(l,r)||(l=Ha(),He.lanes|=l,Xn|=l,n.baseState=!0),r)}function gh(n,r){var l=Re;Re=l!==0&&4>l?l:4,n(!0);var f=fl.transition;fl.transition={};try{n(!1),r()}finally{Re=l,fl.transition=f}}function hc(){return Ht().memoizedState}function yh(n,r,l){var f=Vn(n);if(l={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null},gc(n))yc(r,l);else if(l=Hu(n,r,l,f),l!==null){var g=St();Xt(l,n,f,g),vc(l,r,f)}}function vh(n,r,l){var f=Vn(n),g={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null};if(gc(n))yc(r,g);else{var v=n.alternate;if(n.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var T=r.lastRenderedState,_=v(T,l);if(g.hasEagerState=!0,g.eagerState=_,Jt(_,T)){var I=r.interleaved;I===null?(g.next=g,rl(r)):(g.next=I.next,I.next=g),r.interleaved=g;return}}catch{}finally{}l=Hu(n,r,g,f),l!==null&&(g=St(),Xt(l,n,f,g),vc(l,r,f))}}function gc(n){var r=n.alternate;return n===He||r!==null&&r===He}function yc(n,r){gr=_i=!0;var l=n.pending;l===null?r.next=r:(r.next=l.next,l.next=r),n.pending=r}function vc(n,r,l){if((l&4194240)!==0){var f=r.lanes;f&=n.pendingLanes,l|=f,r.lanes=l,Ss(n,l)}}var Ii={readContext:bt,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},Sh={readContext:bt,useCallback:function(n,r){return rn().memoizedState=[n,r===void 0?null:r],n},useContext:bt,useEffect:lc,useImperativeHandle:function(n,r,l){return l=l!=null?l.concat([n]):null,wi(4194308,4,cc.bind(null,r,n),l)},useLayoutEffect:function(n,r){return wi(4194308,4,n,r)},useInsertionEffect:function(n,r){return wi(4,2,n,r)},useMemo:function(n,r){var l=rn();return r=r===void 0?null:r,n=n(),l.memoizedState=[n,r],n},useReducer:function(n,r,l){var f=rn();return r=l!==void 0?l(r):r,f.memoizedState=f.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},f.queue=n,n=n.dispatch=yh.bind(null,He,n),[f.memoizedState,n]},useRef:function(n){var r=rn();return n={current:n},r.memoizedState=n},useState:ic,useDebugValue:Sl,useDeferredValue:function(n){return rn().memoizedState=n},useTransition:function(){var n=ic(!1),r=n[0];return n=gh.bind(null,n[1]),rn().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,l){var f=He,g=rn();if(Ve){if(l===void 0)throw Error(o(407));l=l()}else{if(l=r(),ot===null)throw Error(o(349));(Qn&30)!==0||ec(f,r,l)}g.memoizedState=l;var v={value:l,getSnapshot:r};return g.queue=v,lc(nc.bind(null,f,v,n),[n]),f.flags|=2048,Sr(9,tc.bind(null,f,v,l,r),void 0,null),l},useId:function(){var n=rn(),r=ot.identifierPrefix;if(Ve){var l=pn,f=fn;l=(f&~(1<<32-$t(f)-1)).toString(32)+l,r=":"+r+"R"+l,l=yr++,0<l&&(r+="H"+l.toString(32)),r+=":"}else l=hh++,r=":"+r+"r"+l.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},Eh={readContext:bt,useCallback:fc,useContext:bt,useEffect:vl,useImperativeHandle:dc,useInsertionEffect:ac,useLayoutEffect:uc,useMemo:pc,useReducer:gl,useRef:sc,useState:function(){return gl(vr)},useDebugValue:Sl,useDeferredValue:function(n){var r=Ht();return mc(r,et.memoizedState,n)},useTransition:function(){var n=gl(vr)[0],r=Ht().memoizedState;return[n,r]},useMutableSource:Zu,useSyncExternalStore:ju,useId:hc,unstable_isNewReconciler:!1},Th={readContext:bt,useCallback:fc,useContext:bt,useEffect:vl,useImperativeHandle:dc,useInsertionEffect:ac,useLayoutEffect:uc,useMemo:pc,useReducer:yl,useRef:sc,useState:function(){return yl(vr)},useDebugValue:Sl,useDeferredValue:function(n){var r=Ht();return et===null?r.memoizedState=n:mc(r,et.memoizedState,n)},useTransition:function(){var n=yl(vr)[0],r=Ht().memoizedState;return[n,r]},useMutableSource:Zu,useSyncExternalStore:ju,useId:hc,unstable_isNewReconciler:!1};function xo(n,r){try{var l="",f=r;do l+=ve(f),f=f.return;while(f);var g=l}catch(v){g=`
Error generating stack: `+v.message+`
`+v.stack}return{value:n,source:r,stack:g,digest:null}}function El(n,r,l){return{value:n,source:null,stack:l??null,digest:r??null}}function Tl(n,r){try{console.error(r.value)}catch(l){setTimeout(function(){throw l})}}var Ch=typeof WeakMap=="function"?WeakMap:Map;function Sc(n,r,l){l=hn(-1,l),l.tag=3,l.payload={element:null};var f=r.value;return l.callback=function(){Di||(Di=!0,Fl=f),Tl(n,r)},l}function Ec(n,r,l){l=hn(-1,l),l.tag=3;var f=n.type.getDerivedStateFromError;if(typeof f=="function"){var g=r.value;l.payload=function(){return f(g)},l.callback=function(){Tl(n,r)}}var v=n.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(l.callback=function(){Tl(n,r),typeof f!="function"&&(Un===null?Un=new Set([this]):Un.add(this));var T=r.stack;this.componentDidCatch(r.value,{componentStack:T!==null?T:""})}),l}function Tc(n,r,l){var f=n.pingCache;if(f===null){f=n.pingCache=new Ch;var g=new Set;f.set(r,g)}else g=f.get(r),g===void 0&&(g=new Set,f.set(r,g));g.has(l)||(g.add(l),n=Fh.bind(null,n,r,l),r.then(n,n))}function Cc(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function _c(n,r,l,f,g){return(n.mode&1)===0?(n===r?n.flags|=65536:(n.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(r=hn(-1,1),r.tag=2,Dn(l,r,1))),l.lanes|=1),n):(n.flags|=65536,n.lanes=g,n)}var _h=b.ReactCurrentOwner,xt=!1;function vt(n,r,l,f){r.child=n===null?Qu(r,null,l,f):_o(r,n.child,l,f)}function wc(n,r,l,f,g){l=l.render;var v=r.ref;return Co(r,g),f=ml(n,r,l,f,v,g),l=hl(),n!==null&&!xt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~g,gn(n,r,g)):(Ve&&l&&Ys(r),r.flags|=1,vt(n,r,f,g),r.child)}function xc(n,r,l,f,g){if(n===null){var v=l.type;return typeof v=="function"&&!Ol(v)&&v.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(r.tag=15,r.type=v,Ic(n,r,v,f,g)):(n=bi(l.type,null,f,r,r.mode,g),n.ref=r.ref,n.return=r,r.child=n)}if(v=n.child,(n.lanes&g)===0){var T=v.memoizedProps;if(l=l.compare,l=l!==null?l:ir,l(T,f)&&n.ref===r.ref)return gn(n,r,g)}return r.flags|=1,n=bn(v,f),n.ref=r.ref,n.return=r,r.child=n}function Ic(n,r,l,f,g){if(n!==null){var v=n.memoizedProps;if(ir(v,f)&&n.ref===r.ref)if(xt=!1,r.pendingProps=f=v,(n.lanes&g)!==0)(n.flags&131072)!==0&&(xt=!0);else return r.lanes=n.lanes,gn(n,r,g)}return Cl(n,r,l,f,g)}function Ac(n,r,l){var f=r.pendingProps,g=f.children,v=n!==null?n.memoizedState:null;if(f.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(Ao,Dt),Dt|=l;else{if((l&1073741824)===0)return n=v!==null?v.baseLanes|l:l,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,Le(Ao,Dt),Dt|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=v!==null?v.baseLanes:l,Le(Ao,Dt),Dt|=f}else v!==null?(f=v.baseLanes|l,r.memoizedState=null):f=l,Le(Ao,Dt),Dt|=f;return vt(n,r,g,l),r.child}function Nc(n,r){var l=r.ref;(n===null&&l!==null||n!==null&&n.ref!==l)&&(r.flags|=512,r.flags|=2097152)}function Cl(n,r,l,f,g){var v=wt(l)?$n:ft.current;return v=yo(r,v),Co(r,g),l=ml(n,r,l,f,v,g),f=hl(),n!==null&&!xt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~g,gn(n,r,g)):(Ve&&f&&Ys(r),r.flags|=1,vt(n,r,l,g),r.child)}function Rc(n,r,l,f,g){if(wt(l)){var v=!0;ci(r)}else v=!1;if(Co(r,g),r.stateNode===null)Ni(n,r),Ju(r,l,f),ll(r,l,f,g),f=!0;else if(n===null){var T=r.stateNode,_=r.memoizedProps;T.props=_;var I=T.context,F=l.contextType;typeof F=="object"&&F!==null?F=bt(F):(F=wt(l)?$n:ft.current,F=yo(r,F));var B=l.getDerivedStateFromProps,O=typeof B=="function"||typeof T.getSnapshotBeforeUpdate=="function";O||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(_!==f||I!==F)&&Ku(r,T,f,F),Mn=!1;var H=r.memoizedState;T.state=H,vi(r,f,T,g),I=r.memoizedState,_!==f||H!==I||_t.current||Mn?(typeof B=="function"&&(sl(r,l,B,f),I=r.memoizedState),(_=Mn||$u(r,l,_,f,H,I,F))?(O||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(r.flags|=4194308)):(typeof T.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=f,r.memoizedState=I),T.props=f,T.state=I,T.context=F,f=_):(typeof T.componentDidMount=="function"&&(r.flags|=4194308),f=!1)}else{T=r.stateNode,Bu(n,r),_=r.memoizedProps,F=r.type===r.elementType?_:Wt(r.type,_),T.props=F,O=r.pendingProps,H=T.context,I=l.contextType,typeof I=="object"&&I!==null?I=bt(I):(I=wt(l)?$n:ft.current,I=yo(r,I));var Q=l.getDerivedStateFromProps;(B=typeof Q=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(_!==O||H!==I)&&Ku(r,T,f,I),Mn=!1,H=r.memoizedState,T.state=H,vi(r,f,T,g);var ee=r.memoizedState;_!==O||H!==ee||_t.current||Mn?(typeof Q=="function"&&(sl(r,l,Q,f),ee=r.memoizedState),(F=Mn||$u(r,l,F,f,H,ee,I)||!1)?(B||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(f,ee,I),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(f,ee,I)),typeof T.componentDidUpdate=="function"&&(r.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof T.componentDidUpdate!="function"||_===n.memoizedProps&&H===n.memoizedState||(r.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&H===n.memoizedState||(r.flags|=1024),r.memoizedProps=f,r.memoizedState=ee),T.props=f,T.state=ee,T.context=I,f=F):(typeof T.componentDidUpdate!="function"||_===n.memoizedProps&&H===n.memoizedState||(r.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&H===n.memoizedState||(r.flags|=1024),f=!1)}return _l(n,r,l,f,v,g)}function _l(n,r,l,f,g,v){Nc(n,r);var T=(r.flags&128)!==0;if(!f&&!T)return g&&Du(r,l,!1),gn(n,r,v);f=r.stateNode,_h.current=r;var _=T&&typeof l.getDerivedStateFromError!="function"?null:f.render();return r.flags|=1,n!==null&&T?(r.child=_o(r,n.child,null,v),r.child=_o(r,null,_,v)):vt(n,r,_,v),r.memoizedState=f.state,g&&Du(r,l,!0),r.child}function kc(n){var r=n.stateNode;r.pendingContext?Pu(n,r.pendingContext,r.pendingContext!==r.context):r.context&&Pu(n,r.context,!1),al(n,r.containerInfo)}function Pc(n,r,l,f,g){return Eo(),js(g),r.flags|=256,vt(n,r,l,f),r.child}var wl={dehydrated:null,treeContext:null,retryLane:0};function xl(n){return{baseLanes:n,cachePool:null,transitions:null}}function Mc(n,r,l){var f=r.pendingProps,g=be.current,v=!1,T=(r.flags&128)!==0,_;if((_=T)||(_=n!==null&&n.memoizedState===null?!1:(g&2)!==0),_?(v=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(g|=1),Le(be,g&1),n===null)return Zs(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((r.mode&1)===0?r.lanes=1:n.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(T=f.children,n=f.fallback,v?(f=r.mode,v=r.child,T={mode:"hidden",children:T},(f&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=T):v=Hi(T,f,0,null),n=to(n,f,l,null),v.return=r,n.return=r,v.sibling=n,r.child=v,r.child.memoizedState=xl(l),r.memoizedState=wl,n):Il(r,T));if(g=n.memoizedState,g!==null&&(_=g.dehydrated,_!==null))return wh(n,r,T,f,_,g,l);if(v){v=f.fallback,T=r.mode,g=n.child,_=g.sibling;var I={mode:"hidden",children:f.children};return(T&1)===0&&r.child!==g?(f=r.child,f.childLanes=0,f.pendingProps=I,r.deletions=null):(f=bn(g,I),f.subtreeFlags=g.subtreeFlags&14680064),_!==null?v=bn(_,v):(v=to(v,T,l,null),v.flags|=2),v.return=r,f.return=r,f.sibling=v,r.child=f,f=v,v=r.child,T=n.child.memoizedState,T=T===null?xl(l):{baseLanes:T.baseLanes|l,cachePool:null,transitions:T.transitions},v.memoizedState=T,v.childLanes=n.childLanes&~l,r.memoizedState=wl,f}return v=n.child,n=v.sibling,f=bn(v,{mode:"visible",children:f.children}),(r.mode&1)===0&&(f.lanes=l),f.return=r,f.sibling=null,n!==null&&(l=r.deletions,l===null?(r.deletions=[n],r.flags|=16):l.push(n)),r.child=f,r.memoizedState=null,f}function Il(n,r){return r=Hi({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function Ai(n,r,l,f){return f!==null&&js(f),_o(r,n.child,null,l),n=Il(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function wh(n,r,l,f,g,v,T){if(l)return r.flags&256?(r.flags&=-257,f=El(Error(o(422))),Ai(n,r,T,f)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(v=f.fallback,g=r.mode,f=Hi({mode:"visible",children:f.children},g,0,null),v=to(v,g,T,null),v.flags|=2,f.return=r,v.return=r,f.sibling=v,r.child=f,(r.mode&1)!==0&&_o(r,n.child,null,T),r.child.memoizedState=xl(T),r.memoizedState=wl,v);if((r.mode&1)===0)return Ai(n,r,T,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var _=f.dgst;return f=_,v=Error(o(419)),f=El(v,f,void 0),Ai(n,r,T,f)}if(_=(T&n.childLanes)!==0,xt||_){if(f=ot,f!==null){switch(T&-T){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|T))!==0?0:g,g!==0&&g!==v.retryLane&&(v.retryLane=g,mn(n,g),Xt(f,n,g,-1))}return ql(),f=El(Error(o(421))),Ai(n,r,T,f)}return g.data==="$?"?(r.flags|=128,r.child=n.child,r=Vh.bind(null,n),g._reactRetry=r,null):(n=v.treeContext,Mt=Nn(g.nextSibling),Pt=r,Ve=!0,Kt=null,n!==null&&(Vt[Gt++]=fn,Vt[Gt++]=pn,Vt[Gt++]=Jn,fn=n.id,pn=n.overflow,Jn=r),r=Il(r,f.children),r.flags|=4096,r)}function Dc(n,r,l){n.lanes|=r;var f=n.alternate;f!==null&&(f.lanes|=r),ol(n.return,r,l)}function Al(n,r,l,f,g){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:g}:(v.isBackwards=r,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=l,v.tailMode=g)}function Lc(n,r,l){var f=r.pendingProps,g=f.revealOrder,v=f.tail;if(vt(n,r,f.children,l),f=be.current,(f&2)!==0)f=f&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Dc(n,l,r);else if(n.tag===19)Dc(n,l,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}f&=1}if(Le(be,f),(r.mode&1)===0)r.memoizedState=null;else switch(g){case"forwards":for(l=r.child,g=null;l!==null;)n=l.alternate,n!==null&&Ti(n)===null&&(g=l),l=l.sibling;l=g,l===null?(g=r.child,r.child=null):(g=l.sibling,l.sibling=null),Al(r,!1,g,l,v);break;case"backwards":for(l=null,g=r.child,r.child=null;g!==null;){if(n=g.alternate,n!==null&&Ti(n)===null){r.child=g;break}n=g.sibling,g.sibling=l,l=g,g=n}Al(r,!0,l,null,v);break;case"together":Al(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Ni(n,r){(r.mode&1)===0&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function gn(n,r,l){if(n!==null&&(r.dependencies=n.dependencies),Xn|=r.lanes,(l&r.childLanes)===0)return null;if(n!==null&&r.child!==n.child)throw Error(o(153));if(r.child!==null){for(n=r.child,l=bn(n,n.pendingProps),r.child=l,l.return=r;n.sibling!==null;)n=n.sibling,l=l.sibling=bn(n,n.pendingProps),l.return=r;l.sibling=null}return r.child}function xh(n,r,l){switch(r.tag){case 3:kc(r),Eo();break;case 5:Xu(r);break;case 1:wt(r.type)&&ci(r);break;case 4:al(r,r.stateNode.containerInfo);break;case 10:var f=r.type._context,g=r.memoizedProps.value;Le(hi,f._currentValue),f._currentValue=g;break;case 13:if(f=r.memoizedState,f!==null)return f.dehydrated!==null?(Le(be,be.current&1),r.flags|=128,null):(l&r.child.childLanes)!==0?Mc(n,r,l):(Le(be,be.current&1),n=gn(n,r,l),n!==null?n.sibling:null);Le(be,be.current&1);break;case 19:if(f=(l&r.childLanes)!==0,(n.flags&128)!==0){if(f)return Lc(n,r,l);r.flags|=128}if(g=r.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Le(be,be.current),f)break;return null;case 22:case 23:return r.lanes=0,Ac(n,r,l)}return gn(n,r,l)}var Uc,Nl,Fc,Vc;Uc=function(n,r){for(var l=r.child;l!==null;){if(l.tag===5||l.tag===6)n.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Nl=function(){},Fc=function(n,r,l,f){var g=n.memoizedProps;if(g!==f){n=r.stateNode,Yn(on.current);var v=null;switch(l){case"input":g=bo(n,g),f=bo(n,f),v=[];break;case"select":g=x({},g,{value:void 0}),f=x({},f,{value:void 0}),v=[];break;case"textarea":g=ke(n,g),f=ke(n,f),v=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(n.onclick=li)}je(l,f);var T;l=null;for(F in g)if(!f.hasOwnProperty(F)&&g.hasOwnProperty(F)&&g[F]!=null)if(F==="style"){var _=g[F];for(T in _)_.hasOwnProperty(T)&&(l||(l={}),l[T]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(s.hasOwnProperty(F)?v||(v=[]):(v=v||[]).push(F,null));for(F in f){var I=f[F];if(_=g!=null?g[F]:void 0,f.hasOwnProperty(F)&&I!==_&&(I!=null||_!=null))if(F==="style")if(_){for(T in _)!_.hasOwnProperty(T)||I&&I.hasOwnProperty(T)||(l||(l={}),l[T]="");for(T in I)I.hasOwnProperty(T)&&_[T]!==I[T]&&(l||(l={}),l[T]=I[T])}else l||(v||(v=[]),v.push(F,l)),l=I;else F==="dangerouslySetInnerHTML"?(I=I?I.__html:void 0,_=_?_.__html:void 0,I!=null&&_!==I&&(v=v||[]).push(F,I)):F==="children"?typeof I!="string"&&typeof I!="number"||(v=v||[]).push(F,""+I):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(s.hasOwnProperty(F)?(I!=null&&F==="onScroll"&&Ue("scroll",n),v||_===I||(v=[])):(v=v||[]).push(F,I))}l&&(v=v||[]).push("style",l);var F=v;(r.updateQueue=F)&&(r.flags|=4)}},Vc=function(n,r,l,f){l!==f&&(r.flags|=4)};function Er(n,r){if(!Ve)switch(n.tailMode){case"hidden":r=n.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:f.sibling=null}}function mt(n){var r=n.alternate!==null&&n.alternate.child===n.child,l=0,f=0;if(r)for(var g=n.child;g!==null;)l|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)l|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=f,n.childLanes=l,r}function Ih(n,r,l){var f=r.pendingProps;switch(Qs(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(r),null;case 1:return wt(r.type)&&ui(),mt(r),null;case 3:return f=r.stateNode,wo(),Fe(_t),Fe(ft),dl(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(n===null||n.child===null)&&(mi(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Kt!==null&&(bl(Kt),Kt=null))),Nl(n,r),mt(r),null;case 5:ul(r);var g=Yn(hr.current);if(l=r.type,n!==null&&r.stateNode!=null)Fc(n,r,l,f,g),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!f){if(r.stateNode===null)throw Error(o(166));return mt(r),null}if(n=Yn(on.current),mi(r)){f=r.stateNode,l=r.type;var v=r.memoizedProps;switch(f[nn]=r,f[cr]=v,n=(r.mode&1)!==0,l){case"dialog":Ue("cancel",f),Ue("close",f);break;case"iframe":case"object":case"embed":Ue("load",f);break;case"video":case"audio":for(g=0;g<lr.length;g++)Ue(lr[g],f);break;case"source":Ue("error",f);break;case"img":case"image":case"link":Ue("error",f),Ue("load",f);break;case"details":Ue("toggle",f);break;case"input":Ur(f,v),Ue("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!v.multiple},Ue("invalid",f);break;case"textarea":Ge(f,v),Ue("invalid",f)}je(l,v),g=null;for(var T in v)if(v.hasOwnProperty(T)){var _=v[T];T==="children"?typeof _=="string"?f.textContent!==_&&(v.suppressHydrationWarning!==!0&&si(f.textContent,_,n),g=["children",_]):typeof _=="number"&&f.textContent!==""+_&&(v.suppressHydrationWarning!==!0&&si(f.textContent,_,n),g=["children",""+_]):s.hasOwnProperty(T)&&_!=null&&T==="onScroll"&&Ue("scroll",f)}switch(l){case"input":an(f),Fr(f,v,!0);break;case"textarea":an(f),Ze(f);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(f.onclick=li)}f=g,r.updateQueue=f,f!==null&&(r.flags|=4)}else{T=g.nodeType===9?g:g.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=lt(l)),n==="http://www.w3.org/1999/xhtml"?l==="script"?(n=T.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof f.is=="string"?n=T.createElement(l,{is:f.is}):(n=T.createElement(l),l==="select"&&(T=n,f.multiple?T.multiple=!0:f.size&&(T.size=f.size))):n=T.createElementNS(n,l),n[nn]=r,n[cr]=f,Uc(n,r,!1,!1),r.stateNode=n;e:{switch(T=Oe(l,f),l){case"dialog":Ue("cancel",n),Ue("close",n),g=f;break;case"iframe":case"object":case"embed":Ue("load",n),g=f;break;case"video":case"audio":for(g=0;g<lr.length;g++)Ue(lr[g],n);g=f;break;case"source":Ue("error",n),g=f;break;case"img":case"image":case"link":Ue("error",n),Ue("load",n),g=f;break;case"details":Ue("toggle",n),g=f;break;case"input":Ur(n,f),g=bo(n,f),Ue("invalid",n);break;case"option":g=f;break;case"select":n._wrapperState={wasMultiple:!!f.multiple},g=x({},f,{value:void 0}),Ue("invalid",n);break;case"textarea":Ge(n,f),g=ke(n,f),Ue("invalid",n);break;default:g=f}je(l,g),_=g;for(v in _)if(_.hasOwnProperty(v)){var I=_[v];v==="style"?dt(n,I):v==="dangerouslySetInnerHTML"?(I=I?I.__html:void 0,I!=null&&Rt(n,I)):v==="children"?typeof I=="string"?(l!=="textarea"||I!=="")&&Ne(n,I):typeof I=="number"&&Ne(n,""+I):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(s.hasOwnProperty(v)?I!=null&&v==="onScroll"&&Ue("scroll",n):I!=null&&L(n,v,I,T))}switch(l){case"input":an(n),Fr(n,f,!1);break;case"textarea":an(n),Ze(n);break;case"option":f.value!=null&&n.setAttribute("value",""+_e(f.value));break;case"select":n.multiple=!!f.multiple,v=f.value,v!=null?Z(n,!!f.multiple,v,!1):f.defaultValue!=null&&Z(n,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(n.onclick=li)}switch(l){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return mt(r),null;case 6:if(n&&r.stateNode!=null)Vc(n,r,n.memoizedProps,f);else{if(typeof f!="string"&&r.stateNode===null)throw Error(o(166));if(l=Yn(hr.current),Yn(on.current),mi(r)){if(f=r.stateNode,l=r.memoizedProps,f[nn]=r,(v=f.nodeValue!==l)&&(n=Pt,n!==null))switch(n.tag){case 3:si(f.nodeValue,l,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&si(f.nodeValue,l,(n.mode&1)!==0)}v&&(r.flags|=4)}else f=(l.nodeType===9?l:l.ownerDocument).createTextNode(f),f[nn]=r,r.stateNode=f}return mt(r),null;case 13:if(Fe(be),f=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ve&&Mt!==null&&(r.mode&1)!==0&&(r.flags&128)===0)bu(),Eo(),r.flags|=98560,v=!1;else if(v=mi(r),f!==null&&f.dehydrated!==null){if(n===null){if(!v)throw Error(o(318));if(v=r.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(o(317));v[nn]=r}else Eo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;mt(r),v=!1}else Kt!==null&&(bl(Kt),Kt=null),v=!0;if(!v)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=l,r):(f=f!==null,f!==(n!==null&&n.memoizedState!==null)&&f&&(r.child.flags|=8192,(r.mode&1)!==0&&(n===null||(be.current&1)!==0?tt===0&&(tt=3):ql())),r.updateQueue!==null&&(r.flags|=4),mt(r),null);case 4:return wo(),Nl(n,r),n===null&&ar(r.stateNode.containerInfo),mt(r),null;case 10:return nl(r.type._context),mt(r),null;case 17:return wt(r.type)&&ui(),mt(r),null;case 19:if(Fe(be),v=r.memoizedState,v===null)return mt(r),null;if(f=(r.flags&128)!==0,T=v.rendering,T===null)if(f)Er(v,!1);else{if(tt!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(T=Ti(n),T!==null){for(r.flags|=128,Er(v,!1),f=T.updateQueue,f!==null&&(r.updateQueue=f,r.flags|=4),r.subtreeFlags=0,f=l,l=r.child;l!==null;)v=l,n=f,v.flags&=14680066,T=v.alternate,T===null?(v.childLanes=0,v.lanes=n,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=T.childLanes,v.lanes=T.lanes,v.child=T.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=T.memoizedProps,v.memoizedState=T.memoizedState,v.updateQueue=T.updateQueue,v.type=T.type,n=T.dependencies,v.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),l=l.sibling;return Le(be,be.current&1|2),r.child}n=n.sibling}v.tail!==null&&$e()>No&&(r.flags|=128,f=!0,Er(v,!1),r.lanes=4194304)}else{if(!f)if(n=Ti(T),n!==null){if(r.flags|=128,f=!0,l=n.updateQueue,l!==null&&(r.updateQueue=l,r.flags|=4),Er(v,!0),v.tail===null&&v.tailMode==="hidden"&&!T.alternate&&!Ve)return mt(r),null}else 2*$e()-v.renderingStartTime>No&&l!==1073741824&&(r.flags|=128,f=!0,Er(v,!1),r.lanes=4194304);v.isBackwards?(T.sibling=r.child,r.child=T):(l=v.last,l!==null?l.sibling=T:r.child=T,v.last=T)}return v.tail!==null?(r=v.tail,v.rendering=r,v.tail=r.sibling,v.renderingStartTime=$e(),r.sibling=null,l=be.current,Le(be,f?l&1|2:l&1),r):(mt(r),null);case 22:case 23:return Bl(),f=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==f&&(r.flags|=8192),f&&(r.mode&1)!==0?(Dt&1073741824)!==0&&(mt(r),r.subtreeFlags&6&&(r.flags|=8192)):mt(r),null;case 24:return null;case 25:return null}throw Error(o(156,r.tag))}function Ah(n,r){switch(Qs(r),r.tag){case 1:return wt(r.type)&&ui(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return wo(),Fe(_t),Fe(ft),dl(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 5:return ul(r),null;case 13:if(Fe(be),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(o(340));Eo()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return Fe(be),null;case 4:return wo(),null;case 10:return nl(r.type._context),null;case 22:case 23:return Bl(),null;case 24:return null;default:return null}}var Ri=!1,ht=!1,Nh=typeof WeakSet=="function"?WeakSet:Set,j=null;function Io(n,r){var l=n.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(f){ze(n,r,f)}else l.current=null}function Rl(n,r,l){try{l()}catch(f){ze(n,r,f)}}var Gc=!1;function Rh(n,r){if(Bs=Yr,n=hu(),Ds(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var g=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var T=0,_=-1,I=-1,F=0,B=0,O=n,H=null;t:for(;;){for(var Q;O!==l||g!==0&&O.nodeType!==3||(_=T+g),O!==v||f!==0&&O.nodeType!==3||(I=T+f),O.nodeType===3&&(T+=O.nodeValue.length),(Q=O.firstChild)!==null;)H=O,O=Q;for(;;){if(O===n)break t;if(H===l&&++F===g&&(_=T),H===v&&++B===f&&(I=T),(Q=O.nextSibling)!==null)break;O=H,H=O.parentNode}O=Q}l=_===-1||I===-1?null:{start:_,end:I}}else l=null}l=l||{start:0,end:0}}else l=null;for(qs={focusedElem:n,selectionRange:l},Yr=!1,j=r;j!==null;)if(r=j,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,j=n;else for(;j!==null;){r=j;try{var ee=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ee!==null){var ne=ee.memoizedProps,Je=ee.memoizedState,D=r.stateNode,k=D.getSnapshotBeforeUpdate(r.elementType===r.type?ne:Wt(r.type,ne),Je);D.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var U=r.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch($){ze(r,r.return,$)}if(n=r.sibling,n!==null){n.return=r.return,j=n;break}j=r.return}return ee=Gc,Gc=!1,ee}function Tr(n,r,l){var f=r.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&n)===n){var v=g.destroy;g.destroy=void 0,v!==void 0&&Rl(r,l,v)}g=g.next}while(g!==f)}}function ki(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&n)===n){var f=l.create;l.destroy=f()}l=l.next}while(l!==r)}}function kl(n){var r=n.ref;if(r!==null){var l=n.stateNode;switch(n.tag){case 5:n=l;break;default:n=l}typeof r=="function"?r(n):r.current=n}}function bc(n){var r=n.alternate;r!==null&&(n.alternate=null,bc(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[nn],delete r[cr],delete r[Js],delete r[dh],delete r[fh])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Hc(n){return n.tag===5||n.tag===3||n.tag===4}function Bc(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Hc(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Pl(n,r,l){var f=n.tag;if(f===5||f===6)n=n.stateNode,r?l.nodeType===8?l.parentNode.insertBefore(n,r):l.insertBefore(n,r):(l.nodeType===8?(r=l.parentNode,r.insertBefore(n,l)):(r=l,r.appendChild(n)),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=li));else if(f!==4&&(n=n.child,n!==null))for(Pl(n,r,l),n=n.sibling;n!==null;)Pl(n,r,l),n=n.sibling}function Ml(n,r,l){var f=n.tag;if(f===5||f===6)n=n.stateNode,r?l.insertBefore(n,r):l.appendChild(n);else if(f!==4&&(n=n.child,n!==null))for(Ml(n,r,l),n=n.sibling;n!==null;)Ml(n,r,l),n=n.sibling}var at=null,Yt=!1;function Ln(n,r,l){for(l=l.child;l!==null;)qc(n,r,l),l=l.sibling}function qc(n,r,l){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(Or,l)}catch{}switch(l.tag){case 5:ht||Io(l,r);case 6:var f=at,g=Yt;at=null,Ln(n,r,l),at=f,Yt=g,at!==null&&(Yt?(n=at,l=l.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)):at.removeChild(l.stateNode));break;case 18:at!==null&&(Yt?(n=at,l=l.stateNode,n.nodeType===8?$s(n.parentNode,l):n.nodeType===1&&$s(n,l),jo(n)):$s(at,l.stateNode));break;case 4:f=at,g=Yt,at=l.stateNode.containerInfo,Yt=!0,Ln(n,r,l),at=f,Yt=g;break;case 0:case 11:case 14:case 15:if(!ht&&(f=l.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var v=g,T=v.destroy;v=v.tag,T!==void 0&&((v&2)!==0||(v&4)!==0)&&Rl(l,r,T),g=g.next}while(g!==f)}Ln(n,r,l);break;case 1:if(!ht&&(Io(l,r),f=l.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=l.memoizedProps,f.state=l.memoizedState,f.componentWillUnmount()}catch(_){ze(l,r,_)}Ln(n,r,l);break;case 21:Ln(n,r,l);break;case 22:l.mode&1?(ht=(f=ht)||l.memoizedState!==null,Ln(n,r,l),ht=f):Ln(n,r,l);break;default:Ln(n,r,l)}}function Oc(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var l=n.stateNode;l===null&&(l=n.stateNode=new Nh),r.forEach(function(f){var g=Gh.bind(null,n,f);l.has(f)||(l.add(f),f.then(g,g))})}}function Qt(n,r){var l=r.deletions;if(l!==null)for(var f=0;f<l.length;f++){var g=l[f];try{var v=n,T=r,_=T;e:for(;_!==null;){switch(_.tag){case 5:at=_.stateNode,Yt=!1;break e;case 3:at=_.stateNode.containerInfo,Yt=!0;break e;case 4:at=_.stateNode.containerInfo,Yt=!0;break e}_=_.return}if(at===null)throw Error(o(160));qc(v,T,g),at=null,Yt=!1;var I=g.alternate;I!==null&&(I.return=null),g.return=null}catch(F){ze(g,r,F)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)zc(r,n),r=r.sibling}function zc(n,r){var l=n.alternate,f=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Qt(r,n),sn(n),f&4){try{Tr(3,n,n.return),ki(3,n)}catch(ne){ze(n,n.return,ne)}try{Tr(5,n,n.return)}catch(ne){ze(n,n.return,ne)}}break;case 1:Qt(r,n),sn(n),f&512&&l!==null&&Io(l,l.return);break;case 5:if(Qt(r,n),sn(n),f&512&&l!==null&&Io(l,l.return),n.flags&32){var g=n.stateNode;try{Ne(g,"")}catch(ne){ze(n,n.return,ne)}}if(f&4&&(g=n.stateNode,g!=null)){var v=n.memoizedProps,T=l!==null?l.memoizedProps:v,_=n.type,I=n.updateQueue;if(n.updateQueue=null,I!==null)try{_==="input"&&v.type==="radio"&&v.name!=null&&Ho(g,v),Oe(_,T);var F=Oe(_,v);for(T=0;T<I.length;T+=2){var B=I[T],O=I[T+1];B==="style"?dt(g,O):B==="dangerouslySetInnerHTML"?Rt(g,O):B==="children"?Ne(g,O):L(g,B,O,F)}switch(_){case"input":un(g,v);break;case"textarea":De(g,v);break;case"select":var H=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!v.multiple;var Q=v.value;Q!=null?Z(g,!!v.multiple,Q,!1):H!==!!v.multiple&&(v.defaultValue!=null?Z(g,!!v.multiple,v.defaultValue,!0):Z(g,!!v.multiple,v.multiple?[]:"",!1))}g[cr]=v}catch(ne){ze(n,n.return,ne)}}break;case 6:if(Qt(r,n),sn(n),f&4){if(n.stateNode===null)throw Error(o(162));g=n.stateNode,v=n.memoizedProps;try{g.nodeValue=v}catch(ne){ze(n,n.return,ne)}}break;case 3:if(Qt(r,n),sn(n),f&4&&l!==null&&l.memoizedState.isDehydrated)try{jo(r.containerInfo)}catch(ne){ze(n,n.return,ne)}break;case 4:Qt(r,n),sn(n);break;case 13:Qt(r,n),sn(n),g=n.child,g.flags&8192&&(v=g.memoizedState!==null,g.stateNode.isHidden=v,!v||g.alternate!==null&&g.alternate.memoizedState!==null||(Ul=$e())),f&4&&Oc(n);break;case 22:if(B=l!==null&&l.memoizedState!==null,n.mode&1?(ht=(F=ht)||B,Qt(r,n),ht=F):Qt(r,n),sn(n),f&8192){if(F=n.memoizedState!==null,(n.stateNode.isHidden=F)&&!B&&(n.mode&1)!==0)for(j=n,B=n.child;B!==null;){for(O=j=B;j!==null;){switch(H=j,Q=H.child,H.tag){case 0:case 11:case 14:case 15:Tr(4,H,H.return);break;case 1:Io(H,H.return);var ee=H.stateNode;if(typeof ee.componentWillUnmount=="function"){f=H,l=H.return;try{r=f,ee.props=r.memoizedProps,ee.state=r.memoizedState,ee.componentWillUnmount()}catch(ne){ze(f,l,ne)}}break;case 5:Io(H,H.return);break;case 22:if(H.memoizedState!==null){Kc(O);continue}}Q!==null?(Q.return=H,j=Q):Kc(O)}B=B.sibling}e:for(B=null,O=n;;){if(O.tag===5){if(B===null){B=O;try{g=O.stateNode,F?(v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(_=O.stateNode,I=O.memoizedProps.style,T=I!=null&&I.hasOwnProperty("display")?I.display:null,_.style.display=we("display",T))}catch(ne){ze(n,n.return,ne)}}}else if(O.tag===6){if(B===null)try{O.stateNode.nodeValue=F?"":O.memoizedProps}catch(ne){ze(n,n.return,ne)}}else if((O.tag!==22&&O.tag!==23||O.memoizedState===null||O===n)&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===n)break e;for(;O.sibling===null;){if(O.return===null||O.return===n)break e;B===O&&(B=null),O=O.return}B===O&&(B=null),O.sibling.return=O.return,O=O.sibling}}break;case 19:Qt(r,n),sn(n),f&4&&Oc(n);break;case 21:break;default:Qt(r,n),sn(n)}}function sn(n){var r=n.flags;if(r&2){try{e:{for(var l=n.return;l!==null;){if(Hc(l)){var f=l;break e}l=l.return}throw Error(o(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(Ne(g,""),f.flags&=-33);var v=Bc(n);Ml(n,v,g);break;case 3:case 4:var T=f.stateNode.containerInfo,_=Bc(n);Pl(n,_,T);break;default:throw Error(o(161))}}catch(I){ze(n,n.return,I)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function kh(n,r,l){j=n,$c(n)}function $c(n,r,l){for(var f=(n.mode&1)!==0;j!==null;){var g=j,v=g.child;if(g.tag===22&&f){var T=g.memoizedState!==null||Ri;if(!T){var _=g.alternate,I=_!==null&&_.memoizedState!==null||ht;_=Ri;var F=ht;if(Ri=T,(ht=I)&&!F)for(j=g;j!==null;)T=j,I=T.child,T.tag===22&&T.memoizedState!==null?Wc(g):I!==null?(I.return=T,j=I):Wc(g);for(;v!==null;)j=v,$c(v),v=v.sibling;j=g,Ri=_,ht=F}Jc(n)}else(g.subtreeFlags&8772)!==0&&v!==null?(v.return=g,j=v):Jc(n)}}function Jc(n){for(;j!==null;){var r=j;if((r.flags&8772)!==0){var l=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:ht||ki(5,r);break;case 1:var f=r.stateNode;if(r.flags&4&&!ht)if(l===null)f.componentDidMount();else{var g=r.elementType===r.type?l.memoizedProps:Wt(r.type,l.memoizedProps);f.componentDidUpdate(g,l.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var v=r.updateQueue;v!==null&&Ou(r,v,f);break;case 3:var T=r.updateQueue;if(T!==null){if(l=null,r.child!==null)switch(r.child.tag){case 5:l=r.child.stateNode;break;case 1:l=r.child.stateNode}Ou(r,T,l)}break;case 5:var _=r.stateNode;if(l===null&&r.flags&4){l=_;var I=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":I.autoFocus&&l.focus();break;case"img":I.src&&(l.src=I.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var F=r.alternate;if(F!==null){var B=F.memoizedState;if(B!==null){var O=B.dehydrated;O!==null&&jo(O)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}ht||r.flags&512&&kl(r)}catch(H){ze(r,r.return,H)}}if(r===n){j=null;break}if(l=r.sibling,l!==null){l.return=r.return,j=l;break}j=r.return}}function Kc(n){for(;j!==null;){var r=j;if(r===n){j=null;break}var l=r.sibling;if(l!==null){l.return=r.return,j=l;break}j=r.return}}function Wc(n){for(;j!==null;){var r=j;try{switch(r.tag){case 0:case 11:case 15:var l=r.return;try{ki(4,r)}catch(I){ze(r,l,I)}break;case 1:var f=r.stateNode;if(typeof f.componentDidMount=="function"){var g=r.return;try{f.componentDidMount()}catch(I){ze(r,g,I)}}var v=r.return;try{kl(r)}catch(I){ze(r,v,I)}break;case 5:var T=r.return;try{kl(r)}catch(I){ze(r,T,I)}}}catch(I){ze(r,r.return,I)}if(r===n){j=null;break}var _=r.sibling;if(_!==null){_.return=r.return,j=_;break}j=r.return}}var Ph=Math.ceil,Pi=b.ReactCurrentDispatcher,Dl=b.ReactCurrentOwner,Bt=b.ReactCurrentBatchConfig,xe=0,ot=null,Xe=null,ut=0,Dt=0,Ao=Rn(0),tt=0,Cr=null,Xn=0,Mi=0,Ll=0,_r=null,It=null,Ul=0,No=1/0,yn=null,Di=!1,Fl=null,Un=null,Li=!1,Fn=null,Ui=0,wr=0,Vl=null,Fi=-1,Vi=0;function St(){return(xe&6)!==0?$e():Fi!==-1?Fi:Fi=$e()}function Vn(n){return(n.mode&1)===0?1:(xe&2)!==0&&ut!==0?ut&-ut:mh.transition!==null?(Vi===0&&(Vi=Ha()),Vi):(n=Re,n!==0||(n=window.event,n=n===void 0?16:Ya(n.type)),n)}function Xt(n,r,l,f){if(50<wr)throw wr=0,Vl=null,Error(o(185));Wo(n,l,f),((xe&2)===0||n!==ot)&&(n===ot&&((xe&2)===0&&(Mi|=l),tt===4&&Gn(n,ut)),At(n,f),l===1&&xe===0&&(r.mode&1)===0&&(No=$e()+500,di&&Pn()))}function At(n,r){var l=n.callbackNode;mm(n,r);var f=Jr(n,n===ot?ut:0);if(f===0)l!==null&&Va(l),n.callbackNode=null,n.callbackPriority=0;else if(r=f&-f,n.callbackPriority!==r){if(l!=null&&Va(l),r===1)n.tag===0?ph(Qc.bind(null,n)):Lu(Qc.bind(null,n)),uh(function(){(xe&6)===0&&Pn()}),l=null;else{switch(Ba(f)){case 1:l=gs;break;case 4:l=Ga;break;case 16:l=qr;break;case 536870912:l=ba;break;default:l=qr}l=rd(l,Yc.bind(null,n))}n.callbackPriority=r,n.callbackNode=l}}function Yc(n,r){if(Fi=-1,Vi=0,(xe&6)!==0)throw Error(o(327));var l=n.callbackNode;if(Ro()&&n.callbackNode!==l)return null;var f=Jr(n,n===ot?ut:0);if(f===0)return null;if((f&30)!==0||(f&n.expiredLanes)!==0||r)r=Gi(n,f);else{r=f;var g=xe;xe|=2;var v=Zc();(ot!==n||ut!==r)&&(yn=null,No=$e()+500,jn(n,r));do try{Lh();break}catch(_){Xc(n,_)}while(!0);tl(),Pi.current=v,xe=g,Xe!==null?r=0:(ot=null,ut=0,r=tt)}if(r!==0){if(r===2&&(g=ys(n),g!==0&&(f=g,r=Gl(n,g))),r===1)throw l=Cr,jn(n,0),Gn(n,f),At(n,$e()),l;if(r===6)Gn(n,f);else{if(g=n.current.alternate,(f&30)===0&&!Mh(g)&&(r=Gi(n,f),r===2&&(v=ys(n),v!==0&&(f=v,r=Gl(n,v))),r===1))throw l=Cr,jn(n,0),Gn(n,f),At(n,$e()),l;switch(n.finishedWork=g,n.finishedLanes=f,r){case 0:case 1:throw Error(o(345));case 2:eo(n,It,yn);break;case 3:if(Gn(n,f),(f&130023424)===f&&(r=Ul+500-$e(),10<r)){if(Jr(n,0)!==0)break;if(g=n.suspendedLanes,(g&f)!==f){St(),n.pingedLanes|=n.suspendedLanes&g;break}n.timeoutHandle=zs(eo.bind(null,n,It,yn),r);break}eo(n,It,yn);break;case 4:if(Gn(n,f),(f&4194240)===f)break;for(r=n.eventTimes,g=-1;0<f;){var T=31-$t(f);v=1<<T,T=r[T],T>g&&(g=T),f&=~v}if(f=g,f=$e()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*Ph(f/1960))-f,10<f){n.timeoutHandle=zs(eo.bind(null,n,It,yn),f);break}eo(n,It,yn);break;case 5:eo(n,It,yn);break;default:throw Error(o(329))}}}return At(n,$e()),n.callbackNode===l?Yc.bind(null,n):null}function Gl(n,r){var l=_r;return n.current.memoizedState.isDehydrated&&(jn(n,r).flags|=256),n=Gi(n,r),n!==2&&(r=It,It=l,r!==null&&bl(r)),n}function bl(n){It===null?It=n:It.push.apply(It,n)}function Mh(n){for(var r=n;;){if(r.flags&16384){var l=r.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var f=0;f<l.length;f++){var g=l[f],v=g.getSnapshot;g=g.value;try{if(!Jt(v(),g))return!1}catch{return!1}}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Gn(n,r){for(r&=~Ll,r&=~Mi,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var l=31-$t(r),f=1<<l;n[l]=-1,r&=~f}}function Qc(n){if((xe&6)!==0)throw Error(o(327));Ro();var r=Jr(n,0);if((r&1)===0)return At(n,$e()),null;var l=Gi(n,r);if(n.tag!==0&&l===2){var f=ys(n);f!==0&&(r=f,l=Gl(n,f))}if(l===1)throw l=Cr,jn(n,0),Gn(n,r),At(n,$e()),l;if(l===6)throw Error(o(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,eo(n,It,yn),At(n,$e()),null}function Hl(n,r){var l=xe;xe|=1;try{return n(r)}finally{xe=l,xe===0&&(No=$e()+500,di&&Pn())}}function Zn(n){Fn!==null&&Fn.tag===0&&(xe&6)===0&&Ro();var r=xe;xe|=1;var l=Bt.transition,f=Re;try{if(Bt.transition=null,Re=1,n)return n()}finally{Re=f,Bt.transition=l,xe=r,(xe&6)===0&&Pn()}}function Bl(){Dt=Ao.current,Fe(Ao)}function jn(n,r){n.finishedWork=null,n.finishedLanes=0;var l=n.timeoutHandle;if(l!==-1&&(n.timeoutHandle=-1,ah(l)),Xe!==null)for(l=Xe.return;l!==null;){var f=l;switch(Qs(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&ui();break;case 3:wo(),Fe(_t),Fe(ft),dl();break;case 5:ul(f);break;case 4:wo();break;case 13:Fe(be);break;case 19:Fe(be);break;case 10:nl(f.type._context);break;case 22:case 23:Bl()}l=l.return}if(ot=n,Xe=n=bn(n.current,null),ut=Dt=r,tt=0,Cr=null,Ll=Mi=Xn=0,It=_r=null,Wn!==null){for(r=0;r<Wn.length;r++)if(l=Wn[r],f=l.interleaved,f!==null){l.interleaved=null;var g=f.next,v=l.pending;if(v!==null){var T=v.next;v.next=g,f.next=T}l.pending=f}Wn=null}return n}function Xc(n,r){do{var l=Xe;try{if(tl(),Ci.current=Ii,_i){for(var f=He.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}_i=!1}if(Qn=0,nt=et=He=null,gr=!1,yr=0,Dl.current=null,l===null||l.return===null){tt=1,Cr=r,Xe=null;break}e:{var v=n,T=l.return,_=l,I=r;if(r=ut,_.flags|=32768,I!==null&&typeof I=="object"&&typeof I.then=="function"){var F=I,B=_,O=B.tag;if((B.mode&1)===0&&(O===0||O===11||O===15)){var H=B.alternate;H?(B.updateQueue=H.updateQueue,B.memoizedState=H.memoizedState,B.lanes=H.lanes):(B.updateQueue=null,B.memoizedState=null)}var Q=Cc(T);if(Q!==null){Q.flags&=-257,_c(Q,T,_,v,r),Q.mode&1&&Tc(v,F,r),r=Q,I=F;var ee=r.updateQueue;if(ee===null){var ne=new Set;ne.add(I),r.updateQueue=ne}else ee.add(I);break e}else{if((r&1)===0){Tc(v,F,r),ql();break e}I=Error(o(426))}}else if(Ve&&_.mode&1){var Je=Cc(T);if(Je!==null){(Je.flags&65536)===0&&(Je.flags|=256),_c(Je,T,_,v,r),js(xo(I,_));break e}}v=I=xo(I,_),tt!==4&&(tt=2),_r===null?_r=[v]:_r.push(v),v=T;do{switch(v.tag){case 3:v.flags|=65536,r&=-r,v.lanes|=r;var D=Sc(v,I,r);qu(v,D);break e;case 1:_=I;var k=v.type,U=v.stateNode;if((v.flags&128)===0&&(typeof k.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(Un===null||!Un.has(U)))){v.flags|=65536,r&=-r,v.lanes|=r;var $=Ec(v,_,r);qu(v,$);break e}}v=v.return}while(v!==null)}ed(l)}catch(oe){r=oe,Xe===l&&l!==null&&(Xe=l=l.return);continue}break}while(!0)}function Zc(){var n=Pi.current;return Pi.current=Ii,n===null?Ii:n}function ql(){(tt===0||tt===3||tt===2)&&(tt=4),ot===null||(Xn&268435455)===0&&(Mi&268435455)===0||Gn(ot,ut)}function Gi(n,r){var l=xe;xe|=2;var f=Zc();(ot!==n||ut!==r)&&(yn=null,jn(n,r));do try{Dh();break}catch(g){Xc(n,g)}while(!0);if(tl(),xe=l,Pi.current=f,Xe!==null)throw Error(o(261));return ot=null,ut=0,tt}function Dh(){for(;Xe!==null;)jc(Xe)}function Lh(){for(;Xe!==null&&!im();)jc(Xe)}function jc(n){var r=od(n.alternate,n,Dt);n.memoizedProps=n.pendingProps,r===null?ed(n):Xe=r,Dl.current=null}function ed(n){var r=n;do{var l=r.alternate;if(n=r.return,(r.flags&32768)===0){if(l=Ih(l,r,Dt),l!==null){Xe=l;return}}else{if(l=Ah(l,r),l!==null){l.flags&=32767,Xe=l;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{tt=6,Xe=null;return}}if(r=r.sibling,r!==null){Xe=r;return}Xe=r=n}while(r!==null);tt===0&&(tt=5)}function eo(n,r,l){var f=Re,g=Bt.transition;try{Bt.transition=null,Re=1,Uh(n,r,l,f)}finally{Bt.transition=g,Re=f}return null}function Uh(n,r,l,f){do Ro();while(Fn!==null);if((xe&6)!==0)throw Error(o(327));l=n.finishedWork;var g=n.finishedLanes;if(l===null)return null;if(n.finishedWork=null,n.finishedLanes=0,l===n.current)throw Error(o(177));n.callbackNode=null,n.callbackPriority=0;var v=l.lanes|l.childLanes;if(hm(n,v),n===ot&&(Xe=ot=null,ut=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Li||(Li=!0,rd(qr,function(){return Ro(),null})),v=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||v){v=Bt.transition,Bt.transition=null;var T=Re;Re=1;var _=xe;xe|=4,Dl.current=null,Rh(n,l),zc(l,n),th(qs),Yr=!!Bs,qs=Bs=null,n.current=l,kh(l),sm(),xe=_,Re=T,Bt.transition=v}else n.current=l;if(Li&&(Li=!1,Fn=n,Ui=g),v=n.pendingLanes,v===0&&(Un=null),um(l.stateNode),At(n,$e()),r!==null)for(f=n.onRecoverableError,l=0;l<r.length;l++)g=r[l],f(g.value,{componentStack:g.stack,digest:g.digest});if(Di)throw Di=!1,n=Fl,Fl=null,n;return(Ui&1)!==0&&n.tag!==0&&Ro(),v=n.pendingLanes,(v&1)!==0?n===Vl?wr++:(wr=0,Vl=n):wr=0,Pn(),null}function Ro(){if(Fn!==null){var n=Ba(Ui),r=Bt.transition,l=Re;try{if(Bt.transition=null,Re=16>n?16:n,Fn===null)var f=!1;else{if(n=Fn,Fn=null,Ui=0,(xe&6)!==0)throw Error(o(331));var g=xe;for(xe|=4,j=n.current;j!==null;){var v=j,T=v.child;if((j.flags&16)!==0){var _=v.deletions;if(_!==null){for(var I=0;I<_.length;I++){var F=_[I];for(j=F;j!==null;){var B=j;switch(B.tag){case 0:case 11:case 15:Tr(8,B,v)}var O=B.child;if(O!==null)O.return=B,j=O;else for(;j!==null;){B=j;var H=B.sibling,Q=B.return;if(bc(B),B===F){j=null;break}if(H!==null){H.return=Q,j=H;break}j=Q}}}var ee=v.alternate;if(ee!==null){var ne=ee.child;if(ne!==null){ee.child=null;do{var Je=ne.sibling;ne.sibling=null,ne=Je}while(ne!==null)}}j=v}}if((v.subtreeFlags&2064)!==0&&T!==null)T.return=v,j=T;else e:for(;j!==null;){if(v=j,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:Tr(9,v,v.return)}var D=v.sibling;if(D!==null){D.return=v.return,j=D;break e}j=v.return}}var k=n.current;for(j=k;j!==null;){T=j;var U=T.child;if((T.subtreeFlags&2064)!==0&&U!==null)U.return=T,j=U;else e:for(T=k;j!==null;){if(_=j,(_.flags&2048)!==0)try{switch(_.tag){case 0:case 11:case 15:ki(9,_)}}catch(oe){ze(_,_.return,oe)}if(_===T){j=null;break e}var $=_.sibling;if($!==null){$.return=_.return,j=$;break e}j=_.return}}if(xe=g,Pn(),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(Or,n)}catch{}f=!0}return f}finally{Re=l,Bt.transition=r}}return!1}function td(n,r,l){r=xo(l,r),r=Sc(n,r,1),n=Dn(n,r,1),r=St(),n!==null&&(Wo(n,1,r),At(n,r))}function ze(n,r,l){if(n.tag===3)td(n,n,l);else for(;r!==null;){if(r.tag===3){td(r,n,l);break}else if(r.tag===1){var f=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Un===null||!Un.has(f))){n=xo(l,n),n=Ec(r,n,1),r=Dn(r,n,1),n=St(),r!==null&&(Wo(r,1,n),At(r,n));break}}r=r.return}}function Fh(n,r,l){var f=n.pingCache;f!==null&&f.delete(r),r=St(),n.pingedLanes|=n.suspendedLanes&l,ot===n&&(ut&l)===l&&(tt===4||tt===3&&(ut&130023424)===ut&&500>$e()-Ul?jn(n,0):Ll|=l),At(n,r)}function nd(n,r){r===0&&((n.mode&1)===0?r=1:(r=$r,$r<<=1,($r&130023424)===0&&($r=4194304)));var l=St();n=mn(n,r),n!==null&&(Wo(n,r,l),At(n,l))}function Vh(n){var r=n.memoizedState,l=0;r!==null&&(l=r.retryLane),nd(n,l)}function Gh(n,r){var l=0;switch(n.tag){case 13:var f=n.stateNode,g=n.memoizedState;g!==null&&(l=g.retryLane);break;case 19:f=n.stateNode;break;default:throw Error(o(314))}f!==null&&f.delete(r),nd(n,l)}var od;od=function(n,r,l){if(n!==null)if(n.memoizedProps!==r.pendingProps||_t.current)xt=!0;else{if((n.lanes&l)===0&&(r.flags&128)===0)return xt=!1,xh(n,r,l);xt=(n.flags&131072)!==0}else xt=!1,Ve&&(r.flags&1048576)!==0&&Uu(r,pi,r.index);switch(r.lanes=0,r.tag){case 2:var f=r.type;Ni(n,r),n=r.pendingProps;var g=yo(r,ft.current);Co(r,l),g=ml(null,r,f,n,g,l);var v=hl();return r.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,wt(f)?(v=!0,ci(r)):v=!1,r.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,il(r),g.updater=Si,r.stateNode=g,g._reactInternals=r,ll(r,f,n,l),r=_l(null,r,f,!0,v,l)):(r.tag=0,Ve&&v&&Ys(r),vt(null,r,g,l),r=r.child),r;case 16:f=r.elementType;e:{switch(Ni(n,r),n=r.pendingProps,g=f._init,f=g(f._payload),r.type=f,g=r.tag=Hh(f),n=Wt(f,n),g){case 0:r=Cl(null,r,f,n,l);break e;case 1:r=Rc(null,r,f,n,l);break e;case 11:r=wc(null,r,f,n,l);break e;case 14:r=xc(null,r,f,Wt(f.type,n),l);break e}throw Error(o(306,f,""))}return r;case 0:return f=r.type,g=r.pendingProps,g=r.elementType===f?g:Wt(f,g),Cl(n,r,f,g,l);case 1:return f=r.type,g=r.pendingProps,g=r.elementType===f?g:Wt(f,g),Rc(n,r,f,g,l);case 3:e:{if(kc(r),n===null)throw Error(o(387));f=r.pendingProps,v=r.memoizedState,g=v.element,Bu(n,r),vi(r,f,null,l);var T=r.memoizedState;if(f=T.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){g=xo(Error(o(423)),r),r=Pc(n,r,f,l,g);break e}else if(f!==g){g=xo(Error(o(424)),r),r=Pc(n,r,f,l,g);break e}else for(Mt=Nn(r.stateNode.containerInfo.firstChild),Pt=r,Ve=!0,Kt=null,l=Qu(r,null,f,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Eo(),f===g){r=gn(n,r,l);break e}vt(n,r,f,l)}r=r.child}return r;case 5:return Xu(r),n===null&&Zs(r),f=r.type,g=r.pendingProps,v=n!==null?n.memoizedProps:null,T=g.children,Os(f,g)?T=null:v!==null&&Os(f,v)&&(r.flags|=32),Nc(n,r),vt(n,r,T,l),r.child;case 6:return n===null&&Zs(r),null;case 13:return Mc(n,r,l);case 4:return al(r,r.stateNode.containerInfo),f=r.pendingProps,n===null?r.child=_o(r,null,f,l):vt(n,r,f,l),r.child;case 11:return f=r.type,g=r.pendingProps,g=r.elementType===f?g:Wt(f,g),wc(n,r,f,g,l);case 7:return vt(n,r,r.pendingProps,l),r.child;case 8:return vt(n,r,r.pendingProps.children,l),r.child;case 12:return vt(n,r,r.pendingProps.children,l),r.child;case 10:e:{if(f=r.type._context,g=r.pendingProps,v=r.memoizedProps,T=g.value,Le(hi,f._currentValue),f._currentValue=T,v!==null)if(Jt(v.value,T)){if(v.children===g.children&&!_t.current){r=gn(n,r,l);break e}}else for(v=r.child,v!==null&&(v.return=r);v!==null;){var _=v.dependencies;if(_!==null){T=v.child;for(var I=_.firstContext;I!==null;){if(I.context===f){if(v.tag===1){I=hn(-1,l&-l),I.tag=2;var F=v.updateQueue;if(F!==null){F=F.shared;var B=F.pending;B===null?I.next=I:(I.next=B.next,B.next=I),F.pending=I}}v.lanes|=l,I=v.alternate,I!==null&&(I.lanes|=l),ol(v.return,l,r),_.lanes|=l;break}I=I.next}}else if(v.tag===10)T=v.type===r.type?null:v.child;else if(v.tag===18){if(T=v.return,T===null)throw Error(o(341));T.lanes|=l,_=T.alternate,_!==null&&(_.lanes|=l),ol(T,l,r),T=v.sibling}else T=v.child;if(T!==null)T.return=v;else for(T=v;T!==null;){if(T===r){T=null;break}if(v=T.sibling,v!==null){v.return=T.return,T=v;break}T=T.return}v=T}vt(n,r,g.children,l),r=r.child}return r;case 9:return g=r.type,f=r.pendingProps.children,Co(r,l),g=bt(g),f=f(g),r.flags|=1,vt(n,r,f,l),r.child;case 14:return f=r.type,g=Wt(f,r.pendingProps),g=Wt(f.type,g),xc(n,r,f,g,l);case 15:return Ic(n,r,r.type,r.pendingProps,l);case 17:return f=r.type,g=r.pendingProps,g=r.elementType===f?g:Wt(f,g),Ni(n,r),r.tag=1,wt(f)?(n=!0,ci(r)):n=!1,Co(r,l),Ju(r,f,g),ll(r,f,g,l),_l(null,r,f,!0,n,l);case 19:return Lc(n,r,l);case 22:return Ac(n,r,l)}throw Error(o(156,r.tag))};function rd(n,r){return Fa(n,r)}function bh(n,r,l,f){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(n,r,l,f){return new bh(n,r,l,f)}function Ol(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Hh(n){if(typeof n=="function")return Ol(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Ce)return 11;if(n===Pe)return 14}return 2}function bn(n,r){var l=n.alternate;return l===null?(l=qt(n.tag,r,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=r,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&14680064,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,r=n.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l}function bi(n,r,l,f,g,v){var T=2;if(f=n,typeof n=="function")Ol(n)&&(T=1);else if(typeof n=="string")T=5;else e:switch(n){case X:return to(l.children,g,v,r);case he:T=8,g|=8;break;case Y:return n=qt(12,l,r,g|2),n.elementType=Y,n.lanes=v,n;case J:return n=qt(13,l,r,g),n.elementType=J,n.lanes=v,n;case re:return n=qt(19,l,r,g),n.elementType=re,n.lanes=v,n;case ge:return Hi(l,g,v,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case de:T=10;break e;case ye:T=9;break e;case Ce:T=11;break e;case Pe:T=14;break e;case Me:T=16,f=null;break e}throw Error(o(130,n==null?n:typeof n,""))}return r=qt(T,l,r,g),r.elementType=n,r.type=f,r.lanes=v,r}function to(n,r,l,f){return n=qt(7,n,f,r),n.lanes=l,n}function Hi(n,r,l,f){return n=qt(22,n,f,r),n.elementType=ge,n.lanes=l,n.stateNode={isHidden:!1},n}function zl(n,r,l){return n=qt(6,n,null,r),n.lanes=l,n}function $l(n,r,l){return r=qt(4,n.children!==null?n.children:[],n.key,r),r.lanes=l,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function Bh(n,r,l,f,g){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vs(0),this.expirationTimes=vs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vs(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Jl(n,r,l,f,g,v,T,_,I){return n=new Bh(n,r,l,_,I),r===1?(r=1,v===!0&&(r|=8)):r=0,v=qt(3,null,null,r),n.current=v,v.stateNode=n,v.memoizedState={element:f,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},il(v),n}function qh(n,r,l){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:W,key:f==null?null:""+f,children:n,containerInfo:r,implementation:l}}function id(n){if(!n)return kn;n=n._reactInternals;e:{if(On(n)!==n||n.tag!==1)throw Error(o(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(wt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(o(171))}if(n.tag===1){var l=n.type;if(wt(l))return Mu(n,l,r)}return r}function sd(n,r,l,f,g,v,T,_,I){return n=Jl(l,f,!0,n,g,v,T,_,I),n.context=id(null),l=n.current,f=St(),g=Vn(l),v=hn(f,g),v.callback=r??null,Dn(l,v,g),n.current.lanes=g,Wo(n,g,f),At(n,f),n}function Bi(n,r,l,f){var g=r.current,v=St(),T=Vn(g);return l=id(l),r.context===null?r.context=l:r.pendingContext=l,r=hn(v,T),r.payload={element:n},f=f===void 0?null:f,f!==null&&(r.callback=f),n=Dn(g,r,T),n!==null&&(Xt(n,g,T,v),yi(n,g,T)),T}function qi(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function ld(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<r?l:r}}function Kl(n,r){ld(n,r),(n=n.alternate)&&ld(n,r)}function Oh(){return null}var ad=typeof reportError=="function"?reportError:function(n){console.error(n)};function Wl(n){this._internalRoot=n}Oi.prototype.render=Wl.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(o(409));Bi(n,r,null,null)},Oi.prototype.unmount=Wl.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;Zn(function(){Bi(null,n,null,null)}),r[cn]=null}};function Oi(n){this._internalRoot=n}Oi.prototype.unstable_scheduleHydration=function(n){if(n){var r=za();n={blockedOn:null,target:n,priority:r};for(var l=0;l<xn.length&&r!==0&&r<xn[l].priority;l++);xn.splice(l,0,n),l===0&&Ka(n)}};function Yl(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function zi(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function ud(){}function zh(n,r,l,f,g){if(g){if(typeof f=="function"){var v=f;f=function(){var F=qi(T);v.call(F)}}var T=sd(r,f,n,0,null,!1,!1,"",ud);return n._reactRootContainer=T,n[cn]=T.current,ar(n.nodeType===8?n.parentNode:n),Zn(),T}for(;g=n.lastChild;)n.removeChild(g);if(typeof f=="function"){var _=f;f=function(){var F=qi(I);_.call(F)}}var I=Jl(n,0,!1,null,null,!1,!1,"",ud);return n._reactRootContainer=I,n[cn]=I.current,ar(n.nodeType===8?n.parentNode:n),Zn(function(){Bi(r,I,l,f)}),I}function $i(n,r,l,f,g){var v=l._reactRootContainer;if(v){var T=v;if(typeof g=="function"){var _=g;g=function(){var I=qi(T);_.call(I)}}Bi(r,T,n,g)}else T=zh(l,r,n,g,f);return qi(T)}qa=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var l=Ko(r.pendingLanes);l!==0&&(Ss(r,l|1),At(r,$e()),(xe&6)===0&&(No=$e()+500,Pn()))}break;case 13:Zn(function(){var f=mn(n,1);if(f!==null){var g=St();Xt(f,n,1,g)}}),Kl(n,1)}},Es=function(n){if(n.tag===13){var r=mn(n,134217728);if(r!==null){var l=St();Xt(r,n,134217728,l)}Kl(n,134217728)}},Oa=function(n){if(n.tag===13){var r=Vn(n),l=mn(n,r);if(l!==null){var f=St();Xt(l,n,r,f)}Kl(n,r)}},za=function(){return Re},$a=function(n,r){var l=Re;try{return Re=n,r()}finally{Re=l}},Ut=function(n,r,l){switch(r){case"input":if(un(n,l),r=l.name,l.type==="radio"&&r!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<l.length;r++){var f=l[r];if(f!==n&&f.form===n.form){var g=ai(f);if(!g)throw Error(o(90));Lr(f),un(f,g)}}}break;case"textarea":De(n,l);break;case"select":r=l.value,r!=null&&Z(n,!!l.multiple,r,!1)}},so=Hl,Ft=Zn;var $h={usingClientEntryPoint:!1,Events:[dr,ho,ai,qo,Oo,Hl]},xr={findFiberByHostInstance:zn,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Jh={bundleType:xr.bundleType,version:xr.version,rendererPackageName:xr.rendererPackageName,rendererConfig:xr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=La(n),n===null?null:n.stateNode},findFiberByHostInstance:xr.findFiberByHostInstance||Oh,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ji=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ji.isDisabled&&Ji.supportsFiber)try{Or=Ji.inject(Jh),tn=Ji}catch{}}return Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$h,Nt.createPortal=function(n,r){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yl(r))throw Error(o(200));return qh(n,r,null,l)},Nt.createRoot=function(n,r){if(!Yl(n))throw Error(o(299));var l=!1,f="",g=ad;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onRecoverableError!==void 0&&(g=r.onRecoverableError)),r=Jl(n,1,!1,null,null,l,!1,f,g),n[cn]=r.current,ar(n.nodeType===8?n.parentNode:n),new Wl(r)},Nt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(o(188)):(n=Object.keys(n).join(","),Error(o(268,n)));return n=La(r),n=n===null?null:n.stateNode,n},Nt.flushSync=function(n){return Zn(n)},Nt.hydrate=function(n,r,l){if(!zi(r))throw Error(o(200));return $i(null,n,r,!0,l)},Nt.hydrateRoot=function(n,r,l){if(!Yl(n))throw Error(o(405));var f=l!=null&&l.hydratedSources||null,g=!1,v="",T=ad;if(l!=null&&(l.unstable_strictMode===!0&&(g=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onRecoverableError!==void 0&&(T=l.onRecoverableError)),r=sd(r,null,n,1,l??null,g,!1,v,T),n[cn]=r.current,ar(n),f)for(n=0;n<f.length;n++)l=f[n],g=l._getVersion,g=g(l._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[l,g]:r.mutableSourceEagerHydrationData.push(l,g);return new Oi(r)},Nt.render=function(n,r,l){if(!zi(r))throw Error(o(200));return $i(null,n,r,!1,l)},Nt.unmountComponentAtNode=function(n){if(!zi(n))throw Error(o(40));return n._reactRootContainer?(Zn(function(){$i(null,null,n,!1,function(){n._reactRootContainer=null,n[cn]=null})}),!0):!1},Nt.unstable_batchedUpdates=Hl,Nt.unstable_renderSubtreeIntoContainer=function(n,r,l,f){if(!zi(l))throw Error(o(200));if(n==null||n._reactInternals===void 0)throw Error(o(38));return $i(n,r,l,!1,f)},Nt.version="18.2.0-next-9e3b772b8-20220608",Nt}var yd;function tg(){if(yd)return Zl.exports;yd=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Zl.exports=eg(),Zl.exports}var vd;function ng(){if(vd)return Ki;vd=1;var t=tg();return Ki.createRoot=t.createRoot,Ki.hydrateRoot=t.hydrateRoot,Ki}var og=ng();const rg=np(og),ig="/assets/logo-BxhYCcWt.png",sg=({onTutorialClick:t})=>{const[e,o]=ue.useState(!1);return C.jsx("header",{className:"bg-[#1f2022] border-b border-gray-700/50 shadow-md sticky top-0 z-50",children:C.jsxs("nav",{className:"container mx-auto px-4 lg:px-6 py-4 flex justify-between items-center",children:[C.jsx("a",{href:"/",className:"flex-shrink-0",children:C.jsx("img",{src:ig,alt:"",className:"h-10 sm:h-12 w-auto object-contain"})}),C.jsxs("div",{className:"flex items-center space-x-3 lg:space-x-4",children:[C.jsxs("a",{href:"#",className:"hidden md:flex items-center gap-2 bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg text-sm font-bold transition-all shadow-md border border-emerald-500/50 hover:shadow-emerald-500/20 whitespace-nowrap",children:[C.jsx("i",{className:"bi bi-cash-coin text-lg"}),C.jsx("span",{children:"    "})]}),C.jsxs("button",{onClick:t,className:"hidden sm:flex relative overflow-hidden bg-gradient-to-r from-red-700 to-red-500 text-white px-4 py-2 rounded-lg text-sm font-medium shadow-lg transition-transform hover:scale-105 hover:shadow-red-500/30 items-center gap-2 group border border-red-500/50 whitespace-nowrap",children:[C.jsx("span",{className:"absolute inset-0 w-full h-full bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:animate-shimmer"}),C.jsx("i",{className:"bi bi-play-circle-fill animate-pulse"}),C.jsx("span",{children:"Tutorial"})]})]})]})})},ko=({id:t,min:e,max:o,value:i,onChange:s,themeColor:u})=>{const d=(i-e)/(o-e)*100;return C.jsx("input",{type:"range",id:t,min:e,max:o,value:i,onChange:s,className:"w-full h-2 rounded-lg cursor-pointer slider-custom",style:{"--fill-percentage":`${d}%`,"--theme-color":u}})},ln=({id:t,checked:e,onChange:o,label:i,tooltip:s})=>C.jsxs("div",{className:"flex justify-between items-center",children:[C.jsxs("label",{htmlFor:t,className:"text-sm text-gray-400 flex items-center cursor-pointer",children:[i,s&&C.jsxs("div",{className:"info-icon group relative ml-1.5",children:[C.jsx("i",{className:"bi bi-info-circle-fill text-gray-500"}),C.jsx("span",{className:"tooltip invisible group-hover:visible absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-52 bg-[#17181a] text-white text-xs rounded-md p-2 border border-gray-600 shadow-lg z-10",children:s})]})]}),C.jsxs("div",{className:"switch relative inline-block w-10 h-6 flex-shrink-0",children:[C.jsx("input",{type:"checkbox",id:t,checked:e,onChange:o}),C.jsx("label",{htmlFor:t,className:"slider cursor-pointer"})]})]}),lg=({settings:t,onSettingsChange:e,onSave:o,onApiKeyClick:i,themeColor:s,onThemeColorChange:u,fileExtension:d,onFileExtensionChange:p})=>{const m=ue.useRef(null),h=ue.useRef(null),y=ue.useRef(null),E=ue.useRef(null),S=ue.useCallback(()=>{if(!m.current||!h.current)return;const R=t.activeTab==="metadata"?y:E;if(!R.current)return;const M=m.current.getBoundingClientRect(),L=R.current.getBoundingClientRect();h.current.style.left=`${L.left-M.left}px`,h.current.style.width=`${L.width}px`},[t.activeTab]);ue.useEffect(()=>(S(),window.addEventListener("resize",S),()=>window.removeEventListener("resize",S)),[S]);const w=R=>{e({...t,activeTab:R})},A=(R,M)=>{e({...t,[R]:M})},P=(R,M)=>{e({...t,advanceTitle:{...t.advanceTitle,[R]:M}})},N=(R,M)=>{e({...t,promptSwitches:{...t.promptSwitches,[R]:M}})};return C.jsxs("div",{className:"panel-bg p-4 sm:p-6 lg:sticky top-[88px] bg-[#202123] border border-[#363636] rounded-xl shadow-lg lg:max-h-[calc(100vh-104px)] lg:overflow-y-auto",children:[C.jsxs("div",{className:"flex justify-between items-center mb-6",children:[C.jsx("h2",{className:"text-xl font-semibold text-white",children:"Generation Controls"}),C.jsxs("button",{onClick:i,className:"flex items-center justify-center gap-2 py-1.5 px-3 bg-gray-700 hover:bg-gray-600 text-white font-medium rounded-lg shadow-sm transition-colors text-xs border border-gray-600",title:"Manage API Keys",children:[C.jsx("i",{className:"bi bi-key-fill"}),C.jsx("span",{children:"API Key"})]})]}),C.jsxs("div",{className:"mb-6 pb-6 border-b border-gray-700 space-y-5",children:[C.jsxs("div",{children:[C.jsxs("div",{className:"flex justify-between items-center mb-2",children:[C.jsxs("label",{htmlFor:"batch-size",className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:["Batch Size (Concurrent)",C.jsxs("div",{className:"group relative",children:[C.jsx("i",{className:"bi bi-info-circle-fill text-gray-500 text-xs"}),C.jsx("span",{className:"tooltip invisible group-hover:visible absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-48 bg-[#17181a] text-white text-xs rounded-md p-2 border border-gray-600 shadow-lg z-10 text-center",children:"Number of images to process at the same time."})]})]}),C.jsxs("span",{className:"text-sm font-semibold text-white bg-gray-700 px-2 py-0.5 rounded-md",children:[t.batchSize,"x"]})]}),C.jsx(ko,{id:"batch-size",min:1,max:10,value:t.batchSize,onChange:R=>A("batchSize",parseInt(R.target.value)),themeColor:s})]}),C.jsxs("div",{children:[C.jsxs("div",{className:"flex justify-between items-center mb-2",children:[C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsxs("label",{htmlFor:"rpm-slider",className:"text-sm font-medium text-gray-300 flex items-center gap-2",children:["Requests Per Minute (RPM)",C.jsxs("div",{className:"group relative",children:[C.jsx("i",{className:"bi bi-info-circle-fill text-gray-500 text-xs"}),C.jsx("span",{className:"tooltip invisible group-hover:visible absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-64 bg-[#17181a] text-white text-xs rounded-md p-2 border border-gray-600 shadow-lg z-10 text-center",children:"Limit the number of API calls per minute. Toggle to enable/disable."})]})]}),C.jsxs("div",{className:"switch relative inline-block w-10 h-6 flex-shrink-0",children:[C.jsx("input",{type:"checkbox",id:"rpm-toggle",checked:t.isRpmEnabled,onChange:R=>A("isRpmEnabled",R.target.checked)}),C.jsx("label",{htmlFor:"rpm-toggle",className:"slider cursor-pointer"})]})]}),C.jsxs("span",{className:`text-sm font-semibold text-white bg-gray-700 px-2 py-0.5 rounded-md ${t.isRpmEnabled?"":"opacity-40"}`,children:[t.requestsPerMinute," / min"]})]}),C.jsx("div",{className:t.isRpmEnabled?"":"opacity-40 pointer-events-none grayscale",children:C.jsx(ko,{id:"rpm-slider",min:1,max:60,value:t.requestsPerMinute,onChange:R=>A("requestsPerMinute",parseInt(R.target.value)),themeColor:s})})]})]}),C.jsxs("div",{ref:m,className:"relative border-b border-gray-700 mb-6",children:[C.jsxs("div",{className:"flex space-x-4",children:[C.jsx("button",{ref:y,onClick:()=>w("metadata"),className:`tab-btn py-2 px-1 hover:text-gray-200 font-medium transition-colors ${t.activeTab==="metadata"?"text-[color:var(--theme-color)]":"text-gray-400"}`,children:"Metadata"}),C.jsx("button",{ref:E,onClick:()=>w("prompt"),className:`tab-btn py-2 px-1 hover:text-gray-200 font-medium transition-colors ${t.activeTab==="prompt"?"text-[color:var(--theme-color)]":"text-gray-400"}`,children:"Prompt"})]}),C.jsx("div",{ref:h,className:"absolute bottom-[-1px] h-0.5 bg-[color:var(--theme-color)] transition-all duration-300 ease-in-out"})]}),C.jsxs("div",{className:`${t.activeTab==="metadata"?"block":"hidden"} space-y-6`,children:[C.jsx("div",{className:"pt-2 pb-2 border-b border-gray-700",children:C.jsx(ln,{id:"auto-download-csv",label:"Auto Download CSV",checked:t.autoDownloadCsv,onChange:R=>A("autoDownloadCsv",R.target.checked),tooltip:"Automatically download the CSV file when all files have been processed."})}),C.jsxs("div",{children:[C.jsxs("div",{className:"flex justify-between items-center mb-2",children:[C.jsx("label",{htmlFor:"title-length",className:"text-sm font-medium text-gray-300",children:"Title Length"}),C.jsxs("span",{className:"text-sm font-semibold text-white",children:[t.titleLength," Chars"]})]}),C.jsx(ko,{id:"title-length",min:20,max:200,value:t.titleLength,onChange:R=>A("titleLength",parseInt(R.target.value)),themeColor:s})]}),C.jsxs("div",{children:[C.jsxs("div",{className:"flex justify-between items-center mb-2",children:[C.jsx("label",{htmlFor:"desc-length",className:"text-sm font-medium text-gray-300",children:"Description Character Length"}),C.jsxs("span",{className:"text-sm font-semibold text-white",children:[t.descLength," Chars"]})]}),C.jsx(ko,{id:"desc-length",min:50,max:500,value:t.descLength,onChange:R=>A("descLength",parseInt(R.target.value)),themeColor:s})]}),C.jsxs("div",{children:[C.jsxs("div",{className:"flex justify-between items-center mb-2",children:[C.jsx("label",{htmlFor:"keywords-count",className:"text-sm font-medium text-gray-300",children:"Keywords Count"}),C.jsxs("span",{className:"text-sm font-semibold text-white",children:[t.keywordsCount," Keywords"]})]}),C.jsx(ko,{id:"keywords-count",min:5,max:50,value:t.keywordsCount,onChange:R=>A("keywordsCount",parseInt(R.target.value)),themeColor:s})]}),C.jsxs("div",{className:"space-y-4",children:[C.jsxs("button",{onClick:()=>A("isAdvanceContentHidden",!t.isAdvanceContentHidden),className:"flex justify-between items-center w-full text-left",children:[C.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Advance Title"}),C.jsx("span",{className:"text-sm font-medium text-[color:var(--theme-color)] hover:text-[color:var(--theme-color-hover)]",children:t.isAdvanceContentHidden?"Expand":"Collapse"})]}),!t.isAdvanceContentHidden&&C.jsxs("div",{className:"space-y-4 pl-2",children:[C.jsx(ln,{id:"toggle-transparent-bg",label:"isolated on transparent background",checked:t.advanceTitle.transparentBg,onChange:R=>P("transparentBg",R.target.checked)}),C.jsx(ln,{id:"toggle-white-bg",label:"isolated on white background",checked:t.advanceTitle.whiteBg,onChange:R=>P("whiteBg",R.target.checked)}),C.jsx(ln,{id:"toggle-vector",label:"Vector",checked:t.advanceTitle.vector,onChange:R=>P("vector",R.target.checked)}),C.jsx(ln,{id:"toggle-illustration",label:"illustration",checked:t.advanceTitle.illustration,onChange:R=>P("illustration",R.target.checked)})]})]}),C.jsxs("div",{className:"space-y-4",children:[C.jsx("label",{htmlFor:"custom-prompt-select",className:"block text-sm font-medium text-gray-300 mb-2",children:"Custom Prompt"}),C.jsxs("select",{id:"custom-prompt-select",value:t.customPromptSelect,onChange:R=>A("customPromptSelect",R.target.value),className:"bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-[color:var(--theme-color)] focus:border-[color:var(--theme-color)] block w-full p-2.5",children:[C.jsx("option",{value:"default",children:"Default (Recommended)"}),C.jsx("option",{value:"set_custom",children:"Set Custom Prompt"})]}),t.customPromptSelect==="set_custom"&&C.jsx("textarea",{value:t.customPromptEntry,onChange:R=>A("customPromptEntry",R.target.value),rows:4,className:"bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-[color:var(--theme-color)] focus:border-[color:var(--theme-color)] block w-full p-2.5",placeholder:"Enter your custom prompt here..."})]}),C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{htmlFor:"file-extension-select",className:"block text-sm font-medium text-gray-300",children:"Change File extension"}),C.jsxs("select",{id:"file-extension-select",value:d,onChange:R=>p(R.target.value),className:"bg-[#4a4a4a] border border-[#6b6b6b] text-[#d1d1d1] text-sm rounded-md p-2 w-full appearance-none bg-no-repeat bg-right-2",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23a0a0a0' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`},children:[C.jsx("option",{value:"default",children:"Default"}),C.jsx("option",{value:"jpg",children:"jpg"}),C.jsx("option",{value:"jpeg",children:"jpeg"}),C.jsx("option",{value:"png",children:"png"}),C.jsx("option",{value:"svg",children:"svg"}),C.jsx("option",{value:"eps",children:"eps"}),C.jsx("option",{value:"ai",children:"ai"}),C.jsx("option",{value:"mp4",children:"mp4"})]})]}),C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx("label",{htmlFor:"theme-color-picker",className:"text-sm font-medium text-gray-300",children:"Theme Color :"}),C.jsxs("div",{children:[C.jsx("input",{type:"color",value:s,onChange:R=>u(R.target.value),className:"absolute opacity-0 w-0 h-0 p-0 border-none",id:"theme-color-picker"}),C.jsx("label",{htmlFor:"theme-color-picker",style:{backgroundColor:s},className:"inline-block w-8 h-8 rounded-full cursor-pointer align-middle",title:"Change theme color"})]})]})]}),C.jsxs("div",{className:`${t.activeTab==="prompt"?"block":"hidden"} space-y-6`,children:[C.jsxs("div",{children:[C.jsxs("div",{className:"flex justify-between items-center mb-2",children:[C.jsx("label",{htmlFor:"desc-words-slider",className:"text-sm font-medium text-gray-300 flex items-center",children:"Max Description Words"}),C.jsx("span",{className:"text-sm font-semibold text-white bg-gray-700 px-2 py-0.5 rounded-md",children:t.descWords})]}),C.jsx(ko,{id:"desc-words-slider",min:10,max:100,value:t.descWords,onChange:R=>A("descWords",parseInt(R.target.value)),themeColor:s})]}),C.jsx("div",{className:"pt-2 pb-2 border-b border-gray-700",children:C.jsx(ln,{id:"auto-download-csv-prompt",label:"Auto Download CSV",checked:t.autoDownloadCsv,onChange:R=>A("autoDownloadCsv",R.target.checked),tooltip:"Automatically download the CSV file when all prompts have been generated."})}),C.jsxs("div",{className:"space-y-4 pt-4",children:[C.jsx(ln,{id:"toggle-silhouette",label:"SILHOUETTE",checked:t.promptSwitches.silhouette,onChange:R=>N("silhouette",R.target.checked),tooltip:"Use this for silhouette-style images to improve their discoverability in marketplaces."}),C.jsx(ln,{id:"toggle-white-bg-prompt",label:"White Background",checked:t.promptSwitches.whiteBg,onChange:R=>N("whiteBg",R.target.checked),tooltip:"Optimize metadata for isolated objects on white background to improve their discoverability in search results."}),C.jsx(ln,{id:"toggle-transparent-bg-prompt",label:"Transparent Background",checked:t.promptSwitches.transparentBg,onChange:R=>N("transparentBg",R.target.checked),tooltip:"Optimize metadata for isolated objects on transparent background to improve their discoverability in search results."}),C.jsx(ln,{id:"toggle-custom-prompt-prompt",label:"CUSTOM PROMPT",checked:t.promptSwitches.customPrompt,onChange:R=>N("customPrompt",R.target.checked),tooltip:"Create your own custom prompt for AI-generated metadata. This will override the default prompts while still ensuring proper formatting and keyword count."})]}),t.promptSwitches.customPrompt&&C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{htmlFor:"custom-prompt-entry-prompt",className:"block text-sm font-medium text-gray-300",children:"Custom Prompt Text"}),C.jsx("textarea",{id:"custom-prompt-entry-prompt",value:t.customPromptEntryPrompt,onChange:R=>A("customPromptEntryPrompt",R.target.value),rows:4,className:"bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-[color:var(--theme-color)] focus:border-[color:var(--theme-color)] block w-full p-2.5",placeholder:"Enter your custom prompt here..."})]})]}),C.jsx("div",{className:"mt-8 space-y-3",children:C.jsx("button",{onClick:o,className:"w-full py-2.5 px-5 bg-[color:var(--theme-color)] hover:bg-[color:var(--theme-color-hover)] text-white font-medium rounded-lg shadow-md transition-colors text-sm",children:"Save Settings"})})]})},op=t=>new Promise((e,o)=>{const i=new Image,s=URL.createObjectURL(t);i.onload=()=>{URL.revokeObjectURL(s),e(i)},i.onerror=u=>{URL.revokeObjectURL(s),o(u)},i.src=s}),Pr=t=>{const e=t.split(","),o=e[0].match(/:(.*?);/);if(!o)throw new Error("Could not parse MIME type");const i=o[1],s=atob(e[1]);let u=s.length;const d=new Uint8Array(u);for(;u--;)d[u]=s.charCodeAt(u);return new Blob([d],{type:i})},ag=async(t,e,o)=>{const i=document.createElement("canvas"),s=i.getContext("2d");if(!s)throw new Error("Could not get canvas context");let{width:u,height:d}=t;const p=256;u>p&&(d=p/u*d,u=p),i.width=u,i.height=d,o==="image/jpeg"&&(s.fillStyle="#FFFFFF",s.fillRect(0,0,u,d)),s.drawImage(t,0,0,u,d);let m=.7,h=i.toDataURL(o,m),y=Pr(h);for(;y.size>e&&m>.1;)m-=.1,h=i.toDataURL(o,m),y=Pr(h);for(;y.size>e&&u>128;)for(u*=.8,d*=.8,i.width=u,i.height=d,o==="image/jpeg"&&(s.fillStyle="#FFFFFF",s.fillRect(0,0,u,d)),s.drawImage(t,0,0,u,d),m=.7,h=i.toDataURL(o,m),y=Pr(h);y.size>e&&m>.1;)m-=.1,h=i.toDataURL(o,m),y=Pr(h);return h},Sd=async(t,e,o,i="image/jpeg")=>{const s=await op(t),u=document.createElement("canvas");let{width:d,height:p}=s;d>e&&(p=e/d*p,d=e),u.width=d,u.height=p;const m=u.getContext("2d");if(!m)throw new Error("Could not get canvas context");return i==="image/jpeg"&&(m.fillStyle="#FFFFFF",m.fillRect(0,0,d,p)),m.drawImage(s,0,0,d,p),u.toDataURL(i,o)},rp=(t,e)=>new Promise((o,i)=>{const s=document.createElement("video");s.preload="metadata";const u=URL.createObjectURL(t);s.onloadeddata=()=>{s.currentTime=Math.min(1,s.duration/2)},s.onseeked=()=>{const d=document.createElement("canvas");let{videoWidth:p,videoHeight:m}=s;p>e&&(m=e/p*m,p=e),d.width=p,d.height=m;const h=d.getContext("2d");if(!h)return i(new Error("Could not get canvas context"));h.fillStyle="#FFFFFF",h.fillRect(0,0,p,m),h.drawImage(s,0,0,p,m);const y=d.toDataURL("image/jpeg",.5);URL.revokeObjectURL(u),o(y)},s.onerror=d=>{URL.revokeObjectURL(u),i(d)},s.src=u}),ug=async t=>{var u;const s=t.type==="image/png"||t.type==="image/svg+xml"?"image/png":"image/jpeg";if(/^image\/(jpeg|png|gif)$/.test(t.type))return await Sd(t,150,.4,s);if(t.type==="image/svg+xml"){const d=new Blob([await t.text()],{type:"image/svg+xml;charset=utf-8"});return await Sd(new File([d],t.name,{type:"image/svg+xml"}),150,.4,"image/png")}if(t.type.startsWith("video/"))return await rp(t,150);if(t.type==="application/postscript"||t.type==="application/pdf")return`https://placehold.co/300x300/ffffff/333333?text=${((u=t.name.split(".").pop())==null?void 0:u.toUpperCase())||"Vector"}`;throw new Error("Unsupported file type for thumbnail generation.")},Ed=async t=>{const o=t.file;let i,u=o.type==="image/png"||o.type==="image/svg+xml"?"image/png":"image/jpeg";const d=async m=>{const h=await op(m);return await ag(h,10240,u)};if(/^image\/(jpeg|png|gif|svg\+xml)$/.test(o.type)){const m=o.type==="image/svg+xml"?new Blob([await o.text()],{type:"image/svg+xml;charset=utf-8"}):o;i=await d(m)}else if(o.type.startsWith("video/")){u="image/jpeg";const m=await rp(o,512),h=Pr(m);h.size>10240?i=await d(h):i=m}else if(o.type==="application/postscript"||o.type==="application/pdf"){u="image/jpeg";const m=document.createElement("canvas");m.width=100,m.height=100;const h=m.getContext("2d");if(!h)throw new Error("Could not create canvas context for placeholder.");h.fillStyle="#FFFFFF",h.fillRect(0,0,100,100),h.fillStyle="#333333",h.font="12px sans-serif",h.textAlign="center",h.fillText("Vector File",50,50),i=m.toDataURL("image/jpeg",.5)}else throw new Error("Unsupported file type for API processing.");const p=i.split(",")[1];if(!p)throw new Error("Failed to extract base64 data from data URL.");return{base64Data:p,mimeType:u}},Ar=32,Nr={themeColor:"#f05a27",selectedStockSite:"General",fileExtension:"default",controls:{activeTab:"metadata",batchSize:1,requestsPerMinute:15,isRpmEnabled:!1,titleLength:60,descLength:150,keywordsCount:30,autoDownloadCsv:!1,advanceTitle:{transparentBg:!1,whiteBg:!1,vector:!1,illustration:!1},isAdvanceContentHidden:!0,customPromptSelect:"default",customPromptEntry:"",descWords:40,promptSwitches:{silhouette:!1,whiteBg:!1,transparentBg:!1,customPrompt:!1},customPromptEntryPrompt:""}},cg=[{key:"General",name:"General",logo:"/assets/images/stock-logos/general.png"},{key:"adobe-stock",name:"Adobe Stock",logo:"/assets/images/stock-logos/adobe-stock.png"},{key:"shutterstock",name:"Shutterstock",logo:"/assets/images/stock-logos/shutterstock.png"},{key:"freepik",name:"Freepik",logo:"/assets/images/stock-logos/freepik.png"},{key:"getty",name:"Getty Images",logo:"/assets/images/stock-logos/general.png"},{key:"istock",name:"iStock",logo:"/assets/images/stock-logos/general.png"},{key:"dreamstime",name:"Dreamstime",logo:"/assets/images/stock-logos/dreamstime.png"},{key:"vecteezy",name:"Vecteezy",logo:"/assets/images/stock-logos/vecteezy.png"}],dg=()=>C.jsxs("div",{className:"col-span-3 sm:col-span-4 md:col-span-6 lg:col-span-8 xl:col-span-8 flex flex-col items-center justify-center p-10 text-center min-h-[300px]",children:[C.jsxs("div",{className:"flex space-x-4 sm:space-x-8 mb-4",children:[C.jsxs("div",{className:"flex flex-col items-center w-16 text-orange-500",children:[C.jsx("i",{className:"bi bi-image",style:{fontSize:"40px"}}),C.jsx("span",{className:"text-sm font-medium mt-1",children:"Image"})]}),C.jsxs("div",{className:"flex flex-col items-center w-16 text-indigo-400",children:[C.jsx("i",{className:"bi bi-film",style:{fontSize:"40px"}}),C.jsx("span",{className:"text-sm font-medium mt-1",children:"Videos"})]}),C.jsxs("div",{className:"flex flex-col items-center w-16 text-pink-500",children:[C.jsx("i",{className:"bi bi-file-earmark-code",style:{fontSize:"40px"}}),C.jsx("span",{className:"text-sm font-medium mt-1",children:"EPS"})]})]}),C.jsxs("p",{className:"mb-2 text-sm text-center px-4 text-gray-400",children:[C.jsx("span",{className:"font-semibold text-gray-300",children:"Drag & drop files here"}),", or ",C.jsx("span",{className:"font-semibold text-teal-400",children:"click to select"})]}),C.jsx("p",{className:"text-xs text-gray-500 px-4 text-center",children:"Supported: JPG, PNG, GIF, MP4, MOV, EPS, AI, PDF"})]}),fg=({fileState:t,onRemove:e})=>{let o=null;return t.status==="compressing"?o=C.jsxs("div",{className:"absolute inset-0 bg-black/70 flex flex-col items-center justify-center text-white z-10",children:[C.jsx("div",{className:"spinner"}),C.jsx("span",{className:"text-xs mt-1.5",children:"Preparing..."})]}):t.status==="processing"?o=C.jsxs("div",{className:"absolute inset-0 bg-[color:var(--theme-color)]/80 flex flex-col items-center justify-center text-white z-10",children:[C.jsx("div",{className:"spinner"}),C.jsx("span",{className:"text-xs mt-1.5",children:"Generating..."})]}):t.status==="error"&&(o=C.jsxs("div",{className:"absolute inset-0 bg-red-800/80 flex flex-col items-center justify-center text-white z-10",children:[C.jsx("i",{className:"bi bi-exclamation-triangle-fill text-2xl"}),C.jsx("span",{className:"text-xs mt-1.5",children:"Error"})]})),C.jsxs("div",{className:"gallery-item group relative w-full aspect-square rounded-lg overflow-hidden bg-[#3b3b3e] shadow-md checkered-bg",children:[C.jsx("img",{src:t.thumbnailDataUrl,alt:t.file.name,className:"w-full h-full object-contain"}),o,C.jsx("button",{onClick:()=>e(t.id),className:"remove-file-btn absolute top-1 right-1 w-6 h-6 bg-black/60 text-white rounded-full flex items-center justify-center text-lg leading-none cursor-pointer opacity-0 group-hover:opacity-100 transition-all hover:bg-red-600 z-20",title:"Remove file",children:""})]})},pg=t=>{const{stagedFiles:e,setStagedFiles:o,progress:i,isGenerating:s,isPaused:u,setIsPaused:d,startGeneration:p,generatedMetadata:m,setProgress:h,showToast:y,selectedStockSite:E,onStockSiteChange:S,fileExtension:w,clearAll:A,onExportCsv:P,onHistoryClick:N}=t,[R,M]=ue.useState(!1),L=ue.useRef(null),b=e.filter(q=>q.status==="ready").length,V=s||e.length===0||b!==e.length,W=m.length===0,X=e.length>Ar,he=X?e.slice(0,Ar-1):e,Y=e.length-(Ar-1),de=X?0:Math.max(0,Ar-e.length),ye=ue.useCallback(async q=>{const x="data:image/gif;base64,R0lGODlhAQABAIAAAMLCwgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==",G=[];for(const ie of Array.from(q))if(/^(image\/(jpeg|png|gif|svg\+xml)|video\/(mp4|quicktime)|application\/(postscript|pdf))$/.test(ie.type)){if(!e.some(ae=>ae.file.name===ie.name&&ae.file.lastModified===ie.lastModified)){const ae=`file-${Date.now()}-${Math.random()}`;G.push({file:ie,id:ae,status:"compressing",thumbnailDataUrl:x,apiData:null})}}else y(`Unsupported file type: "${ie.name}"`,"warning");if(G.length===0)return;o(ie=>[...ie,...G]);const te=G.length;h({percent:0,status:`Preparing 1/${te}...`,currentFile:1,totalFiles:te});for(let ie=0;ie<G.length;ie++){const ae=G[ie];h(ve=>({...ve,status:`Preparing ${ie+1}/${te}...`,currentFile:ie+1}));try{const ve=await ug(ae.file);o(Se=>Se.map(Ee=>Ee.id===ae.id?{...Ee,thumbnailDataUrl:ve,status:"ready"}:Ee))}catch(ve){console.error(`Processing error for ${ae.file.name}`,ve),o(Se=>Se.map(Ee=>Ee.id===ae.id?{...Ee,status:"error"}:Ee)),y(`Failed to prepare ${ae.file.name}.`,"error")}h(ve=>({...ve,percent:(ie+1)/te*100}))}setTimeout(()=>{s||h({percent:0,status:"Ready.",currentFile:0,totalFiles:0})},1500)},[e,o,h,y,s]),Ce=q=>{q.preventDefault(),M(!0)},J=q=>{q.preventDefault(),M(!1)},re=q=>{q.preventDefault(),M(!1),ye(q.dataTransfer.files)},Pe=()=>{var q;(q=L.current)==null||q.click()},Me=q=>{q.target.files&&ye(q.target.files)},ge=q=>{o(x=>x.filter(G=>G.id!==q))},z=()=>{d(q=>!q)};return C.jsxs("div",{className:"panel-bg p-4 sm:p-6 bg-[#202123] border border-[#363636] rounded-xl shadow-lg relative",children:[C.jsx("h2",{className:"text-xl font-semibold text-white mb-4 sm:mb-6",children:"Upload Files"}),C.jsx("div",{className:"flex overflow-x-auto gap-2 mb-4 pb-2",children:cg.map(q=>C.jsxs("button",{onClick:()=>S(q.key),className:`flex items-center gap-2 px-3 py-1.5 border rounded-lg text-sm font-medium transition-all whitespace-nowrap ${E===q.key?"text-[color:var(--theme-color)] border-[color:var(--theme-color)] bg-[color:var(--theme-color-active-bg)] shadow-[0_0_5px_var(--theme-color-shadow)]":"text-gray-400 border-gray-600 bg-[#2a2b2e] hover:text-white hover:border-gray-500"}`,children:[C.jsx("img",{src:q.logo,alt:`${q.name} Logo`,className:`w-5 h-5 object-contain transition-all ${E!==q.key?"filter grayscale brightness-125":""}`}),C.jsx("span",{children:q.name})]},q.key))}),C.jsxs("div",{onDragOver:Ce,onDragLeave:J,onDrop:re,onClick:Pe,className:`relative w-full border-2 border-dashed rounded-lg transition-colors overflow-hidden cursor-pointer bg-gray-800/20 ${R?"border-[color:var(--theme-color)] bg-[color:var(--theme-color-active-bg)]":"border-gray-600 hover:bg-gray-700/30"}`,children:[C.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-8 gap-2 justify-center items-center p-4 min-h-[160px]",children:e.length===0?C.jsx(dg,{}):C.jsxs(C.Fragment,{children:[he.map(q=>C.jsx(fg,{fileState:q,onRemove:ge},q.id)),X&&C.jsxs("div",{className:"relative w-full aspect-square rounded-lg overflow-hidden checkered-bg shadow-md flex items-center justify-center text-white font-bold text-xl text-center p-2",title:`${Y} more files`,children:[C.jsx("img",{src:e[Ar-1].thumbnailDataUrl,alt:"More files background",className:"absolute inset-0 w-full h-full object-contain filter blur-sm brightness-50"}),C.jsxs("span",{className:"relative z-10",children:["+",Y]})]}),Array.from({length:de}).map((q,x)=>C.jsx("div",{className:"w-full aspect-square rounded-lg bg-[#2a2b2e]/30 border-2 border-dashed border-[#363636]"},`empty-${x}`))]})}),C.jsx("input",{ref:L,onChange:Me,type:"file",className:"hidden",multiple:!0,accept:"image/jpeg,image/png,image/gif,image/svg+xml,video/mp4,video/quicktime,application/postscript,application/pdf"})]}),(i.percent>0||s)&&C.jsxs("div",{className:"mt-6",children:[C.jsxs("div",{className:"flex justify-between text-sm mb-1.5",children:[C.jsx("span",{className:"text-gray-300 font-medium",children:i.status}),C.jsxs("span",{className:"text-[color:var(--theme-color)] font-bold",children:[Math.round(i.percent),"%"]})]}),C.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2.5 overflow-hidden",children:C.jsx("div",{className:"bg-[color:var(--theme-color)] h-2.5 rounded-full transition-all duration-300 ease-out progress-bar-animated relative",style:{width:`${i.percent}%`}})})]}),C.jsxs("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-5 gap-3 sm:gap-4",children:[C.jsxs("button",{onClick:A,className:"flex items-center justify-center space-x-2 py-2.5 px-4 sm:px-5 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg shadow-md transition-colors text-sm sm:text-base",children:[C.jsx("i",{className:"bi bi-trash-fill"}),C.jsx("span",{className:"truncate",children:"Clear All"})]}),C.jsx("button",{onClick:z,disabled:!s,className:"flex items-center justify-center space-x-2 py-2.5 px-4 sm:px-5 bg-yellow-500 hover:bg-yellow-600 text-gray-900 font-medium rounded-lg shadow-md transition-colors text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed",children:u?C.jsxs(C.Fragment,{children:[C.jsx("i",{className:"bi bi-play-fill"}),C.jsx("span",{className:"truncate",children:"Resume"})]}):C.jsxs(C.Fragment,{children:[C.jsx("i",{className:"bi bi-pause-fill"}),C.jsx("span",{className:"truncate",children:"Pause"})]})}),C.jsx("button",{onClick:p,disabled:V,className:"col-span-2 md:col-span-1 flex items-center justify-center space-x-2 py-2.5 px-4 sm:px-5 bg-[color:var(--theme-color)] hover:bg-[color:var(--theme-color-hover)] text-white font-medium rounded-lg shadow-md transition-colors text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed",children:s?C.jsxs(C.Fragment,{children:[C.jsx("i",{className:"bi bi-stars animate-pulse"}),C.jsxs("div",{className:"flex items-center",children:[C.jsx("span",{className:"truncate",children:"Generating"}),C.jsxs("div",{className:"loading-dots ml-2 flex items-center space-x-1",children:[C.jsx("span",{}),C.jsx("span",{}),C.jsx("span",{})]})]})]}):C.jsxs(C.Fragment,{children:[C.jsx("i",{className:"bi bi-stars"}),C.jsx("span",{className:"truncate",children:`Generate (${b})`})]})}),C.jsxs("button",{onClick:P,disabled:W,className:"flex items-center justify-center space-x-2 py-2.5 px-4 sm:px-5 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg shadow-md transition-colors text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed",children:[C.jsx("i",{className:"bi bi-download"}),C.jsx("span",{className:"truncate",children:"Export CSV"})]}),C.jsxs("button",{onClick:N,className:"flex items-center justify-center space-x-2 py-2.5 px-4 sm:px-5 bg-gray-600 hover:bg-gray-700 text-white font-medium rounded-lg shadow-md transition-colors text-sm sm:text-base",children:[C.jsx("i",{className:"bi bi-clock-history"}),C.jsx("span",{className:"truncate",children:"History"})]})]})]})},Bn=t=>typeof t=="string"?t:typeof t=="number"?String(t):t==null?"":typeof t=="object"?t.summary||t.details||JSON.stringify(t):String(t),Td=t=>{const e=Bn(t);return e?e.trim().split(/\s+/).filter(Boolean).length:0},Wi=({onCopy:t,className:e=""})=>C.jsx("button",{onClick:t,className:`text-gray-500 hover:text-[color:var(--theme-color)] transition-colors text-sm ${e}`,title:"Copy to clipboard",children:C.jsx("i",{className:"bi bi-clipboard-fill"})}),mg=({metadata:t,setMetadata:e,showToast:o,onRegenerate:i})=>{const s=d=>{e(p=>p.filter(m=>m.filename!==d)),o(`${d} removed.`,"info")},u=(d,p)=>{const m=Bn(d);if(!m){o(`No ${p.toLowerCase()} to copy.`,"warning");return}navigator.clipboard.writeText(m).then(()=>{o(`${p} copied to clipboard!`,"success")}).catch(h=>{console.error("Failed to copy text: ",h),o("Failed to copy.","error")})};return C.jsxs("div",{id:"results-container",className:"panel-bg p-4 sm:p-6 bg-[#202123] border border-[#363636] rounded-xl shadow-lg",children:[C.jsxs("h2",{className:"text-xl font-semibold text-white mb-4",children:["Generated Metadata (",t.length,")"]}),t.length===0?C.jsx("div",{className:"flex items-center justify-center h-48 rounded-lg bg-gray-800/20 border-2 border-dashed border-gray-600",children:C.jsx("p",{className:"text-gray-500",children:"Results will appear here after generation."})}):C.jsx("div",{className:"space-y-3 max-h-[600px] overflow-y-auto pr-2",children:[...t].reverse().map((d,p)=>{var m,h,y;return C.jsxs("div",{className:"group flex flex-col sm:flex-row items-start gap-4 p-3 bg-[#2a2b2e] rounded-lg transition-colors hover:bg-[#333437]",children:[C.jsxs("div",{className:"flex flex-col gap-2 flex-shrink-0 w-24 sm:w-24",children:[C.jsx("img",{src:d.thumbnailUrl,alt:d.filename,className:"w-24 h-24 object-contain rounded-md bg-[#3b3b3e]"}),d.originalFile&&i&&C.jsxs("button",{onClick:()=>i(d),className:"w-full py-1.5 bg-[#3b3b3e] hover:bg-[color:var(--theme-color)] text-gray-300 hover:text-white text-xs font-medium rounded transition-colors flex items-center justify-center gap-1.5 border border-gray-600 hover:border-[color:var(--theme-color)] shadow-sm",title:"Regenerate Metadata",children:[C.jsx("i",{className:"bi bi-arrow-repeat text-sm"}),C.jsx("span",{children:"Redo"})]})]}),C.jsxs("div",{className:"flex-grow min-w-0",children:[C.jsxs("div",{className:"flex justify-between items-start",children:[C.jsx("p",{className:"text-sm font-medium text-white truncate pr-2",title:d.filename,children:d.filename}),C.jsx("div",{className:"flex items-center space-x-2 flex-shrink-0 opacity-0 group-hover:opacity-100 transition-opacity",children:C.jsx("button",{onClick:()=>s(d.filename),className:"text-gray-500 hover:text-red-500 transition-colors",title:"Delete item",children:C.jsx("i",{className:"bi bi-trash-fill text-lg"})})})]}),d.mode==="metadata"&&C.jsxs("div",{className:"mt-2 space-y-2",children:[C.jsxs("div",{children:[C.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400 mb-0.5",children:[C.jsx("span",{children:"Title"}),C.jsx(Wi,{onCopy:()=>u(d.title,"Title")})]}),C.jsx("p",{className:"text-sm text-gray-300 truncate",title:Bn(d.title),children:Bn(d.title)||"N/A"})]}),C.jsxs("div",{children:[C.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400 mb-0.5",children:[C.jsx("span",{children:"Description"}),C.jsx(Wi,{onCopy:()=>u(d.description,"Description")})]}),C.jsx("p",{className:"text-xs text-gray-400 line-clamp-2",title:Bn(d.description),children:Bn(d.description)})]}),C.jsxs("div",{children:[C.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400 mb-0.5",children:[C.jsx("span",{children:"Keywords"}),C.jsx(Wi,{onCopy:()=>{var E;return u((E=d.keywords)==null?void 0:E.join(", "),"Keywords")}})]}),C.jsx("p",{className:"text-xs text-gray-500 line-clamp-2",title:(m=d.keywords)==null?void 0:m.join(", "),children:((h=d.keywords)==null?void 0:h.join(", "))||"None"})]})]}),d.mode==="prompt"&&C.jsxs("div",{className:"mt-2",children:[C.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400 mb-0.5",children:[C.jsx("span",{children:"Generated Prompt"}),C.jsx(Wi,{onCopy:()=>u(d.description,"Prompt")})]}),C.jsx("p",{className:"text-xs text-gray-300 mt-1 line-clamp-3",title:Bn(d.description),children:Bn(d.description)})]}),C.jsxs("div",{className:"flex items-center gap-3 mt-3 text-xs",children:[d.mode==="metadata"&&C.jsxs("span",{className:"bg-gray-700/50 text-gray-300 px-2 py-0.5 rounded",children:["Title: ",C.jsx("strong",{children:Td(d.title)})," words"]}),C.jsxs("span",{className:"bg-gray-700/50 text-gray-300 px-2 py-0.5 rounded",children:["Desc: ",C.jsx("strong",{children:Td(d.description)})," words"]}),d.mode==="metadata"&&C.jsxs("span",{className:"bg-gray-700/50 text-gray-300 px-2 py-0.5 rounded",children:["Keywords: ",C.jsx("strong",{children:((y=d.keywords)==null?void 0:y.length)||0})]})]})]})]},`${d.filename}-${p}`)})})]})},hg=()=>C.jsx("footer",{className:"bg-[#1f2022] border-t border-gray-700/50 mt-12",children:C.jsxs("div",{className:"container mx-auto px-4 lg:px-6 py-6 flex flex-col md:flex-row justify-between items-center text-sm text-gray-400",children:[C.jsx("p",{children:" 2025 Robi Technology. All rights reserved. Robi Technology Privacy Policy"}),C.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[C.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Facebook"}),C.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"YouTube"})]})]})});var gg={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let yg,vg;function Sg(){return{geminiUrl:yg,vertexUrl:vg}}function Eg(t,e,o,i){var s,u;if(!(t!=null&&t.baseUrl)){const d=Sg();return e?(s=d.vertexUrl)!==null&&s!==void 0?s:o:(u=d.geminiUrl)!==null&&u!==void 0?u:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sn{}function K(t,e){const o=/\{([^}]+)\}/g;return t.replace(o,(i,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const u=e[s];return u!=null?String(u):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function c(t,e,o){for(let u=0;u<e.length-1;u++){const d=e[u];if(d.endsWith("[]")){const p=d.slice(0,-2);if(!(p in t))if(Array.isArray(o))t[p]=Array.from({length:o.length},()=>({}));else throw new Error(`Value must be a list given an array path ${d}`);if(Array.isArray(t[p])){const m=t[p];if(Array.isArray(o))for(let h=0;h<m.length;h++){const y=m[h];c(y,e.slice(u+1),o[h])}else for(const h of m)c(h,e.slice(u+1),o)}return}else if(d.endsWith("[0]")){const p=d.slice(0,-3);p in t||(t[p]=[{}]);const m=t[p];c(m[0],e.slice(u+1),o);return}(!t[d]||typeof t[d]!="object")&&(t[d]={}),t=t[d]}const i=e[e.length-1],s=t[i];if(s!==void 0){if(!o||typeof o=="object"&&Object.keys(o).length===0||o===s)return;if(typeof s=="object"&&typeof o=="object"&&s!==null&&o!==null)Object.assign(s,o);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof o=="object"&&o!==null&&!Array.isArray(o)?Object.assign(t,o):t[i]=o}function a(t,e,o=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return o;const s=e[i];if(s.endsWith("[]")){const u=s.slice(0,-2);if(u in t){const d=t[u];return Array.isArray(d)?d.map(p=>a(p,e.slice(i+1),o)):o}else return o}else t=t[s]}return t}catch(i){if(i instanceof TypeError)return o;throw i}}function Tg(t,e){for(const[o,i]of Object.entries(e)){const s=o.split("."),u=i.split("."),d=new Set;let p=-1;for(let m=0;m<s.length;m++)if(s[m]==="*"){p=m;break}if(p!==-1&&u.length>p)for(let m=p;m<u.length;m++){const h=u[m];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&d.add(h)}sa(t,s,u,0,d)}}function sa(t,e,o,i,s){if(i>=e.length||typeof t!="object"||t===null)return;const u=e[i];if(u.endsWith("[]")){const d=u.slice(0,-2),p=t;if(d in p&&Array.isArray(p[d]))for(const m of p[d])sa(m,e,o,i+1,s)}else if(u==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const d=t,p=Object.keys(d).filter(h=>!h.startsWith("_")&&!s.has(h)),m={};for(const h of p)m[h]=d[h];for(const[h,y]of Object.entries(m)){const E=[];for(const S of o.slice(i))S==="*"?E.push(h):E.push(S);c(d,E,y)}for(const h of p)delete d[h]}}else{const d=t;u in d&&sa(d[u],e,o,i+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ca(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cg(t){const e={},o=a(t,["operationName"]);o!=null&&c(e,["operationName"],o);const i=a(t,["resourceName"]);return i!=null&&c(e,["_url","resourceName"],i),e}function _g(t){const e={},o=a(t,["name"]);o!=null&&c(e,["name"],o);const i=a(t,["metadata"]);i!=null&&c(e,["metadata"],i);const s=a(t,["done"]);s!=null&&c(e,["done"],s);const u=a(t,["error"]);u!=null&&c(e,["error"],u);const d=a(t,["response","generateVideoResponse"]);return d!=null&&c(e,["response"],xg(d)),e}function wg(t){const e={},o=a(t,["name"]);o!=null&&c(e,["name"],o);const i=a(t,["metadata"]);i!=null&&c(e,["metadata"],i);const s=a(t,["done"]);s!=null&&c(e,["done"],s);const u=a(t,["error"]);u!=null&&c(e,["error"],u);const d=a(t,["response"]);return d!=null&&c(e,["response"],Ig(d)),e}function xg(t){const e={},o=a(t,["generatedSamples"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>Ag(d))),c(e,["generatedVideos"],u)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&c(e,["raiMediaFilteredCount"],i);const s=a(t,["raiMediaFilteredReasons"]);return s!=null&&c(e,["raiMediaFilteredReasons"],s),e}function Ig(t){const e={},o=a(t,["videos"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>Ng(d))),c(e,["generatedVideos"],u)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&c(e,["raiMediaFilteredCount"],i);const s=a(t,["raiMediaFilteredReasons"]);return s!=null&&c(e,["raiMediaFilteredReasons"],s),e}function Ag(t){const e={},o=a(t,["video"]);return o!=null&&c(e,["video"],Lg(o)),e}function Ng(t){const e={},o=a(t,["_self"]);return o!=null&&c(e,["video"],Ug(o)),e}function Rg(t){const e={},o=a(t,["operationName"]);return o!=null&&c(e,["_url","operationName"],o),e}function kg(t){const e={},o=a(t,["operationName"]);return o!=null&&c(e,["_url","operationName"],o),e}function Pg(t){const e={},o=a(t,["name"]);o!=null&&c(e,["name"],o);const i=a(t,["metadata"]);i!=null&&c(e,["metadata"],i);const s=a(t,["done"]);s!=null&&c(e,["done"],s);const u=a(t,["error"]);u!=null&&c(e,["error"],u);const d=a(t,["response"]);return d!=null&&c(e,["response"],Mg(d)),e}function Mg(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&c(e,["sdkHttpResponse"],o);const i=a(t,["parent"]);i!=null&&c(e,["parent"],i);const s=a(t,["documentName"]);return s!=null&&c(e,["documentName"],s),e}function ip(t){const e={},o=a(t,["name"]);o!=null&&c(e,["name"],o);const i=a(t,["metadata"]);i!=null&&c(e,["metadata"],i);const s=a(t,["done"]);s!=null&&c(e,["done"],s);const u=a(t,["error"]);u!=null&&c(e,["error"],u);const d=a(t,["response"]);return d!=null&&c(e,["response"],Dg(d)),e}function Dg(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&c(e,["sdkHttpResponse"],o);const i=a(t,["parent"]);i!=null&&c(e,["parent"],i);const s=a(t,["documentName"]);return s!=null&&c(e,["documentName"],s),e}function Lg(t){const e={},o=a(t,["uri"]);o!=null&&c(e,["uri"],o);const i=a(t,["encodedVideo"]);i!=null&&c(e,["videoBytes"],Ca(i));const s=a(t,["encoding"]);return s!=null&&c(e,["mimeType"],s),e}function Ug(t){const e={},o=a(t,["gcsUri"]);o!=null&&c(e,["uri"],o);const i=a(t,["bytesBase64Encoded"]);i!=null&&c(e,["videoBytes"],Ca(i));const s=a(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Cd;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Cd||(Cd={}));var _d;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(_d||(_d={}));var wd;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(wd||(wd={}));var gt;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(gt||(gt={}));var xd;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(xd||(xd={}));var Id;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Id||(Id={}));var Ad;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Ad||(Ad={}));var Nd;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Nd||(Nd={}));var Rd;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Rd||(Rd={}));var kd;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(kd||(kd={}));var Pd;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Pd||(Pd={}));var Md;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(Md||(Md={}));var Dd;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Dd||(Dd={}));var Ld;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Ld||(Ld={}));var Ud;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Ud||(Ud={}));var Fd;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Fd||(Fd={}));var Vd;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Vd||(Vd={}));var Gd;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Gd||(Gd={}));var bd;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(bd||(bd={}));var Hd;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Hd||(Hd={}));var Bd;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Bd||(Bd={}));var ns;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(ns||(ns={}));var qd;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(qd||(qd={}));var Od;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Od||(Od={}));var zd;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(zd||(zd={}));var la;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(la||(la={}));var $d;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})($d||($d={}));var Jd;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Jd||(Jd={}));var aa;(function(t){t.COLLECTION="COLLECTION"})(aa||(aa={}));var Kd;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Kd||(Kd={}));var Wd;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Wd||(Wd={}));var Yd;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Yd||(Yd={}));var Qd;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Qd||(Qd={}));var Xd;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Xd||(Xd={}));var Zd;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Zd||(Zd={}));var jd;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(jd||(jd={}));var ef;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(ef||(ef={}));var tf;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(tf||(tf={}));var nf;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(nf||(nf={}));var of;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(of||(of={}));var rf;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(rf||(rf={}));var sf;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(sf||(sf={}));var lf;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING",t.DISTILLATION="DISTILLATION"})(lf||(lf={}));var af;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(af||(af={}));var uf;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(uf||(uf={}));var cf;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(cf||(cf={}));var df;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(df||(df={}));var ff;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(ff||(ff={}));var pf;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(pf||(pf={}));var mf;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(mf||(mf={}));var hf;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(hf||(hf={}));var gf;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(gf||(gf={}));var yf;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(yf||(yf={}));var vf;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(vf||(vf={}));var Sf;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Sf||(Sf={}));var Ef;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Ef||(Ef={}));var Mo;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Mo||(Mo={}));class ua{constructor(e){const o={};for(const i of e.headers.entries())o[i[0]]=i[1];this.headers=o,this.responseInternal=e}json(){return this.responseInternal.json()}}class Rr{get text(){var e,o,i,s,u,d,p,m;if(((s=(i=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",y=!1;const E=[];for(const S of(m=(p=(d=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content)===null||p===void 0?void 0:p.parts)!==null&&m!==void 0?m:[]){for(const[w,A]of Object.entries(S))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(A!==null||A!==void 0)&&E.push(w);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;y=!0,h+=S.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?h:void 0}get data(){var e,o,i,s,u,d,p,m;if(((s=(i=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const y=[];for(const E of(m=(p=(d=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content)===null||p===void 0?void 0:p.parts)!==null&&m!==void 0?m:[]){for(const[S,w]of Object.entries(E))S!=="inlineData"&&(w!==null||w!==void 0)&&y.push(S);E.inlineData&&typeof E.inlineData.data=="string"&&(h+=atob(E.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,o,i,s,u,d,p,m;if(((s=(i=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(m=(p=(d=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content)===null||p===void 0?void 0:p.parts)===null||m===void 0?void 0:m.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,o,i,s,u,d,p,m,h;if(((s=(i=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(m=(p=(d=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content)===null||p===void 0?void 0:p.parts)===null||m===void 0?void 0:m.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((y==null?void 0:y.length)!==0)return(h=y==null?void 0:y[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,o,i,s,u,d,p,m,h;if(((s=(i=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(m=(p=(d=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content)===null||p===void 0?void 0:p.parts)===null||m===void 0?void 0:m.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((y==null?void 0:y.length)!==0)return(h=y==null?void 0:y[0])===null||h===void 0?void 0:h.output}}class Tf{}class Cf{}class Fg{}class Vg{}class Gg{}class bg{}class _f{}class wf{}class xf{}class Hg{}class os{_fromAPIResponse({apiResponse:e,_isVertexAI:o}){const i=new os;let s;const u=e;return o?s=wg(u):s=_g(u),Object.assign(i,s),i}}class If{}class Af{}class Nf{}class Rf{}class Bg{}class qg{}class Og{}class _a{_fromAPIResponse({apiResponse:e,_isVertexAI:o}){const i=new _a,u=Pg(e);return Object.assign(i,u),i}}class zg{}class $g{}class Jg{}class Kg{}class kf{}class Wg{get text(){var e,o,i;let s="",u=!1;const d=[];for(const p of(i=(o=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&i!==void 0?i:[]){for(const[m,h]of Object.entries(p))m!=="text"&&m!=="thought"&&h!==null&&d.push(m);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;u=!0,s+=p.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?s:void 0}get data(){var e,o,i;let s="";const u=[];for(const d of(i=(o=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&i!==void 0?i:[]){for(const[p,m]of Object.entries(d))p!=="inlineData"&&m!==null&&u.push(p);d.inlineData&&typeof d.inlineData.data=="string"&&(s+=atob(d.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class Yg{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class wa{_fromAPIResponse({apiResponse:e,_isVertexAI:o}){const i=new wa,u=ip(e);return Object.assign(i,u),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ae(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const o=e.split("/",2);return`publishers/${o[0]}/models/${o[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function sp(t,e){const o=Ae(t,e);return o?o.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${o}`:o.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${o}`:o:""}function lp(t){return Array.isArray(t)?t.map(e=>rs(e)):[rs(t)]}function rs(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function ap(t){const e=rs(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function up(t){const e=rs(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Pf(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function cp(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Pf(e)):[Pf(t)]}function ca(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Mf(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Df(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function yt(t){if(t==null)throw new Error("ContentUnion is required");return ca(t)?t:{role:"user",parts:cp(t)}}function xa(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(o=>{const i=yt(o);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const o=yt(e);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]}return Array.isArray(e)?e.map(o=>yt(o)):[yt(e)]}function Ot(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Mf(t)||Df(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[yt(t)]}const e=[],o=[],i=ca(t[0]);for(const s of t){const u=ca(s);if(u!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(u)e.push(s);else{if(Mf(s)||Df(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");o.push(s)}}return i||e.push({role:"user",parts:cp(o)}),e}function Qg(t,e){t.includes("null")&&(e.nullable=!0);const o=t.filter(i=>i!=="null");if(o.length===1)e.type=Object.values(gt).includes(o[0].toUpperCase())?o[0].toUpperCase():gt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of o)e.anyOf.push({type:Object.values(gt).includes(i.toUpperCase())?i.toUpperCase():gt.TYPE_UNSPECIFIED})}}function Lo(t){const e={},o=["items"],i=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const u=t.anyOf;u!=null&&u.length==2&&(u[0].type==="null"?(e.nullable=!0,t=u[1]):u[1].type==="null"&&(e.nullable=!0,t=u[0])),t.type instanceof Array&&Qg(t.type,e);for(const[d,p]of Object.entries(t))if(p!=null)if(d=="type"){if(p==="null")throw new Error("type: null can not be the only possible type for the field.");if(p instanceof Array)continue;e.type=Object.values(gt).includes(p.toUpperCase())?p.toUpperCase():gt.TYPE_UNSPECIFIED}else if(o.includes(d))e[d]=Lo(p);else if(i.includes(d)){const m=[];for(const h of p){if(h.type=="null"){e.nullable=!0;continue}m.push(Lo(h))}e[d]=m}else if(s.includes(d)){const m={};for(const[h,y]of Object.entries(p))m[h]=Lo(y);e[d]=m}else{if(d==="additionalProperties")continue;e[d]=p}return e}function Ia(t){return Lo(t)}function Aa(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Na(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Fo(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Lo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Lo(e.response));return t}function Vo(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const o of t)e.push(o);return e}function Xg(t,e,o,i=1){const s=!e.startsWith(`${o}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${o}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${o}/${e}`:e:s?`${o}/${e}`:e}function En(t,e){if(typeof e!="string")throw new Error("name must be a string");return Xg(t,e,"cachedContents")}function dp(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function qn(t){return Ca(t)}function Zg(t){return t!=null&&typeof t=="object"&&"name"in t}function jg(t){return t!=null&&typeof t=="object"&&"video"in t}function ey(t){return t!=null&&typeof t=="object"&&"uri"in t}function fp(t){var e;let o;if(Zg(t)&&(o=t.name),!(ey(t)&&(o=t.uri,o===void 0))&&!(jg(t)&&(o=(e=t.video)===null||e===void 0?void 0:e.uri,o===void 0))){if(typeof t=="string"&&(o=t),o===void 0)throw new Error("Could not extract file name from the provided input.");if(o.startsWith("https://")){const s=o.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${o}`);o=s[0]}else o.startsWith("files/")&&(o=o.split("files/")[1]);return o}}function pp(t,e){let o;return t.isVertexAI()?o=e?"publishers/google/models":"models":o=e?"models":"tunedModels",o}function mp(t){for(const e of["models","tunedModels","publisherModels"])if(ty(t,e))return t[e];return[]}function ty(t,e){return t!==null&&typeof t=="object"&&e in t}function ny(t,e={}){const o=t,i={name:o.name,description:o.description,parametersJsonSchema:o.inputSchema};return o.outputSchema&&(i.responseJsonSchema=o.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function oy(t,e={}){const o=[],i=new Set;for(const s of t){const u=s.name;if(i.has(u))throw new Error(`Duplicate function name ${u} found in MCP tools. Please ensure function names are unique.`);i.add(u);const d=ny(s,e);d.functionDeclarations&&o.push(...d.functionDeclarations)}return{functionDeclarations:o}}function hp(t,e){let o;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))o={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))o={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))o={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");o={inlinedRequests:e}}else o=e;const i=[o.gcsUri,o.bigqueryUri].filter(Boolean).length,s=[o.inlinedRequests,o.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return o}function ry(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function gp(t){if(typeof t!="object"||t===null)return{};const e=t,o=e.inlinedResponses;if(typeof o!="object"||o===null)return t;const s=o.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let u=!1;for(const d of s){if(typeof d!="object"||d===null)continue;const m=d.response;if(typeof m!="object"||m===null)continue;if(m.embedding!==void 0){u=!0;break}}return u&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Go(t,e){const o=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(o))return o.split("/").pop();throw new Error(`Invalid batch job name: ${o}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(o))return o.split("/").pop();if(/^\d+$/.test(o))return o;throw new Error(`Invalid batch job name: ${o}.`)}function yp(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iy(t){const e={},o=a(t,["responsesFile"]);o!=null&&c(e,["fileName"],o);const i=a(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>by(d))),c(e,["inlinedResponses"],u)}const s=a(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>d)),c(e,["inlinedEmbedContentResponses"],u)}return e}function sy(t){const e={},o=a(t,["predictionsFormat"]);o!=null&&c(e,["format"],o);const i=a(t,["gcsDestination","outputUriPrefix"]);i!=null&&c(e,["gcsUri"],i);const s=a(t,["bigqueryDestination","outputUri"]);return s!=null&&c(e,["bigqueryUri"],s),e}function ly(t){const e={},o=a(t,["format"]);o!=null&&c(e,["predictionsFormat"],o);const i=a(t,["gcsUri"]);i!=null&&c(e,["gcsDestination","outputUriPrefix"],i);const s=a(t,["bigqueryUri"]);if(s!=null&&c(e,["bigqueryDestination","outputUri"],s),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(a(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function es(t){const e={},o=a(t,["name"]);o!=null&&c(e,["name"],o);const i=a(t,["metadata","displayName"]);i!=null&&c(e,["displayName"],i);const s=a(t,["metadata","state"]);s!=null&&c(e,["state"],yp(s));const u=a(t,["metadata","createTime"]);u!=null&&c(e,["createTime"],u);const d=a(t,["metadata","endTime"]);d!=null&&c(e,["endTime"],d);const p=a(t,["metadata","updateTime"]);p!=null&&c(e,["updateTime"],p);const m=a(t,["metadata","model"]);m!=null&&c(e,["model"],m);const h=a(t,["metadata","output"]);return h!=null&&c(e,["dest"],iy(gp(h))),e}function da(t){const e={},o=a(t,["name"]);o!=null&&c(e,["name"],o);const i=a(t,["displayName"]);i!=null&&c(e,["displayName"],i);const s=a(t,["state"]);s!=null&&c(e,["state"],yp(s));const u=a(t,["error"]);u!=null&&c(e,["error"],u);const d=a(t,["createTime"]);d!=null&&c(e,["createTime"],d);const p=a(t,["startTime"]);p!=null&&c(e,["startTime"],p);const m=a(t,["endTime"]);m!=null&&c(e,["endTime"],m);const h=a(t,["updateTime"]);h!=null&&c(e,["updateTime"],h);const y=a(t,["model"]);y!=null&&c(e,["model"],y);const E=a(t,["inputConfig"]);E!=null&&c(e,["src"],ay(E));const S=a(t,["outputConfig"]);S!=null&&c(e,["dest"],sy(gp(S)));const w=a(t,["completionStats"]);return w!=null&&c(e,["completionStats"],w),e}function ay(t){const e={},o=a(t,["instancesFormat"]);o!=null&&c(e,["format"],o);const i=a(t,["gcsSource","uris"]);i!=null&&c(e,["gcsUri"],i);const s=a(t,["bigquerySource","inputUri"]);return s!=null&&c(e,["bigqueryUri"],s),e}function uy(t,e){const o={};if(a(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=a(e,["fileName"]);i!=null&&c(o,["fileName"],i);const s=a(e,["inlinedRequests"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>Gy(t,d))),c(o,["requests","requests"],u)}return o}function cy(t){const e={},o=a(t,["format"]);o!=null&&c(e,["instancesFormat"],o);const i=a(t,["gcsUri"]);i!=null&&c(e,["gcsSource","uris"],i);const s=a(t,["bigqueryUri"]);if(s!=null&&c(e,["bigquerySource","inputUri"],s),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function dy(t){const e={},o=a(t,["data"]);if(o!=null&&c(e,["data"],o),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function fy(t,e){const o={},i=a(e,["name"]);return i!=null&&c(o,["_url","name"],Go(t,i)),o}function py(t,e){const o={},i=a(e,["name"]);return i!=null&&c(o,["_url","name"],Go(t,i)),o}function my(t){const e={},o=a(t,["content"]);o!=null&&c(e,["content"],o);const i=a(t,["citationMetadata"]);i!=null&&c(e,["citationMetadata"],hy(i));const s=a(t,["tokenCount"]);s!=null&&c(e,["tokenCount"],s);const u=a(t,["finishReason"]);u!=null&&c(e,["finishReason"],u);const d=a(t,["avgLogprobs"]);d!=null&&c(e,["avgLogprobs"],d);const p=a(t,["groundingMetadata"]);p!=null&&c(e,["groundingMetadata"],p);const m=a(t,["index"]);m!=null&&c(e,["index"],m);const h=a(t,["logprobsResult"]);h!=null&&c(e,["logprobsResult"],h);const y=a(t,["safetyRatings"]);if(y!=null){let S=y;Array.isArray(S)&&(S=S.map(w=>w)),c(e,["safetyRatings"],S)}const E=a(t,["urlContextMetadata"]);return E!=null&&c(e,["urlContextMetadata"],E),e}function hy(t){const e={},o=a(t,["citationSources"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),c(e,["citations"],i)}return e}function vp(t){const e={},o=a(t,["parts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(u=>Jy(u))),c(e,["parts"],s)}const i=a(t,["role"]);return i!=null&&c(e,["role"],i),e}function gy(t,e){const o={},i=a(t,["displayName"]);if(e!==void 0&&i!=null&&c(e,["batch","displayName"],i),a(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return o}function yy(t,e){const o={},i=a(t,["displayName"]);e!==void 0&&i!=null&&c(e,["displayName"],i);const s=a(t,["dest"]);return e!==void 0&&s!=null&&c(e,["outputConfig"],ly(ry(s))),o}function Lf(t,e){const o={},i=a(e,["model"]);i!=null&&c(o,["_url","model"],Ae(t,i));const s=a(e,["src"]);s!=null&&c(o,["batch","inputConfig"],uy(t,hp(t,s)));const u=a(e,["config"]);return u!=null&&gy(u,o),o}function vy(t,e){const o={},i=a(e,["model"]);i!=null&&c(o,["model"],Ae(t,i));const s=a(e,["src"]);s!=null&&c(o,["inputConfig"],cy(hp(t,s)));const u=a(e,["config"]);return u!=null&&yy(u,o),o}function Sy(t,e){const o={},i=a(t,["displayName"]);return e!==void 0&&i!=null&&c(e,["batch","displayName"],i),o}function Ey(t,e){const o={},i=a(e,["model"]);i!=null&&c(o,["_url","model"],Ae(t,i));const s=a(e,["src"]);s!=null&&c(o,["batch","inputConfig"],Ay(t,s));const u=a(e,["config"]);return u!=null&&Sy(u,o),o}function Ty(t,e){const o={},i=a(e,["name"]);return i!=null&&c(o,["_url","name"],Go(t,i)),o}function Cy(t,e){const o={},i=a(e,["name"]);return i!=null&&c(o,["_url","name"],Go(t,i)),o}function _y(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&c(e,["sdkHttpResponse"],o);const i=a(t,["name"]);i!=null&&c(e,["name"],i);const s=a(t,["done"]);s!=null&&c(e,["done"],s);const u=a(t,["error"]);return u!=null&&c(e,["error"],u),e}function wy(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&c(e,["sdkHttpResponse"],o);const i=a(t,["name"]);i!=null&&c(e,["name"],i);const s=a(t,["done"]);s!=null&&c(e,["done"],s);const u=a(t,["error"]);return u!=null&&c(e,["error"],u),e}function xy(t,e){const o={},i=a(e,["contents"]);if(i!=null){let u=xa(t,i);Array.isArray(u)&&(u=u.map(d=>d)),c(o,["requests[]","request","content"],u)}const s=a(e,["config"]);return s!=null&&(c(o,["_self"],Iy(s,o)),Tg(o,{"requests[].*":"requests[].request.*"})),o}function Iy(t,e){const o={},i=a(t,["taskType"]);e!==void 0&&i!=null&&c(e,["requests[]","taskType"],i);const s=a(t,["title"]);e!==void 0&&s!=null&&c(e,["requests[]","title"],s);const u=a(t,["outputDimensionality"]);if(e!==void 0&&u!=null&&c(e,["requests[]","outputDimensionality"],u),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function Ay(t,e){const o={},i=a(e,["fileName"]);i!=null&&c(o,["file_name"],i);const s=a(e,["inlinedRequests"]);return s!=null&&c(o,["requests"],xy(t,s)),o}function Ny(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=a(t,["fileUri"]);o!=null&&c(e,["fileUri"],o);const i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function Ry(t){const e={},o=a(t,["id"]);o!=null&&c(e,["id"],o);const i=a(t,["args"]);i!=null&&c(e,["args"],i);const s=a(t,["name"]);if(s!=null&&c(e,["name"],s),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ky(t){const e={},o=a(t,["allowedFunctionNames"]);o!=null&&c(e,["allowedFunctionNames"],o);const i=a(t,["mode"]);if(i!=null&&c(e,["mode"],i),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Py(t,e,o){const i={},s=a(e,["systemInstruction"]);o!==void 0&&s!=null&&c(o,["systemInstruction"],vp(yt(s)));const u=a(e,["temperature"]);u!=null&&c(i,["temperature"],u);const d=a(e,["topP"]);d!=null&&c(i,["topP"],d);const p=a(e,["topK"]);p!=null&&c(i,["topK"],p);const m=a(e,["candidateCount"]);m!=null&&c(i,["candidateCount"],m);const h=a(e,["maxOutputTokens"]);h!=null&&c(i,["maxOutputTokens"],h);const y=a(e,["stopSequences"]);y!=null&&c(i,["stopSequences"],y);const E=a(e,["responseLogprobs"]);E!=null&&c(i,["responseLogprobs"],E);const S=a(e,["logprobs"]);S!=null&&c(i,["logprobs"],S);const w=a(e,["presencePenalty"]);w!=null&&c(i,["presencePenalty"],w);const A=a(e,["frequencyPenalty"]);A!=null&&c(i,["frequencyPenalty"],A);const P=a(e,["seed"]);P!=null&&c(i,["seed"],P);const N=a(e,["responseMimeType"]);N!=null&&c(i,["responseMimeType"],N);const R=a(e,["responseSchema"]);R!=null&&c(i,["responseSchema"],Ia(R));const M=a(e,["responseJsonSchema"]);if(M!=null&&c(i,["responseJsonSchema"],M),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const L=a(e,["safetySettings"]);if(o!==void 0&&L!=null){let J=L;Array.isArray(J)&&(J=J.map(re=>Ky(re))),c(o,["safetySettings"],J)}const b=a(e,["tools"]);if(o!==void 0&&b!=null){let J=Vo(b);Array.isArray(J)&&(J=J.map(re=>Yy(Fo(re)))),c(o,["tools"],J)}const V=a(e,["toolConfig"]);if(o!==void 0&&V!=null&&c(o,["toolConfig"],Wy(V)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const W=a(e,["cachedContent"]);o!==void 0&&W!=null&&c(o,["cachedContent"],En(t,W));const X=a(e,["responseModalities"]);X!=null&&c(i,["responseModalities"],X);const he=a(e,["mediaResolution"]);he!=null&&c(i,["mediaResolution"],he);const Y=a(e,["speechConfig"]);if(Y!=null&&c(i,["speechConfig"],Aa(Y)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const de=a(e,["thinkingConfig"]);de!=null&&c(i,["thinkingConfig"],de);const ye=a(e,["imageConfig"]);ye!=null&&c(i,["imageConfig"],Vy(ye));const Ce=a(e,["enableEnhancedCivicAnswers"]);if(Ce!=null&&c(i,["enableEnhancedCivicAnswers"],Ce),a(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function My(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&c(e,["sdkHttpResponse"],o);const i=a(t,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(h=>my(h))),c(e,["candidates"],m)}const s=a(t,["modelVersion"]);s!=null&&c(e,["modelVersion"],s);const u=a(t,["promptFeedback"]);u!=null&&c(e,["promptFeedback"],u);const d=a(t,["responseId"]);d!=null&&c(e,["responseId"],d);const p=a(t,["usageMetadata"]);return p!=null&&c(e,["usageMetadata"],p),e}function Dy(t,e){const o={},i=a(e,["name"]);return i!=null&&c(o,["_url","name"],Go(t,i)),o}function Ly(t,e){const o={},i=a(e,["name"]);return i!=null&&c(o,["_url","name"],Go(t,i)),o}function Uy(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=a(t,["enableWidget"]);return o!=null&&c(e,["enableWidget"],o),e}function Fy(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=a(t,["timeRangeFilter"]);return o!=null&&c(e,["timeRangeFilter"],o),e}function Vy(t){const e={},o=a(t,["aspectRatio"]);o!=null&&c(e,["aspectRatio"],o);const i=a(t,["imageSize"]);if(i!=null&&c(e,["imageSize"],i),a(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Gy(t,e){const o={},i=a(e,["model"]);i!=null&&c(o,["request","model"],Ae(t,i));const s=a(e,["contents"]);if(s!=null){let p=Ot(s);Array.isArray(p)&&(p=p.map(m=>vp(m))),c(o,["request","contents"],p)}const u=a(e,["metadata"]);u!=null&&c(o,["metadata"],u);const d=a(e,["config"]);return d!=null&&c(o,["request","generationConfig"],Py(t,d,a(o,["request"],{}))),o}function by(t){const e={},o=a(t,["response"]);o!=null&&c(e,["response"],My(o));const i=a(t,["metadata"]);i!=null&&c(e,["metadata"],i);const s=a(t,["error"]);return s!=null&&c(e,["error"],s),e}function Hy(t,e){const o={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const s=a(t,["pageToken"]);if(e!==void 0&&s!=null&&c(e,["_query","pageToken"],s),a(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return o}function By(t,e){const o={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const s=a(t,["pageToken"]);e!==void 0&&s!=null&&c(e,["_query","pageToken"],s);const u=a(t,["filter"]);return e!==void 0&&u!=null&&c(e,["_query","filter"],u),o}function qy(t){const e={},o=a(t,["config"]);return o!=null&&Hy(o,e),e}function Oy(t){const e={},o=a(t,["config"]);return o!=null&&By(o,e),e}function zy(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&c(e,["sdkHttpResponse"],o);const i=a(t,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=a(t,["operations"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>es(d))),c(e,["batchJobs"],u)}return e}function $y(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&c(e,["sdkHttpResponse"],o);const i=a(t,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=a(t,["batchPredictionJobs"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>da(d))),c(e,["batchJobs"],u)}return e}function Jy(t){const e={},o=a(t,["mediaResolution"]);o!=null&&c(e,["mediaResolution"],o);const i=a(t,["codeExecutionResult"]);i!=null&&c(e,["codeExecutionResult"],i);const s=a(t,["executableCode"]);s!=null&&c(e,["executableCode"],s);const u=a(t,["fileData"]);u!=null&&c(e,["fileData"],Ny(u));const d=a(t,["functionCall"]);d!=null&&c(e,["functionCall"],Ry(d));const p=a(t,["functionResponse"]);p!=null&&c(e,["functionResponse"],p);const m=a(t,["inlineData"]);m!=null&&c(e,["inlineData"],dy(m));const h=a(t,["text"]);h!=null&&c(e,["text"],h);const y=a(t,["thought"]);y!=null&&c(e,["thought"],y);const E=a(t,["thoughtSignature"]);E!=null&&c(e,["thoughtSignature"],E);const S=a(t,["videoMetadata"]);return S!=null&&c(e,["videoMetadata"],S),e}function Ky(t){const e={},o=a(t,["category"]);if(o!=null&&c(e,["category"],o),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=a(t,["threshold"]);return i!=null&&c(e,["threshold"],i),e}function Wy(t){const e={},o=a(t,["retrievalConfig"]);o!=null&&c(e,["retrievalConfig"],o);const i=a(t,["functionCallingConfig"]);return i!=null&&c(e,["functionCallingConfig"],ky(i)),e}function Yy(t){const e={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=a(t,["computerUse"]);o!=null&&c(e,["computerUse"],o);const i=a(t,["fileSearch"]);i!=null&&c(e,["fileSearch"],i);const s=a(t,["codeExecution"]);if(s!=null&&c(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=a(t,["functionDeclarations"]);if(u!=null){let y=u;Array.isArray(y)&&(y=y.map(E=>E)),c(e,["functionDeclarations"],y)}const d=a(t,["googleMaps"]);d!=null&&c(e,["googleMaps"],Uy(d));const p=a(t,["googleSearch"]);p!=null&&c(e,["googleSearch"],Fy(p));const m=a(t,["googleSearchRetrieval"]);m!=null&&c(e,["googleSearchRetrieval"],m);const h=a(t,["urlContext"]);return h!=null&&c(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var vn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(vn||(vn={}));class ro{constructor(e,o,i,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=o,this.init(e,i,s)}init(e,o,i){var s,u;this.nameInternal=e,this.pageInternal=o[this.nameInternal]||[],this.sdkHttpResponseInternal=o==null?void 0:o.sdkHttpResponse,this.idxInternal=0;let d={config:{}};!i||Object.keys(i).length===0?d={config:{}}:typeof i=="object"?d=Object.assign({},i):d=i,d.config&&(d.config.pageToken=o.nextPageToken),this.paramsInternal=d,this.pageInternalSize=(u=(s=d.config)===null||s===void 0?void 0:s.pageSize)!==null&&u!==void 0?u:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qy extends Sn{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new ro(vn.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(o),o),this.create=async o=>(this.apiClient.isVertexAI()&&(o.config=this.formatDestination(o.src,o.config)),this.createInternal(o)),this.createEmbeddings=async o=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(o)}}createInlinedGenerateContentRequest(e){const o=Lf(this.apiClient,e),i=o._url,s=K("{model}:batchGenerateContent",i),p=o.batch.inputConfig.requests,m=p.requests,h=[];for(const y of m){const E=Object.assign({},y);if(E.systemInstruction){const S=E.systemInstruction;delete E.systemInstruction;const w=E.request;w.systemInstruction=S,E.request=w}h.push(E)}return p.requests=h,delete o.config,delete o._url,delete o._query,{path:s,body:o}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,o){const i=o?Object.assign({},o):{},s=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${s}`),i.dest===void 0){const u=this.getGcsUri(e),d=this.getBigqueryUri(e);if(u)u.endsWith(".jsonl")?i.dest=`${u.slice(0,-6)}/dest`:i.dest=`${u}_dest_${s}`;else if(d)i.dest=`${d}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var o,i,s,u;let d,p="",m={};if(this.apiClient.isVertexAI()){const h=vy(this.apiClient,e);return p=K("batchPredictionJobs",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),d.then(y=>da(y))}else{const h=Lf(this.apiClient,e);return p=K("{model}:batchGenerateContent",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(y=>y.json()),d.then(y=>es(y))}}async createEmbeddingsInternal(e){var o,i;let s,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Ey(this.apiClient,e);return u=K("{model}:asyncBatchEmbedContent",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>es(m))}}async get(e){var o,i,s,u;let d,p="",m={};if(this.apiClient.isVertexAI()){const h=Ly(this.apiClient,e);return p=K("batchPredictionJobs/{name}",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),d.then(y=>da(y))}else{const h=Dy(this.apiClient,e);return p=K("batches/{name}",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(y=>y.json()),d.then(y=>es(y))}}async cancel(e){var o,i,s,u;let d="",p={};if(this.apiClient.isVertexAI()){const m=py(this.apiClient,e);d=K("batchPredictionJobs/{name}:cancel",m._url),p=m._query,delete m._url,delete m._query,await this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const m=fy(this.apiClient,e);d=K("batches/{name}:cancel",m._url),p=m._query,delete m._url,delete m._query,await this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal})}}async listInternal(e){var o,i,s,u;let d,p="",m={};if(this.apiClient.isVertexAI()){const h=Oy(e);return p=K("batchPredictionJobs",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:y.headers},S})),d.then(y=>{const E=$y(y),S=new kf;return Object.assign(S,E),S})}else{const h=qy(e);return p=K("batches",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(y=>y.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:y.headers},S})),d.then(y=>{const E=zy(y),S=new kf;return Object.assign(S,E),S})}}async delete(e){var o,i,s,u;let d,p="",m={};if(this.apiClient.isVertexAI()){const h=Cy(this.apiClient,e);return p=K("batchPredictionJobs/{name}",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:y.headers},S})),d.then(y=>wy(y))}else{const h=Ty(this.apiClient,e);return p=K("batches/{name}",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(y=>y.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:y.headers},S})),d.then(y=>_y(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xy(t){const e={},o=a(t,["data"]);if(o!=null&&c(e,["data"],o),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function Uf(t){const e={},o=a(t,["parts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(u=>Ev(u))),c(e,["parts"],s)}const i=a(t,["role"]);return i!=null&&c(e,["role"],i),e}function Zy(t,e){const o={},i=a(t,["ttl"]);e!==void 0&&i!=null&&c(e,["ttl"],i);const s=a(t,["expireTime"]);e!==void 0&&s!=null&&c(e,["expireTime"],s);const u=a(t,["displayName"]);e!==void 0&&u!=null&&c(e,["displayName"],u);const d=a(t,["contents"]);if(e!==void 0&&d!=null){let y=Ot(d);Array.isArray(y)&&(y=y.map(E=>Uf(E))),c(e,["contents"],y)}const p=a(t,["systemInstruction"]);e!==void 0&&p!=null&&c(e,["systemInstruction"],Uf(yt(p)));const m=a(t,["tools"]);if(e!==void 0&&m!=null){let y=m;Array.isArray(y)&&(y=y.map(E=>Cv(E))),c(e,["tools"],y)}const h=a(t,["toolConfig"]);if(e!==void 0&&h!=null&&c(e,["toolConfig"],Tv(h)),a(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return o}function jy(t,e){const o={},i=a(t,["ttl"]);e!==void 0&&i!=null&&c(e,["ttl"],i);const s=a(t,["expireTime"]);e!==void 0&&s!=null&&c(e,["expireTime"],s);const u=a(t,["displayName"]);e!==void 0&&u!=null&&c(e,["displayName"],u);const d=a(t,["contents"]);if(e!==void 0&&d!=null){let E=Ot(d);Array.isArray(E)&&(E=E.map(S=>S)),c(e,["contents"],E)}const p=a(t,["systemInstruction"]);e!==void 0&&p!=null&&c(e,["systemInstruction"],yt(p));const m=a(t,["tools"]);if(e!==void 0&&m!=null){let E=m;Array.isArray(E)&&(E=E.map(S=>_v(S))),c(e,["tools"],E)}const h=a(t,["toolConfig"]);e!==void 0&&h!=null&&c(e,["toolConfig"],h);const y=a(t,["kmsKeyName"]);return e!==void 0&&y!=null&&c(e,["encryption_spec","kmsKeyName"],y),o}function ev(t,e){const o={},i=a(e,["model"]);i!=null&&c(o,["model"],sp(t,i));const s=a(e,["config"]);return s!=null&&Zy(s,o),o}function tv(t,e){const o={},i=a(e,["model"]);i!=null&&c(o,["model"],sp(t,i));const s=a(e,["config"]);return s!=null&&jy(s,o),o}function nv(t,e){const o={},i=a(e,["name"]);return i!=null&&c(o,["_url","name"],En(t,i)),o}function ov(t,e){const o={},i=a(e,["name"]);return i!=null&&c(o,["_url","name"],En(t,i)),o}function rv(t){const e={},o=a(t,["sdkHttpResponse"]);return o!=null&&c(e,["sdkHttpResponse"],o),e}function iv(t){const e={},o=a(t,["sdkHttpResponse"]);return o!=null&&c(e,["sdkHttpResponse"],o),e}function sv(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=a(t,["fileUri"]);o!=null&&c(e,["fileUri"],o);const i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function lv(t){const e={},o=a(t,["id"]);o!=null&&c(e,["id"],o);const i=a(t,["args"]);i!=null&&c(e,["args"],i);const s=a(t,["name"]);if(s!=null&&c(e,["name"],s),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function av(t){const e={},o=a(t,["allowedFunctionNames"]);o!=null&&c(e,["allowedFunctionNames"],o);const i=a(t,["mode"]);if(i!=null&&c(e,["mode"],i),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function uv(t){const e={},o=a(t,["description"]);o!=null&&c(e,["description"],o);const i=a(t,["name"]);i!=null&&c(e,["name"],i);const s=a(t,["parameters"]);s!=null&&c(e,["parameters"],s);const u=a(t,["parametersJsonSchema"]);u!=null&&c(e,["parametersJsonSchema"],u);const d=a(t,["response"]);d!=null&&c(e,["response"],d);const p=a(t,["responseJsonSchema"]);if(p!=null&&c(e,["responseJsonSchema"],p),a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function cv(t,e){const o={},i=a(e,["name"]);return i!=null&&c(o,["_url","name"],En(t,i)),o}function dv(t,e){const o={},i=a(e,["name"]);return i!=null&&c(o,["_url","name"],En(t,i)),o}function fv(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=a(t,["enableWidget"]);return o!=null&&c(e,["enableWidget"],o),e}function pv(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=a(t,["timeRangeFilter"]);return o!=null&&c(e,["timeRangeFilter"],o),e}function mv(t,e){const o={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const s=a(t,["pageToken"]);return e!==void 0&&s!=null&&c(e,["_query","pageToken"],s),o}function hv(t,e){const o={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const s=a(t,["pageToken"]);return e!==void 0&&s!=null&&c(e,["_query","pageToken"],s),o}function gv(t){const e={},o=a(t,["config"]);return o!=null&&mv(o,e),e}function yv(t){const e={},o=a(t,["config"]);return o!=null&&hv(o,e),e}function vv(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&c(e,["sdkHttpResponse"],o);const i=a(t,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=a(t,["cachedContents"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>d)),c(e,["cachedContents"],u)}return e}function Sv(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&c(e,["sdkHttpResponse"],o);const i=a(t,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=a(t,["cachedContents"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>d)),c(e,["cachedContents"],u)}return e}function Ev(t){const e={},o=a(t,["mediaResolution"]);o!=null&&c(e,["mediaResolution"],o);const i=a(t,["codeExecutionResult"]);i!=null&&c(e,["codeExecutionResult"],i);const s=a(t,["executableCode"]);s!=null&&c(e,["executableCode"],s);const u=a(t,["fileData"]);u!=null&&c(e,["fileData"],sv(u));const d=a(t,["functionCall"]);d!=null&&c(e,["functionCall"],lv(d));const p=a(t,["functionResponse"]);p!=null&&c(e,["functionResponse"],p);const m=a(t,["inlineData"]);m!=null&&c(e,["inlineData"],Xy(m));const h=a(t,["text"]);h!=null&&c(e,["text"],h);const y=a(t,["thought"]);y!=null&&c(e,["thought"],y);const E=a(t,["thoughtSignature"]);E!=null&&c(e,["thoughtSignature"],E);const S=a(t,["videoMetadata"]);return S!=null&&c(e,["videoMetadata"],S),e}function Tv(t){const e={},o=a(t,["retrievalConfig"]);o!=null&&c(e,["retrievalConfig"],o);const i=a(t,["functionCallingConfig"]);return i!=null&&c(e,["functionCallingConfig"],av(i)),e}function Cv(t){const e={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=a(t,["computerUse"]);o!=null&&c(e,["computerUse"],o);const i=a(t,["fileSearch"]);i!=null&&c(e,["fileSearch"],i);const s=a(t,["codeExecution"]);if(s!=null&&c(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=a(t,["functionDeclarations"]);if(u!=null){let y=u;Array.isArray(y)&&(y=y.map(E=>E)),c(e,["functionDeclarations"],y)}const d=a(t,["googleMaps"]);d!=null&&c(e,["googleMaps"],fv(d));const p=a(t,["googleSearch"]);p!=null&&c(e,["googleSearch"],pv(p));const m=a(t,["googleSearchRetrieval"]);m!=null&&c(e,["googleSearchRetrieval"],m);const h=a(t,["urlContext"]);return h!=null&&c(e,["urlContext"],h),e}function _v(t){const e={},o=a(t,["retrieval"]);o!=null&&c(e,["retrieval"],o);const i=a(t,["computerUse"]);if(i!=null&&c(e,["computerUse"],i),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=a(t,["codeExecution"]);s!=null&&c(e,["codeExecution"],s);const u=a(t,["enterpriseWebSearch"]);u!=null&&c(e,["enterpriseWebSearch"],u);const d=a(t,["functionDeclarations"]);if(d!=null){let E=d;Array.isArray(E)&&(E=E.map(S=>uv(S))),c(e,["functionDeclarations"],E)}const p=a(t,["googleMaps"]);p!=null&&c(e,["googleMaps"],p);const m=a(t,["googleSearch"]);m!=null&&c(e,["googleSearch"],m);const h=a(t,["googleSearchRetrieval"]);h!=null&&c(e,["googleSearchRetrieval"],h);const y=a(t,["urlContext"]);return y!=null&&c(e,["urlContext"],y),e}function wv(t,e){const o={},i=a(t,["ttl"]);e!==void 0&&i!=null&&c(e,["ttl"],i);const s=a(t,["expireTime"]);return e!==void 0&&s!=null&&c(e,["expireTime"],s),o}function xv(t,e){const o={},i=a(t,["ttl"]);e!==void 0&&i!=null&&c(e,["ttl"],i);const s=a(t,["expireTime"]);return e!==void 0&&s!=null&&c(e,["expireTime"],s),o}function Iv(t,e){const o={},i=a(e,["name"]);i!=null&&c(o,["_url","name"],En(t,i));const s=a(e,["config"]);return s!=null&&wv(s,o),o}function Av(t,e){const o={},i=a(e,["name"]);i!=null&&c(o,["_url","name"],En(t,i));const s=a(e,["config"]);return s!=null&&xv(s,o),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nv extends Sn{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new ro(vn.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(o),o)}async create(e){var o,i,s,u;let d,p="",m={};if(this.apiClient.isVertexAI()){const h=tv(this.apiClient,e);return p=K("cachedContents",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),d.then(y=>y)}else{const h=ev(this.apiClient,e);return p=K("cachedContents",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(y=>y.json()),d.then(y=>y)}}async get(e){var o,i,s,u;let d,p="",m={};if(this.apiClient.isVertexAI()){const h=dv(this.apiClient,e);return p=K("{name}",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),d.then(y=>y)}else{const h=cv(this.apiClient,e);return p=K("{name}",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(y=>y.json()),d.then(y=>y)}}async delete(e){var o,i,s,u;let d,p="",m={};if(this.apiClient.isVertexAI()){const h=ov(this.apiClient,e);return p=K("{name}",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:y.headers},S})),d.then(y=>{const E=iv(y),S=new Nf;return Object.assign(S,E),S})}else{const h=nv(this.apiClient,e);return p=K("{name}",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(y=>y.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:y.headers},S})),d.then(y=>{const E=rv(y),S=new Nf;return Object.assign(S,E),S})}}async update(e){var o,i,s,u;let d,p="",m={};if(this.apiClient.isVertexAI()){const h=Av(this.apiClient,e);return p=K("{name}",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),d.then(y=>y)}else{const h=Iv(this.apiClient,e);return p=K("{name}",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(y=>y.json()),d.then(y=>y)}}async listInternal(e){var o,i,s,u;let d,p="",m={};if(this.apiClient.isVertexAI()){const h=yv(e);return p=K("cachedContents",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:y.headers},S})),d.then(y=>{const E=Sv(y),S=new Rf;return Object.assign(S,E),S})}else{const h=gv(e);return p=K("cachedContents",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(y=>y.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:y.headers},S})),d.then(y=>{const E=vv(y),S=new Rf;return Object.assign(S,E),S})}}}function is(t,e){var o={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(o[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(o[i[s]]=t[i[s]]);return o}function Ff(t){var e=typeof Symbol=="function"&&Symbol.iterator,o=e&&t[e],i=0;if(o)return o.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function pe(t){return this instanceof pe?(this.v=t,this):new pe(t)}function Zt(t,e,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=o.apply(t,e||[]),s,u=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",d),s[Symbol.asyncIterator]=function(){return this},s;function d(w){return function(A){return Promise.resolve(A).then(w,E)}}function p(w,A){i[w]&&(s[w]=function(P){return new Promise(function(N,R){u.push([w,P,N,R])>1||m(w,P)})},A&&(s[w]=A(s[w])))}function m(w,A){try{h(i[w](A))}catch(P){S(u[0][3],P)}}function h(w){w.value instanceof pe?Promise.resolve(w.value.v).then(y,E):S(u[0][2],w)}function y(w){m("next",w)}function E(w){m("throw",w)}function S(w,A){w(A),u.shift(),u.length&&m(u[0][0],u[0][1])}}function jt(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],o;return e?e.call(t):(t=typeof Ff=="function"?Ff(t):t[Symbol.iterator](),o={},i("next"),i("throw"),i("return"),o[Symbol.asyncIterator]=function(){return this},o);function i(u){o[u]=t[u]&&function(d){return new Promise(function(p,m){d=t[u](d),s(p,m,d.done,d.value)})}}function s(u,d,p,m){Promise.resolve(m).then(function(h){u({value:h,done:p})},d)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rv(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const o=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return o===void 0?!1:Sp(o)}function Sp(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function kv(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Vf(t){if(t===void 0||t.length===0)return[];const e=[],o=t.length;let i=0;for(;i<o;)if(t[i].role==="user")e.push(t[i]),i++;else{const s=[];let u=!0;for(;i<o&&t[i].role==="model";)s.push(t[i]),u&&!Sp(t[i])&&(u=!1),i++;u?e.push(...s):e.pop()}return e}class Pv{constructor(e,o){this.modelsModule=e,this.apiClient=o}create(e){return new Mv(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Mv{constructor(e,o,i,s={},u=[]){this.apiClient=e,this.modelsModule=o,this.model=i,this.config=s,this.history=u,this.sendPromise=Promise.resolve(),kv(u)}async sendMessage(e){var o;await this.sendPromise;const i=yt(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(o=e.config)!==null&&o!==void 0?o:this.config});return this.sendPromise=(async()=>{var u,d,p;const m=await s,h=(d=(u=m.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content,y=m.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let S=[];y!=null&&(S=(p=y.slice(E))!==null&&p!==void 0?p:[]);const w=h?[h]:[];this.recordHistory(i,w,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var o;await this.sendPromise;const i=yt(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(o=e.config)!==null&&o!==void 0?o:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const u=await s;return this.processStreamResponse(u,i)}getHistory(e=!1){const o=e?Vf(this.history):this.history;return structuredClone(o)}processStreamResponse(e,o){return Zt(this,arguments,function*(){var s,u,d,p,m,h;const y=[];try{for(var E=!0,S=jt(e),w;w=yield pe(S.next()),s=w.done,!s;E=!0){p=w.value,E=!1;const A=p;if(Rv(A)){const P=(h=(m=A.candidates)===null||m===void 0?void 0:m[0])===null||h===void 0?void 0:h.content;P!==void 0&&y.push(P)}yield yield pe(A)}}catch(A){u={error:A}}finally{try{!E&&!s&&(d=S.return)&&(yield pe(d.call(S)))}finally{if(u)throw u.error}}this.recordHistory(o,y)})}recordHistory(e,o,i){let s=[];o.length>0&&o.every(u=>u.role!==void 0)?s=o:s.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Vf(i)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dr extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Dr.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dv(t){const e={},o=a(t,["file"]);return o!=null&&c(e,["file"],o),e}function Lv(t){const e={},o=a(t,["sdkHttpResponse"]);return o!=null&&c(e,["sdkHttpResponse"],o),e}function Uv(t){const e={},o=a(t,["name"]);return o!=null&&c(e,["_url","file"],fp(o)),e}function Fv(t){const e={},o=a(t,["sdkHttpResponse"]);return o!=null&&c(e,["sdkHttpResponse"],o),e}function Vv(t){const e={},o=a(t,["name"]);return o!=null&&c(e,["_url","file"],fp(o)),e}function Gv(t){const e={},o=a(t,["uris"]);return o!=null&&c(e,["uris"],o),e}function bv(t,e){const o={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const s=a(t,["pageToken"]);return e!==void 0&&s!=null&&c(e,["_query","pageToken"],s),o}function Hv(t){const e={},o=a(t,["config"]);return o!=null&&bv(o,e),e}function Bv(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&c(e,["sdkHttpResponse"],o);const i=a(t,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=a(t,["files"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>d)),c(e,["files"],u)}return e}function qv(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&c(e,["sdkHttpResponse"],o);const i=a(t,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>u)),c(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ov extends Sn{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new ro(vn.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(o),o)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(o=>o)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var o,i;let s,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Hv(e);return u=K("files",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:m.headers},y})),s.then(m=>{const h=Bv(m),y=new zg;return Object.assign(y,h),y})}}async createInternal(e){var o,i;let s,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Dv(e);return u=K("upload/v1beta/files",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>{const h=Lv(m),y=new $g;return Object.assign(y,h),y})}}async get(e){var o,i;let s,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Vv(e);return u=K("files/{file}",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>m)}}async delete(e){var o,i;let s,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Uv(e);return u=K("files/{file}",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:m.headers},y})),s.then(m=>{const h=Fv(m),y=new Jg;return Object.assign(y,h),y})}}async registerFilesInternal(e){var o,i;let s,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Gv(e);return u=K("files:register",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>{const h=qv(m),y=new Kg;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ts(t){const e={},o=a(t,["data"]);if(o!=null&&c(e,["data"],o),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function zv(t){const e={},o=a(t,["parts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(u=>s0(u))),c(e,["parts"],s)}const i=a(t,["role"]);return i!=null&&c(e,["role"],i),e}function $v(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=a(t,["fileUri"]);o!=null&&c(e,["fileUri"],o);const i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function Jv(t){const e={},o=a(t,["id"]);o!=null&&c(e,["id"],o);const i=a(t,["args"]);i!=null&&c(e,["args"],i);const s=a(t,["name"]);if(s!=null&&c(e,["name"],s),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Kv(t){const e={},o=a(t,["description"]);o!=null&&c(e,["description"],o);const i=a(t,["name"]);i!=null&&c(e,["name"],i);const s=a(t,["parameters"]);s!=null&&c(e,["parameters"],s);const u=a(t,["parametersJsonSchema"]);u!=null&&c(e,["parametersJsonSchema"],u);const d=a(t,["response"]);d!=null&&c(e,["response"],d);const p=a(t,["responseJsonSchema"]);if(p!=null&&c(e,["responseJsonSchema"],p),a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Wv(t){const e={},o=a(t,["modelSelectionConfig"]);o!=null&&c(e,["modelConfig"],o);const i=a(t,["responseJsonSchema"]);i!=null&&c(e,["responseJsonSchema"],i);const s=a(t,["audioTimestamp"]);s!=null&&c(e,["audioTimestamp"],s);const u=a(t,["candidateCount"]);u!=null&&c(e,["candidateCount"],u);const d=a(t,["enableAffectiveDialog"]);d!=null&&c(e,["enableAffectiveDialog"],d);const p=a(t,["frequencyPenalty"]);p!=null&&c(e,["frequencyPenalty"],p);const m=a(t,["logprobs"]);m!=null&&c(e,["logprobs"],m);const h=a(t,["maxOutputTokens"]);h!=null&&c(e,["maxOutputTokens"],h);const y=a(t,["mediaResolution"]);y!=null&&c(e,["mediaResolution"],y);const E=a(t,["presencePenalty"]);E!=null&&c(e,["presencePenalty"],E);const S=a(t,["responseLogprobs"]);S!=null&&c(e,["responseLogprobs"],S);const w=a(t,["responseMimeType"]);w!=null&&c(e,["responseMimeType"],w);const A=a(t,["responseModalities"]);A!=null&&c(e,["responseModalities"],A);const P=a(t,["responseSchema"]);P!=null&&c(e,["responseSchema"],P);const N=a(t,["routingConfig"]);N!=null&&c(e,["routingConfig"],N);const R=a(t,["seed"]);R!=null&&c(e,["seed"],R);const M=a(t,["speechConfig"]);M!=null&&c(e,["speechConfig"],M);const L=a(t,["stopSequences"]);L!=null&&c(e,["stopSequences"],L);const b=a(t,["temperature"]);b!=null&&c(e,["temperature"],b);const V=a(t,["thinkingConfig"]);V!=null&&c(e,["thinkingConfig"],V);const W=a(t,["topK"]);W!=null&&c(e,["topK"],W);const X=a(t,["topP"]);if(X!=null&&c(e,["topP"],X),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Yv(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=a(t,["enableWidget"]);return o!=null&&c(e,["enableWidget"],o),e}function Qv(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=a(t,["timeRangeFilter"]);return o!=null&&c(e,["timeRangeFilter"],o),e}function Xv(t,e){const o={},i=a(t,["generationConfig"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig"],i);const s=a(t,["responseModalities"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","responseModalities"],s);const u=a(t,["temperature"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","temperature"],u);const d=a(t,["topP"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","topP"],d);const p=a(t,["topK"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","topK"],p);const m=a(t,["maxOutputTokens"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","maxOutputTokens"],m);const h=a(t,["mediaResolution"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","mediaResolution"],h);const y=a(t,["seed"]);e!==void 0&&y!=null&&c(e,["setup","generationConfig","seed"],y);const E=a(t,["speechConfig"]);e!==void 0&&E!=null&&c(e,["setup","generationConfig","speechConfig"],Na(E));const S=a(t,["thinkingConfig"]);e!==void 0&&S!=null&&c(e,["setup","generationConfig","thinkingConfig"],S);const w=a(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],w);const A=a(t,["systemInstruction"]);e!==void 0&&A!=null&&c(e,["setup","systemInstruction"],zv(yt(A)));const P=a(t,["tools"]);if(e!==void 0&&P!=null){let W=Vo(P);Array.isArray(W)&&(W=W.map(X=>a0(Fo(X)))),c(e,["setup","tools"],W)}const N=a(t,["sessionResumption"]);e!==void 0&&N!=null&&c(e,["setup","sessionResumption"],l0(N));const R=a(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&c(e,["setup","inputAudioTranscription"],R);const M=a(t,["outputAudioTranscription"]);e!==void 0&&M!=null&&c(e,["setup","outputAudioTranscription"],M);const L=a(t,["realtimeInputConfig"]);e!==void 0&&L!=null&&c(e,["setup","realtimeInputConfig"],L);const b=a(t,["contextWindowCompression"]);e!==void 0&&b!=null&&c(e,["setup","contextWindowCompression"],b);const V=a(t,["proactivity"]);if(e!==void 0&&V!=null&&c(e,["setup","proactivity"],V),a(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function Zv(t,e){const o={},i=a(t,["generationConfig"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig"],Wv(i));const s=a(t,["responseModalities"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","responseModalities"],s);const u=a(t,["temperature"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","temperature"],u);const d=a(t,["topP"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","topP"],d);const p=a(t,["topK"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","topK"],p);const m=a(t,["maxOutputTokens"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","maxOutputTokens"],m);const h=a(t,["mediaResolution"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","mediaResolution"],h);const y=a(t,["seed"]);e!==void 0&&y!=null&&c(e,["setup","generationConfig","seed"],y);const E=a(t,["speechConfig"]);e!==void 0&&E!=null&&c(e,["setup","generationConfig","speechConfig"],Na(E));const S=a(t,["thinkingConfig"]);e!==void 0&&S!=null&&c(e,["setup","generationConfig","thinkingConfig"],S);const w=a(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],w);const A=a(t,["systemInstruction"]);e!==void 0&&A!=null&&c(e,["setup","systemInstruction"],yt(A));const P=a(t,["tools"]);if(e!==void 0&&P!=null){let X=Vo(P);Array.isArray(X)&&(X=X.map(he=>u0(Fo(he)))),c(e,["setup","tools"],X)}const N=a(t,["sessionResumption"]);e!==void 0&&N!=null&&c(e,["setup","sessionResumption"],N);const R=a(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&c(e,["setup","inputAudioTranscription"],R);const M=a(t,["outputAudioTranscription"]);e!==void 0&&M!=null&&c(e,["setup","outputAudioTranscription"],M);const L=a(t,["realtimeInputConfig"]);e!==void 0&&L!=null&&c(e,["setup","realtimeInputConfig"],L);const b=a(t,["contextWindowCompression"]);e!==void 0&&b!=null&&c(e,["setup","contextWindowCompression"],b);const V=a(t,["proactivity"]);e!==void 0&&V!=null&&c(e,["setup","proactivity"],V);const W=a(t,["explicitVadSignal"]);return e!==void 0&&W!=null&&c(e,["setup","explicitVadSignal"],W),o}function jv(t,e){const o={},i=a(e,["model"]);i!=null&&c(o,["setup","model"],Ae(t,i));const s=a(e,["config"]);return s!=null&&c(o,["config"],Xv(s,o)),o}function e0(t,e){const o={},i=a(e,["model"]);i!=null&&c(o,["setup","model"],Ae(t,i));const s=a(e,["config"]);return s!=null&&c(o,["config"],Zv(s,o)),o}function t0(t){const e={},o=a(t,["musicGenerationConfig"]);return o!=null&&c(e,["musicGenerationConfig"],o),e}function n0(t){const e={},o=a(t,["weightedPrompts"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),c(e,["weightedPrompts"],i)}return e}function o0(t){const e={},o=a(t,["media"]);if(o!=null){let h=lp(o);Array.isArray(h)&&(h=h.map(y=>ts(y))),c(e,["mediaChunks"],h)}const i=a(t,["audio"]);i!=null&&c(e,["audio"],ts(up(i)));const s=a(t,["audioStreamEnd"]);s!=null&&c(e,["audioStreamEnd"],s);const u=a(t,["video"]);u!=null&&c(e,["video"],ts(ap(u)));const d=a(t,["text"]);d!=null&&c(e,["text"],d);const p=a(t,["activityStart"]);p!=null&&c(e,["activityStart"],p);const m=a(t,["activityEnd"]);return m!=null&&c(e,["activityEnd"],m),e}function r0(t){const e={},o=a(t,["media"]);if(o!=null){let h=lp(o);Array.isArray(h)&&(h=h.map(y=>y)),c(e,["mediaChunks"],h)}const i=a(t,["audio"]);i!=null&&c(e,["audio"],up(i));const s=a(t,["audioStreamEnd"]);s!=null&&c(e,["audioStreamEnd"],s);const u=a(t,["video"]);u!=null&&c(e,["video"],ap(u));const d=a(t,["text"]);d!=null&&c(e,["text"],d);const p=a(t,["activityStart"]);p!=null&&c(e,["activityStart"],p);const m=a(t,["activityEnd"]);return m!=null&&c(e,["activityEnd"],m),e}function i0(t){const e={},o=a(t,["setupComplete"]);o!=null&&c(e,["setupComplete"],o);const i=a(t,["serverContent"]);i!=null&&c(e,["serverContent"],i);const s=a(t,["toolCall"]);s!=null&&c(e,["toolCall"],s);const u=a(t,["toolCallCancellation"]);u!=null&&c(e,["toolCallCancellation"],u);const d=a(t,["usageMetadata"]);d!=null&&c(e,["usageMetadata"],c0(d));const p=a(t,["goAway"]);p!=null&&c(e,["goAway"],p);const m=a(t,["sessionResumptionUpdate"]);m!=null&&c(e,["sessionResumptionUpdate"],m);const h=a(t,["voiceActivityDetectionSignal"]);h!=null&&c(e,["voiceActivityDetectionSignal"],h);const y=a(t,["voiceActivity"]);return y!=null&&c(e,["voiceActivity"],d0(y)),e}function s0(t){const e={},o=a(t,["mediaResolution"]);o!=null&&c(e,["mediaResolution"],o);const i=a(t,["codeExecutionResult"]);i!=null&&c(e,["codeExecutionResult"],i);const s=a(t,["executableCode"]);s!=null&&c(e,["executableCode"],s);const u=a(t,["fileData"]);u!=null&&c(e,["fileData"],$v(u));const d=a(t,["functionCall"]);d!=null&&c(e,["functionCall"],Jv(d));const p=a(t,["functionResponse"]);p!=null&&c(e,["functionResponse"],p);const m=a(t,["inlineData"]);m!=null&&c(e,["inlineData"],ts(m));const h=a(t,["text"]);h!=null&&c(e,["text"],h);const y=a(t,["thought"]);y!=null&&c(e,["thought"],y);const E=a(t,["thoughtSignature"]);E!=null&&c(e,["thoughtSignature"],E);const S=a(t,["videoMetadata"]);return S!=null&&c(e,["videoMetadata"],S),e}function l0(t){const e={},o=a(t,["handle"]);if(o!=null&&c(e,["handle"],o),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function a0(t){const e={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=a(t,["computerUse"]);o!=null&&c(e,["computerUse"],o);const i=a(t,["fileSearch"]);i!=null&&c(e,["fileSearch"],i);const s=a(t,["codeExecution"]);if(s!=null&&c(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=a(t,["functionDeclarations"]);if(u!=null){let y=u;Array.isArray(y)&&(y=y.map(E=>E)),c(e,["functionDeclarations"],y)}const d=a(t,["googleMaps"]);d!=null&&c(e,["googleMaps"],Yv(d));const p=a(t,["googleSearch"]);p!=null&&c(e,["googleSearch"],Qv(p));const m=a(t,["googleSearchRetrieval"]);m!=null&&c(e,["googleSearchRetrieval"],m);const h=a(t,["urlContext"]);return h!=null&&c(e,["urlContext"],h),e}function u0(t){const e={},o=a(t,["retrieval"]);o!=null&&c(e,["retrieval"],o);const i=a(t,["computerUse"]);if(i!=null&&c(e,["computerUse"],i),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=a(t,["codeExecution"]);s!=null&&c(e,["codeExecution"],s);const u=a(t,["enterpriseWebSearch"]);u!=null&&c(e,["enterpriseWebSearch"],u);const d=a(t,["functionDeclarations"]);if(d!=null){let E=d;Array.isArray(E)&&(E=E.map(S=>Kv(S))),c(e,["functionDeclarations"],E)}const p=a(t,["googleMaps"]);p!=null&&c(e,["googleMaps"],p);const m=a(t,["googleSearch"]);m!=null&&c(e,["googleSearch"],m);const h=a(t,["googleSearchRetrieval"]);h!=null&&c(e,["googleSearchRetrieval"],h);const y=a(t,["urlContext"]);return y!=null&&c(e,["urlContext"],y),e}function c0(t){const e={},o=a(t,["promptTokenCount"]);o!=null&&c(e,["promptTokenCount"],o);const i=a(t,["cachedContentTokenCount"]);i!=null&&c(e,["cachedContentTokenCount"],i);const s=a(t,["candidatesTokenCount"]);s!=null&&c(e,["responseTokenCount"],s);const u=a(t,["toolUsePromptTokenCount"]);u!=null&&c(e,["toolUsePromptTokenCount"],u);const d=a(t,["thoughtsTokenCount"]);d!=null&&c(e,["thoughtsTokenCount"],d);const p=a(t,["totalTokenCount"]);p!=null&&c(e,["totalTokenCount"],p);const m=a(t,["promptTokensDetails"]);if(m!=null){let w=m;Array.isArray(w)&&(w=w.map(A=>A)),c(e,["promptTokensDetails"],w)}const h=a(t,["cacheTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(A=>A)),c(e,["cacheTokensDetails"],w)}const y=a(t,["candidatesTokensDetails"]);if(y!=null){let w=y;Array.isArray(w)&&(w=w.map(A=>A)),c(e,["responseTokensDetails"],w)}const E=a(t,["toolUsePromptTokensDetails"]);if(E!=null){let w=E;Array.isArray(w)&&(w=w.map(A=>A)),c(e,["toolUsePromptTokensDetails"],w)}const S=a(t,["trafficType"]);return S!=null&&c(e,["trafficType"],S),e}function d0(t){const e={},o=a(t,["type"]);return o!=null&&c(e,["voiceActivityType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function f0(t,e){const o={},i=a(t,["data"]);if(i!=null&&c(o,["data"],i),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=a(t,["mimeType"]);return s!=null&&c(o,["mimeType"],s),o}function p0(t,e){const o={},i=a(t,["content"]);i!=null&&c(o,["content"],i);const s=a(t,["citationMetadata"]);s!=null&&c(o,["citationMetadata"],m0(s));const u=a(t,["tokenCount"]);u!=null&&c(o,["tokenCount"],u);const d=a(t,["finishReason"]);d!=null&&c(o,["finishReason"],d);const p=a(t,["avgLogprobs"]);p!=null&&c(o,["avgLogprobs"],p);const m=a(t,["groundingMetadata"]);m!=null&&c(o,["groundingMetadata"],m);const h=a(t,["index"]);h!=null&&c(o,["index"],h);const y=a(t,["logprobsResult"]);y!=null&&c(o,["logprobsResult"],y);const E=a(t,["safetyRatings"]);if(E!=null){let w=E;Array.isArray(w)&&(w=w.map(A=>A)),c(o,["safetyRatings"],w)}const S=a(t,["urlContextMetadata"]);return S!=null&&c(o,["urlContextMetadata"],S),o}function m0(t,e){const o={},i=a(t,["citationSources"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>u)),c(o,["citations"],s)}return o}function h0(t,e,o){const i={},s=a(e,["model"]);s!=null&&c(i,["_url","model"],Ae(t,s));const u=a(e,["contents"]);if(u!=null){let d=Ot(u);Array.isArray(d)&&(d=d.map(p=>p)),c(i,["contents"],d)}return i}function g0(t,e){const o={},i=a(t,["sdkHttpResponse"]);i!=null&&c(o,["sdkHttpResponse"],i);const s=a(t,["tokensInfo"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>d)),c(o,["tokensInfo"],u)}return o}function y0(t,e){const o={},i=a(t,["values"]);i!=null&&c(o,["values"],i);const s=a(t,["statistics"]);return s!=null&&c(o,["statistics"],v0(s)),o}function v0(t,e){const o={},i=a(t,["truncated"]);i!=null&&c(o,["truncated"],i);const s=a(t,["token_count"]);return s!=null&&c(o,["tokenCount"],s),o}function as(t,e){const o={},i=a(t,["parts"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>AS(d))),c(o,["parts"],u)}const s=a(t,["role"]);return s!=null&&c(o,["role"],s),o}function S0(t,e){const o={},i=a(t,["controlType"]);i!=null&&c(o,["controlType"],i);const s=a(t,["enableControlImageComputation"]);return s!=null&&c(o,["computeControl"],s),o}function E0(t,e){const o={};if(a(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return o}function T0(t,e,o){const i={},s=a(t,["systemInstruction"]);e!==void 0&&s!=null&&c(e,["systemInstruction"],yt(s));const u=a(t,["tools"]);if(e!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(m=>_p(m))),c(e,["tools"],p)}const d=a(t,["generationConfig"]);return e!==void 0&&d!=null&&c(e,["generationConfig"],fS(d)),i}function C0(t,e,o){const i={},s=a(e,["model"]);s!=null&&c(i,["_url","model"],Ae(t,s));const u=a(e,["contents"]);if(u!=null){let p=Ot(u);Array.isArray(p)&&(p=p.map(m=>as(m))),c(i,["contents"],p)}const d=a(e,["config"]);return d!=null&&E0(d),i}function _0(t,e,o){const i={},s=a(e,["model"]);s!=null&&c(i,["_url","model"],Ae(t,s));const u=a(e,["contents"]);if(u!=null){let p=Ot(u);Array.isArray(p)&&(p=p.map(m=>m)),c(i,["contents"],p)}const d=a(e,["config"]);return d!=null&&T0(d,i),i}function w0(t,e){const o={},i=a(t,["sdkHttpResponse"]);i!=null&&c(o,["sdkHttpResponse"],i);const s=a(t,["totalTokens"]);s!=null&&c(o,["totalTokens"],s);const u=a(t,["cachedContentTokenCount"]);return u!=null&&c(o,["cachedContentTokenCount"],u),o}function x0(t,e){const o={},i=a(t,["sdkHttpResponse"]);i!=null&&c(o,["sdkHttpResponse"],i);const s=a(t,["totalTokens"]);return s!=null&&c(o,["totalTokens"],s),o}function I0(t,e,o){const i={},s=a(e,["model"]);return s!=null&&c(i,["_url","name"],Ae(t,s)),i}function A0(t,e,o){const i={},s=a(e,["model"]);return s!=null&&c(i,["_url","name"],Ae(t,s)),i}function N0(t,e){const o={},i=a(t,["sdkHttpResponse"]);return i!=null&&c(o,["sdkHttpResponse"],i),o}function R0(t,e){const o={},i=a(t,["sdkHttpResponse"]);return i!=null&&c(o,["sdkHttpResponse"],i),o}function k0(t,e,o){const i={},s=a(t,["outputGcsUri"]);e!==void 0&&s!=null&&c(e,["parameters","storageUri"],s);const u=a(t,["negativePrompt"]);e!==void 0&&u!=null&&c(e,["parameters","negativePrompt"],u);const d=a(t,["numberOfImages"]);e!==void 0&&d!=null&&c(e,["parameters","sampleCount"],d);const p=a(t,["aspectRatio"]);e!==void 0&&p!=null&&c(e,["parameters","aspectRatio"],p);const m=a(t,["guidanceScale"]);e!==void 0&&m!=null&&c(e,["parameters","guidanceScale"],m);const h=a(t,["seed"]);e!==void 0&&h!=null&&c(e,["parameters","seed"],h);const y=a(t,["safetyFilterLevel"]);e!==void 0&&y!=null&&c(e,["parameters","safetySetting"],y);const E=a(t,["personGeneration"]);e!==void 0&&E!=null&&c(e,["parameters","personGeneration"],E);const S=a(t,["includeSafetyAttributes"]);e!==void 0&&S!=null&&c(e,["parameters","includeSafetyAttributes"],S);const w=a(t,["includeRaiReason"]);e!==void 0&&w!=null&&c(e,["parameters","includeRaiReason"],w);const A=a(t,["language"]);e!==void 0&&A!=null&&c(e,["parameters","language"],A);const P=a(t,["outputMimeType"]);e!==void 0&&P!=null&&c(e,["parameters","outputOptions","mimeType"],P);const N=a(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&c(e,["parameters","outputOptions","compressionQuality"],N);const R=a(t,["addWatermark"]);e!==void 0&&R!=null&&c(e,["parameters","addWatermark"],R);const M=a(t,["labels"]);e!==void 0&&M!=null&&c(e,["labels"],M);const L=a(t,["editMode"]);e!==void 0&&L!=null&&c(e,["parameters","editMode"],L);const b=a(t,["baseSteps"]);return e!==void 0&&b!=null&&c(e,["parameters","editConfig","baseSteps"],b),i}function P0(t,e,o){const i={},s=a(e,["model"]);s!=null&&c(i,["_url","model"],Ae(t,s));const u=a(e,["prompt"]);u!=null&&c(i,["instances[0]","prompt"],u);const d=a(e,["referenceImages"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(h=>DS(h))),c(i,["instances[0]","referenceImages"],m)}const p=a(e,["config"]);return p!=null&&k0(p,i),i}function M0(t,e){const o={},i=a(t,["sdkHttpResponse"]);i!=null&&c(o,["sdkHttpResponse"],i);const s=a(t,["predictions"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>us(d))),c(o,["generatedImages"],u)}return o}function D0(t,e,o){const i={},s=a(t,["taskType"]);e!==void 0&&s!=null&&c(e,["requests[]","taskType"],s);const u=a(t,["title"]);e!==void 0&&u!=null&&c(e,["requests[]","title"],u);const d=a(t,["outputDimensionality"]);if(e!==void 0&&d!=null&&c(e,["requests[]","outputDimensionality"],d),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function L0(t,e,o){const i={},s=a(t,["taskType"]);e!==void 0&&s!=null&&c(e,["instances[]","task_type"],s);const u=a(t,["title"]);e!==void 0&&u!=null&&c(e,["instances[]","title"],u);const d=a(t,["outputDimensionality"]);e!==void 0&&d!=null&&c(e,["parameters","outputDimensionality"],d);const p=a(t,["mimeType"]);e!==void 0&&p!=null&&c(e,["instances[]","mimeType"],p);const m=a(t,["autoTruncate"]);return e!==void 0&&m!=null&&c(e,["parameters","autoTruncate"],m),i}function U0(t,e,o){const i={},s=a(e,["model"]);s!=null&&c(i,["_url","model"],Ae(t,s));const u=a(e,["contents"]);if(u!=null){let m=xa(t,u);Array.isArray(m)&&(m=m.map(h=>h)),c(i,["requests[]","content"],m)}const d=a(e,["config"]);d!=null&&D0(d,i);const p=a(e,["model"]);return p!==void 0&&c(i,["requests[]","model"],Ae(t,p)),i}function F0(t,e,o){const i={},s=a(e,["model"]);s!=null&&c(i,["_url","model"],Ae(t,s));const u=a(e,["contents"]);if(u!=null){let p=xa(t,u);Array.isArray(p)&&(p=p.map(m=>m)),c(i,["instances[]","content"],p)}const d=a(e,["config"]);return d!=null&&L0(d,i),i}function V0(t,e){const o={},i=a(t,["sdkHttpResponse"]);i!=null&&c(o,["sdkHttpResponse"],i);const s=a(t,["embeddings"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(p=>p)),c(o,["embeddings"],d)}const u=a(t,["metadata"]);return u!=null&&c(o,["metadata"],u),o}function G0(t,e){const o={},i=a(t,["sdkHttpResponse"]);i!=null&&c(o,["sdkHttpResponse"],i);const s=a(t,["predictions[]","embeddings"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(p=>y0(p))),c(o,["embeddings"],d)}const u=a(t,["metadata"]);return u!=null&&c(o,["metadata"],u),o}function b0(t,e){const o={},i=a(t,["endpoint"]);i!=null&&c(o,["name"],i);const s=a(t,["deployedModelId"]);return s!=null&&c(o,["deployedModelId"],s),o}function H0(t,e){const o={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["fileUri"]);i!=null&&c(o,["fileUri"],i);const s=a(t,["mimeType"]);return s!=null&&c(o,["mimeType"],s),o}function B0(t,e){const o={},i=a(t,["id"]);i!=null&&c(o,["id"],i);const s=a(t,["args"]);s!=null&&c(o,["args"],s);const u=a(t,["name"]);if(u!=null&&c(o,["name"],u),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return o}function q0(t,e){const o={},i=a(t,["allowedFunctionNames"]);i!=null&&c(o,["allowedFunctionNames"],i);const s=a(t,["mode"]);if(s!=null&&c(o,["mode"],s),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return o}function O0(t,e){const o={},i=a(t,["description"]);i!=null&&c(o,["description"],i);const s=a(t,["name"]);s!=null&&c(o,["name"],s);const u=a(t,["parameters"]);u!=null&&c(o,["parameters"],u);const d=a(t,["parametersJsonSchema"]);d!=null&&c(o,["parametersJsonSchema"],d);const p=a(t,["response"]);p!=null&&c(o,["response"],p);const m=a(t,["responseJsonSchema"]);if(m!=null&&c(o,["responseJsonSchema"],m),a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return o}function z0(t,e,o,i){const s={},u=a(e,["systemInstruction"]);o!==void 0&&u!=null&&c(o,["systemInstruction"],as(yt(u)));const d=a(e,["temperature"]);d!=null&&c(s,["temperature"],d);const p=a(e,["topP"]);p!=null&&c(s,["topP"],p);const m=a(e,["topK"]);m!=null&&c(s,["topK"],m);const h=a(e,["candidateCount"]);h!=null&&c(s,["candidateCount"],h);const y=a(e,["maxOutputTokens"]);y!=null&&c(s,["maxOutputTokens"],y);const E=a(e,["stopSequences"]);E!=null&&c(s,["stopSequences"],E);const S=a(e,["responseLogprobs"]);S!=null&&c(s,["responseLogprobs"],S);const w=a(e,["logprobs"]);w!=null&&c(s,["logprobs"],w);const A=a(e,["presencePenalty"]);A!=null&&c(s,["presencePenalty"],A);const P=a(e,["frequencyPenalty"]);P!=null&&c(s,["frequencyPenalty"],P);const N=a(e,["seed"]);N!=null&&c(s,["seed"],N);const R=a(e,["responseMimeType"]);R!=null&&c(s,["responseMimeType"],R);const M=a(e,["responseSchema"]);M!=null&&c(s,["responseSchema"],Ia(M));const L=a(e,["responseJsonSchema"]);if(L!=null&&c(s,["responseJsonSchema"],L),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const b=a(e,["safetySettings"]);if(o!==void 0&&b!=null){let re=b;Array.isArray(re)&&(re=re.map(Pe=>LS(Pe))),c(o,["safetySettings"],re)}const V=a(e,["tools"]);if(o!==void 0&&V!=null){let re=Vo(V);Array.isArray(re)&&(re=re.map(Pe=>BS(Fo(Pe)))),c(o,["tools"],re)}const W=a(e,["toolConfig"]);if(o!==void 0&&W!=null&&c(o,["toolConfig"],HS(W)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const X=a(e,["cachedContent"]);o!==void 0&&X!=null&&c(o,["cachedContent"],En(t,X));const he=a(e,["responseModalities"]);he!=null&&c(s,["responseModalities"],he);const Y=a(e,["mediaResolution"]);Y!=null&&c(s,["mediaResolution"],Y);const de=a(e,["speechConfig"]);if(de!=null&&c(s,["speechConfig"],Aa(de)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ye=a(e,["thinkingConfig"]);ye!=null&&c(s,["thinkingConfig"],ye);const Ce=a(e,["imageConfig"]);Ce!=null&&c(s,["imageConfig"],yS(Ce));const J=a(e,["enableEnhancedCivicAnswers"]);if(J!=null&&c(s,["enableEnhancedCivicAnswers"],J),a(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return s}function $0(t,e,o,i){const s={},u=a(e,["systemInstruction"]);o!==void 0&&u!=null&&c(o,["systemInstruction"],yt(u));const d=a(e,["temperature"]);d!=null&&c(s,["temperature"],d);const p=a(e,["topP"]);p!=null&&c(s,["topP"],p);const m=a(e,["topK"]);m!=null&&c(s,["topK"],m);const h=a(e,["candidateCount"]);h!=null&&c(s,["candidateCount"],h);const y=a(e,["maxOutputTokens"]);y!=null&&c(s,["maxOutputTokens"],y);const E=a(e,["stopSequences"]);E!=null&&c(s,["stopSequences"],E);const S=a(e,["responseLogprobs"]);S!=null&&c(s,["responseLogprobs"],S);const w=a(e,["logprobs"]);w!=null&&c(s,["logprobs"],w);const A=a(e,["presencePenalty"]);A!=null&&c(s,["presencePenalty"],A);const P=a(e,["frequencyPenalty"]);P!=null&&c(s,["frequencyPenalty"],P);const N=a(e,["seed"]);N!=null&&c(s,["seed"],N);const R=a(e,["responseMimeType"]);R!=null&&c(s,["responseMimeType"],R);const M=a(e,["responseSchema"]);M!=null&&c(s,["responseSchema"],Ia(M));const L=a(e,["responseJsonSchema"]);L!=null&&c(s,["responseJsonSchema"],L);const b=a(e,["routingConfig"]);b!=null&&c(s,["routingConfig"],b);const V=a(e,["modelSelectionConfig"]);V!=null&&c(s,["modelConfig"],V);const W=a(e,["safetySettings"]);if(o!==void 0&&W!=null){let z=W;Array.isArray(z)&&(z=z.map(q=>q)),c(o,["safetySettings"],z)}const X=a(e,["tools"]);if(o!==void 0&&X!=null){let z=Vo(X);Array.isArray(z)&&(z=z.map(q=>_p(Fo(q)))),c(o,["tools"],z)}const he=a(e,["toolConfig"]);o!==void 0&&he!=null&&c(o,["toolConfig"],he);const Y=a(e,["labels"]);o!==void 0&&Y!=null&&c(o,["labels"],Y);const de=a(e,["cachedContent"]);o!==void 0&&de!=null&&c(o,["cachedContent"],En(t,de));const ye=a(e,["responseModalities"]);ye!=null&&c(s,["responseModalities"],ye);const Ce=a(e,["mediaResolution"]);Ce!=null&&c(s,["mediaResolution"],Ce);const J=a(e,["speechConfig"]);J!=null&&c(s,["speechConfig"],Aa(J));const re=a(e,["audioTimestamp"]);re!=null&&c(s,["audioTimestamp"],re);const Pe=a(e,["thinkingConfig"]);Pe!=null&&c(s,["thinkingConfig"],Pe);const Me=a(e,["imageConfig"]);if(Me!=null&&c(s,["imageConfig"],vS(Me)),a(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const ge=a(e,["modelArmorConfig"]);return o!==void 0&&ge!=null&&c(o,["modelArmorConfig"],ge),s}function Gf(t,e,o){const i={},s=a(e,["model"]);s!=null&&c(i,["_url","model"],Ae(t,s));const u=a(e,["contents"]);if(u!=null){let p=Ot(u);Array.isArray(p)&&(p=p.map(m=>as(m))),c(i,["contents"],p)}const d=a(e,["config"]);return d!=null&&c(i,["generationConfig"],z0(t,d,i)),i}function bf(t,e,o){const i={},s=a(e,["model"]);s!=null&&c(i,["_url","model"],Ae(t,s));const u=a(e,["contents"]);if(u!=null){let p=Ot(u);Array.isArray(p)&&(p=p.map(m=>m)),c(i,["contents"],p)}const d=a(e,["config"]);return d!=null&&c(i,["generationConfig"],$0(t,d,i)),i}function Hf(t,e){const o={},i=a(t,["sdkHttpResponse"]);i!=null&&c(o,["sdkHttpResponse"],i);const s=a(t,["candidates"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(y=>p0(y))),c(o,["candidates"],h)}const u=a(t,["modelVersion"]);u!=null&&c(o,["modelVersion"],u);const d=a(t,["promptFeedback"]);d!=null&&c(o,["promptFeedback"],d);const p=a(t,["responseId"]);p!=null&&c(o,["responseId"],p);const m=a(t,["usageMetadata"]);return m!=null&&c(o,["usageMetadata"],m),o}function Bf(t,e){const o={},i=a(t,["sdkHttpResponse"]);i!=null&&c(o,["sdkHttpResponse"],i);const s=a(t,["candidates"]);if(s!=null){let y=s;Array.isArray(y)&&(y=y.map(E=>E)),c(o,["candidates"],y)}const u=a(t,["createTime"]);u!=null&&c(o,["createTime"],u);const d=a(t,["modelVersion"]);d!=null&&c(o,["modelVersion"],d);const p=a(t,["promptFeedback"]);p!=null&&c(o,["promptFeedback"],p);const m=a(t,["responseId"]);m!=null&&c(o,["responseId"],m);const h=a(t,["usageMetadata"]);return h!=null&&c(o,["usageMetadata"],h),o}function J0(t,e,o){const i={};if(a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=a(t,["numberOfImages"]);e!==void 0&&s!=null&&c(e,["parameters","sampleCount"],s);const u=a(t,["aspectRatio"]);e!==void 0&&u!=null&&c(e,["parameters","aspectRatio"],u);const d=a(t,["guidanceScale"]);if(e!==void 0&&d!=null&&c(e,["parameters","guidanceScale"],d),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const p=a(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&c(e,["parameters","safetySetting"],p);const m=a(t,["personGeneration"]);e!==void 0&&m!=null&&c(e,["parameters","personGeneration"],m);const h=a(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&c(e,["parameters","includeSafetyAttributes"],h);const y=a(t,["includeRaiReason"]);e!==void 0&&y!=null&&c(e,["parameters","includeRaiReason"],y);const E=a(t,["language"]);e!==void 0&&E!=null&&c(e,["parameters","language"],E);const S=a(t,["outputMimeType"]);e!==void 0&&S!=null&&c(e,["parameters","outputOptions","mimeType"],S);const w=a(t,["outputCompressionQuality"]);if(e!==void 0&&w!=null&&c(e,["parameters","outputOptions","compressionQuality"],w),a(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=a(t,["imageSize"]);if(e!==void 0&&A!=null&&c(e,["parameters","sampleImageSize"],A),a(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function K0(t,e,o){const i={},s=a(t,["outputGcsUri"]);e!==void 0&&s!=null&&c(e,["parameters","storageUri"],s);const u=a(t,["negativePrompt"]);e!==void 0&&u!=null&&c(e,["parameters","negativePrompt"],u);const d=a(t,["numberOfImages"]);e!==void 0&&d!=null&&c(e,["parameters","sampleCount"],d);const p=a(t,["aspectRatio"]);e!==void 0&&p!=null&&c(e,["parameters","aspectRatio"],p);const m=a(t,["guidanceScale"]);e!==void 0&&m!=null&&c(e,["parameters","guidanceScale"],m);const h=a(t,["seed"]);e!==void 0&&h!=null&&c(e,["parameters","seed"],h);const y=a(t,["safetyFilterLevel"]);e!==void 0&&y!=null&&c(e,["parameters","safetySetting"],y);const E=a(t,["personGeneration"]);e!==void 0&&E!=null&&c(e,["parameters","personGeneration"],E);const S=a(t,["includeSafetyAttributes"]);e!==void 0&&S!=null&&c(e,["parameters","includeSafetyAttributes"],S);const w=a(t,["includeRaiReason"]);e!==void 0&&w!=null&&c(e,["parameters","includeRaiReason"],w);const A=a(t,["language"]);e!==void 0&&A!=null&&c(e,["parameters","language"],A);const P=a(t,["outputMimeType"]);e!==void 0&&P!=null&&c(e,["parameters","outputOptions","mimeType"],P);const N=a(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&c(e,["parameters","outputOptions","compressionQuality"],N);const R=a(t,["addWatermark"]);e!==void 0&&R!=null&&c(e,["parameters","addWatermark"],R);const M=a(t,["labels"]);e!==void 0&&M!=null&&c(e,["labels"],M);const L=a(t,["imageSize"]);e!==void 0&&L!=null&&c(e,["parameters","sampleImageSize"],L);const b=a(t,["enhancePrompt"]);return e!==void 0&&b!=null&&c(e,["parameters","enhancePrompt"],b),i}function W0(t,e,o){const i={},s=a(e,["model"]);s!=null&&c(i,["_url","model"],Ae(t,s));const u=a(e,["prompt"]);u!=null&&c(i,["instances[0]","prompt"],u);const d=a(e,["config"]);return d!=null&&J0(d,i),i}function Y0(t,e,o){const i={},s=a(e,["model"]);s!=null&&c(i,["_url","model"],Ae(t,s));const u=a(e,["prompt"]);u!=null&&c(i,["instances[0]","prompt"],u);const d=a(e,["config"]);return d!=null&&K0(d,i),i}function Q0(t,e){const o={},i=a(t,["sdkHttpResponse"]);i!=null&&c(o,["sdkHttpResponse"],i);const s=a(t,["predictions"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(p=>aS(p))),c(o,["generatedImages"],d)}const u=a(t,["positivePromptSafetyAttributes"]);return u!=null&&c(o,["positivePromptSafetyAttributes"],Tp(u)),o}function X0(t,e){const o={},i=a(t,["sdkHttpResponse"]);i!=null&&c(o,["sdkHttpResponse"],i);const s=a(t,["predictions"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(p=>us(p))),c(o,["generatedImages"],d)}const u=a(t,["positivePromptSafetyAttributes"]);return u!=null&&c(o,["positivePromptSafetyAttributes"],Cp(u)),o}function Z0(t,e,o){const i={},s=a(t,["numberOfVideos"]);if(e!==void 0&&s!=null&&c(e,["parameters","sampleCount"],s),a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const u=a(t,["durationSeconds"]);if(e!==void 0&&u!=null&&c(e,["parameters","durationSeconds"],u),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=a(t,["aspectRatio"]);e!==void 0&&d!=null&&c(e,["parameters","aspectRatio"],d);const p=a(t,["resolution"]);e!==void 0&&p!=null&&c(e,["parameters","resolution"],p);const m=a(t,["personGeneration"]);if(e!==void 0&&m!=null&&c(e,["parameters","personGeneration"],m),a(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=a(t,["negativePrompt"]);e!==void 0&&h!=null&&c(e,["parameters","negativePrompt"],h);const y=a(t,["enhancePrompt"]);if(e!==void 0&&y!=null&&c(e,["parameters","enhancePrompt"],y),a(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const E=a(t,["lastFrame"]);e!==void 0&&E!=null&&c(e,["instances[0]","lastFrame"],cs(E));const S=a(t,["referenceImages"]);if(e!==void 0&&S!=null){let w=S;Array.isArray(w)&&(w=w.map(A=>eE(A))),c(e,["instances[0]","referenceImages"],w)}if(a(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(a(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function j0(t,e,o){const i={},s=a(t,["numberOfVideos"]);e!==void 0&&s!=null&&c(e,["parameters","sampleCount"],s);const u=a(t,["outputGcsUri"]);e!==void 0&&u!=null&&c(e,["parameters","storageUri"],u);const d=a(t,["fps"]);e!==void 0&&d!=null&&c(e,["parameters","fps"],d);const p=a(t,["durationSeconds"]);e!==void 0&&p!=null&&c(e,["parameters","durationSeconds"],p);const m=a(t,["seed"]);e!==void 0&&m!=null&&c(e,["parameters","seed"],m);const h=a(t,["aspectRatio"]);e!==void 0&&h!=null&&c(e,["parameters","aspectRatio"],h);const y=a(t,["resolution"]);e!==void 0&&y!=null&&c(e,["parameters","resolution"],y);const E=a(t,["personGeneration"]);e!==void 0&&E!=null&&c(e,["parameters","personGeneration"],E);const S=a(t,["pubsubTopic"]);e!==void 0&&S!=null&&c(e,["parameters","pubsubTopic"],S);const w=a(t,["negativePrompt"]);e!==void 0&&w!=null&&c(e,["parameters","negativePrompt"],w);const A=a(t,["enhancePrompt"]);e!==void 0&&A!=null&&c(e,["parameters","enhancePrompt"],A);const P=a(t,["generateAudio"]);e!==void 0&&P!=null&&c(e,["parameters","generateAudio"],P);const N=a(t,["lastFrame"]);e!==void 0&&N!=null&&c(e,["instances[0]","lastFrame"],en(N));const R=a(t,["referenceImages"]);if(e!==void 0&&R!=null){let b=R;Array.isArray(b)&&(b=b.map(V=>tE(V))),c(e,["instances[0]","referenceImages"],b)}const M=a(t,["mask"]);e!==void 0&&M!=null&&c(e,["instances[0]","mask"],jS(M));const L=a(t,["compressionQuality"]);return e!==void 0&&L!=null&&c(e,["parameters","compressionQuality"],L),i}function eS(t,e){const o={},i=a(t,["name"]);i!=null&&c(o,["name"],i);const s=a(t,["metadata"]);s!=null&&c(o,["metadata"],s);const u=a(t,["done"]);u!=null&&c(o,["done"],u);const d=a(t,["error"]);d!=null&&c(o,["error"],d);const p=a(t,["response","generateVideoResponse"]);return p!=null&&c(o,["response"],rS(p)),o}function tS(t,e){const o={},i=a(t,["name"]);i!=null&&c(o,["name"],i);const s=a(t,["metadata"]);s!=null&&c(o,["metadata"],s);const u=a(t,["done"]);u!=null&&c(o,["done"],u);const d=a(t,["error"]);d!=null&&c(o,["error"],d);const p=a(t,["response"]);return p!=null&&c(o,["response"],iS(p)),o}function nS(t,e,o){const i={},s=a(e,["model"]);s!=null&&c(i,["_url","model"],Ae(t,s));const u=a(e,["prompt"]);u!=null&&c(i,["instances[0]","prompt"],u);const d=a(e,["image"]);d!=null&&c(i,["instances[0]","image"],cs(d));const p=a(e,["video"]);p!=null&&c(i,["instances[0]","video"],wp(p));const m=a(e,["source"]);m!=null&&sS(m,i);const h=a(e,["config"]);return h!=null&&Z0(h,i),i}function oS(t,e,o){const i={},s=a(e,["model"]);s!=null&&c(i,["_url","model"],Ae(t,s));const u=a(e,["prompt"]);u!=null&&c(i,["instances[0]","prompt"],u);const d=a(e,["image"]);d!=null&&c(i,["instances[0]","image"],en(d));const p=a(e,["video"]);p!=null&&c(i,["instances[0]","video"],xp(p));const m=a(e,["source"]);m!=null&&lS(m,i);const h=a(e,["config"]);return h!=null&&j0(h,i),i}function rS(t,e){const o={},i=a(t,["generatedSamples"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(p=>cS(p))),c(o,["generatedVideos"],d)}const s=a(t,["raiMediaFilteredCount"]);s!=null&&c(o,["raiMediaFilteredCount"],s);const u=a(t,["raiMediaFilteredReasons"]);return u!=null&&c(o,["raiMediaFilteredReasons"],u),o}function iS(t,e){const o={},i=a(t,["videos"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(p=>dS(p))),c(o,["generatedVideos"],d)}const s=a(t,["raiMediaFilteredCount"]);s!=null&&c(o,["raiMediaFilteredCount"],s);const u=a(t,["raiMediaFilteredReasons"]);return u!=null&&c(o,["raiMediaFilteredReasons"],u),o}function sS(t,e,o){const i={},s=a(t,["prompt"]);e!==void 0&&s!=null&&c(e,["instances[0]","prompt"],s);const u=a(t,["image"]);e!==void 0&&u!=null&&c(e,["instances[0]","image"],cs(u));const d=a(t,["video"]);return e!==void 0&&d!=null&&c(e,["instances[0]","video"],wp(d)),i}function lS(t,e,o){const i={},s=a(t,["prompt"]);e!==void 0&&s!=null&&c(e,["instances[0]","prompt"],s);const u=a(t,["image"]);e!==void 0&&u!=null&&c(e,["instances[0]","image"],en(u));const d=a(t,["video"]);return e!==void 0&&d!=null&&c(e,["instances[0]","video"],xp(d)),i}function aS(t,e){const o={},i=a(t,["_self"]);i!=null&&c(o,["image"],SS(i));const s=a(t,["raiFilteredReason"]);s!=null&&c(o,["raiFilteredReason"],s);const u=a(t,["_self"]);return u!=null&&c(o,["safetyAttributes"],Tp(u)),o}function us(t,e){const o={},i=a(t,["_self"]);i!=null&&c(o,["image"],Ep(i));const s=a(t,["raiFilteredReason"]);s!=null&&c(o,["raiFilteredReason"],s);const u=a(t,["_self"]);u!=null&&c(o,["safetyAttributes"],Cp(u));const d=a(t,["prompt"]);return d!=null&&c(o,["enhancedPrompt"],d),o}function uS(t,e){const o={},i=a(t,["_self"]);i!=null&&c(o,["mask"],Ep(i));const s=a(t,["labels"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>d)),c(o,["labels"],u)}return o}function cS(t,e){const o={},i=a(t,["video"]);return i!=null&&c(o,["video"],XS(i)),o}function dS(t,e){const o={},i=a(t,["_self"]);return i!=null&&c(o,["video"],ZS(i)),o}function fS(t,e){const o={},i=a(t,["modelSelectionConfig"]);i!=null&&c(o,["modelConfig"],i);const s=a(t,["responseJsonSchema"]);s!=null&&c(o,["responseJsonSchema"],s);const u=a(t,["audioTimestamp"]);u!=null&&c(o,["audioTimestamp"],u);const d=a(t,["candidateCount"]);d!=null&&c(o,["candidateCount"],d);const p=a(t,["enableAffectiveDialog"]);p!=null&&c(o,["enableAffectiveDialog"],p);const m=a(t,["frequencyPenalty"]);m!=null&&c(o,["frequencyPenalty"],m);const h=a(t,["logprobs"]);h!=null&&c(o,["logprobs"],h);const y=a(t,["maxOutputTokens"]);y!=null&&c(o,["maxOutputTokens"],y);const E=a(t,["mediaResolution"]);E!=null&&c(o,["mediaResolution"],E);const S=a(t,["presencePenalty"]);S!=null&&c(o,["presencePenalty"],S);const w=a(t,["responseLogprobs"]);w!=null&&c(o,["responseLogprobs"],w);const A=a(t,["responseMimeType"]);A!=null&&c(o,["responseMimeType"],A);const P=a(t,["responseModalities"]);P!=null&&c(o,["responseModalities"],P);const N=a(t,["responseSchema"]);N!=null&&c(o,["responseSchema"],N);const R=a(t,["routingConfig"]);R!=null&&c(o,["routingConfig"],R);const M=a(t,["seed"]);M!=null&&c(o,["seed"],M);const L=a(t,["speechConfig"]);L!=null&&c(o,["speechConfig"],L);const b=a(t,["stopSequences"]);b!=null&&c(o,["stopSequences"],b);const V=a(t,["temperature"]);V!=null&&c(o,["temperature"],V);const W=a(t,["thinkingConfig"]);W!=null&&c(o,["thinkingConfig"],W);const X=a(t,["topK"]);X!=null&&c(o,["topK"],X);const he=a(t,["topP"]);if(he!=null&&c(o,["topP"],he),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return o}function pS(t,e,o){const i={},s=a(e,["model"]);return s!=null&&c(i,["_url","name"],Ae(t,s)),i}function mS(t,e,o){const i={},s=a(e,["model"]);return s!=null&&c(i,["_url","name"],Ae(t,s)),i}function hS(t,e){const o={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=a(t,["enableWidget"]);return i!=null&&c(o,["enableWidget"],i),o}function gS(t,e){const o={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=a(t,["timeRangeFilter"]);return i!=null&&c(o,["timeRangeFilter"],i),o}function yS(t,e){const o={},i=a(t,["aspectRatio"]);i!=null&&c(o,["aspectRatio"],i);const s=a(t,["imageSize"]);if(s!=null&&c(o,["imageSize"],s),a(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return o}function vS(t,e){const o={},i=a(t,["aspectRatio"]);i!=null&&c(o,["aspectRatio"],i);const s=a(t,["imageSize"]);s!=null&&c(o,["imageSize"],s);const u=a(t,["personGeneration"]);u!=null&&c(o,["personGeneration"],u);const d=a(t,["outputMimeType"]);d!=null&&c(o,["imageOutputOptions","mimeType"],d);const p=a(t,["outputCompressionQuality"]);return p!=null&&c(o,["imageOutputOptions","compressionQuality"],p),o}function SS(t,e){const o={},i=a(t,["bytesBase64Encoded"]);i!=null&&c(o,["imageBytes"],qn(i));const s=a(t,["mimeType"]);return s!=null&&c(o,["mimeType"],s),o}function Ep(t,e){const o={},i=a(t,["gcsUri"]);i!=null&&c(o,["gcsUri"],i);const s=a(t,["bytesBase64Encoded"]);s!=null&&c(o,["imageBytes"],qn(s));const u=a(t,["mimeType"]);return u!=null&&c(o,["mimeType"],u),o}function cs(t,e){const o={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=a(t,["imageBytes"]);i!=null&&c(o,["bytesBase64Encoded"],qn(i));const s=a(t,["mimeType"]);return s!=null&&c(o,["mimeType"],s),o}function en(t,e){const o={},i=a(t,["gcsUri"]);i!=null&&c(o,["gcsUri"],i);const s=a(t,["imageBytes"]);s!=null&&c(o,["bytesBase64Encoded"],qn(s));const u=a(t,["mimeType"]);return u!=null&&c(o,["mimeType"],u),o}function ES(t,e,o,i){const s={},u=a(e,["pageSize"]);o!==void 0&&u!=null&&c(o,["_query","pageSize"],u);const d=a(e,["pageToken"]);o!==void 0&&d!=null&&c(o,["_query","pageToken"],d);const p=a(e,["filter"]);o!==void 0&&p!=null&&c(o,["_query","filter"],p);const m=a(e,["queryBase"]);return o!==void 0&&m!=null&&c(o,["_url","models_url"],pp(t,m)),s}function TS(t,e,o,i){const s={},u=a(e,["pageSize"]);o!==void 0&&u!=null&&c(o,["_query","pageSize"],u);const d=a(e,["pageToken"]);o!==void 0&&d!=null&&c(o,["_query","pageToken"],d);const p=a(e,["filter"]);o!==void 0&&p!=null&&c(o,["_query","filter"],p);const m=a(e,["queryBase"]);return o!==void 0&&m!=null&&c(o,["_url","models_url"],pp(t,m)),s}function CS(t,e,o){const i={},s=a(e,["config"]);return s!=null&&ES(t,s,i),i}function _S(t,e,o){const i={},s=a(e,["config"]);return s!=null&&TS(t,s,i),i}function wS(t,e){const o={},i=a(t,["sdkHttpResponse"]);i!=null&&c(o,["sdkHttpResponse"],i);const s=a(t,["nextPageToken"]);s!=null&&c(o,["nextPageToken"],s);const u=a(t,["_self"]);if(u!=null){let d=mp(u);Array.isArray(d)&&(d=d.map(p=>fa(p))),c(o,["models"],d)}return o}function xS(t,e){const o={},i=a(t,["sdkHttpResponse"]);i!=null&&c(o,["sdkHttpResponse"],i);const s=a(t,["nextPageToken"]);s!=null&&c(o,["nextPageToken"],s);const u=a(t,["_self"]);if(u!=null){let d=mp(u);Array.isArray(d)&&(d=d.map(p=>pa(p))),c(o,["models"],d)}return o}function IS(t,e){const o={},i=a(t,["maskMode"]);i!=null&&c(o,["maskMode"],i);const s=a(t,["segmentationClasses"]);s!=null&&c(o,["maskClasses"],s);const u=a(t,["maskDilation"]);return u!=null&&c(o,["dilation"],u),o}function fa(t,e){const o={},i=a(t,["name"]);i!=null&&c(o,["name"],i);const s=a(t,["displayName"]);s!=null&&c(o,["displayName"],s);const u=a(t,["description"]);u!=null&&c(o,["description"],u);const d=a(t,["version"]);d!=null&&c(o,["version"],d);const p=a(t,["_self"]);p!=null&&c(o,["tunedModelInfo"],qS(p));const m=a(t,["inputTokenLimit"]);m!=null&&c(o,["inputTokenLimit"],m);const h=a(t,["outputTokenLimit"]);h!=null&&c(o,["outputTokenLimit"],h);const y=a(t,["supportedGenerationMethods"]);y!=null&&c(o,["supportedActions"],y);const E=a(t,["temperature"]);E!=null&&c(o,["temperature"],E);const S=a(t,["maxTemperature"]);S!=null&&c(o,["maxTemperature"],S);const w=a(t,["topP"]);w!=null&&c(o,["topP"],w);const A=a(t,["topK"]);A!=null&&c(o,["topK"],A);const P=a(t,["thinking"]);return P!=null&&c(o,["thinking"],P),o}function pa(t,e){const o={},i=a(t,["name"]);i!=null&&c(o,["name"],i);const s=a(t,["displayName"]);s!=null&&c(o,["displayName"],s);const u=a(t,["description"]);u!=null&&c(o,["description"],u);const d=a(t,["versionId"]);d!=null&&c(o,["version"],d);const p=a(t,["deployedModels"]);if(p!=null){let S=p;Array.isArray(S)&&(S=S.map(w=>b0(w))),c(o,["endpoints"],S)}const m=a(t,["labels"]);m!=null&&c(o,["labels"],m);const h=a(t,["_self"]);h!=null&&c(o,["tunedModelInfo"],OS(h));const y=a(t,["defaultCheckpointId"]);y!=null&&c(o,["defaultCheckpointId"],y);const E=a(t,["checkpoints"]);if(E!=null){let S=E;Array.isArray(S)&&(S=S.map(w=>w)),c(o,["checkpoints"],S)}return o}function AS(t,e){const o={},i=a(t,["mediaResolution"]);i!=null&&c(o,["mediaResolution"],i);const s=a(t,["codeExecutionResult"]);s!=null&&c(o,["codeExecutionResult"],s);const u=a(t,["executableCode"]);u!=null&&c(o,["executableCode"],u);const d=a(t,["fileData"]);d!=null&&c(o,["fileData"],H0(d));const p=a(t,["functionCall"]);p!=null&&c(o,["functionCall"],B0(p));const m=a(t,["functionResponse"]);m!=null&&c(o,["functionResponse"],m);const h=a(t,["inlineData"]);h!=null&&c(o,["inlineData"],f0(h));const y=a(t,["text"]);y!=null&&c(o,["text"],y);const E=a(t,["thought"]);E!=null&&c(o,["thought"],E);const S=a(t,["thoughtSignature"]);S!=null&&c(o,["thoughtSignature"],S);const w=a(t,["videoMetadata"]);return w!=null&&c(o,["videoMetadata"],w),o}function NS(t,e){const o={},i=a(t,["productImage"]);return i!=null&&c(o,["image"],en(i)),o}function RS(t,e,o){const i={},s=a(t,["numberOfImages"]);e!==void 0&&s!=null&&c(e,["parameters","sampleCount"],s);const u=a(t,["baseSteps"]);e!==void 0&&u!=null&&c(e,["parameters","baseSteps"],u);const d=a(t,["outputGcsUri"]);e!==void 0&&d!=null&&c(e,["parameters","storageUri"],d);const p=a(t,["seed"]);e!==void 0&&p!=null&&c(e,["parameters","seed"],p);const m=a(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&c(e,["parameters","safetySetting"],m);const h=a(t,["personGeneration"]);e!==void 0&&h!=null&&c(e,["parameters","personGeneration"],h);const y=a(t,["addWatermark"]);e!==void 0&&y!=null&&c(e,["parameters","addWatermark"],y);const E=a(t,["outputMimeType"]);e!==void 0&&E!=null&&c(e,["parameters","outputOptions","mimeType"],E);const S=a(t,["outputCompressionQuality"]);e!==void 0&&S!=null&&c(e,["parameters","outputOptions","compressionQuality"],S);const w=a(t,["enhancePrompt"]);e!==void 0&&w!=null&&c(e,["parameters","enhancePrompt"],w);const A=a(t,["labels"]);return e!==void 0&&A!=null&&c(e,["labels"],A),i}function kS(t,e,o){const i={},s=a(e,["model"]);s!=null&&c(i,["_url","model"],Ae(t,s));const u=a(e,["source"]);u!=null&&MS(u,i);const d=a(e,["config"]);return d!=null&&RS(d,i),i}function PS(t,e){const o={},i=a(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>us(u))),c(o,["generatedImages"],s)}return o}function MS(t,e,o){const i={},s=a(t,["prompt"]);e!==void 0&&s!=null&&c(e,["instances[0]","prompt"],s);const u=a(t,["personImage"]);e!==void 0&&u!=null&&c(e,["instances[0]","personImage","image"],en(u));const d=a(t,["productImages"]);if(e!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(m=>NS(m))),c(e,["instances[0]","productImages"],p)}return i}function DS(t,e){const o={},i=a(t,["referenceImage"]);i!=null&&c(o,["referenceImage"],en(i));const s=a(t,["referenceId"]);s!=null&&c(o,["referenceId"],s);const u=a(t,["referenceType"]);u!=null&&c(o,["referenceType"],u);const d=a(t,["maskImageConfig"]);d!=null&&c(o,["maskImageConfig"],IS(d));const p=a(t,["controlImageConfig"]);p!=null&&c(o,["controlImageConfig"],S0(p));const m=a(t,["styleImageConfig"]);m!=null&&c(o,["styleImageConfig"],m);const h=a(t,["subjectImageConfig"]);return h!=null&&c(o,["subjectImageConfig"],h),o}function Tp(t,e){const o={},i=a(t,["safetyAttributes","categories"]);i!=null&&c(o,["categories"],i);const s=a(t,["safetyAttributes","scores"]);s!=null&&c(o,["scores"],s);const u=a(t,["contentType"]);return u!=null&&c(o,["contentType"],u),o}function Cp(t,e){const o={},i=a(t,["safetyAttributes","categories"]);i!=null&&c(o,["categories"],i);const s=a(t,["safetyAttributes","scores"]);s!=null&&c(o,["scores"],s);const u=a(t,["contentType"]);return u!=null&&c(o,["contentType"],u),o}function LS(t,e){const o={},i=a(t,["category"]);if(i!=null&&c(o,["category"],i),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=a(t,["threshold"]);return s!=null&&c(o,["threshold"],s),o}function US(t,e){const o={},i=a(t,["image"]);return i!=null&&c(o,["image"],en(i)),o}function FS(t,e,o){const i={},s=a(t,["mode"]);e!==void 0&&s!=null&&c(e,["parameters","mode"],s);const u=a(t,["maxPredictions"]);e!==void 0&&u!=null&&c(e,["parameters","maxPredictions"],u);const d=a(t,["confidenceThreshold"]);e!==void 0&&d!=null&&c(e,["parameters","confidenceThreshold"],d);const p=a(t,["maskDilation"]);e!==void 0&&p!=null&&c(e,["parameters","maskDilation"],p);const m=a(t,["binaryColorThreshold"]);e!==void 0&&m!=null&&c(e,["parameters","binaryColorThreshold"],m);const h=a(t,["labels"]);return e!==void 0&&h!=null&&c(e,["labels"],h),i}function VS(t,e,o){const i={},s=a(e,["model"]);s!=null&&c(i,["_url","model"],Ae(t,s));const u=a(e,["source"]);u!=null&&bS(u,i);const d=a(e,["config"]);return d!=null&&FS(d,i),i}function GS(t,e){const o={},i=a(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>uS(u))),c(o,["generatedMasks"],s)}return o}function bS(t,e,o){const i={},s=a(t,["prompt"]);e!==void 0&&s!=null&&c(e,["instances[0]","prompt"],s);const u=a(t,["image"]);e!==void 0&&u!=null&&c(e,["instances[0]","image"],en(u));const d=a(t,["scribbleImage"]);return e!==void 0&&d!=null&&c(e,["instances[0]","scribble"],US(d)),i}function HS(t,e){const o={},i=a(t,["retrievalConfig"]);i!=null&&c(o,["retrievalConfig"],i);const s=a(t,["functionCallingConfig"]);return s!=null&&c(o,["functionCallingConfig"],q0(s)),o}function BS(t,e){const o={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=a(t,["computerUse"]);i!=null&&c(o,["computerUse"],i);const s=a(t,["fileSearch"]);s!=null&&c(o,["fileSearch"],s);const u=a(t,["codeExecution"]);if(u!=null&&c(o,["codeExecution"],u),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=a(t,["functionDeclarations"]);if(d!=null){let E=d;Array.isArray(E)&&(E=E.map(S=>S)),c(o,["functionDeclarations"],E)}const p=a(t,["googleMaps"]);p!=null&&c(o,["googleMaps"],hS(p));const m=a(t,["googleSearch"]);m!=null&&c(o,["googleSearch"],gS(m));const h=a(t,["googleSearchRetrieval"]);h!=null&&c(o,["googleSearchRetrieval"],h);const y=a(t,["urlContext"]);return y!=null&&c(o,["urlContext"],y),o}function _p(t,e){const o={},i=a(t,["retrieval"]);i!=null&&c(o,["retrieval"],i);const s=a(t,["computerUse"]);if(s!=null&&c(o,["computerUse"],s),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=a(t,["codeExecution"]);u!=null&&c(o,["codeExecution"],u);const d=a(t,["enterpriseWebSearch"]);d!=null&&c(o,["enterpriseWebSearch"],d);const p=a(t,["functionDeclarations"]);if(p!=null){let S=p;Array.isArray(S)&&(S=S.map(w=>O0(w))),c(o,["functionDeclarations"],S)}const m=a(t,["googleMaps"]);m!=null&&c(o,["googleMaps"],m);const h=a(t,["googleSearch"]);h!=null&&c(o,["googleSearch"],h);const y=a(t,["googleSearchRetrieval"]);y!=null&&c(o,["googleSearchRetrieval"],y);const E=a(t,["urlContext"]);return E!=null&&c(o,["urlContext"],E),o}function qS(t,e){const o={},i=a(t,["baseModel"]);i!=null&&c(o,["baseModel"],i);const s=a(t,["createTime"]);s!=null&&c(o,["createTime"],s);const u=a(t,["updateTime"]);return u!=null&&c(o,["updateTime"],u),o}function OS(t,e){const o={},i=a(t,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&c(o,["baseModel"],i);const s=a(t,["createTime"]);s!=null&&c(o,["createTime"],s);const u=a(t,["updateTime"]);return u!=null&&c(o,["updateTime"],u),o}function zS(t,e,o){const i={},s=a(t,["displayName"]);e!==void 0&&s!=null&&c(e,["displayName"],s);const u=a(t,["description"]);e!==void 0&&u!=null&&c(e,["description"],u);const d=a(t,["defaultCheckpointId"]);return e!==void 0&&d!=null&&c(e,["defaultCheckpointId"],d),i}function $S(t,e,o){const i={},s=a(t,["displayName"]);e!==void 0&&s!=null&&c(e,["displayName"],s);const u=a(t,["description"]);e!==void 0&&u!=null&&c(e,["description"],u);const d=a(t,["defaultCheckpointId"]);return e!==void 0&&d!=null&&c(e,["defaultCheckpointId"],d),i}function JS(t,e,o){const i={},s=a(e,["model"]);s!=null&&c(i,["_url","name"],Ae(t,s));const u=a(e,["config"]);return u!=null&&zS(u,i),i}function KS(t,e,o){const i={},s=a(e,["model"]);s!=null&&c(i,["_url","model"],Ae(t,s));const u=a(e,["config"]);return u!=null&&$S(u,i),i}function WS(t,e,o){const i={},s=a(t,["outputGcsUri"]);e!==void 0&&s!=null&&c(e,["parameters","storageUri"],s);const u=a(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&c(e,["parameters","safetySetting"],u);const d=a(t,["personGeneration"]);e!==void 0&&d!=null&&c(e,["parameters","personGeneration"],d);const p=a(t,["includeRaiReason"]);e!==void 0&&p!=null&&c(e,["parameters","includeRaiReason"],p);const m=a(t,["outputMimeType"]);e!==void 0&&m!=null&&c(e,["parameters","outputOptions","mimeType"],m);const h=a(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&c(e,["parameters","outputOptions","compressionQuality"],h);const y=a(t,["enhanceInputImage"]);e!==void 0&&y!=null&&c(e,["parameters","upscaleConfig","enhanceInputImage"],y);const E=a(t,["imagePreservationFactor"]);e!==void 0&&E!=null&&c(e,["parameters","upscaleConfig","imagePreservationFactor"],E);const S=a(t,["labels"]);e!==void 0&&S!=null&&c(e,["labels"],S);const w=a(t,["numberOfImages"]);e!==void 0&&w!=null&&c(e,["parameters","sampleCount"],w);const A=a(t,["mode"]);return e!==void 0&&A!=null&&c(e,["parameters","mode"],A),i}function YS(t,e,o){const i={},s=a(e,["model"]);s!=null&&c(i,["_url","model"],Ae(t,s));const u=a(e,["image"]);u!=null&&c(i,["instances[0]","image"],en(u));const d=a(e,["upscaleFactor"]);d!=null&&c(i,["parameters","upscaleConfig","upscaleFactor"],d);const p=a(e,["config"]);return p!=null&&WS(p,i),i}function QS(t,e){const o={},i=a(t,["sdkHttpResponse"]);i!=null&&c(o,["sdkHttpResponse"],i);const s=a(t,["predictions"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>us(d))),c(o,["generatedImages"],u)}return o}function XS(t,e){const o={},i=a(t,["uri"]);i!=null&&c(o,["uri"],i);const s=a(t,["encodedVideo"]);s!=null&&c(o,["videoBytes"],qn(s));const u=a(t,["encoding"]);return u!=null&&c(o,["mimeType"],u),o}function ZS(t,e){const o={},i=a(t,["gcsUri"]);i!=null&&c(o,["uri"],i);const s=a(t,["bytesBase64Encoded"]);s!=null&&c(o,["videoBytes"],qn(s));const u=a(t,["mimeType"]);return u!=null&&c(o,["mimeType"],u),o}function jS(t,e){const o={},i=a(t,["image"]);i!=null&&c(o,["_self"],en(i));const s=a(t,["maskMode"]);return s!=null&&c(o,["maskMode"],s),o}function eE(t,e){const o={},i=a(t,["image"]);i!=null&&c(o,["image"],cs(i));const s=a(t,["referenceType"]);return s!=null&&c(o,["referenceType"],s),o}function tE(t,e){const o={},i=a(t,["image"]);i!=null&&c(o,["image"],en(i));const s=a(t,["referenceType"]);return s!=null&&c(o,["referenceType"],s),o}function wp(t,e){const o={},i=a(t,["uri"]);i!=null&&c(o,["uri"],i);const s=a(t,["videoBytes"]);s!=null&&c(o,["encodedVideo"],qn(s));const u=a(t,["mimeType"]);return u!=null&&c(o,["encoding"],u),o}function xp(t,e){const o={},i=a(t,["uri"]);i!=null&&c(o,["gcsUri"],i);const s=a(t,["videoBytes"]);s!=null&&c(o,["bytesBase64Encoded"],qn(s));const u=a(t,["mimeType"]);return u!=null&&c(o,["mimeType"],u),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nE(t,e){const o={},i=a(t,["displayName"]);return e!==void 0&&i!=null&&c(e,["displayName"],i),o}function oE(t){const e={},o=a(t,["config"]);return o!=null&&nE(o,e),e}function rE(t,e){const o={},i=a(t,["force"]);return e!==void 0&&i!=null&&c(e,["_query","force"],i),o}function iE(t){const e={},o=a(t,["name"]);o!=null&&c(e,["_url","name"],o);const i=a(t,["config"]);return i!=null&&rE(i,e),e}function sE(t){const e={},o=a(t,["name"]);return o!=null&&c(e,["_url","name"],o),e}function lE(t,e){const o={},i=a(t,["customMetadata"]);if(e!==void 0&&i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>d)),c(e,["customMetadata"],u)}const s=a(t,["chunkingConfig"]);return e!==void 0&&s!=null&&c(e,["chunkingConfig"],s),o}function aE(t){const e={},o=a(t,["name"]);o!=null&&c(e,["name"],o);const i=a(t,["metadata"]);i!=null&&c(e,["metadata"],i);const s=a(t,["done"]);s!=null&&c(e,["done"],s);const u=a(t,["error"]);u!=null&&c(e,["error"],u);const d=a(t,["response"]);return d!=null&&c(e,["response"],cE(d)),e}function uE(t){const e={},o=a(t,["fileSearchStoreName"]);o!=null&&c(e,["_url","file_search_store_name"],o);const i=a(t,["fileName"]);i!=null&&c(e,["fileName"],i);const s=a(t,["config"]);return s!=null&&lE(s,e),e}function cE(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&c(e,["sdkHttpResponse"],o);const i=a(t,["parent"]);i!=null&&c(e,["parent"],i);const s=a(t,["documentName"]);return s!=null&&c(e,["documentName"],s),e}function dE(t,e){const o={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const s=a(t,["pageToken"]);return e!==void 0&&s!=null&&c(e,["_query","pageToken"],s),o}function fE(t){const e={},o=a(t,["config"]);return o!=null&&dE(o,e),e}function pE(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&c(e,["sdkHttpResponse"],o);const i=a(t,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=a(t,["fileSearchStores"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>d)),c(e,["fileSearchStores"],u)}return e}function Ip(t,e){const o={},i=a(t,["mimeType"]);e!==void 0&&i!=null&&c(e,["mimeType"],i);const s=a(t,["displayName"]);e!==void 0&&s!=null&&c(e,["displayName"],s);const u=a(t,["customMetadata"]);if(e!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(m=>m)),c(e,["customMetadata"],p)}const d=a(t,["chunkingConfig"]);return e!==void 0&&d!=null&&c(e,["chunkingConfig"],d),o}function mE(t){const e={},o=a(t,["fileSearchStoreName"]);o!=null&&c(e,["_url","file_search_store_name"],o);const i=a(t,["config"]);return i!=null&&Ip(i,e),e}function hE(t){const e={},o=a(t,["sdkHttpResponse"]);return o!=null&&c(e,["sdkHttpResponse"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gE="Content-Type",yE="X-Server-Timeout",vE="User-Agent",ma="x-goog-api-client",SE="1.40.0",EE=`google-genai-sdk/${SE}`,TE="v1beta1",CE="v1beta";class _E{constructor(e){var o,i,s;this.clientOptions=Object.assign({},e),this.customBaseUrl=(o=e.httpOptions)===null||o===void 0?void 0:o.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const u={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const p=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!p?(u.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?u.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(u.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),u.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:TE}else{if(!this.clientOptions.apiKey)throw new Dr({message:"API key must be set when using the Gemini API.",status:403});u.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:CE,u.baseUrl="https://generativelanguage.googleapis.com/"}u.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=u,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(u,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),o=new URL(e);return o.protocol=o.protocol=="http:"?"ws":"wss",o.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,o,i){const s=[this.getRequestUrlInternal(o)];return i&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e,o){return!(o.baseUrl&&o.baseUrlResourceScope===aa.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let o=this.clientOptions.httpOptions;e.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,o),s=this.constructUrl(e.path,o,i);if(e.queryParams)for(const[d,p]of Object.entries(e.queryParams))s.searchParams.append(d,String(p));let u={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else u.body=e.body;return u=await this.includeExtraHttpOptionsToRequestInit(u,o,s.toString(),e.abortSignal),this.unaryApiCall(s,u,e.httpMethod)}patchHttpOptions(e,o){const i=JSON.parse(JSON.stringify(e));for(const[s,u]of Object.entries(o))typeof u=="object"?i[s]=Object.assign(Object.assign({},i[s]),u):u!==void 0&&(i[s]=u);return i}async requestStream(e){let o=this.clientOptions.httpOptions;e.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,o),s=this.constructUrl(e.path,o,i);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let u={};return u.body=e.body,u=await this.includeExtraHttpOptionsToRequestInit(u,o,s.toString(),e.abortSignal),this.streamApiCall(s,u,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,o,i,s){if(o&&o.timeout||s){const u=new AbortController,d=u.signal;if(o.timeout&&(o==null?void 0:o.timeout)>0){const p=setTimeout(()=>u.abort(),o.timeout);p&&typeof p.unref=="function"&&p.unref()}s&&s.addEventListener("abort",()=>{u.abort()}),e.signal=d}return o&&o.extraBody!==null&&wE(e,o.extraBody),e.headers=await this.getHeadersInternal(o,i),e}async unaryApiCall(e,o,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},o),{method:i})).then(async s=>(await qf(s),new ua(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,o,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},o),{method:i})).then(async s=>(await qf(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){return Zt(this,arguments,function*(){var i;const s=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),u=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let d="";const p="data:",m=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:y}=yield pe(s.read());if(h){if(d.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const E=u.decode(y,{stream:!0});try{const A=JSON.parse(E);if("error"in A){const P=JSON.parse(JSON.stringify(A.error)),N=P.status,R=P.code,M=`got status: ${N}. ${JSON.stringify(A)}`;if(R>=400&&R<600)throw new Dr({message:M,status:R})}}catch(A){if(A.name==="ApiError")throw A}d+=E;let S=-1,w=0;for(;;){S=-1,w=0;for(const N of m){const R=d.indexOf(N);R!==-1&&(S===-1||R<S)&&(S=R,w=N.length)}if(S===-1)break;const A=d.substring(0,S);d=d.substring(S+w);const P=A.trim();if(P.startsWith(p)){const N=P.substring(p.length).trim();try{const R=new Response(N,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield pe(new ua(R))}catch(R){throw new Error(`exception parsing stream chunk ${N}. ${R}`)}}}}}finally{s.releaseLock()}})}async apiCall(e,o){return fetch(e,o).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},o=EE+" "+this.clientOptions.userAgentExtra;return e[vE]=o,e[ma]=o,e[gE]="application/json",e}async getHeadersInternal(e,o){const i=new Headers;if(e&&e.headers){for(const[s,u]of Object.entries(e.headers))i.append(s,u);e.timeout&&e.timeout>0&&i.append(yE,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,o),i}getFileName(e){var o;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(o=i.split(/[/\\]/).pop())!==null&&o!==void 0?o:""),i}async uploadFile(e,o){var i;const s={};o!=null&&(s.mimeType=o.mimeType,s.name=o.name,s.displayName=o.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const u=this.clientOptions.uploader,d=await u.stat(e);s.sizeBytes=String(d.size);const p=(i=o==null?void 0:o.mimeType)!==null&&i!==void 0?i:d.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=p;const m={file:s},h=this.getFileName(e),y=K("upload/v1beta/files",m._url),E=await this.fetchUploadUrl(y,s.sizeBytes,s.mimeType,h,m,o==null?void 0:o.httpOptions);return u.upload(e,E,this)}async uploadFileToFileSearchStore(e,o,i){var s;const u=this.clientOptions.uploader,d=await u.stat(o),p=String(d.size),m=(s=i==null?void 0:i.mimeType)!==null&&s!==void 0?s:d.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,y=this.getFileName(o),E={};i!=null&&Ip(i,E);const S=await this.fetchUploadUrl(h,p,m,y,E,i==null?void 0:i.httpOptions);return u.uploadToFileSearchStore(o,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,o,i,s,u,d){var p;let m={};d?m=d:m={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${o}`,"X-Goog-Upload-Header-Content-Type":`${i}`},s?{"X-Goog-Upload-File-Name":s}:{})};const h=await this.request({path:e,body:JSON.stringify(u),httpMethod:"POST",httpOptions:m});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(p=h==null?void 0:h.headers)===null||p===void 0?void 0:p["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function qf(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const o=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(i);throw o>=400&&o<600?new Dr({message:s,status:o}):new Error(s)}}function wE(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let o={};if(typeof t.body=="string"&&t.body.length>0)try{const u=JSON.parse(t.body);if(typeof u=="object"&&u!==null&&!Array.isArray(u))o=u;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(u,d){const p=Object.assign({},u);for(const m in d)if(Object.prototype.hasOwnProperty.call(d,m)){const h=d[m],y=p[m];h&&typeof h=="object"&&!Array.isArray(h)&&y&&typeof y=="object"&&!Array.isArray(y)?p[m]=i(y,h):(y&&h&&typeof y!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof y}, New type: ${typeof h}. Overwriting.`),p[m]=h)}return p}const s=i(o,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xE="mcp_used/unknown";let IE=!1;function Ap(t){for(const e of t)if(AE(e)||typeof e=="object"&&"inputSchema"in e)return!0;return IE}function Np(t){var e;const o=(e=t[ma])!==null&&e!==void 0?e:"";t[ma]=(o+` ${xE}`).trimStart()}function AE(t){return t!==null&&typeof t=="object"&&t instanceof Ra}function NE(t){return Zt(this,arguments,function*(o,i=100){let s,u=0;for(;u<i;){const d=yield pe(o.listTools({cursor:s}));for(const p of d.tools)yield yield pe(p),u++;if(!d.nextCursor)break;s=d.nextCursor}})}class Ra{constructor(e=[],o){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=o}static create(e,o){return new Ra(e,o)}async initialize(){var e,o,i,s;if(this.mcpTools.length>0)return;const u={},d=[];for(const y of this.mcpClients)try{for(var p=!0,m=(o=void 0,jt(NE(y))),h;h=await m.next(),e=h.done,!e;p=!0){s=h.value,p=!1;const E=s;d.push(E);const S=E.name;if(u[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);u[S]=y}}catch(E){o={error:E}}finally{try{!p&&!e&&(i=m.return)&&await i.call(m)}finally{if(o)throw o.error}}this.mcpTools=d,this.functionNameToMcpClient=u}async tool(){return await this.initialize(),oy(this.mcpTools,this.config)}async callTool(e){await this.initialize();const o=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[i.name];let u;this.config.timeout&&(u={timeout:this.config.timeout});const d=await s.callTool({name:i.name,arguments:i.args},void 0,u);o.push({functionResponse:{name:i.name,response:d.isError?{error:d}:d}})}return o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function RE(t,e,o){const i=new Yg;let s;o.data instanceof Blob?s=JSON.parse(await o.data.text()):s=JSON.parse(o.data),Object.assign(i,s),e(i)}class kE{constructor(e,o,i){this.apiClient=e,this.auth=o,this.webSocketFactory=i}async connect(e){var o,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion(),d=DE(this.apiClient.getDefaultHeaders()),p=this.apiClient.getApiKey(),m=`${s}/ws/google.ai.generativelanguage.${u}.GenerativeService.BidiGenerateMusic?key=${p}`;let h=()=>{};const y=new Promise(L=>{h=L}),E=e.callbacks,S=function(){h({})},w=this.apiClient,A={onopen:S,onmessage:L=>{RE(w,E.onmessage,L)},onerror:(o=E==null?void 0:E.onerror)!==null&&o!==void 0?o:function(L){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(L){}},P=this.webSocketFactory.create(m,ME(d),A);P.connect(),await y;const M={setup:{model:Ae(this.apiClient,e.model)}};return P.send(JSON.stringify(M)),new PE(P,this.apiClient)}}class PE{constructor(e,o){this.conn=e,this.apiClient=o}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const o=n0(e);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const o=t0(e);this.conn.send(JSON.stringify(o))}sendPlaybackControl(e){const o={playbackControl:e};this.conn.send(JSON.stringify(o))}play(){this.sendPlaybackControl(Mo.PLAY)}pause(){this.sendPlaybackControl(Mo.PAUSE)}stop(){this.sendPlaybackControl(Mo.STOP)}resetContext(){this.sendPlaybackControl(Mo.RESET_CONTEXT)}close(){this.conn.close()}}function ME(t){const e={};return t.forEach((o,i)=>{e[i]=o}),e}function DE(t){const e=new Headers;for(const[o,i]of Object.entries(t))e.append(o,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LE="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function UE(t,e,o){const i=new Wg;let s;o.data instanceof Blob?s=await o.data.text():o.data instanceof ArrayBuffer?s=new TextDecoder().decode(o.data):s=o.data;const u=JSON.parse(s);if(t.isVertexAI()){const d=i0(u);Object.assign(i,d)}else Object.assign(i,u);e(i)}class FE{constructor(e,o,i){this.apiClient=e,this.auth=o,this.webSocketFactory=i,this.music=new kE(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var o,i,s,u,d,p;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let y;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&Ap(e.config.tools)&&Np(E);const S=HE(E);if(this.apiClient.isVertexAI()){const Y=this.apiClient.getProject(),de=this.apiClient.getLocation(),ye=this.apiClient.getApiKey(),Ce=!!Y&&!!de||!!ye;this.apiClient.getCustomBaseUrl()&&!Ce?y=m:(y=`${m}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,y))}else{const Y=this.apiClient.getApiKey();let de="BidiGenerateContent",ye="key";Y!=null&&Y.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),de="BidiGenerateContentConstrained",ye="access_token"),y=`${m}/ws/google.ai.generativelanguage.${h}.GenerativeService.${de}?${ye}=${Y}`}let w=()=>{};const A=new Promise(Y=>{w=Y}),P=e.callbacks,N=function(){var Y;(Y=P==null?void 0:P.onopen)===null||Y===void 0||Y.call(P),w({})},R=this.apiClient,M={onopen:N,onmessage:Y=>{UE(R,P.onmessage,Y)},onerror:(o=P==null?void 0:P.onerror)!==null&&o!==void 0?o:function(Y){},onclose:(i=P==null?void 0:P.onclose)!==null&&i!==void 0?i:function(Y){}},L=this.webSocketFactory.create(y,bE(S),M);L.connect(),await A;let b=Ae(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&b.startsWith("publishers/")){const Y=this.apiClient.getProject(),de=this.apiClient.getLocation();Y&&de&&(b=`projects/${Y}/locations/${de}/`+b)}let V={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ns.AUDIO]}:e.config.responseModalities=[ns.AUDIO]),!((u=e.config)===null||u===void 0)&&u.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const W=(p=(d=e.config)===null||d===void 0?void 0:d.tools)!==null&&p!==void 0?p:[],X=[];for(const Y of W)if(this.isCallableTool(Y)){const de=Y;X.push(await de.tool())}else X.push(Y);X.length>0&&(e.config.tools=X);const he={model:b,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?V=e0(this.apiClient,he):V=jv(this.apiClient,he),delete V.config,L.send(JSON.stringify(V)),new GE(L,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const VE={turnComplete:!0};class GE{constructor(e,o){this.conn=e,this.apiClient=o}tLiveClientContent(e,o){if(o.turns!==null&&o.turns!==void 0){let i=[];try{i=Ot(o.turns),e.isVertexAI()||(i=i.map(s=>as(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof o.turns}'`)}return{clientContent:{turns:i,turnComplete:o.turnComplete}}}return{clientContent:{turnComplete:o.turnComplete}}}tLiveClienttToolResponse(e,o){let i=[];if(o.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(o.functionResponses)?i=o.functionResponses:i=[o.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const u of i){if(typeof u!="object"||u===null||!("name"in u)||!("response"in u))throw new Error(`Could not parse function response, type '${typeof u}'.`);if(!e.isVertexAI()&&!("id"in u))throw new Error(LE)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},VE),e);const o=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(o))}sendRealtimeInput(e){let o={};this.apiClient.isVertexAI()?o={realtimeInput:r0(e)}:o={realtimeInput:o0(e)},this.conn.send(JSON.stringify(o))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const o=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(o))}close(){this.conn.close()}}function bE(t){const e={};return t.forEach((o,i)=>{e[i]=o}),e}function HE(t){const e=new Headers;for(const[o,i]of Object.entries(t))e.append(o,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Of=10;function zf(t){var e,o,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const d of(o=t==null?void 0:t.tools)!==null&&o!==void 0?o:[])if(Uo(d)){s=!0;break}if(!s)return!0;const u=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return u&&(u<0||!Number.isInteger(u))||u==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",u),!0):!1}function Uo(t){return"callTool"in t&&typeof t.callTool=="function"}function BE(t){var e,o,i;return(i=(o=(e=t.config)===null||e===void 0?void 0:e.tools)===null||o===void 0?void 0:o.some(s=>Uo(s)))!==null&&i!==void 0?i:!1}function $f(t){var e;const o=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,s)=>{if(Uo(i))return;const u=i;u.functionDeclarations&&u.functionDeclarations.length>0&&o.push(s)}),o}function Jf(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qE extends Sn{constructor(e){super(),this.apiClient=e,this.generateContent=async o=>{var i,s,u,d,p;const m=await this.processParamsMaybeAddMcpUsage(o);if(this.maybeMoveToResponseJsonSchem(o),!BE(o)||zf(o.config))return await this.generateContentInternal(m);const h=$f(o);if(h.length>0){const P=h.map(N=>`tools[${N}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${P}.`)}let y,E;const S=Ot(m.contents),w=(u=(s=(i=m.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&u!==void 0?u:Of;let A=0;for(;A<w&&(y=await this.generateContentInternal(m),!(!y.functionCalls||y.functionCalls.length===0));){const P=y.candidates[0].content,N=[];for(const R of(p=(d=o.config)===null||d===void 0?void 0:d.tools)!==null&&p!==void 0?p:[])if(Uo(R)){const L=await R.callTool(y.functionCalls);N.push(...L)}A++,E={role:"user",parts:N},m.contents=Ot(m.contents),m.contents.push(P),m.contents.push(E),Jf(m.config)&&(S.push(P),S.push(E))}return Jf(m.config)&&(y.automaticFunctionCallingHistory=S),y},this.generateContentStream=async o=>{var i,s,u,d,p;if(this.maybeMoveToResponseJsonSchem(o),zf(o.config)){const E=await this.processParamsMaybeAddMcpUsage(o);return await this.generateContentStreamInternal(E)}const m=$f(o);if(m.length>0){const E=m.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(u=(s=(i=o==null?void 0:o.config)===null||i===void 0?void 0:i.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||u===void 0?void 0:u.streamFunctionCallArguments,y=(p=(d=o==null?void 0:o.config)===null||d===void 0?void 0:d.automaticFunctionCalling)===null||p===void 0?void 0:p.disable;if(h&&!y)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(o)},this.generateImages=async o=>await this.generateImagesInternal(o).then(i=>{var s;let u;const d=[];if(i!=null&&i.generatedImages)for(const m of i.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((s=m==null?void 0:m.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?u=m==null?void 0:m.safetyAttributes:d.push(m);let p;return u?p={generatedImages:d,positivePromptSafetyAttributes:u,sdkHttpResponse:i.sdkHttpResponse}:p={generatedImages:d,sdkHttpResponse:i.sdkHttpResponse},p}),this.list=async o=>{var i;const d={config:Object.assign(Object.assign({},{queryBase:!0}),o==null?void 0:o.config)};if(this.apiClient.isVertexAI()&&!d.config.queryBase){if(!((i=d.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");d.config.filter="labels.tune-type:*"}return new ro(vn.PAGED_ITEM_MODELS,p=>this.listInternal(p),await this.listInternal(d),d)},this.editImage=async o=>{const i={model:o.model,prompt:o.prompt,referenceImages:[],config:o.config};return o.referenceImages&&o.referenceImages&&(i.referenceImages=o.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async o=>{let i={numberOfImages:1,mode:"upscale"};o.config&&(i=Object.assign(Object.assign({},i),o.config));const s={model:o.model,image:o.image,upscaleFactor:o.upscaleFactor,config:i};return await this.upscaleImageInternal(s)},this.generateVideos=async o=>{var i,s,u,d,p,m;if((o.prompt||o.image||o.video)&&o.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=o.video)===null||i===void 0)&&i.uri&&(!((s=o.video)===null||s===void 0)&&s.videoBytes)?o.video={uri:o.video.uri,mimeType:o.video.mimeType}:!((d=(u=o.source)===null||u===void 0?void 0:u.video)===null||d===void 0)&&d.uri&&(!((m=(p=o.source)===null||p===void 0?void 0:p.video)===null||m===void 0)&&m.videoBytes)&&(o.source.video={uri:o.source.video.uri,mimeType:o.source.video.mimeType})),await this.generateVideosInternal(o)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var o,i,s;const u=(o=e.config)===null||o===void 0?void 0:o.tools;if(!u)return e;const d=await Promise.all(u.map(async m=>Uo(m)?await m.tool():m)),p={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:d})};if(p.config.tools=d,e.config&&e.config.tools&&Ap(e.config.tools)){const m=(s=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&s!==void 0?s:{};let h=Object.assign({},m);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),Np(h),p.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return p}async initAfcToolsMap(e){var o,i,s;const u=new Map;for(const d of(i=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&i!==void 0?i:[])if(Uo(d)){const p=d,m=await p.tool();for(const h of(s=m.functionDeclarations)!==null&&s!==void 0?s:[]){if(!h.name)throw new Error("Function declaration name is required.");if(u.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);u.set(h.name,p)}}return u}async processAfcStream(e){var o,i,s;const u=(s=(i=(o=e.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:Of;let d=!1,p=0;const m=await this.initAfcToolsMap(e);return(function(h,y,E){return Zt(this,arguments,function*(){for(var S,w,A,P,N,R;p<u;){d&&(p++,d=!1);const V=yield pe(h.processParamsMaybeAddMcpUsage(E)),W=yield pe(h.generateContentStreamInternal(V)),X=[],he=[];try{for(var M=!0,L=(w=void 0,jt(W)),b;b=yield pe(L.next()),S=b.done,!S;M=!0){P=b.value,M=!1;const Y=P;if(yield yield pe(Y),Y.candidates&&(!((N=Y.candidates[0])===null||N===void 0)&&N.content)){he.push(Y.candidates[0].content);for(const de of(R=Y.candidates[0].content.parts)!==null&&R!==void 0?R:[])if(p<u&&de.functionCall){if(!de.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(de.functionCall.name)){const ye=yield pe(y.get(de.functionCall.name).callTool([de.functionCall]));X.push(...ye)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${de.functionCall.name}`)}}}}catch(Y){w={error:Y}}finally{try{!M&&!S&&(A=L.return)&&(yield pe(A.call(L)))}finally{if(w)throw w.error}}if(X.length>0){d=!0;const Y=new Rr;Y.candidates=[{content:{role:"user",parts:X}}],yield yield pe(Y);const de=[];de.push(...he),de.push({role:"user",parts:X});const ye=Ot(E.contents).concat(de);E.contents=ye}else break}})})(this,m,e)}async generateContentInternal(e){var o,i,s,u;let d,p="",m={};if(this.apiClient.isVertexAI()){const h=bf(this.apiClient,e);return p=K("{model}:generateContent",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:y.headers},S})),d.then(y=>{const E=Bf(y),S=new Rr;return Object.assign(S,E),S})}else{const h=Gf(this.apiClient,e);return p=K("{model}:generateContent",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(y=>y.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:y.headers},S})),d.then(y=>{const E=Hf(y),S=new Rr;return Object.assign(S,E),S})}}async generateContentStreamInternal(e){var o,i,s,u;let d,p="",m={};if(this.apiClient.isVertexAI()){const h=bf(this.apiClient,e);return p=K("{model}:streamGenerateContent?alt=sse",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.requestStream({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),d.then(function(E){return Zt(this,arguments,function*(){var S,w,A,P;try{for(var N=!0,R=jt(E),M;M=yield pe(R.next()),S=M.done,!S;N=!0){P=M.value,N=!1;const L=P,b=Bf(yield pe(L.json()),e);b.sdkHttpResponse={headers:L.headers};const V=new Rr;Object.assign(V,b),yield yield pe(V)}}catch(L){w={error:L}}finally{try{!N&&!S&&(A=R.return)&&(yield pe(A.call(R)))}finally{if(w)throw w.error}}})})}else{const h=Gf(this.apiClient,e);return p=K("{model}:streamGenerateContent?alt=sse",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.requestStream({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}),d.then(function(E){return Zt(this,arguments,function*(){var S,w,A,P;try{for(var N=!0,R=jt(E),M;M=yield pe(R.next()),S=M.done,!S;N=!0){P=M.value,N=!1;const L=P,b=Hf(yield pe(L.json()),e);b.sdkHttpResponse={headers:L.headers};const V=new Rr;Object.assign(V,b),yield yield pe(V)}}catch(L){w={error:L}}finally{try{!N&&!S&&(A=R.return)&&(yield pe(A.call(R)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var o,i,s,u;let d,p="",m={};if(this.apiClient.isVertexAI()){const h=F0(this.apiClient,e);return p=K("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:y.headers},S})),d.then(y=>{const E=G0(y),S=new Tf;return Object.assign(S,E),S})}else{const h=U0(this.apiClient,e);return p=K("{model}:batchEmbedContents",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(y=>y.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:y.headers},S})),d.then(y=>{const E=V0(y),S=new Tf;return Object.assign(S,E),S})}}async generateImagesInternal(e){var o,i,s,u;let d,p="",m={};if(this.apiClient.isVertexAI()){const h=Y0(this.apiClient,e);return p=K("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:y.headers},S})),d.then(y=>{const E=X0(y),S=new Cf;return Object.assign(S,E),S})}else{const h=W0(this.apiClient,e);return p=K("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(y=>y.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:y.headers},S})),d.then(y=>{const E=Q0(y),S=new Cf;return Object.assign(S,E),S})}}async editImageInternal(e){var o,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const p=P0(this.apiClient,e);return u=K("{model}:predict",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:m.headers},y})),s.then(m=>{const h=M0(m),y=new Fg;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var o,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const p=YS(this.apiClient,e);return u=K("{model}:predict",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:m.headers},y})),s.then(m=>{const h=QS(m),y=new Vg;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var o,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const p=kS(this.apiClient,e);return u=K("{model}:predict",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>{const h=PS(m),y=new Gg;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var o,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const p=VS(this.apiClient,e);return u=K("{model}:predict",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>{const h=GS(m),y=new bg;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var o,i,s,u;let d,p="",m={};if(this.apiClient.isVertexAI()){const h=mS(this.apiClient,e);return p=K("{name}",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),d.then(y=>pa(y))}else{const h=pS(this.apiClient,e);return p=K("{name}",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(y=>y.json()),d.then(y=>fa(y))}}async listInternal(e){var o,i,s,u;let d,p="",m={};if(this.apiClient.isVertexAI()){const h=_S(this.apiClient,e);return p=K("{models_url}",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:y.headers},S})),d.then(y=>{const E=xS(y),S=new _f;return Object.assign(S,E),S})}else{const h=CS(this.apiClient,e);return p=K("{models_url}",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(y=>y.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:y.headers},S})),d.then(y=>{const E=wS(y),S=new _f;return Object.assign(S,E),S})}}async update(e){var o,i,s,u;let d,p="",m={};if(this.apiClient.isVertexAI()){const h=KS(this.apiClient,e);return p=K("{model}",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),d.then(y=>pa(y))}else{const h=JS(this.apiClient,e);return p=K("{name}",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(y=>y.json()),d.then(y=>fa(y))}}async delete(e){var o,i,s,u;let d,p="",m={};if(this.apiClient.isVertexAI()){const h=A0(this.apiClient,e);return p=K("{name}",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:y.headers},S})),d.then(y=>{const E=R0(y),S=new wf;return Object.assign(S,E),S})}else{const h=I0(this.apiClient,e);return p=K("{name}",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(y=>y.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:y.headers},S})),d.then(y=>{const E=N0(y),S=new wf;return Object.assign(S,E),S})}}async countTokens(e){var o,i,s,u;let d,p="",m={};if(this.apiClient.isVertexAI()){const h=_0(this.apiClient,e);return p=K("{model}:countTokens",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:y.headers},S})),d.then(y=>{const E=x0(y),S=new xf;return Object.assign(S,E),S})}else{const h=C0(this.apiClient,e);return p=K("{model}:countTokens",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(y=>y.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:y.headers},S})),d.then(y=>{const E=w0(y),S=new xf;return Object.assign(S,E),S})}}async computeTokens(e){var o,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const p=h0(this.apiClient,e);return u=K("{model}:computeTokens",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:m.headers},y})),s.then(m=>{const h=g0(m),y=new Hg;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var o,i,s,u;let d,p="",m={};if(this.apiClient.isVertexAI()){const h=oS(this.apiClient,e);return p=K("{model}:predictLongRunning",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),d.then(y=>{const E=tS(y),S=new os;return Object.assign(S,E),S})}else{const h=nS(this.apiClient,e);return p=K("{model}:predictLongRunning",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(y=>y.json()),d.then(y=>{const E=eS(y),S=new os;return Object.assign(S,E),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OE extends Sn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const o=e.operation,i=e.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=o.name.split("/operations/")[0];let u;i&&"httpOptions"in i&&(u=i.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:s,config:{httpOptions:u}});return o._fromAPIResponse({apiResponse:d,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:o.name,config:i});return o._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const o=e.operation,i=e.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=o.name.split("/operations/")[0];let u;i&&"httpOptions"in i&&(u=i.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:s,config:{httpOptions:u}});return o._fromAPIResponse({apiResponse:d,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:o.name,config:i});return o._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var o,i,s,u;let d,p="",m={};if(this.apiClient.isVertexAI()){const h=kg(e);return p=K("{operationName}",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),d}else{const h=Rg(e);return p=K("{operationName}",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(y=>y.json()),d}}async fetchPredictVideosOperationInternal(e){var o,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const p=Cg(e);return u=K("{resourceName}:fetchPredictOperation",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zE(t){const e={},o=a(t,["data"]);if(o!=null&&c(e,["data"],o),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function $E(t){const e={},o=a(t,["parts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(u=>eT(u))),c(e,["parts"],s)}const i=a(t,["role"]);return i!=null&&c(e,["role"],i),e}function JE(t,e,o){const i={},s=a(e,["expireTime"]);o!==void 0&&s!=null&&c(o,["expireTime"],s);const u=a(e,["newSessionExpireTime"]);o!==void 0&&u!=null&&c(o,["newSessionExpireTime"],u);const d=a(e,["uses"]);o!==void 0&&d!=null&&c(o,["uses"],d);const p=a(e,["liveConnectConstraints"]);o!==void 0&&p!=null&&c(o,["bidiGenerateContentSetup"],jE(t,p));const m=a(e,["lockAdditionalFields"]);return o!==void 0&&m!=null&&c(o,["fieldMask"],m),i}function KE(t,e){const o={},i=a(e,["config"]);return i!=null&&c(o,["config"],JE(t,i,o)),o}function WE(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=a(t,["fileUri"]);o!=null&&c(e,["fileUri"],o);const i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function YE(t){const e={},o=a(t,["id"]);o!=null&&c(e,["id"],o);const i=a(t,["args"]);i!=null&&c(e,["args"],i);const s=a(t,["name"]);if(s!=null&&c(e,["name"],s),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function QE(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=a(t,["enableWidget"]);return o!=null&&c(e,["enableWidget"],o),e}function XE(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=a(t,["timeRangeFilter"]);return o!=null&&c(e,["timeRangeFilter"],o),e}function ZE(t,e){const o={},i=a(t,["generationConfig"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig"],i);const s=a(t,["responseModalities"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","responseModalities"],s);const u=a(t,["temperature"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","temperature"],u);const d=a(t,["topP"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","topP"],d);const p=a(t,["topK"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","topK"],p);const m=a(t,["maxOutputTokens"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","maxOutputTokens"],m);const h=a(t,["mediaResolution"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","mediaResolution"],h);const y=a(t,["seed"]);e!==void 0&&y!=null&&c(e,["setup","generationConfig","seed"],y);const E=a(t,["speechConfig"]);e!==void 0&&E!=null&&c(e,["setup","generationConfig","speechConfig"],Na(E));const S=a(t,["thinkingConfig"]);e!==void 0&&S!=null&&c(e,["setup","generationConfig","thinkingConfig"],S);const w=a(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],w);const A=a(t,["systemInstruction"]);e!==void 0&&A!=null&&c(e,["setup","systemInstruction"],$E(yt(A)));const P=a(t,["tools"]);if(e!==void 0&&P!=null){let W=Vo(P);Array.isArray(W)&&(W=W.map(X=>nT(Fo(X)))),c(e,["setup","tools"],W)}const N=a(t,["sessionResumption"]);e!==void 0&&N!=null&&c(e,["setup","sessionResumption"],tT(N));const R=a(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&c(e,["setup","inputAudioTranscription"],R);const M=a(t,["outputAudioTranscription"]);e!==void 0&&M!=null&&c(e,["setup","outputAudioTranscription"],M);const L=a(t,["realtimeInputConfig"]);e!==void 0&&L!=null&&c(e,["setup","realtimeInputConfig"],L);const b=a(t,["contextWindowCompression"]);e!==void 0&&b!=null&&c(e,["setup","contextWindowCompression"],b);const V=a(t,["proactivity"]);if(e!==void 0&&V!=null&&c(e,["setup","proactivity"],V),a(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function jE(t,e){const o={},i=a(e,["model"]);i!=null&&c(o,["setup","model"],Ae(t,i));const s=a(e,["config"]);return s!=null&&c(o,["config"],ZE(s,o)),o}function eT(t){const e={},o=a(t,["mediaResolution"]);o!=null&&c(e,["mediaResolution"],o);const i=a(t,["codeExecutionResult"]);i!=null&&c(e,["codeExecutionResult"],i);const s=a(t,["executableCode"]);s!=null&&c(e,["executableCode"],s);const u=a(t,["fileData"]);u!=null&&c(e,["fileData"],WE(u));const d=a(t,["functionCall"]);d!=null&&c(e,["functionCall"],YE(d));const p=a(t,["functionResponse"]);p!=null&&c(e,["functionResponse"],p);const m=a(t,["inlineData"]);m!=null&&c(e,["inlineData"],zE(m));const h=a(t,["text"]);h!=null&&c(e,["text"],h);const y=a(t,["thought"]);y!=null&&c(e,["thought"],y);const E=a(t,["thoughtSignature"]);E!=null&&c(e,["thoughtSignature"],E);const S=a(t,["videoMetadata"]);return S!=null&&c(e,["videoMetadata"],S),e}function tT(t){const e={},o=a(t,["handle"]);if(o!=null&&c(e,["handle"],o),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function nT(t){const e={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=a(t,["computerUse"]);o!=null&&c(e,["computerUse"],o);const i=a(t,["fileSearch"]);i!=null&&c(e,["fileSearch"],i);const s=a(t,["codeExecution"]);if(s!=null&&c(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=a(t,["functionDeclarations"]);if(u!=null){let y=u;Array.isArray(y)&&(y=y.map(E=>E)),c(e,["functionDeclarations"],y)}const d=a(t,["googleMaps"]);d!=null&&c(e,["googleMaps"],QE(d));const p=a(t,["googleSearch"]);p!=null&&c(e,["googleSearch"],XE(p));const m=a(t,["googleSearchRetrieval"]);m!=null&&c(e,["googleSearchRetrieval"],m);const h=a(t,["urlContext"]);return h!=null&&c(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oT(t){const e=[];for(const o in t)if(Object.prototype.hasOwnProperty.call(t,o)){const i=t[o];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const s=Object.keys(i).map(u=>`${o}.${u}`);e.push(...s)}else e.push(o)}return e.join(",")}function rT(t,e){let o=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const u=i.setup;typeof u=="object"&&u!==null?(t.bidiGenerateContentSetup=u,o=u):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(o){const u=oT(o);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)u?t.fieldMask=u:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const d=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let p=[];s.length>0&&(p=s.map(h=>d.includes(h)?`generationConfig.${h}`:h));const m=[];u&&m.push(u),p.length>0&&m.push(...p),m.length>0?t.fieldMask=m.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class iT extends Sn{constructor(e){super(),this.apiClient=e}async create(e){var o,i;let s,u="",d={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const p=KE(this.apiClient,e);u=K("auth_tokens",p._url),d=p._query,delete p.config,delete p._url,delete p._query;const m=rT(p,e.config);return s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sT(t,e){const o={},i=a(t,["force"]);return e!==void 0&&i!=null&&c(e,["_query","force"],i),o}function lT(t){const e={},o=a(t,["name"]);o!=null&&c(e,["_url","name"],o);const i=a(t,["config"]);return i!=null&&sT(i,e),e}function aT(t){const e={},o=a(t,["name"]);return o!=null&&c(e,["_url","name"],o),e}function uT(t,e){const o={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const s=a(t,["pageToken"]);return e!==void 0&&s!=null&&c(e,["_query","pageToken"],s),o}function cT(t){const e={},o=a(t,["parent"]);o!=null&&c(e,["_url","parent"],o);const i=a(t,["config"]);return i!=null&&uT(i,e),e}function dT(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&c(e,["sdkHttpResponse"],o);const i=a(t,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=a(t,["documents"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>d)),c(e,["documents"],u)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fT extends Sn{constructor(e){super(),this.apiClient=e,this.list=async o=>new ro(vn.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:o.parent,config:i.config}),await this.listInternal(o),o)}async get(e){var o,i;let s,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=aT(e);return u=K("{name}",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>m)}}async delete(e){var o,i;let s="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=lT(e);s=K("{name}",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var o,i;let s,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=cT(e);return u=K("{parent}/documents",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>{const h=dT(m),y=new Bg;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pT extends Sn{constructor(e,o=new fT(e)){super(),this.apiClient=e,this.documents=o,this.list=async(i={})=>new ro(vn.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var o,i;let s,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=oE(e);return u=K("fileSearchStores",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>m)}}async get(e){var o,i;let s,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=sE(e);return u=K("{name}",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>m)}}async delete(e){var o,i;let s="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=iE(e);s=K("{name}",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var o,i;let s,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=fE(e);return u=K("fileSearchStores",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>{const h=pE(m),y=new qg;return Object.assign(y,h),y})}}async uploadToFileSearchStoreInternal(e){var o,i;let s,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=mE(e);return u=K("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>{const h=hE(m),y=new Og;return Object.assign(y,h),y})}}async importFile(e){var o,i;let s,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=uE(e);return u=K("{file_search_store_name}:importFile",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>{const h=aE(m),y=new _a;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Rp=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Rp=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),o=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^o()&15>>+i/4).toString(16))};const mT=()=>Rp();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ha(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const ga=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zt extends Error{}class Tt extends zt{constructor(e,o,i,s){super(`${Tt.makeMessage(e,o,i)}`),this.status=e,this.headers=s,this.error=o}static makeMessage(e,o,i){const s=o!=null&&o.message?typeof o.message=="string"?o.message:JSON.stringify(o.message):o?JSON.stringify(o):i;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,o,i,s){if(!e||!s)return new ds({message:i,cause:ga(o)});const u=o;return e===400?new Pp(e,u,i,s):e===401?new Mp(e,u,i,s):e===403?new Dp(e,u,i,s):e===404?new Lp(e,u,i,s):e===409?new Up(e,u,i,s):e===422?new Fp(e,u,i,s):e===429?new Vp(e,u,i,s):e>=500?new Gp(e,u,i,s):new Tt(e,u,i,s)}}class ya extends Tt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class ds extends Tt{constructor({message:e,cause:o}){super(void 0,void 0,e||"Connection error.",void 0),o&&(this.cause=o)}}class kp extends ds{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Pp extends Tt{}class Mp extends Tt{}class Dp extends Tt{}class Lp extends Tt{}class Up extends Tt{}class Fp extends Tt{}class Vp extends Tt{}class Gp extends Tt{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hT=/^[a-z][a-z0-9+.-]*:/i,gT=t=>hT.test(t);let va=t=>(va=Array.isArray,va(t));const yT=va;let vT=yT;const Kf=vT;function ST(t){if(!t)return!0;for(const e in t)return!1;return!0}function ET(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const TT=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new zt(`${t} must be an integer`);if(e<0)throw new zt(`${t} must be a positive integer`);return e},CT=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _T=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Po="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wT(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const xT=()=>{var t,e,o,i,s;const u=wT();if(u==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Po,"X-Stainless-OS":Yf(Deno.build.os),"X-Stainless-Arch":Wf(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Po,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(u==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Po,"X-Stainless-OS":Yf((o=globalThis.process.platform)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Arch":Wf((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const d=IT();return d?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Po,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${d.browser}`,"X-Stainless-Runtime-Version":d.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Po,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function IT(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:o}of t){const i=o.exec(navigator.userAgent);if(i){const s=i[1]||0,u=i[2]||0,d=i[3]||0;return{browser:e,version:`${s}.${u}.${d}`}}}return null}const Wf=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Yf=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Yi;const AT=()=>Yi??(Yi=xT());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NT(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function bp(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function RT(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return bp({start(){},async pull(o){const{done:i,value:s}=await e.next();i?o.close():o.enqueue(s)},async cancel(){var o;await((o=e.return)===null||o===void 0?void 0:o.call(e))}})}function Hp(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const o=await e.read();return o!=null&&o.done&&e.releaseLock(),o}catch(o){throw e.releaseLock(),o}},async return(){const o=e.cancel();return e.releaseLock(),await o,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function kT(t){var e,o;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((o=(e=t[Symbol.asyncIterator]()).return)===null||o===void 0?void 0:o.call(e));return}const i=t.getReader(),s=i.cancel();i.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PT=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Bp=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,o=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(o?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function ta(t,e,o){return Bp(),new File(t,e??"unknown_file",o)}function MT(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const DT=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qp=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",LT=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&qp(t),UT=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function FT(t,e,o){if(Bp(),t=await t,LT(t))return t instanceof File?t:ta([await t.arrayBuffer()],t.name);if(UT(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),ta(await Sa(s),e,o)}const i=await Sa(t);if(e||(e=MT(t)),!(o!=null&&o.type)){const s=i.find(u=>typeof u=="object"&&"type"in u&&u.type);typeof s=="string"&&(o=Object.assign(Object.assign({},o),{type:s}))}return ta(i,e,o)}async function Sa(t){var e,o,i,s,u;let d=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)d.push(t);else if(qp(t))d.push(t instanceof Blob?t:await t.arrayBuffer());else if(DT(t))try{for(var p=!0,m=jt(t),h;h=await m.next(),e=h.done,!e;p=!0){s=h.value,p=!1;const y=s;d.push(...await Sa(y))}}catch(y){o={error:y}}finally{try{!p&&!e&&(i=m.return)&&await i.call(m)}finally{if(o)throw o.error}}else{const y=(u=t==null?void 0:t.constructor)===null||u===void 0?void 0:u.name;throw new Error(`Unexpected data type: ${typeof t}${y?`; constructor: ${y}`:""}${VT(t)}`)}return d}function VT(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(o=>`"${o}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Op{constructor(e){this._client=e}}Op._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zp(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Qf=Object.freeze(Object.create(null)),GT=(t=zp)=>(function(o,...i){if(o.length===1)return o[0];let s=!1;const u=[],d=o.reduce((y,E,S)=>{var w,A,P;/[?#]/.test(E)&&(s=!0);const N=i[S];let R=(s?encodeURIComponent:t)(""+N);return S!==i.length&&(N==null||typeof N=="object"&&N.toString===((P=Object.getPrototypeOf((A=Object.getPrototypeOf((w=N.hasOwnProperty)!==null&&w!==void 0?w:Qf))!==null&&A!==void 0?A:Qf))===null||P===void 0?void 0:P.toString))&&(R=N+"",u.push({start:y.length+E.length,length:R.length,error:`Value of type ${Object.prototype.toString.call(N).slice(8,-1)} is not a valid path parameter`})),y+E+(S===i.length?"":R)},""),p=d.split(/[?#]/,1)[0],m=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=m.exec(p))!==null;)u.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(u.sort((y,E)=>y.start-E.start),u.length>0){let y=0;const E=u.reduce((S,w)=>{const A=" ".repeat(w.start-y),P="^".repeat(w.length);return y=w.start+w.length,S+A+P},"");throw new zt(`Path parameters result in path with invalid segments:
${u.map(S=>S.error).join(`
`)}
${d}
${E}`)}return d}),Qi=GT(zp);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $p extends Op{create(e,o){var i;const{api_version:s=this._client.apiVersion}=e,u=is(e,["api_version"]);if("model"in u&&"agent_config"in u)throw new zt("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in u&&"generation_config"in u)throw new zt("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Qi`/${s}/interactions`,Object.assign(Object.assign({body:u},o),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,o={},i){const{api_version:s=this._client.apiVersion}=o??{};return this._client.delete(Qi`/${s}/interactions/${e}`,i)}cancel(e,o={},i){const{api_version:s=this._client.apiVersion}=o??{};return this._client.post(Qi`/${s}/interactions/${e}/cancel`,i)}get(e,o={},i){var s;const u=o??{},{api_version:d=this._client.apiVersion}=u,p=is(u,["api_version"]);return this._client.get(Qi`/${d}/interactions/${e}`,Object.assign(Object.assign({query:p},i),{stream:(s=o==null?void 0:o.stream)!==null&&s!==void 0?s:!1}))}}$p._key=Object.freeze(["interactions"]);class Jp extends $p{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bT(t){let e=0;for(const s of t)e+=s.length;const o=new Uint8Array(e);let i=0;for(const s of t)o.set(s,i),i+=s.length;return o}let Xi;function ka(t){let e;return(Xi??(e=new globalThis.TextEncoder,Xi=e.encode.bind(e)))(t)}let Zi;function Xf(t){let e;return(Zi??(e=new globalThis.TextDecoder,Zi=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fs{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const o=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?ka(e):e;this.buffer=bT([this.buffer,o]);const i=[];let s;for(;(s=HT(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){i.push(Xf(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const u=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,d=Xf(this.buffer.subarray(0,u));i.push(d),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}fs.NEWLINE_CHARS=new Set([`
`,"\r"]);fs.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function HT(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function BT(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ss={off:0,error:200,warn:300,info:400,debug:500},Zf=(t,e,o)=>{if(t){if(ET(ss,t))return t;Et(o).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(ss))}`)}};function Mr(){}function ji(t,e,o){return!e||ss[t]>ss[o]?Mr:e[t].bind(e)}const qT={error:Mr,warn:Mr,info:Mr,debug:Mr};let jf=new WeakMap;function Et(t){var e;const o=t.logger,i=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!o)return qT;const s=jf.get(o);if(s&&s[0]===i)return s[1];const u={error:ji("error",o,i),warn:ji("warn",o,i),info:ji("info",o,i),debug:ji("debug",o,i)};return jf.set(o,[i,u]),u}const no=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,o])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":o]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Do{constructor(e,o,i){this.iterator=e,this.controller=o,this.client=i}static fromSSEResponse(e,o,i){let s=!1;const u=i?Et(i):console;function d(){return Zt(this,arguments,function*(){var m,h,y,E;if(s)throw new zt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let S=!1;try{try{for(var w=!0,A=jt(OT(e,o)),P;P=yield pe(A.next()),m=P.done,!m;w=!0){E=P.value,w=!1;const N=E;if(!S)if(N.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield pe(JSON.parse(N.data))}catch(R){throw u.error("Could not parse message into JSON:",N.data),u.error("From chunk:",N.raw),R}}}catch(N){h={error:N}}finally{try{!w&&!m&&(y=A.return)&&(yield pe(y.call(A)))}finally{if(h)throw h.error}}S=!0}catch(N){if(ha(N))return yield pe(void 0);throw N}finally{S||o.abort()}})}return new Do(d,o,i)}static fromReadableStream(e,o,i){let s=!1;function u(){return Zt(this,arguments,function*(){var m,h,y,E;const S=new fs,w=Hp(e);try{for(var A=!0,P=jt(w),N;N=yield pe(P.next()),m=N.done,!m;A=!0){E=N.value,A=!1;const R=E;for(const M of S.decode(R))yield yield pe(M)}}catch(R){h={error:R}}finally{try{!A&&!m&&(y=P.return)&&(yield pe(y.call(P)))}finally{if(h)throw h.error}}for(const R of S.flush())yield yield pe(R)})}function d(){return Zt(this,arguments,function*(){var m,h,y,E;if(s)throw new zt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let S=!1;try{try{for(var w=!0,A=jt(u()),P;P=yield pe(A.next()),m=P.done,!m;w=!0){E=P.value,w=!1;const N=E;S||N&&(yield yield pe(JSON.parse(N)))}}catch(N){h={error:N}}finally{try{!w&&!m&&(y=A.return)&&(yield pe(y.call(A)))}finally{if(h)throw h.error}}S=!0}catch(N){if(ha(N))return yield pe(void 0);throw N}finally{S||o.abort()}})}return new Do(d,o,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],o=[],i=this.iterator(),s=u=>({next:()=>{if(u.length===0){const d=i.next();e.push(d),o.push(d)}return u.shift()}});return[new Do(()=>s(e),this.controller,this.client),new Do(()=>s(o),this.controller,this.client)]}toReadableStream(){const e=this;let o;return bp({async start(){o=e[Symbol.asyncIterator]()},async pull(i){try{const{value:s,done:u}=await o.next();if(u)return i.close();const d=ka(JSON.stringify(s)+`
`);i.enqueue(d)}catch(s){i.error(s)}},async cancel(){var i;await((i=o.return)===null||i===void 0?void 0:i.call(o))}})}}function OT(t,e){return Zt(this,arguments,function*(){var i,s,u,d;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new zt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new zt("Attempted to iterate over a response with no body");const p=new $T,m=new fs,h=Hp(t.body);try{for(var y=!0,E=jt(zT(h)),S;S=yield pe(E.next()),i=S.done,!i;y=!0){d=S.value,y=!1;const w=d;for(const A of m.decode(w)){const P=p.decode(A);P&&(yield yield pe(P))}}}catch(w){s={error:w}}finally{try{!y&&!i&&(u=E.return)&&(yield pe(u.call(E)))}finally{if(s)throw s.error}}for(const w of m.flush()){const A=p.decode(w);A&&(yield yield pe(A))}})}function zT(t){return Zt(this,arguments,function*(){var o,i,s,u;let d=new Uint8Array;try{for(var p=!0,m=jt(t),h;h=yield pe(m.next()),o=h.done,!o;p=!0){u=h.value,p=!1;const y=u;if(y==null)continue;const E=y instanceof ArrayBuffer?new Uint8Array(y):typeof y=="string"?ka(y):y;let S=new Uint8Array(d.length+E.length);S.set(d),S.set(E,d.length),d=S;let w;for(;(w=BT(d))!==-1;)yield yield pe(d.slice(0,w)),d=d.slice(w)}}catch(y){i={error:y}}finally{try{!p&&!o&&(s=m.return)&&(yield pe(s.call(m)))}finally{if(i)throw i.error}}d.length>0&&(yield yield pe(d))})}class $T{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const u={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],u}if(this.chunks.push(e),e.startsWith(":"))return null;let[o,i,s]=JT(e,":");return s.startsWith(" ")&&(s=s.substring(1)),o==="event"?this.event=s:o==="data"&&this.data.push(s),null}}function JT(t,e){const o=t.indexOf(e);return o!==-1?[t.substring(0,o),e,t.substring(o+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function KT(t,e){const{response:o,requestLogID:i,retryOfRequestLogID:s,startTime:u}=e,d=await(async()=>{var p;if(e.options.stream)return Et(t).debug("response",o.status,o.url,o.headers,o.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(o,e.controller,t):Do.fromSSEResponse(o,e.controller,t);if(o.status===204)return null;if(e.options.__binaryResponse)return o;const m=o.headers.get("content-type"),h=(p=m==null?void 0:m.split(";")[0])===null||p===void 0?void 0:p.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?o.headers.get("content-length")==="0"?void 0:await o.json():await o.text()})();return Et(t).debug(`[${i}] response parsed`,no({retryOfRequestLogID:s,url:o.url,status:o.status,body:d,durationMs:Date.now()-u})),d}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pa extends Promise{constructor(e,o,i=KT){super(s=>{s(null)}),this.responsePromise=o,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new Pa(this.client,this.responsePromise,async(o,i)=>e(await this.parseResponse(o,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,o]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:o}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,o){return this.parse().then(e,o)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kp=Symbol("brand.privateNullableHeaders");function*WT(t){if(!t)return;if(Kp in t){const{values:i,nulls:s}=t;yield*i.entries();for(const u of s)yield[u,null];return}let e=!1,o;t instanceof Headers?o=t.entries():Kf(t)?o=t:(e=!0,o=Object.entries(t??{}));for(let i of o){const s=i[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const u=Kf(i[1])?i[1]:[i[1]];let d=!1;for(const p of u)p!==void 0&&(e&&!d&&(d=!0,yield[s,null]),yield[s,p])}}const kr=t=>{const e=new Headers,o=new Set;for(const i of t){const s=new Set;for(const[u,d]of WT(i)){const p=u.toLowerCase();s.has(p)||(e.delete(u),s.add(p)),d===null?(e.delete(u),o.add(p)):(e.append(u,d),o.delete(p))}}return{[Kp]:!0,values:e,nulls:o}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const na=t=>{var e,o,i,s,u,d;if(typeof globalThis.process<"u")return(i=(o=(e=gg)===null||e===void 0?void 0:e[t])===null||o===void 0?void 0:o.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(d=(u=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||u===void 0?void 0:u.call(s,t))===null||d===void 0?void 0:d.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Wp;class ps{constructor(e){var o,i,s,u,d,p,m,{baseURL:h=na("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:y=(o=na("GEMINI_API_KEY"))!==null&&o!==void 0?o:null,apiVersion:E="v1beta"}=e,S=is(e,["baseURL","apiKey","apiVersion"]);const w=Object.assign(Object.assign({apiKey:y,apiVersion:E},S),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=w.baseURL,this.timeout=(i=w.timeout)!==null&&i!==void 0?i:ps.DEFAULT_TIMEOUT,this.logger=(s=w.logger)!==null&&s!==void 0?s:console;const A="warn";this.logLevel=A,this.logLevel=(d=(u=Zf(w.logLevel,"ClientOptions.logLevel",this))!==null&&u!==void 0?u:Zf(na("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&d!==void 0?d:A,this.fetchOptions=w.fetchOptions,this.maxRetries=(p=w.maxRetries)!==null&&p!==void 0?p:2,this.fetch=(m=w.fetch)!==null&&m!==void 0?m:NT(),this.encoder=PT,this._options=w,this.apiKey=y,this.apiVersion=E,this.clientAdapter=w.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:o}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!o.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const o=kr([e.headers]);if(!(o.values.has("authorization")||o.values.has("x-goog-api-key"))){if(this.apiKey)return kr([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return kr([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([o,i])=>typeof i<"u").map(([o,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(o)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(o)}=`;throw new zt(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Po}`}defaultIdempotencyKey(){return`stainless-node-retry-${mT()}`}makeStatusError(e,o,i,s){return Tt.generate(e,o,i,s)}buildURL(e,o,i){const s=!this.baseURLOverridden()&&i||this.baseURL,u=gT(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),d=this.defaultQuery();return ST(d)||(o=Object.assign(Object.assign({},d),o)),typeof o=="object"&&o&&!Array.isArray(o)&&(u.search=this.stringifyQuery(o)),u.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const o=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${o}`}}async prepareRequest(e,{url:o,options:i}){}get(e,o){return this.methodRequest("get",e,o)}post(e,o){return this.methodRequest("post",e,o)}patch(e,o){return this.methodRequest("patch",e,o)}put(e,o){return this.methodRequest("put",e,o)}delete(e,o){return this.methodRequest("delete",e,o)}methodRequest(e,o,i){return this.request(Promise.resolve(i).then(s=>Object.assign({method:e,path:o},s)))}request(e,o=null){return new Pa(this,this.makeRequest(e,o,void 0))}async makeRequest(e,o,i){var s,u,d;const p=await e,m=(s=p.maxRetries)!==null&&s!==void 0?s:this.maxRetries;o==null&&(o=m),await this.prepareOptions(p);const{req:h,url:y,timeout:E}=await this.buildRequest(p,{retryCount:m-o});await this.prepareRequest(h,{url:y,options:p});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),w=i===void 0?"":`, retryOf: ${i}`,A=Date.now();if(Et(this).debug(`[${S}] sending request`,no({retryOfRequestLogID:i,method:p.method,url:y,options:p,headers:h.headers})),!((u=p.signal)===null||u===void 0)&&u.aborted)throw new ya;const P=new AbortController,N=await this.fetchWithTimeout(y,h,E,P).catch(ga),R=Date.now();if(N instanceof globalThis.Error){const L=`retrying, ${o} attempts remaining`;if(!((d=p.signal)===null||d===void 0)&&d.aborted)throw new ya;const b=ha(N)||/timed? ?out/i.test(String(N)+("cause"in N?String(N.cause):""));if(o)return Et(this).info(`[${S}] connection ${b?"timed out":"failed"} - ${L}`),Et(this).debug(`[${S}] connection ${b?"timed out":"failed"} (${L})`,no({retryOfRequestLogID:i,url:y,durationMs:R-A,message:N.message})),this.retryRequest(p,o,i??S);throw Et(this).info(`[${S}] connection ${b?"timed out":"failed"} - error; no more retries left`),Et(this).debug(`[${S}] connection ${b?"timed out":"failed"} (error; no more retries left)`,no({retryOfRequestLogID:i,url:y,durationMs:R-A,message:N.message})),b?new kp:new ds({cause:N})}const M=`[${S}${w}] ${h.method} ${y} ${N.ok?"succeeded":"failed"} with status ${N.status} in ${R-A}ms`;if(!N.ok){const L=await this.shouldRetry(N);if(o&&L){const Y=`retrying, ${o} attempts remaining`;return await kT(N.body),Et(this).info(`${M} - ${Y}`),Et(this).debug(`[${S}] response error (${Y})`,no({retryOfRequestLogID:i,url:N.url,status:N.status,headers:N.headers,durationMs:R-A})),this.retryRequest(p,o,i??S,N.headers)}const b=L?"error; no more retries left":"error; not retryable";Et(this).info(`${M} - ${b}`);const V=await N.text().catch(Y=>ga(Y).message),W=CT(V),X=W?void 0:V;throw Et(this).debug(`[${S}] response error (${b})`,no({retryOfRequestLogID:i,url:N.url,status:N.status,headers:N.headers,message:X,durationMs:Date.now()-A})),this.makeStatusError(N.status,W,X,N.headers)}return Et(this).info(M),Et(this).debug(`[${S}] response start`,no({retryOfRequestLogID:i,url:N.url,status:N.status,headers:N.headers,durationMs:R-A})),{response:N,options:p,controller:P,requestLogID:S,retryOfRequestLogID:i,startTime:A}}async fetchWithTimeout(e,o,i,s){const u=o||{},{signal:d,method:p}=u,m=is(u,["signal","method"]),h=s.abort.bind(s);d&&d.addEventListener("abort",h,{once:!0});const y=setTimeout(h,i),E=globalThis.ReadableStream&&m.body instanceof globalThis.ReadableStream||typeof m.body=="object"&&m.body!==null&&Symbol.asyncIterator in m.body,S=Object.assign(Object.assign(Object.assign({signal:s.signal},E?{duplex:"half"}:{}),{method:"GET"}),m);p&&(S.method=p.toUpperCase());try{return await this.fetch.call(void 0,e,S)}finally{clearTimeout(y)}}async shouldRetry(e){const o=e.headers.get("x-should-retry");return o==="true"?!0:o==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,o,i,s){var u;let d;const p=s==null?void 0:s.get("retry-after-ms");if(p){const h=parseFloat(p);Number.isNaN(h)||(d=h)}const m=s==null?void 0:s.get("retry-after");if(m&&!d){const h=parseFloat(m);Number.isNaN(h)?d=Date.parse(m)-Date.now():d=h*1e3}if(!(d&&0<=d&&d<60*1e3)){const h=(u=e.maxRetries)!==null&&u!==void 0?u:this.maxRetries;d=this.calculateDefaultRetryTimeoutMillis(o,h)}return await _T(d),this.makeRequest(e,o-1,i)}calculateDefaultRetryTimeoutMillis(e,o){const u=o-e,d=Math.min(.5*Math.pow(2,u),8),p=1-Math.random()*.25;return d*p*1e3}async buildRequest(e,{retryCount:o=0}={}){var i,s,u;const d=Object.assign({},e),{method:p,path:m,query:h,defaultBaseURL:y}=d,E=this.buildURL(m,h,y);"timeout"in d&&TT("timeout",d.timeout),d.timeout=(i=d.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:S,body:w}=this.buildBody({options:d}),A=await this.buildHeaders({options:e,method:p,bodyHeaders:S,retryCount:o});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:p,headers:A},d.signal&&{signal:d.signal}),globalThis.ReadableStream&&w instanceof globalThis.ReadableStream&&{duplex:"half"}),w&&{body:w}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(u=d.fetchOptions)!==null&&u!==void 0?u:{}),url:E,timeout:d.timeout}}async buildHeaders({options:e,method:o,bodyHeaders:i,retryCount:s}){let u={};this.idempotencyHeader&&o!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),u[this.idempotencyHeader]=e.idempotencyKey);const d=await this.authHeaders(e);let p=kr([u,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),AT()),this._options.defaultHeaders,i,e.headers,d]);return this.validateHeaders(p),p.values}buildBody({options:{body:e,headers:o}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=kr([o]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:RT(e)}:this.encoder({body:e,headers:i})}}ps.DEFAULT_TIMEOUT=6e4;class it extends ps{constructor(){super(...arguments),this.interactions=new Jp(this)}}Wp=it;it.GeminiNextGenAPIClient=Wp;it.GeminiNextGenAPIClientError=zt;it.APIError=Tt;it.APIConnectionError=ds;it.APIConnectionTimeoutError=kp;it.APIUserAbortError=ya;it.NotFoundError=Lp;it.ConflictError=Up;it.RateLimitError=Vp;it.BadRequestError=Pp;it.AuthenticationError=Mp;it.InternalServerError=Gp;it.PermissionDeniedError=Dp;it.UnprocessableEntityError=Fp;it.toFile=FT;it.Interactions=Jp;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YT(t,e){const o={},i=a(t,["name"]);return i!=null&&c(o,["_url","name"],i),o}function QT(t,e){const o={},i=a(t,["name"]);return i!=null&&c(o,["_url","name"],i),o}function XT(t,e){const o={},i=a(t,["sdkHttpResponse"]);return i!=null&&c(o,["sdkHttpResponse"],i),o}function ZT(t,e){const o={},i=a(t,["sdkHttpResponse"]);return i!=null&&c(o,["sdkHttpResponse"],i),o}function jT(t,e,o){const i={};if(a(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=a(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&c(e,["displayName"],s),a(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const u=a(t,["epochCount"]);e!==void 0&&u!=null&&c(e,["tuningTask","hyperparameters","epochCount"],u);const d=a(t,["learningRateMultiplier"]);if(d!=null&&c(i,["tuningTask","hyperparameters","learningRateMultiplier"],d),a(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(a(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(a(t,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(a(t,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const p=a(t,["batchSize"]);e!==void 0&&p!=null&&c(e,["tuningTask","hyperparameters","batchSize"],p);const m=a(t,["learningRate"]);if(e!==void 0&&m!=null&&c(e,["tuningTask","hyperparameters","learningRate"],m),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(a(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(a(t,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(a(t,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(a(t,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(a(t,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return i}function eC(t,e,o){const i={};let s=a(o,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const V=a(t,["validationDataset"]);e!==void 0&&V!=null&&c(e,["supervisedTuningSpec"],oa(V))}else if(s==="PREFERENCE_TUNING"){const V=a(t,["validationDataset"]);e!==void 0&&V!=null&&c(e,["preferenceOptimizationSpec"],oa(V))}else if(s==="DISTILLATION"){const V=a(t,["validationDataset"]);e!==void 0&&V!=null&&c(e,["distillationSpec"],oa(V))}const u=a(t,["tunedModelDisplayName"]);e!==void 0&&u!=null&&c(e,["tunedModelDisplayName"],u);const d=a(t,["description"]);e!==void 0&&d!=null&&c(e,["description"],d);let p=a(o,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const V=a(t,["epochCount"]);e!==void 0&&V!=null&&c(e,["supervisedTuningSpec","hyperParameters","epochCount"],V)}else if(p==="PREFERENCE_TUNING"){const V=a(t,["epochCount"]);e!==void 0&&V!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],V)}else if(p==="DISTILLATION"){const V=a(t,["epochCount"]);e!==void 0&&V!=null&&c(e,["distillationSpec","hyperParameters","epochCount"],V)}let m=a(o,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const V=a(t,["learningRateMultiplier"]);e!==void 0&&V!=null&&c(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],V)}else if(m==="PREFERENCE_TUNING"){const V=a(t,["learningRateMultiplier"]);e!==void 0&&V!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],V)}else if(m==="DISTILLATION"){const V=a(t,["learningRateMultiplier"]);e!==void 0&&V!=null&&c(e,["distillationSpec","hyperParameters","learningRateMultiplier"],V)}let h=a(o,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const V=a(t,["exportLastCheckpointOnly"]);e!==void 0&&V!=null&&c(e,["supervisedTuningSpec","exportLastCheckpointOnly"],V)}else if(h==="PREFERENCE_TUNING"){const V=a(t,["exportLastCheckpointOnly"]);e!==void 0&&V!=null&&c(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],V)}else if(h==="DISTILLATION"){const V=a(t,["exportLastCheckpointOnly"]);e!==void 0&&V!=null&&c(e,["distillationSpec","exportLastCheckpointOnly"],V)}let y=a(o,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const V=a(t,["adapterSize"]);e!==void 0&&V!=null&&c(e,["supervisedTuningSpec","hyperParameters","adapterSize"],V)}else if(y==="PREFERENCE_TUNING"){const V=a(t,["adapterSize"]);e!==void 0&&V!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],V)}else if(y==="DISTILLATION"){const V=a(t,["adapterSize"]);e!==void 0&&V!=null&&c(e,["distillationSpec","hyperParameters","adapterSize"],V)}let E=a(o,["config","method"]);if(E===void 0&&(E="SUPERVISED_FINE_TUNING"),E==="SUPERVISED_FINE_TUNING"){const V=a(t,["tuningMode"]);e!==void 0&&V!=null&&c(e,["supervisedTuningSpec","tuningMode"],V)}const S=a(t,["customBaseModel"]);e!==void 0&&S!=null&&c(e,["customBaseModel"],S);let w=a(o,["config","method"]);if(w===void 0&&(w="SUPERVISED_FINE_TUNING"),w==="SUPERVISED_FINE_TUNING"){const V=a(t,["batchSize"]);e!==void 0&&V!=null&&c(e,["supervisedTuningSpec","hyperParameters","batchSize"],V)}let A=a(o,["config","method"]);if(A===void 0&&(A="SUPERVISED_FINE_TUNING"),A==="SUPERVISED_FINE_TUNING"){const V=a(t,["learningRate"]);e!==void 0&&V!=null&&c(e,["supervisedTuningSpec","hyperParameters","learningRate"],V)}const P=a(t,["labels"]);e!==void 0&&P!=null&&c(e,["labels"],P);const N=a(t,["beta"]);e!==void 0&&N!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","beta"],N);const R=a(t,["baseTeacherModel"]);e!==void 0&&R!=null&&c(e,["distillationSpec","baseTeacherModel"],R);const M=a(t,["tunedTeacherModelSource"]);e!==void 0&&M!=null&&c(e,["distillationSpec","tunedTeacherModelSource"],M);const L=a(t,["sftLossWeightMultiplier"]);e!==void 0&&L!=null&&c(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],L);const b=a(t,["outputUri"]);return e!==void 0&&b!=null&&c(e,["outputUri"],b),i}function tC(t,e){const o={},i=a(t,["baseModel"]);i!=null&&c(o,["baseModel"],i);const s=a(t,["preTunedModel"]);s!=null&&c(o,["preTunedModel"],s);const u=a(t,["trainingDataset"]);u!=null&&fC(u);const d=a(t,["config"]);return d!=null&&jT(d,o),o}function nC(t,e){const o={},i=a(t,["baseModel"]);i!=null&&c(o,["baseModel"],i);const s=a(t,["preTunedModel"]);s!=null&&c(o,["preTunedModel"],s);const u=a(t,["trainingDataset"]);u!=null&&pC(u,o,e);const d=a(t,["config"]);return d!=null&&eC(d,o,e),o}function oC(t,e){const o={},i=a(t,["name"]);return i!=null&&c(o,["_url","name"],i),o}function rC(t,e){const o={},i=a(t,["name"]);return i!=null&&c(o,["_url","name"],i),o}function iC(t,e,o){const i={},s=a(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const u=a(t,["pageToken"]);e!==void 0&&u!=null&&c(e,["_query","pageToken"],u);const d=a(t,["filter"]);return e!==void 0&&d!=null&&c(e,["_query","filter"],d),i}function sC(t,e,o){const i={},s=a(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const u=a(t,["pageToken"]);e!==void 0&&u!=null&&c(e,["_query","pageToken"],u);const d=a(t,["filter"]);return e!==void 0&&d!=null&&c(e,["_query","filter"],d),i}function lC(t,e){const o={},i=a(t,["config"]);return i!=null&&iC(i,o),o}function aC(t,e){const o={},i=a(t,["config"]);return i!=null&&sC(i,o),o}function uC(t,e){const o={},i=a(t,["sdkHttpResponse"]);i!=null&&c(o,["sdkHttpResponse"],i);const s=a(t,["nextPageToken"]);s!=null&&c(o,["nextPageToken"],s);const u=a(t,["tunedModels"]);if(u!=null){let d=u;Array.isArray(d)&&(d=d.map(p=>Yp(p))),c(o,["tuningJobs"],d)}return o}function cC(t,e){const o={},i=a(t,["sdkHttpResponse"]);i!=null&&c(o,["sdkHttpResponse"],i);const s=a(t,["nextPageToken"]);s!=null&&c(o,["nextPageToken"],s);const u=a(t,["tuningJobs"]);if(u!=null){let d=u;Array.isArray(d)&&(d=d.map(p=>Ea(p))),c(o,["tuningJobs"],d)}return o}function dC(t,e){const o={},i=a(t,["name"]);i!=null&&c(o,["model"],i);const s=a(t,["name"]);return s!=null&&c(o,["endpoint"],s),o}function fC(t,e){const o={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=a(t,["examples"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>u)),c(o,["examples","examples"],s)}return o}function pC(t,e,o){const i={};let s=a(o,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const d=a(t,["gcsUri"]);e!==void 0&&d!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],d)}else if(s==="PREFERENCE_TUNING"){const d=a(t,["gcsUri"]);e!==void 0&&d!=null&&c(e,["preferenceOptimizationSpec","trainingDatasetUri"],d)}else if(s==="DISTILLATION"){const d=a(t,["gcsUri"]);e!==void 0&&d!=null&&c(e,["distillationSpec","promptDatasetUri"],d)}let u=a(o,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const d=a(t,["vertexDatasetResource"]);e!==void 0&&d!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],d)}else if(u==="PREFERENCE_TUNING"){const d=a(t,["vertexDatasetResource"]);e!==void 0&&d!=null&&c(e,["preferenceOptimizationSpec","trainingDatasetUri"],d)}else if(u==="DISTILLATION"){const d=a(t,["vertexDatasetResource"]);e!==void 0&&d!=null&&c(e,["distillationSpec","promptDatasetUri"],d)}if(a(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function Yp(t,e){const o={},i=a(t,["sdkHttpResponse"]);i!=null&&c(o,["sdkHttpResponse"],i);const s=a(t,["name"]);s!=null&&c(o,["name"],s);const u=a(t,["state"]);u!=null&&c(o,["state"],dp(u));const d=a(t,["createTime"]);d!=null&&c(o,["createTime"],d);const p=a(t,["tuningTask","startTime"]);p!=null&&c(o,["startTime"],p);const m=a(t,["tuningTask","completeTime"]);m!=null&&c(o,["endTime"],m);const h=a(t,["updateTime"]);h!=null&&c(o,["updateTime"],h);const y=a(t,["description"]);y!=null&&c(o,["description"],y);const E=a(t,["baseModel"]);E!=null&&c(o,["baseModel"],E);const S=a(t,["_self"]);return S!=null&&c(o,["tunedModel"],dC(S)),o}function Ea(t,e){const o={},i=a(t,["sdkHttpResponse"]);i!=null&&c(o,["sdkHttpResponse"],i);const s=a(t,["name"]);s!=null&&c(o,["name"],s);const u=a(t,["state"]);u!=null&&c(o,["state"],dp(u));const d=a(t,["createTime"]);d!=null&&c(o,["createTime"],d);const p=a(t,["startTime"]);p!=null&&c(o,["startTime"],p);const m=a(t,["endTime"]);m!=null&&c(o,["endTime"],m);const h=a(t,["updateTime"]);h!=null&&c(o,["updateTime"],h);const y=a(t,["error"]);y!=null&&c(o,["error"],y);const E=a(t,["description"]);E!=null&&c(o,["description"],E);const S=a(t,["baseModel"]);S!=null&&c(o,["baseModel"],S);const w=a(t,["tunedModel"]);w!=null&&c(o,["tunedModel"],w);const A=a(t,["preTunedModel"]);A!=null&&c(o,["preTunedModel"],A);const P=a(t,["supervisedTuningSpec"]);P!=null&&c(o,["supervisedTuningSpec"],P);const N=a(t,["preferenceOptimizationSpec"]);N!=null&&c(o,["preferenceOptimizationSpec"],N);const R=a(t,["distillationSpec"]);R!=null&&c(o,["distillationSpec"],R);const M=a(t,["tuningDataStats"]);M!=null&&c(o,["tuningDataStats"],M);const L=a(t,["encryptionSpec"]);L!=null&&c(o,["encryptionSpec"],L);const b=a(t,["partnerModelTuningSpec"]);b!=null&&c(o,["partnerModelTuningSpec"],b);const V=a(t,["customBaseModel"]);V!=null&&c(o,["customBaseModel"],V);const W=a(t,["experiment"]);W!=null&&c(o,["experiment"],W);const X=a(t,["labels"]);X!=null&&c(o,["labels"],X);const he=a(t,["outputUri"]);he!=null&&c(o,["outputUri"],he);const Y=a(t,["pipelineJob"]);Y!=null&&c(o,["pipelineJob"],Y);const de=a(t,["serviceAccount"]);de!=null&&c(o,["serviceAccount"],de);const ye=a(t,["tunedModelDisplayName"]);ye!=null&&c(o,["tunedModelDisplayName"],ye);const Ce=a(t,["veoTuningSpec"]);return Ce!=null&&c(o,["veoTuningSpec"],Ce),o}function mC(t,e){const o={},i=a(t,["sdkHttpResponse"]);i!=null&&c(o,["sdkHttpResponse"],i);const s=a(t,["name"]);s!=null&&c(o,["name"],s);const u=a(t,["metadata"]);u!=null&&c(o,["metadata"],u);const d=a(t,["done"]);d!=null&&c(o,["done"],d);const p=a(t,["error"]);return p!=null&&c(o,["error"],p),o}function oa(t,e){const o={},i=a(t,["gcsUri"]);i!=null&&c(o,["validationDatasetUri"],i);const s=a(t,["vertexDatasetResource"]);return s!=null&&c(o,["validationDatasetUri"],s),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hC extends Sn{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new ro(vn.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(o),o),this.get=async o=>await this.getInternal(o),this.tune=async o=>{var i;if(this.apiClient.isVertexAI())if(o.baseModel.startsWith("projects/")){const s={tunedModelName:o.baseModel};!((i=o.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(s.checkpointId=o.config.preTunedModelCheckpointId);const u=Object.assign(Object.assign({},o),{preTunedModel:s});return u.baseModel=void 0,await this.tuneInternal(u)}else{const s=Object.assign({},o);return await this.tuneInternal(s)}else{const s=Object.assign({},o),u=await this.tuneMldevInternal(s);let d="";return u.metadata!==void 0&&u.metadata.tunedModel!==void 0?d=u.metadata.tunedModel:u.name!==void 0&&u.name.includes("/operations/")&&(d=u.name.split("/operations/")[0]),{name:d,state:la.JOB_STATE_QUEUED}}}}async getInternal(e){var o,i,s,u;let d,p="",m={};if(this.apiClient.isVertexAI()){const h=rC(e);return p=K("{name}",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:y.headers},S})),d.then(y=>Ea(y))}else{const h=oC(e);return p=K("{name}",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(y=>y.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:y.headers},S})),d.then(y=>Yp(y))}}async listInternal(e){var o,i,s,u;let d,p="",m={};if(this.apiClient.isVertexAI()){const h=aC(e);return p=K("tuningJobs",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:y.headers},S})),d.then(y=>{const E=cC(y),S=new If;return Object.assign(S,E),S})}else{const h=lC(e);return p=K("tunedModels",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(y=>y.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:y.headers},S})),d.then(y=>{const E=uC(y),S=new If;return Object.assign(S,E),S})}}async cancel(e){var o,i,s,u;let d,p="",m={};if(this.apiClient.isVertexAI()){const h=QT(e);return p=K("{name}:cancel",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:y.headers},S})),d.then(y=>{const E=ZT(y),S=new Af;return Object.assign(S,E),S})}else{const h=YT(e);return p=K("{name}:cancel",h._url),m=h._query,delete h._url,delete h._query,d=this.apiClient.request({path:p,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(y=>y.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:y.headers},S})),d.then(y=>{const E=XT(y),S=new Af;return Object.assign(S,E),S})}}async tuneInternal(e){var o,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const p=nC(e,e);return u=K("tuningJobs",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:m.headers},y})),s.then(m=>Ea(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var o,i;let s,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=tC(e);return u=K("tunedModels",p._url),d=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:m.headers},y})),s.then(m=>mC(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gC{async download(e,o){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const yC=1024*1024*8,vC=3,SC=1e3,EC=2,ls="x-goog-upload-status";async function TC(t,e,o){var i;const s=await Qp(t,e,o),u=await(s==null?void 0:s.json());if(((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[ls])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return u.file}async function CC(t,e,o){var i;const s=await Qp(t,e,o),u=await(s==null?void 0:s.json());if(((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[ls])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const d=ip(u),p=new wa;return Object.assign(p,d),p}async function Qp(t,e,o){var i,s;let u=0,d=0,p=new ua(new Response),m="upload";for(u=t.size;d<u;){const h=Math.min(yC,u-d),y=t.slice(d,d+h);d+h>=u&&(m+=", finalize");let E=0,S=SC;for(;E<vC&&(p=await o.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(d),"Content-Length":String(h)}}}),!(!((i=p==null?void 0:p.headers)===null||i===void 0)&&i[ls]));)E++,await wC(S),S=S*EC;if(d+=h,((s=p==null?void 0:p.headers)===null||s===void 0?void 0:s[ls])!=="active")break;if(u<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return p}async function _C(t){return{size:t.size,type:t.type}}function wC(t){return new Promise(e=>setTimeout(e,t))}class xC{async upload(e,o,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await TC(e,o,i)}async uploadToFileSearchStore(e,o,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await CC(e,o,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await _C(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IC{create(e,o,i){return new AC(e,o,i)}}class AC{constructor(e,o,i){this.url=e,this.headers=o,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ep="x-goog-api-key";class NC{constructor(e){this.apiKey=e}async addAuthHeaders(e,o){if(e.get(ep)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(ep,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RC="gl-node/";class Xp{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const o=new it({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=o.interactions,this._interactions}constructor(e){var o;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(o=e.vertexai)!==null&&o!==void 0?o:!1,this.apiKey=e.apiKey;const i=Eg(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new NC(this.apiKey);this.apiClient=new _E({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:RC+"web",uploader:new xC,downloader:new gC}),this.models=new qE(this.apiClient),this.live=new FE(this.apiClient,s,new IC),this.batches=new Qy(this.apiClient),this.chats=new Pv(this.models,this.apiClient),this.caches=new Nv(this.apiClient),this.files=new Ov(this.apiClient),this.operations=new OE(this.apiClient),this.authTokens=new iT(this.apiClient),this.tunings=new hC(this.apiClient),this.fileSearchStores=new pT(this.apiClient)}}class oo extends Error{constructor(e){super(e),this.name="ApiKeyError"}}const tp=(t,e)=>{const{customPromptSelect:o,customPromptEntry:i,promptSwitches:s,customPromptEntryPrompt:u,descWords:d}=t;if(e==="prompt"&&s.customPrompt&&u.trim())return`Analyze this image based on the following instructions:
${u.trim()}`;if(e==="metadata"&&o==="set_custom"&&i.trim())return`Analyze this image based on the following instructions:
${i.trim()}`;if(e==="prompt"){let p=`Act as an expert metadata generator specializing in stock media requirements.
Analyze this image.
IMPORTANT: If the subject is isolated, assume it's on a white or transparent background. Do NOT mention "black background", "dark background", or similar phrases.
`;return p+=`Generate only a compelling description.
Target Description Length: MUST BE EXACTLY ${d} words. Provide the exact word count requested.
`,s.silhouette&&(p+=`Style: Silhouette. Emphasize this.
`),s.whiteBg&&(p+=`Background: Plain white. Mention 'white background', 'isolated'.
`),s.transparentBg&&(p+=`Background: Transparent. Mention 'transparent background', 'isolated'.
`),p+="Focus on facts and concepts, avoiding subjective words (e.g., beautiful, amazing). Output the result as a simple string or JSON with a 'description' key. Do not use nested objects.",p}else return`I will give you an image. You must generate a JSON object with the following flat structure (no nested objects):
1. "title": Write a title for the image. The title should be in sentence case (only the first letter capitalized) and be between 70-100 characters. It must be a single string.
2. "description": Write a detailed description for the image. It must be a single string, not an object.
3. "keywords": Provide a list of relevant keywords. Keywords should be single words where possible, lowercase, and singular. Provide a maximum of 30 keywords.
4. "category": Select a single, relevant Category string.`},Zp=async(t,e={},o=6e4)=>{const i=new AbortController,s=setTimeout(()=>i.abort(),o);try{const u=await fetch(t,{...e,signal:i.signal});return clearTimeout(s),u}catch(u){throw clearTimeout(s),u.name==="AbortError"?new Error("Request timed out."):u}},kC=(t,e,o)=>{let i=t.trim();const s=i.match(/```(?:json)?\s*([\s\S]*?)\s*```/);s&&s[1]&&(i=s[1]);const u=i.indexOf("{"),d=i.lastIndexOf("}");u!==-1&&d>u&&(i=i.substring(u,d+1));let p;try{p=JSON.parse(i)}catch(M){throw console.error("JSON Parse Error:",M,"Cleaned Text:",i,"Original Text:",t),new Error("Failed to parse AI response as JSON.")}const m={};if(p&&typeof p=="object"&&!Array.isArray(p))Object.keys(p).forEach(M=>{m[M.toLowerCase()]=p[M]});else throw new Error("Invalid response format: Expected a JSON object.");const h=M=>{if(M==null)return"";if(typeof M=="string"){const L=M.trim();if(L.startsWith("{")&&L.endsWith("}")||L.startsWith("[")&&L.endsWith("]"))try{const b=JSON.parse(L);return h(b)}catch{return M}return M}if(typeof M=="number")return String(M);if(Array.isArray(M))return M.map(L=>h(L)).join(". ");if(typeof M=="object"){const L=[];return M.main&&L.push(h(M.main)),M.summary&&L.push(h(M.summary)),M.details&&L.push(h(M.details)),M.text&&L.push(h(M.text)),L.length>0?L.join(" "):Object.values(M).map(b=>h(b)).filter(b=>b.length>0).join(". ")}return String(M)};if(e==="prompt"){const M=m.description||m.prompt||m.text||"";return{description:h(M)}}m.title=h(m.title||m.headline||""),m.description=h(m.description||m.caption||m.summary||""),typeof m.category!="string"&&(m.category=String(m.category||"N/A"));const{advanceTitle:y,keywordsCount:E}=o;let S="";typeof m.title=="string"&&m.title.length>0&&(S=m.title.charAt(0).toUpperCase()+m.title.slice(1).toLowerCase());const w=[];y.transparentBg&&w.push("isolated on transparent background"),y.whiteBg&&w.push("isolated on white background"),y.vector&&w.push("Vector"),y.illustration&&w.push("illustration");const A=w.length>0?" "+w.join(", "):"";m.title=S+A;let P=m.keywords||m.tags||[];typeof P=="string"?P=P.split(/,+/):Array.isArray(P)||(P=[]);let N=P.map(M=>String(M).trim().toLowerCase()).filter(Boolean);return w.map(M=>M.toLowerCase()).forEach(M=>{N.includes(M)||N.push(M)}),m.keywords=[...new Set(N)].slice(0,E),m},ra=async(t,e,o,i,s,u,d)=>{var y,E,S,w;if(!s)throw new Error("API data is missing.");const p=t.charAt(0).toUpperCase()+t.slice(1);let m=0;const h=3;for(;m<=h;)try{let A="";if(t==="gemini")try{const P=new Xp({apiKey:e}),N=d==="metadata"?{type:gt.OBJECT,properties:{title:{type:gt.STRING},description:{type:gt.STRING},keywords:{type:gt.ARRAY,items:{type:gt.STRING}},category:{type:gt.STRING}},required:["title","description","keywords","category"]}:{type:gt.OBJECT,properties:{description:{type:gt.STRING}},required:["description"]};if(A=(await P.models.generateContent({model:o,contents:{parts:[{text:i},{inlineData:{mimeType:s.mimeType,data:s.base64Data}}]},config:{temperature:.7,maxOutputTokens:2048,responseMimeType:"application/json",responseSchema:N}})).text||"",!A)throw new Error("Empty response from Gemini")}catch(P){const N=P.message||"Unknown Gemini API error";throw N.includes("403")||N.includes("401")||N.includes("API key not valid")?new oo("Invalid API Key or unauthorized access."):N.includes("429")?new oo("Rate limit exceeded."):P}else{let P=t==="mistral"?"https://api.mistral.ai/v1/chat/completions":"https://api.groq.com/openai/v1/chat/completions";const N={model:o,messages:[{role:"system",content:"Your response must be ONLY the JSON object, without any markdown."},{role:"user",content:[{type:"text",text:i},{type:"image_url",image_url:{url:`data:${s.mimeType};base64,${s.base64Data}`}}]}],temperature:.7,max_tokens:2048,response_format:{type:"json_object"}},R=new Headers({"Content-Type":"application/json",Authorization:`Bearer ${e}`}),M=await Zp(P,{method:"POST",headers:R,body:JSON.stringify(N)});if(!M.ok){const V=((y=(await M.json().catch(()=>({}))).error)==null?void 0:y.message)||`${p} API Error: ${M.status} ${M.statusText}`;throw M.status===429||M.status===401||M.status===403?new oo(V):new Error(V)}if(A=(w=(S=(E=(await M.json()).choices)==null?void 0:E[0])==null?void 0:S.message)==null?void 0:w.content,!A)throw new Error(`Invalid response structure from ${p}.`)}return kC(A,d,u)}catch(A){if(A instanceof oo&&(A.message.includes("429")||A.message.toLowerCase().includes("rate limit")||A.message.toLowerCase().includes("quota"))||A instanceof oo)throw A;if((A.message.includes("500")||A.message.includes("503")||A.message.includes("timed out")||A.message.includes("fetch failed"))&&m<h){m++;const R=2e3*Math.pow(2,m-1);console.warn(`Attempt ${m} failed. Retrying in ${R}ms...`,A.message),await new Promise(M=>setTimeout(M,R));continue}throw A}},PC=async(t,e,o)=>{var i;try{if(t==="gemini")return await new Xp({apiKey:e}).models.generateContent({model:o,contents:{parts:[{text:"Test"}]},config:{maxOutputTokens:1}}),{success:!0,message:"Gemini API key is valid!"};let s="",u={};t==="mistral"?(s="https://api.mistral.ai/v1/chat/completions",u={model:o||"pixtral-12b-2409",messages:[{role:"user",content:"Test"}],max_tokens:1}):(s="https://api.groq.com/openai/v1/chat/completions",u={model:o||"meta-llama/llama-4-scout-17b-16e-instruct",messages:[{role:"user",content:"Test"}],max_tokens:1});const d=new Headers({"Content-Type":"application/json",Authorization:`Bearer ${e}`}),p=await Zp(s,{method:"POST",headers:d,body:JSON.stringify(u)},15e3);if(!p.ok){const m=await p.json().catch(()=>({}));throw new Error(((i=m.error)==null?void 0:i.message)||`API Error: ${p.status}`)}return{success:!0,message:"API Key is valid and working!"}}catch(s){let u=s.message.toLowerCase().includes("key")?"Invalid API Key.":s.message;return console.error("API Key Test Failed:",s),{success:!1,message:`Test failed: ${u}`}}},Lt={mistral:{name:"Mistral AI",keyLink:"https://console.mistral.ai/api-keys/",models:[{id:"pixtral-12b-2409",name:"Pixtral 12B (Vision)"}]},groq:{name:"Groq Cloud",keyLink:"https://console.groq.com/keys",models:[{id:"meta-llama/llama-4-scout-17b-16e-instruct",name:"Llama 4 Scout Fast"},{id:"llama-3.2-90b-vision-preview",name:"Llama 4 Maverick HQ"}]},gemini:{name:"Google Gemini",keyLink:"https://aistudio.google.com/app/apikey",models:[{id:"gemini-3-flash-preview",name:"Gemini 3 Flash Preview"},{id:"gemini-2.5-flash-image",name:"Gemini 2.5 Flash Image"}]}},MC=({isOpen:t,onClose:e,mistralApiKeys:o,setMistralApiKeys:i,groqCloudApiKeys:s,setGroqCloudApiKeys:u,geminiApiKeys:d,setGeminiApiKeys:p,selectedProvider:m,setSelectedProvider:h,selectedModel:y,setSelectedModel:E,showToast:S,themeColor:w})=>{const[A,P]=ue.useState(""),[N,R]=ue.useState({}),[M,L]=ue.useState(!1);ue.useEffect(()=>{t&&(R({}),P(""))},[t]);const b=J=>{h(J),Lt[J].models.length>0&&E(Lt[J].models[0].id),localStorage.setItem("aiProvider",J)};if(!t)return null;const V=m==="mistral"?o:m==="groq"?s:d,W=m==="mistral"?i:m==="groq"?u:p,X=m==="mistral"?"mistralApiKeys":m==="groq"?"groqCloudApiKeys":"geminiApiKeys",he=()=>{if(!A.trim()){S("Please enter an API key.","warning");return}if(V.includes(A.trim())){S("API Key already exists.","warning");return}const J=[...V,A.trim()];W(J),localStorage.setItem(X,JSON.stringify(J)),P(""),S(`${Lt[m].name} API Key saved.`,"success")},Y=async()=>{const J=A.trim();if(!J){S("Please enter an API key to test.","warning");return}L(!0);const re=await PC(m,J,y);L(!1),re.success?S(re.message,"success"):S(re.message,"error")},de=J=>{const re=V.filter((Pe,Me)=>Me!==J);W(re),localStorage.setItem(X,JSON.stringify(re)),S("API Key deleted.","success")},ye=J=>{R(re=>({...re,[J]:!re[J]}))},Ce=(J,re)=>{let Pe=!1;J[0]==="#"&&(J=J.slice(1),Pe=!0);const Me=parseInt(J,16);let ge=(Me>>16)+re;ge>255?ge=255:ge<0&&(ge=0);let z=(Me>>8&255)+re;z>255?z=255:z<0&&(z=0);let q=(Me&255)+re;return q>255?q=255:q<0&&(q=0),(Pe?"#":"")+(q|z<<8|ge<<16).toString(16).padStart(6,"0")};return C.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100]",onClick:e,children:C.jsxs("div",{className:"w-full max-w-lg bg-[#202123] rounded-xl border border-gray-700/80 shadow-2xl flex flex-col",onClick:J=>J.stopPropagation(),children:[C.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-700/80",children:[C.jsx("h2",{className:"text-lg font-semibold text-white",children:"Manage AI Settings"}),C.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white text-2xl leading-none",children:""})]}),C.jsxs("div",{className:"p-6 space-y-6",children:[C.jsx("div",{className:"flex space-x-2 p-1 bg-[#2c2d2f] rounded-lg",children:Object.keys(Lt).map(J=>C.jsx("button",{onClick:()=>b(J),className:`w-full py-2 px-4 rounded-md text-sm font-semibold transition-colors ${m===J?"bg-gray-600 text-white":"text-gray-400 hover:bg-gray-700"}`,children:Lt[J].name},J))}),C.jsxs("div",{children:[C.jsxs("label",{htmlFor:"model-select",className:"block text-sm font-medium text-gray-300 mb-2",children:["Select Model (",Lt[m].name,")"]}),C.jsx("select",{id:"model-select",value:y,onChange:J=>{E(J.target.value),localStorage.setItem(`${m}Model`,J.target.value)},className:"bg-[#2c2d2f] border border-gray-600 text-white text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",children:Lt[m].models.map(J=>C.jsx("option",{value:J.id,children:J.name},J.id))})]}),C.jsxs("div",{children:[C.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Saved ",Lt[m].name," API Keys"]}),C.jsx("div",{className:"max-h-36 overflow-y-auto space-y-2 pr-2",children:V.length===0?C.jsx("div",{className:"flex items-center justify-center p-3 bg-[#2c2d2f] rounded-md",children:C.jsxs("p",{className:"text-sm text-gray-500",children:["No ",Lt[m].name," keys saved."]})}):V.map((J,re)=>C.jsxs("div",{className:"flex justify-between items-center p-2 pl-4 bg-[#2c2d2f] rounded-md",children:[C.jsx("span",{className:"text-sm text-gray-300 font-mono flex-grow overflow-hidden overflow-ellipsis whitespace-nowrap pr-2",children:N[re]?J:`${J.slice(-6)}`}),C.jsxs("div",{className:"flex items-center space-x-3 flex-shrink-0",children:[C.jsx("button",{onClick:()=>ye(re),className:"text-gray-400 hover:text-white",title:N[re]?"Hide key":"Show key",children:C.jsx("i",{className:`bi ${N[re]?"bi-eye-slash-fill":"bi-eye-fill"}`})}),C.jsx("button",{onClick:()=>de(re),className:"text-red-500 hover:text-red-400",title:"Delete key",children:C.jsx("i",{className:"bi bi-trash-fill"})})]})]},re))})]}),C.jsxs("div",{children:[C.jsxs("label",{htmlFor:"new-api-key-input",className:"block text-sm font-medium text-gray-300 mb-2",children:["Enter new ",Lt[m].name," API key"]}),C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx("input",{type:"password",id:"new-api-key-input",value:A,onChange:J=>P(J.target.value),className:"bg-[#2c2d2f] border border-gray-600 text-white text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:`Enter ${Lt[m].name} API key`}),C.jsx("button",{onClick:Y,disabled:M||!A.trim(),className:"py-2.5 px-4 text-gray-900 bg-gray-300 hover:bg-gray-400 font-medium rounded-lg shadow-md transition-colors flex-shrink-0 disabled:opacity-50 disabled:cursor-not-allowed text-sm",title:"Test the key in the input box",children:M?C.jsx("div",{className:"spinner-sm border-t-gray-800"}):"Test"}),C.jsx("button",{onClick:he,className:"py-2.5 px-5 text-white font-medium rounded-lg shadow-md transition-colors flex-shrink-0 text-sm",style:{backgroundColor:w,"--hover-color":Ce(w,-20)},onMouseOver:J=>J.currentTarget.style.backgroundColor=J.currentTarget.style.getPropertyValue("--hover-color"),onMouseOut:J=>J.currentTarget.style.backgroundColor=w,children:"Save"})]})]})]}),C.jsx("div",{className:"p-6 border-t border-gray-700/80",children:C.jsxs("a",{href:Lt[m].keyLink,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-full p-3 bg-yellow-600 hover:bg-yellow-700 rounded-lg font-semibold text-white transition-colors",children:[C.jsx("i",{className:"bi bi-key-fill mr-2.5"}),"Get ",Lt[m].name," API Key"]})})]})})},ia=({href:t,className:e,icon:o,label:i,description:s})=>C.jsxs("div",{className:"flex flex-col items-center text-center",children:[C.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:`flex items-center justify-center w-16 h-16 rounded-lg text-3xl text-white hover:opacity-90 transition-opacity ${e}`,"aria-label":i,children:C.jsx("i",{className:`bi ${o}`})}),C.jsx("p",{className:"mt-2 text-sm font-medium text-gray-200",children:i}),C.jsx("p",{className:"text-xs text-gray-500",children:s})]}),DC=({isOpen:t,onClose:e,stats:o,generatedMetadata:i,selectedStockSite:s,fileExtension:u})=>{if(!t)return null;const d=()=>{if(i.length===0)return;const p=P=>`"${String(P??"").replace(/"/g,'""')}"`,m=P=>{if(u==="default"||!u)return P;const N=P.lastIndexOf(".");return N===-1?`${P}.${u}`:`${P.substring(0,N)}.${u}`};let h="";const y=i.length>0?i[0].mode:"metadata";if(y==="prompt"){const P=["serial number","Description"],N=i.filter(R=>R.mode==="prompt").map((R,M)=>[M+1,R.description].map(p).join(","));h=P.join(",")+`
`+N.join(`
`)}else{let P=[],N=[];const R=i.filter(M=>M.mode==="metadata");switch(s){case"adobe-stock":P=["Filename","Title","Keywords","Category"],N=R.map(M=>{var L;return[m(M.filename),M.title,(L=M.keywords)==null?void 0:L.join(", "),M.category].map(p).join(",")});break;case"shutterstock":P=["Filename","Description","Keywords","Categorie"],N=R.map(M=>{var L;return[m(M.filename),M.title,(L=M.keywords)==null?void 0:L.slice(0,50).join(","),M.category].map(p).join(",")});break;case"freepik":P=["File name","Title","Keywords","Prompt","Category"],N=R.map(M=>{var L;return[m(M.filename),M.title,(L=M.keywords)==null?void 0:L.join(", "),"",M.category].map(p).join(",")});break;case"getty":P=["Filename","Title","Description","Keywords","Category"],N=R.map(M=>{var L;return[m(M.filename),M.title,M.description,(L=M.keywords)==null?void 0:L.join(", "),M.category].map(p).join(",")});break;case"istock":P=["filename","title","keywords","category","release"],N=R.map(M=>{var L;return[m(M.filename),M.title,(L=M.keywords)==null?void 0:L.join(", "),M.category,""].map(p).join(",")});break;case"dreamstime":P=["filename","title","keywords","category","exclusive","editorial","model_releases","property_releases","image_id","mr_ids"],N=R.map(M=>{var L;return[m(M.filename),M.title,(L=M.keywords)==null?void 0:L.join(", "),M.category,"","","","","",""].map(p).join(",")});break;case"vecteezy":P=["Filename","Title","Description","Keywords"],N=R.map(M=>{var L;return[m(M.filename),M.title,M.description,(L=M.keywords)==null?void 0:L.join(", ")].map(p).join(",")});break;case"General":default:P=["Filename","Title","Description","Keywords","Category"],N=R.map(M=>{var L;return[m(M.filename),M.title,M.description,(L=M.keywords)==null?void 0:L.join(", "),M.category].map(p).join(",")});break}N.length>0&&(h=P.join(",")+`
`+N.join(`
`))}if(!h.trim())return;const E=new Blob([h],{type:"text/csv;charset=utf-8;"}),S=document.createElement("a"),w=URL.createObjectURL(E);S.setAttribute("href",w);const A=y==="prompt"?`${s}_prompts.csv`:`${s}_metadata.csv`;S.setAttribute("download",A),S.style.visibility="hidden",document.body.appendChild(S),S.click(),document.body.removeChild(S),e()};return C.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-[100]",onClick:e,children:C.jsxs("div",{className:"relative w-full max-w-sm bg-[#202123] rounded-xl border border-gray-700 shadow-2xl p-6 sm:p-8 text-center",onClick:p=>p.stopPropagation(),children:[C.jsx("button",{onClick:e,className:"absolute top-3 right-4 text-gray-500 hover:text-white text-2xl leading-none",children:""}),C.jsx("h2",{className:"text-2xl font-bold text-white mb-1.5",children:"Metadata Generated!"}),C.jsxs("p",{className:"text-gray-400 mb-6",children:["Successfully generated ",o.success," items."]}),C.jsx("h3",{className:"text-base font-medium text-gray-300 mb-4",children:"Connect With Us"}),C.jsxs("div",{className:"grid grid-cols-3 gap-x-4 gap-y-6 mb-8",children:[C.jsx(ia,{href:"https://www.youtube.com/@robitechnology",className:"bg-[#FF0000]",icon:"bi-youtube",label:"YouTube",description:"Robi Tech"}),C.jsx(ia,{href:"https://www.facebook.com/groups/809434351197208",className:"bg-[#1877F2]",icon:"bi-facebook",label:"Facebook",description:"Our Group"}),C.jsx(ia,{href:"https://chat.whatsapp.com/BztzKMpcqHw5Hv2utCgBFN",className:"bg-[#25D366]",icon:"bi-whatsapp",label:"WhatsApp",description:"Join Chat"})]}),C.jsxs("button",{onClick:d,className:"w-full flex items-center justify-center gap-3 py-3 bg-[color:var(--theme-color)] hover:bg-[color:var(--theme-color-hover)] rounded-lg transition-colors text-base font-semibold text-white shadow-lg",children:[C.jsx("i",{className:"bi bi-download"}),C.jsx("span",{children:"Download CSV File"})]})]})})},LC=({isOpen:t,onClose:e})=>t?C.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-[110] backdrop-blur-sm",onClick:e,children:C.jsxs("div",{className:"relative w-full max-w-5xl bg-[#202123] rounded-2xl border border-gray-700 shadow-2xl overflow-hidden mx-4",onClick:i=>i.stopPropagation(),children:[C.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-700 bg-[#2a2b2e]",children:[C.jsxs("div",{className:"flex items-center gap-2 text-white",children:[C.jsx("i",{className:"bi bi-youtube text-red-500 text-xl"}),C.jsx("h3",{className:"font-semibold text-lg",children:"Tutorial Video"})]}),C.jsx("button",{onClick:e,className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-700 text-gray-400 hover:text-white hover:bg-gray-600 transition-colors",children:C.jsx("i",{className:"bi bi-x-lg"})})]}),C.jsx("div",{className:"relative aspect-video w-full bg-black",children:C.jsx("iframe",{className:"absolute inset-0 w-full h-full",src:"https://www.youtube.com/embed/n-jgpNm_f7U?autoplay=1",title:"Tutorial Video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})}):null,UC=({isOpen:t,onClose:e,history:o,setHistory:i,showToast:s})=>{if(!t)return null;const u=p=>{i(m=>m.filter(h=>h.id!==p)),s("Session removed from history.","info")},d=p=>{const{metadata:m,settings:h}=p;if(m.length===0){s("This session has no metadata to export.","warning");return}const y=L=>`"${String(L??"").replace(/"/g,'""')}"`,E=L=>{if(h.fileExtension==="default"||!h.fileExtension)return L;const b=L.lastIndexOf(".");return b===-1?`${L}.${h.fileExtension}`:`${L.substring(0,b)}.${h.fileExtension}`};let S="";const w=m[0].mode;if(w==="prompt"){const L=["serial number","Description"],b=m.map((V,W)=>[W+1,V.description].map(y).join(","));S=L.join(",")+`
`+b.join(`
`)}else{let L=[],b=[];switch(h.selectedStockSite){case"adobe-stock":L=["Filename","Title","Keywords","Category"],b=m.map(V=>{var W;return[E(V.filename),V.title,(W=V.keywords)==null?void 0:W.join(", "),V.category].map(y).join(",")});break;case"shutterstock":L=["Filename","Description","Keywords","Categorie"],b=m.map(V=>{var W;return[E(V.filename),V.title,(W=V.keywords)==null?void 0:W.slice(0,50).join(","),V.category].map(y).join(",")});break;default:L=["Filename","Title","Description","Keywords","Category"],b=m.map(V=>{var W;return[E(V.filename),V.title,V.description,(W=V.keywords)==null?void 0:W.join(", "),V.category].map(y).join(",")});break}b.length>0&&(S=L.join(",")+`
`+b.join(`
`))}if(!S.trim()){s("No data to export for this session.","warning");return}const A=new Blob(["\uFEFF"+S],{type:"text/csv;charset=utf-8;"}),P=document.createElement("a"),N=URL.createObjectURL(A);P.setAttribute("href",N);const M=`${new Date(p.timestamp).toLocaleDateString("en-CA")}_${h.selectedStockSite}_${w}.csv`;P.setAttribute("download",M),P.style.visibility="hidden",document.body.appendChild(P),P.click(),document.body.removeChild(P),s("CSV for session downloaded.","success")};return C.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100]",onClick:e,children:C.jsxs("div",{className:"w-full max-w-3xl h-[80vh] bg-[#202123] rounded-xl border border-gray-700/80 shadow-2xl flex flex-col mx-4 my-8",onClick:p=>p.stopPropagation(),children:[C.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-700/80 flex-shrink-0",children:[C.jsxs("h2",{className:"text-lg font-semibold text-white",children:["Generation History (",o.length," sessions)"]}),C.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white text-2xl leading-none",children:""})]}),C.jsx("div",{className:"p-6 space-y-4 flex-grow overflow-y-auto",children:o.length===0?C.jsx("div",{className:"flex items-center justify-center h-full",children:C.jsx("p",{className:"text-gray-500",children:"No saved history. Generate some metadata to see sessions here."})}):C.jsx("div",{className:"w-full",children:C.jsxs("table",{className:"w-full text-sm text-left text-gray-400",children:[C.jsx("thead",{className:"text-xs text-gray-300 uppercase bg-[#2a2b2e] sticky top-0",children:C.jsxs("tr",{children:[C.jsx("th",{scope:"col",className:"px-4 py-3",children:"Date & Time"}),C.jsx("th",{scope:"col",className:"px-4 py-3 text-center",children:"Items"}),C.jsx("th",{scope:"col",className:"px-4 py-3 text-right",children:"Actions"})]})}),C.jsx("tbody",{children:o.map(p=>C.jsxs("tr",{className:"border-b border-gray-700 hover:bg-[#2a2b2e]/50",children:[C.jsx("td",{className:"px-4 py-3 font-medium text-gray-200",children:new Date(p.timestamp).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}),C.jsx("td",{className:"px-4 py-3 text-center",children:p.itemCount}),C.jsxs("td",{className:"px-4 py-3 text-right space-x-3",children:[C.jsx("button",{onClick:()=>d(p),className:"text-green-500 hover:text-green-400 text-lg",title:"Download CSV",children:C.jsx("i",{className:"bi bi-download"})}),C.jsx("button",{onClick:()=>u(p.id),className:"text-red-500 hover:text-red-400 text-lg",title:"Delete Session",children:C.jsx("i",{className:"bi bi-trash-fill"})})]})]},p.id))})]})})}),C.jsx("div",{className:"flex justify-end items-center p-5 border-t border-gray-700/80 flex-shrink-0",children:C.jsx("button",{onClick:e,className:"py-2 px-5 bg-gray-600 hover:bg-gray-700 text-white font-medium rounded-lg shadow-md transition-colors text-sm",children:"Close"})})]})})},FC=({message:t,type:e,onDismiss:o})=>{const[i,s]=ue.useState(!1);ue.useEffect(()=>{s(!0);const m=setTimeout(()=>{s(!1),setTimeout(o,500)},3e3);return()=>clearTimeout(m)},[o]);const u={success:{bg:"bg-green-600",icon:"bi-check-circle-fill"},error:{bg:"bg-red-600",icon:"bi-x-octagon-fill"},warning:{bg:"bg-yellow-500 text-black",icon:"bi-exclamation-triangle-fill"},info:{bg:"bg-blue-600",icon:"bi-info-circle-fill"}},{bg:d,icon:p}=u[e];return C.jsxs("div",{className:`fixed right-5 z-[101] flex items-center min-w-[250px] max-w-sm p-4 rounded-lg shadow-lg text-white transition-all duration-500 ease-out ${d} ${i?"top-5 opacity-100":"-top-full opacity-0"}`,children:[C.jsx("i",{className:`bi ${p} text-xl mr-3`}),C.jsx("span",{children:t})]})},VC=()=>{const[t,e]=ue.useState(Nr),[o,i]=ue.useState([]),[s,u]=ue.useState([]),[d,p]=ue.useState([]),[m,h]=ue.useState(!1),[y,E]=ue.useState(!1),S=ue.useRef(!1),w=ue.useRef(s),A=ue.useRef(t),P=ue.useRef(null),N=ue.useRef(0),R=ue.useRef(0),M=ue.useRef(0),[L,b]=ue.useState("gemini"),[V,W]=ue.useState([]),[X,he]=ue.useState([]),[Y,de]=ue.useState([]),[ye,Ce]=ue.useState("gemini-2.5-flash-image"),J=ue.useRef(V),re=ue.useRef(X),Pe=ue.useRef(Y);ue.useEffect(()=>{J.current=V},[V]),ue.useEffect(()=>{re.current=X},[X]),ue.useEffect(()=>{Pe.current=Y},[Y]),ue.useEffect(()=>{w.current=s,A.current=t},[s,t]);const[Me,ge]=ue.useState({percent:0,status:"Ready.",currentFile:0,totalFiles:0}),[z,q]=ue.useState(!1),[x,G]=ue.useState(!1),[te,ie]=ue.useState(!1),[ae,ve]=ue.useState(!1),[Se,Ee]=ue.useState({success:0,total:0}),[_e,st]=ue.useState(null),Be=ue.useCallback((ce,Z)=>{st({id:Date.now(),message:ce,type:Z})},[]);ue.useEffect(()=>{const ce=localStorage.getItem("aiProvider");if(ce==="mistral"||ce==="groq"||ce==="gemini"){b(ce);const Z=localStorage.getItem(`${ce}Model`);if(ce==="groq"&&(Z==="llama-3.2-11b-vision-preview"||Z==="llama-3.2-11b-vision-instruct")){const ke="meta-llama/llama-4-scout-17b-16e-instruct";Ce(ke),localStorage.setItem("groqModel",ke)}else Z?Ce(Z):ce==="mistral"?Ce("pixtral-12b-2409"):ce==="groq"?Ce("meta-llama/llama-4-scout-17b-16e-instruct"):ce==="gemini"&&Ce("gemini-2.5-flash-image")}try{const Z=localStorage.getItem("mistralApiKeys");Z&&W(JSON.parse(Z))}catch(Z){console.error("Failed to parse Mistral API keys",Z)}try{const Z=localStorage.getItem("groqCloudApiKeys");Z&&he(JSON.parse(Z))}catch(Z){console.error("Failed to parse Groq Cloud API keys",Z)}try{const Z=localStorage.getItem("geminiApiKeys");Z&&de(JSON.parse(Z))}catch(Z){console.error("Failed to parse Gemini API keys",Z)}try{const Z=localStorage.getItem("generationHistory");Z&&p(JSON.parse(Z))}catch(Z){console.error("Failed to parse history",Z)}try{const Z=localStorage.getItem("appSettings");if(Z){const ke=JSON.parse(Z),Ge={...Nr.controls,...ke.controls||{}};e(De=>({...De,...ke,controls:Ge})),an(ke.themeColor||Nr.themeColor)}else an(Nr.themeColor)}catch(Z){console.error("Failed to parse settings from localStorage",Z),an(Nr.themeColor)}},[]);const an=ce=>{document.documentElement.style.setProperty("--theme-color",ce);const Z=Lr(ce,20);document.documentElement.style.setProperty("--theme-color-hover",Z),document.documentElement.style.setProperty("--theme-color-active-bg",ce+"1a"),document.documentElement.style.setProperty("--theme-color-shadow",ce+"33"),e(ke=>({...ke,themeColor:ce}))},Lr=(ce,Z)=>{let ke=!1;ce[0]==="#"&&(ce=ce.slice(1),ke=!0);const Ge=parseInt(ce,16);let De=(Ge>>16)+Z;De>255?De=255:De<0&&(De=0);let Ze=(Ge>>8&255)+Z;Ze>255?Ze=255:Ze<0&&(Ze=0);let lt=(Ge&255)+Z;return lt>255?lt=255:lt<0&&(lt=0),(ke?"#":"")+(lt|Ze<<8|De<<16).toString(16).padStart(6,"0")},io=ce=>{e(Z=>({...Z,controls:ce}))},bo=()=>{try{localStorage.setItem("appSettings",JSON.stringify(t)),Be("Settings saved successfully!","success")}catch(ce){console.error("Error saving settings:",ce),Be("Could not save settings.","error")}},Ur=()=>{S.current=!0,h(!1),i([]),u([]),ge({percent:0,status:"Ready.",currentFile:0,totalFiles:0}),E(!1),Be("All files and current results have been cleared.","info")},Ho=()=>{const ce=w.current,Z=A.current;if(ce.length===0){Be("No metadata available to export.","warning");return}const ke=Ne=>`"${String(Ne??"").replace(/"/g,'""')}"`,Ge=(Ne,me)=>{if(me==="default"||!me)return Ne;const qe=Ne.lastIndexOf(".");return qe===-1?`${Ne}.${me}`:`${Ne.substring(0,qe)}.${me}`};let De="";const Ze=ce[0].mode;if(Ze==="prompt"){const Ne=["serial number","Description"],me=ce.filter(qe=>qe.mode==="prompt").map((qe,we)=>[we+1,qe.description].map(ke).join(","));De=Ne.join(",")+`
`+me.join(`
`)}else{let Ne=[],me=[];const qe=ce.filter(we=>we.mode==="metadata");switch(Z.selectedStockSite){case"adobe-stock":Ne=["Filename","Title","Keywords","Category"],me=qe.map(we=>{var dt;return[Ge(we.filename,Z.fileExtension),we.title,(dt=we.keywords)==null?void 0:dt.join(", "),we.category].map(ke).join(",")});break;case"shutterstock":Ne=["Filename","Description","Keywords","Categorie"],me=qe.map(we=>{var dt;return[Ge(we.filename,Z.fileExtension),we.title,(dt=we.keywords)==null?void 0:dt.slice(0,50).join(","),we.category].map(ke).join(",")});break;default:Ne=["Filename","Title","Description","Keywords","Category"],me=qe.map(we=>{var dt;return[Ge(we.filename,Z.fileExtension),we.title,we.description,(dt=we.keywords)==null?void 0:dt.join(", "),we.category].map(ke).join(",")});break}me.length>0&&(De=Ne.join(",")+`
`+me.join(`
`))}if(!De.trim()){Be("No data to export for the selected mode.","warning");return}const lt=new Blob(["\uFEFF"+De],{type:"text/csv;charset=utf-8;"}),ct=document.createElement("a"),Ke=URL.createObjectURL(lt);ct.setAttribute("href",Ke);const Rt=Ze==="prompt"?`${Z.selectedStockSite}_prompts.csv`:`${Z.selectedStockSite}_metadata.csv`;ct.setAttribute("download",Rt),ct.style.visibility="hidden",document.body.appendChild(ct),ct.click(),document.body.removeChild(ct),Be("CSV exported successfully.","success")},un=()=>L==="mistral"?J.current:L==="groq"?re.current:L==="gemini"&&Pe.current.length>0?Pe.current:[],Fr=async()=>{const ce=un(),Z=L.charAt(0).toUpperCase()+L.slice(1);if(ce.length===0){Be(`No API Key found for ${Z}. Please check settings.`,"error"),q(!0);return}const ke=o.filter(me=>me.status==="ready");if(ke.length===0){Be(o.length>0?"Files are not ready for processing.":"No files uploaded to generate.","info");return}S.current=!1,h(!0),E(!1),P.current=Date.now().toString(),N.current=0,R.current=0,M.current=0;const Ge=ke.length,De=t.controls.activeTab,Ze=t.controls.batchSize||1,lt=t.controls.requestsPerMinute||15,ct=t.controls.isRpmEnabled;let Ke=0,Rt=Date.now();const Ne=async me=>{if(S.current)return;i(je=>je.map(Oe=>Oe.id===me.id?{...Oe,status:"processing"}:Oe));let qe=null;try{qe=await Ed(me)}catch(je){console.error(`Error processing file data for ${me.file.name}`,je),u(Oe=>[...Oe,{title:"Error",description:`Failed to process image: ${je.message}`,keywords:[],category:"Error",thumbnailUrl:me.thumbnailDataUrl,filename:me.file.name,mode:De,apiData:null}]),i(Oe=>Oe.filter(We=>We.id!==me.id)),M.current++;return}let we=0,dt=!1,Tn=null;for(;!S.current&&!dt;){const je=un();if(je.length===0){Be("No API keys available.","error");break}R.current>=je.length&&(R.current=0);const Oe=je[R.current],We=je.length;try{const Ye=tp(t.controls,De),Ut=await ra(L,Oe,ye,Ye,qe,t.controls,De);dt=!0,Tn=Ut}catch(Ye){if(S.current)break;const Ut=Ye instanceof oo&&(Ye.message.includes("429")||Ye.message.toLowerCase().includes("rate limit")||Ye.message.toLowerCase().includes("quota")),Ct=Ye instanceof oo&&(Ye.message.includes("401")||Ye.message.includes("403")||Ye.message.toLowerCase().includes("invalid"));if(Ut||Ct){if(console.warn(`${Ut?"Rate limit":"Auth error"} on key index ${R.current}.`),We>1&&we<We){we++,R.current=(R.current+1)%We,await new Promise(Ft=>setTimeout(Ft,1e3));continue}we=0;const Vr=3e4,qo=1e3;let Oo=0;const so=un();for(ge(Ft=>({...Ft,status:"Key Limit hit. Waiting 30s or Add Key..."}));Oo<Vr&&(await new Promise(br=>setTimeout(br,qo)),Oo+=qo,!S.current);){const Ft=un();if((Ft.length!==so.length||JSON.stringify(Ft)!==JSON.stringify(so))&&Ft.length>0){Ft.length>so.length?R.current=Ft.length-1:R.current=0;break}}continue}else{console.error(`Failed to generate metadata for ${me.file.name}:`,Ye),u(Qe=>[...Qe,{title:"Error",description:`Failed: ${Ye.message}`,keywords:[],category:"Error",thumbnailUrl:me.thumbnailDataUrl,filename:me.file.name,mode:De,apiData:null}]);break}}}if(dt&&Tn){const je={...Tn,thumbnailUrl:me.thumbnailDataUrl,filename:me.file.name,mode:De,apiData:null,originalFile:me.file};u(We=>[...We,je]),N.current++;const Oe={...je,thumbnailUrl:"",apiData:null,originalFile:void 0};p(We=>{const Ye=P.current;if(!Ye)return We;const Ut=We.findIndex(Qe=>Qe.id===Ye);let Ct=[...We];if(Ut>-1){const Qe={...Ct[Ut]};Qe.metadata=[Oe,...Qe.metadata],Qe.itemCount=Qe.metadata.length,Ct[Ut]=Qe}else Ct=[{id:Ye,timestamp:Date.now(),itemCount:1,metadata:[Oe],settings:A.current},...We];try{localStorage.setItem("generationHistory",JSON.stringify(Ct))}catch(Qe){console.error("History Save Error",Qe)}return Ct})}i(je=>je.filter(Oe=>Oe.id!==me.id)),M.current++,ge({percent:M.current/Ge*100,status:`Generated ${M.current}/${Ge} | ${N.current} successful`,currentFile:M.current,totalFiles:Ge})};for(let me=0;me<ke.length&&!S.current;me+=Ze){if(ct){const we=Math.min(Ze,ke.length-me);if(Ke>0&&Ke+we>lt){const Tn=Date.now()-Rt;if(Tn<6e4){let Oe=6e4-Tn+1e3;for(;Oe>0&&!S.current;)ge(We=>({...We,status:`RPM Limit (${lt}/min) reached. Pausing for ${Math.ceil(Oe/1e3)}s...`})),await new Promise(We=>setTimeout(We,1e3)),Oe-=1e3;if(S.current)break}Rt=Date.now(),Ke=0}else Date.now()-Rt>=6e4&&(Rt=Date.now(),Ke=0)}for(;y&&!S.current;)await new Promise(we=>setTimeout(we,500));if(S.current)break;const qe=ke.slice(me,me+Ze);ct&&(Ke+=qe.length),await Promise.all(qe.map(we=>Ne(we)))}h(!1),S.current?(Be("Generation stopped.","info"),ge(me=>({...me,status:"Stopped."}))):ge({percent:100,status:`Complete. ${N.current} of ${Ge} successful.`,currentFile:Ge,totalFiles:Ge}),Ee({success:N.current,total:Ge}),!S.current&&Ge>0&&(A.current.controls.autoDownloadCsv&&N.current>0&&setTimeout(()=>Ho(),500),G(!0))},Bo=async ce=>{if(!ce.originalFile){Be("Cannot regenerate this item (original file missing).","error");return}const Z=un();if(Z.length===0){Be("No API Key found. Check settings.","error");return}Be(`Regenerating ${ce.filename}...`,"info");const ke=`regen-${Date.now()}`,Ge={file:ce.originalFile,id:ke,status:"processing",thumbnailDataUrl:ce.thumbnailUrl,apiData:null};try{const De=await Ed(Ge),Ze=t.controls.activeTab;let lt=Z[R.current];lt||(R.current=0,lt=Z[0]);const ct=tp(t.controls,Ze);try{const Ke=await ra(L,lt,ye,ct,De,t.controls,Ze);u(Rt=>Rt.map(Ne=>Ne.filename===ce.filename?{...Ne,...Ke,title:Ke.title||Ne.title,description:Ke.description||Ne.description,keywords:Ke.keywords||Ne.keywords,category:Ke.category||Ne.category}:Ne)),Be("Regeneration successful!","success")}catch(Ke){if(Z.length>1){R.current=(R.current+1)%Z.length;const Rt=Z[R.current],Ne=await ra(L,Rt,ye,ct,De,t.controls,Ze);u(me=>me.map(qe=>qe.filename===ce.filename?{...qe,...Ne}:qe)),Be("Regeneration successful (switched key)!","success")}else throw Ke}}catch(De){console.error("Regeneration failed:",De),Be(`Regeneration failed: ${De.message}`,"error")}};return C.jsxs("div",{className:"flex flex-col min-h-screen text-gray-200",children:[C.jsx(sg,{onTutorialClick:()=>ie(!0)}),C.jsx("main",{className:"flex-grow container mx-auto px-4 lg:px-6 py-6 sm:py-8",children:C.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[C.jsx("div",{className:"lg:col-span-1",children:C.jsx(lg,{settings:t.controls,onSettingsChange:io,onSave:bo,onApiKeyClick:()=>q(!0),themeColor:t.themeColor,onThemeColorChange:an,fileExtension:t.fileExtension,onFileExtensionChange:ce=>e(Z=>({...Z,fileExtension:ce}))})}),C.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[C.jsx(pg,{stagedFiles:o,setStagedFiles:i,progress:Me,isGenerating:m,isPaused:y,setIsPaused:E,startGeneration:Fr,generatedMetadata:s,setProgress:ge,showToast:Be,selectedStockSite:t.selectedStockSite,onStockSiteChange:ce=>e(Z=>({...Z,selectedStockSite:ce})),fileExtension:t.fileExtension,clearAll:Ur,onExportCsv:Ho,onHistoryClick:()=>ve(!0)}),C.jsx(mg,{metadata:s,setMetadata:u,showToast:Be,onRegenerate:Bo})]})]})}),C.jsx(hg,{}),C.jsx(MC,{isOpen:z,onClose:()=>q(!1),mistralApiKeys:V,setMistralApiKeys:W,groqCloudApiKeys:X,setGroqCloudApiKeys:he,geminiApiKeys:Y,setGeminiApiKeys:de,selectedProvider:L,setSelectedProvider:b,selectedModel:ye,setSelectedModel:Ce,showToast:Be,themeColor:t.themeColor}),C.jsx(DC,{isOpen:x,onClose:()=>G(!1),stats:Se,generatedMetadata:s,selectedStockSite:t.selectedStockSite,fileExtension:t.fileExtension}),C.jsx(UC,{isOpen:ae,onClose:()=>ve(!1),history:d,setHistory:p,showToast:Be}),C.jsx(LC,{isOpen:te,onClose:()=>ie(!1)}),_e&&C.jsx(FC,{message:_e.message,type:_e.type,onDismiss:()=>st(null)})]})},jp=document.getElementById("root");if(!jp)throw new Error("Could not find root element to mount to");const GC=rg.createRoot(jp);GC.render(C.jsx(Xh.StrictMode,{children:C.jsx(VC,{})}));
