function eT(t,e){for(var i=0;i<e.length;i++){const s=e[i];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in t)){const l=Object.getOwnPropertyDescriptor(s,r);l&&Object.defineProperty(t,r,l.get?l:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=i(r);fetch(r.href,l)}})();function Hd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function wr(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var i=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var r=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(i,s,r.get?r:{enumerable:!0,get:function(){return t[s]}})}),i}var Jc={exports:{}},cr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ag;function tT(){if(ag)return cr;ag=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(s,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var f in r)f!=="key"&&(l[f]=r[f])}else l=r;return r=l.ref,{$$typeof:t,type:s,key:c,ref:r!==void 0?r:null,props:l}}return cr.Fragment=e,cr.jsx=i,cr.jsxs=i,cr}var lg;function nT(){return lg||(lg=1,Jc.exports=tT()),Jc.exports}var w=nT(),Kc={exports:{}},ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ug;function iT(){if(ug)return ge;ug=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),S=Symbol.iterator;function T(M){return M===null||typeof M!="object"?null:(M=S&&M[S]||M["@@iterator"],typeof M=="function"?M:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,C={};function R(M,V,j){this.props=M,this.context=V,this.refs=C,this.updater=j||A}R.prototype.isReactComponent={},R.prototype.setState=function(M,V){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,V,"setState")},R.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function D(){}D.prototype=R.prototype;function I(M,V,j){this.props=M,this.context=V,this.refs=C,this.updater=j||A}var B=I.prototype=new D;B.constructor=I,x(B,R.prototype),B.isPureReactComponent=!0;var K=Array.isArray;function Y(){}var $={H:null,A:null,T:null,S:null},ne=Object.prototype.hasOwnProperty;function X(M,V,j){var Q=j.ref;return{$$typeof:t,type:M,key:V,ref:Q!==void 0?Q:null,props:j}}function ue(M,V){return X(M.type,V,M.props)}function pe(M){return typeof M=="object"&&M!==null&&M.$$typeof===t}function be(M){var V={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(j){return V[j]})}var Re=/\/+/g;function ze(M,V){return typeof M=="object"&&M!==null&&M.key!=null?be(""+M.key):V.toString(36)}function st(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(Y,Y):(M.status="pending",M.then(function(V){M.status==="pending"&&(M.status="fulfilled",M.value=V)},function(V){M.status==="pending"&&(M.status="rejected",M.reason=V)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function O(M,V,j,Q,ee){var ve=typeof M;(ve==="undefined"||ve==="boolean")&&(M=null);var _e=!1;if(M===null)_e=!0;else switch(ve){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(M.$$typeof){case t:case e:_e=!0;break;case v:return _e=M._init,O(_e(M._payload),V,j,Q,ee)}}if(_e)return ee=ee(M),_e=Q===""?"."+ze(M,0):Q,K(ee)?(j="",_e!=null&&(j=_e.replace(Re,"$&/")+"/"),O(ee,V,j,"",function(Oi){return Oi})):ee!=null&&(pe(ee)&&(ee=ue(ee,j+(ee.key==null||M&&M.key===ee.key?"":(""+ee.key).replace(Re,"$&/")+"/")+_e)),V.push(ee)),1;_e=0;var Je=Q===""?".":Q+":";if(K(M))for(var Ze=0;Ze<M.length;Ze++)Q=M[Ze],ve=Je+ze(Q,Ze),_e+=O(Q,V,j,ve,ee);else if(Ze=T(M),typeof Ze=="function")for(M=Ze.call(M),Ze=0;!(Q=M.next()).done;)Q=Q.value,ve=Je+ze(Q,Ze++),_e+=O(Q,V,j,ve,ee);else if(ve==="object"){if(typeof M.then=="function")return O(st(M),V,j,Q,ee);throw V=String(M),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return _e}function J(M,V,j){if(M==null)return M;var Q=[],ee=0;return O(M,Q,"","",function(ve){return V.call(j,ve,ee++)}),Q}function re(M){if(M._status===-1){var V=M._result;V=V(),V.then(function(j){(M._status===0||M._status===-1)&&(M._status=1,M._result=j)},function(j){(M._status===0||M._status===-1)&&(M._status=2,M._result=j)}),M._status===-1&&(M._status=0,M._result=V)}if(M._status===1)return M._result.default;throw M._result}var Z=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Ee={map:J,forEach:function(M,V,j){J(M,function(){V.apply(this,arguments)},j)},count:function(M){var V=0;return J(M,function(){V++}),V},toArray:function(M){return J(M,function(V){return V})||[]},only:function(M){if(!pe(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return ge.Activity=_,ge.Children=Ee,ge.Component=R,ge.Fragment=i,ge.Profiler=r,ge.PureComponent=I,ge.StrictMode=s,ge.Suspense=m,ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,ge.__COMPILER_RUNTIME={__proto__:null,c:function(M){return $.H.useMemoCache(M)}},ge.cache=function(M){return function(){return M.apply(null,arguments)}},ge.cacheSignal=function(){return null},ge.cloneElement=function(M,V,j){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var Q=x({},M.props),ee=M.key;if(V!=null)for(ve in V.key!==void 0&&(ee=""+V.key),V)!ne.call(V,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&V.ref===void 0||(Q[ve]=V[ve]);var ve=arguments.length-2;if(ve===1)Q.children=j;else if(1<ve){for(var _e=Array(ve),Je=0;Je<ve;Je++)_e[Je]=arguments[Je+2];Q.children=_e}return X(M.type,ee,Q)},ge.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},ge.createElement=function(M,V,j){var Q,ee={},ve=null;if(V!=null)for(Q in V.key!==void 0&&(ve=""+V.key),V)ne.call(V,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(ee[Q]=V[Q]);var _e=arguments.length-2;if(_e===1)ee.children=j;else if(1<_e){for(var Je=Array(_e),Ze=0;Ze<_e;Ze++)Je[Ze]=arguments[Ze+2];ee.children=Je}if(M&&M.defaultProps)for(Q in _e=M.defaultProps,_e)ee[Q]===void 0&&(ee[Q]=_e[Q]);return X(M,ve,ee)},ge.createRef=function(){return{current:null}},ge.forwardRef=function(M){return{$$typeof:f,render:M}},ge.isValidElement=pe,ge.lazy=function(M){return{$$typeof:v,_payload:{_status:-1,_result:M},_init:re}},ge.memo=function(M,V){return{$$typeof:p,type:M,compare:V===void 0?null:V}},ge.startTransition=function(M){var V=$.T,j={};$.T=j;try{var Q=M(),ee=$.S;ee!==null&&ee(j,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(Y,Z)}catch(ve){Z(ve)}finally{V!==null&&j.types!==null&&(V.types=j.types),$.T=V}},ge.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},ge.use=function(M){return $.H.use(M)},ge.useActionState=function(M,V,j){return $.H.useActionState(M,V,j)},ge.useCallback=function(M,V){return $.H.useCallback(M,V)},ge.useContext=function(M){return $.H.useContext(M)},ge.useDebugValue=function(){},ge.useDeferredValue=function(M,V){return $.H.useDeferredValue(M,V)},ge.useEffect=function(M,V){return $.H.useEffect(M,V)},ge.useEffectEvent=function(M){return $.H.useEffectEvent(M)},ge.useId=function(){return $.H.useId()},ge.useImperativeHandle=function(M,V,j){return $.H.useImperativeHandle(M,V,j)},ge.useInsertionEffect=function(M,V){return $.H.useInsertionEffect(M,V)},ge.useLayoutEffect=function(M,V){return $.H.useLayoutEffect(M,V)},ge.useMemo=function(M,V){return $.H.useMemo(M,V)},ge.useOptimistic=function(M,V){return $.H.useOptimistic(M,V)},ge.useReducer=function(M,V,j){return $.H.useReducer(M,V,j)},ge.useRef=function(M){return $.H.useRef(M)},ge.useState=function(M){return $.H.useState(M)},ge.useSyncExternalStore=function(M,V,j){return $.H.useSyncExternalStore(M,V,j)},ge.useTransition=function(){return $.H.useTransition()},ge.version="19.2.3",ge}var cg;function Vd(){return cg||(cg=1,Kc.exports=iT()),Kc.exports}var ye=Vd();const oT=Hd(ye);var jc={exports:{}},dr={},Yc={exports:{}},Xc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dg;function sT(){return dg||(dg=1,(function(t){function e(O,J){var re=O.length;O.push(J);e:for(;0<re;){var Z=re-1>>>1,Ee=O[Z];if(0<r(Ee,J))O[Z]=J,O[re]=Ee,re=Z;else break e}}function i(O){return O.length===0?null:O[0]}function s(O){if(O.length===0)return null;var J=O[0],re=O.pop();if(re!==J){O[0]=re;e:for(var Z=0,Ee=O.length,M=Ee>>>1;Z<M;){var V=2*(Z+1)-1,j=O[V],Q=V+1,ee=O[Q];if(0>r(j,re))Q<Ee&&0>r(ee,j)?(O[Z]=ee,O[Q]=re,Z=Q):(O[Z]=j,O[V]=re,Z=V);else if(Q<Ee&&0>r(ee,re))O[Z]=ee,O[Q]=re,Z=Q;else break e}}return J}function r(O,J){var re=O.sortIndex-J.sortIndex;return re!==0?re:O.id-J.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();t.unstable_now=function(){return c.now()-f}}var m=[],p=[],v=1,_=null,S=3,T=!1,A=!1,x=!1,C=!1,R=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function B(O){for(var J=i(p);J!==null;){if(J.callback===null)s(p);else if(J.startTime<=O)s(p),J.sortIndex=J.expirationTime,e(m,J);else break;J=i(p)}}function K(O){if(x=!1,B(O),!A)if(i(m)!==null)A=!0,Y||(Y=!0,be());else{var J=i(p);J!==null&&st(K,J.startTime-O)}}var Y=!1,$=-1,ne=5,X=-1;function ue(){return C?!0:!(t.unstable_now()-X<ne)}function pe(){if(C=!1,Y){var O=t.unstable_now();X=O;var J=!0;try{e:{A=!1,x&&(x=!1,D($),$=-1),T=!0;var re=S;try{t:{for(B(O),_=i(m);_!==null&&!(_.expirationTime>O&&ue());){var Z=_.callback;if(typeof Z=="function"){_.callback=null,S=_.priorityLevel;var Ee=Z(_.expirationTime<=O);if(O=t.unstable_now(),typeof Ee=="function"){_.callback=Ee,B(O),J=!0;break t}_===i(m)&&s(m),B(O)}else s(m);_=i(m)}if(_!==null)J=!0;else{var M=i(p);M!==null&&st(K,M.startTime-O),J=!1}}break e}finally{_=null,S=re,T=!1}J=void 0}}finally{J?be():Y=!1}}}var be;if(typeof I=="function")be=function(){I(pe)};else if(typeof MessageChannel<"u"){var Re=new MessageChannel,ze=Re.port2;Re.port1.onmessage=pe,be=function(){ze.postMessage(null)}}else be=function(){R(pe,0)};function st(O,J){$=R(function(){O(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(O){switch(S){case 1:case 2:case 3:var J=3;break;default:J=S}var re=S;S=J;try{return O()}finally{S=re}},t.unstable_requestPaint=function(){C=!0},t.unstable_runWithPriority=function(O,J){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var re=S;S=O;try{return J()}finally{S=re}},t.unstable_scheduleCallback=function(O,J,re){var Z=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?Z+re:Z):re=Z,O){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=re+Ee,O={id:v++,callback:J,priorityLevel:O,startTime:re,expirationTime:Ee,sortIndex:-1},re>Z?(O.sortIndex=re,e(p,O),i(m)===null&&O===i(p)&&(x?(D($),$=-1):x=!0,st(K,re-Z))):(O.sortIndex=Ee,e(m,O),A||T||(A=!0,Y||(Y=!0,be()))),O},t.unstable_shouldYield=ue,t.unstable_wrapCallback=function(O){var J=S;return function(){var re=S;S=J;try{return O.apply(this,arguments)}finally{S=re}}}})(Xc)),Xc}var fg;function rT(){return fg||(fg=1,Yc.exports=sT()),Yc.exports}var Qc={exports:{}},Mt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hg;function aT(){if(hg)return Mt;hg=1;var t=Vd();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(m,p,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:_==null?null:""+_,children:m,containerInfo:p,implementation:v}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Mt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Mt.createPortal=function(m,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(m,p,null,v)},Mt.flushSync=function(m){var p=c.T,v=s.p;try{if(c.T=null,s.p=2,m)return m()}finally{c.T=p,s.p=v,s.d.f()}},Mt.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(m,p))},Mt.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},Mt.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var v=p.as,_=f(v,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,T=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?s.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:_,integrity:S,fetchPriority:T}):v==="script"&&s.d.X(m,{crossOrigin:_,integrity:S,fetchPriority:T,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Mt.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=f(p.as,p.crossOrigin);s.d.M(m,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(m)},Mt.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,_=f(v,p.crossOrigin);s.d.L(m,v,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Mt.preloadModule=function(m,p){if(typeof m=="string")if(p){var v=f(p.as,p.crossOrigin);s.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(m)},Mt.requestFormReset=function(m){s.d.r(m)},Mt.unstable_batchedUpdates=function(m,p){return m(p)},Mt.useFormState=function(m,p,v){return c.H.useFormState(m,p,v)},Mt.useFormStatus=function(){return c.H.useHostTransitionStatus()},Mt.version="19.2.3",Mt}var pg;function lT(){if(pg)return Qc.exports;pg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Qc.exports=aT(),Qc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mg;function uT(){if(mg)return dr;mg=1;var t=rT(),e=Vd(),i=lT();function s(n){var o="https://react.dev/errors/"+n;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)o+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var o=n,a=n;if(n.alternate)for(;o.return;)o=o.return;else{n=o;do o=n,(o.flags&4098)!==0&&(a=o.return),n=o.return;while(n)}return o.tag===3?a:null}function c(n){if(n.tag===13){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function f(n){if(n.tag===31){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function m(n){if(l(n)!==n)throw Error(s(188))}function p(n){var o=n.alternate;if(!o){if(o=l(n),o===null)throw Error(s(188));return o!==n?null:n}for(var a=n,u=o;;){var g=a.return;if(g===null)break;var y=g.alternate;if(y===null){if(u=g.return,u!==null){a=u;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===a)return m(g),n;if(y===u)return m(g),o;y=y.sibling}throw Error(s(188))}if(a.return!==u.return)a=g,u=y;else{for(var E=!1,b=g.child;b;){if(b===a){E=!0,a=g,u=y;break}if(b===u){E=!0,u=g,a=y;break}b=b.sibling}if(!E){for(b=y.child;b;){if(b===a){E=!0,a=y,u=g;break}if(b===u){E=!0,u=y,a=g;break}b=b.sibling}if(!E)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?n:o}function v(n){var o=n.tag;if(o===5||o===26||o===27||o===6)return n;for(n=n.child;n!==null;){if(o=v(n),o!==null)return o;n=n.sibling}return null}var _=Object.assign,S=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),I=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),ue=Symbol.for("react.memo_cache_sentinel"),pe=Symbol.iterator;function be(n){return n===null||typeof n!="object"?null:(n=pe&&n[pe]||n["@@iterator"],typeof n=="function"?n:null)}var Re=Symbol.for("react.client.reference");function ze(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===Re?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case x:return"Fragment";case R:return"Profiler";case C:return"StrictMode";case K:return"Suspense";case Y:return"SuspenseList";case X:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case A:return"Portal";case I:return n.displayName||"Context";case D:return(n._context.displayName||"Context")+".Consumer";case B:var o=n.render;return n=n.displayName,n||(n=o.displayName||o.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case $:return o=n.displayName||null,o!==null?o:ze(n.type)||"Memo";case ne:o=n._payload,n=n._init;try{return ze(n(o))}catch{}}return null}var st=Array.isArray,O=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},Z=[],Ee=-1;function M(n){return{current:n}}function V(n){0>Ee||(n.current=Z[Ee],Z[Ee]=null,Ee--)}function j(n,o){Ee++,Z[Ee]=n.current,n.current=o}var Q=M(null),ee=M(null),ve=M(null),_e=M(null);function Je(n,o){switch(j(ve,o),j(ee,n),j(Q,null),o.nodeType){case 9:case 11:n=(n=o.documentElement)&&(n=n.namespaceURI)?Im(n):0;break;default:if(n=o.tagName,o=o.namespaceURI)o=Im(o),n=Mm(o,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}V(Q),j(Q,n)}function Ze(){V(Q),V(ee),V(ve)}function Oi(n){n.memoizedState!==null&&j(_e,n);var o=Q.current,a=Mm(o,n.type);o!==a&&(j(ee,n),j(Q,a))}function fo(n){ee.current===n&&(V(Q),V(ee)),_e.current===n&&(V(_e),rr._currentValue=re)}var ho,Cr;function Pn(n){if(ho===void 0)try{throw Error()}catch(a){var o=a.stack.trim().match(/\n( *(at )?)/);ho=o&&o[1]||"",Cr=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ho+n+Cr}var he=!1;function we(n,o){if(!n||he)return"";he=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(o){var F=function(){throw Error()};if(Object.defineProperty(F.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(F,[])}catch(G){var q=G}Reflect.construct(n,[],F)}else{try{F.call()}catch(G){q=G}n.call(F.prototype)}}else{try{throw Error()}catch(G){q=G}(F=n())&&typeof F.catch=="function"&&F.catch(function(){})}}catch(G){if(G&&q&&typeof G.stack=="string")return[G.stack,q.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),E=y[0],b=y[1];if(E&&b){var N=E.split(`
`),L=b.split(`
`);for(g=u=0;u<N.length&&!N[u].includes("DetermineComponentFrameRoot");)u++;for(;g<L.length&&!L[g].includes("DetermineComponentFrameRoot");)g++;if(u===N.length||g===L.length)for(u=N.length-1,g=L.length-1;1<=u&&0<=g&&N[u]!==L[g];)g--;for(;1<=u&&0<=g;u--,g--)if(N[u]!==L[g]){if(u!==1||g!==1)do if(u--,g--,0>g||N[u]!==L[g]){var H=`
`+N[u].replace(" at new "," at ");return n.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",n.displayName)),H}while(1<=u&&0<=g);break}}}finally{he=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?Pn(a):""}function Ae(n,o){switch(n.tag){case 26:case 27:case 5:return Pn(n.type);case 16:return Pn("Lazy");case 13:return n.child!==o&&o!==null?Pn("Suspense Fallback"):Pn("Suspense");case 19:return Pn("SuspenseList");case 0:case 15:return we(n.type,!1);case 11:return we(n.type.render,!1);case 1:return we(n.type,!0);case 31:return Pn("Activity");default:return""}}function te(n){try{var o="",a=null;do o+=Ae(n,a),a=n,n=n.return;while(n);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ne=Object.prototype.hasOwnProperty,Ke=t.unstable_scheduleCallback,rt=t.unstable_cancelCallback,wt=t.unstable_shouldYield,Gt=t.unstable_requestPaint,nt=t.unstable_now,Xe=t.unstable_getCurrentPriorityLevel,at=t.unstable_ImmediatePriority,gt=t.unstable_UserBlockingPriority,ie=t.unstable_NormalPriority,Le=t.unstable_LowPriority,Ln=t.unstable_IdlePriority,Rn=t.log,Pi=t.unstable_setDisableYieldValue,vn=null,vt=null;function sn(n){if(typeof Rn=="function"&&Pi(n),vt&&typeof vt.setStrictMode=="function")try{vt.setStrictMode(vn,n)}catch{}}var Ot=Math.clz32?Math.clz32:ut,Dl=Math.log,lt=Math.LN2;function ut(n){return n>>>=0,n===0?32:31-(Dl(n)/lt|0)|0}var _t=256,Bt=262144,Li=4194304;function Nn(n){var o=n&42;if(o!==0)return o;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function po(n,o,a){var u=n.pendingLanes;if(u===0)return 0;var g=0,y=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var b=u&134217727;return b!==0?(u=b&~y,u!==0?g=Nn(u):(E&=b,E!==0?g=Nn(E):a||(a=b&~n,a!==0&&(g=Nn(a))))):(b=u&~y,b!==0?g=Nn(b):E!==0?g=Nn(E):a||(a=u&~n,a!==0&&(g=Nn(a)))),g===0?0:o!==0&&o!==g&&(o&y)===0&&(y=g&-g,a=o&-o,y>=a||y===32&&(a&4194048)!==0)?o:g}function _s(n,o){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&o)===0}function H_(n,o){switch(n){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function df(){var n=Li;return Li<<=1,(Li&62914560)===0&&(Li=4194304),n}function Ul(n){for(var o=[],a=0;31>a;a++)o.push(n);return o}function Ss(n,o){n.pendingLanes|=o,o!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function V_(n,o,a,u,g,y){var E=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var b=n.entanglements,N=n.expirationTimes,L=n.hiddenUpdates;for(a=E&~a;0<a;){var H=31-Ot(a),F=1<<H;b[H]=0,N[H]=-1;var q=L[H];if(q!==null)for(L[H]=null,H=0;H<q.length;H++){var G=q[H];G!==null&&(G.lane&=-536870913)}a&=~F}u!==0&&ff(n,u,0),y!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=y&~(E&~o))}function ff(n,o,a){n.pendingLanes|=o,n.suspendedLanes&=~o;var u=31-Ot(o);n.entangledLanes|=o,n.entanglements[u]=n.entanglements[u]|1073741824|a&261930}function hf(n,o){var a=n.entangledLanes|=o;for(n=n.entanglements;a;){var u=31-Ot(a),g=1<<u;g&o|n[u]&o&&(n[u]|=o),a&=~g}}function pf(n,o){var a=o&-o;return a=(a&42)!==0?1:Ol(a),(a&(n.suspendedLanes|o))!==0?0:a}function Ol(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Pl(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function mf(){var n=J.p;return n!==0?n:(n=window.event,n===void 0?32:eg(n.type))}function gf(n,o){var a=J.p;try{return J.p=n,o()}finally{J.p=a}}var li=Math.random().toString(36).slice(2),bt="__reactFiber$"+li,Ht="__reactProps$"+li,mo="__reactContainer$"+li,Ll="__reactEvents$"+li,z_="__reactListeners$"+li,F_="__reactHandles$"+li,yf="__reactResources$"+li,Es="__reactMarker$"+li;function ql(n){delete n[bt],delete n[Ht],delete n[Ll],delete n[z_],delete n[F_]}function go(n){var o=n[bt];if(o)return o;for(var a=n.parentNode;a;){if(o=a[mo]||a[bt]){if(a=o.alternate,o.child!==null||a!==null&&a.child!==null)for(n=qm(n);n!==null;){if(a=n[bt])return a;n=qm(n)}return o}n=a,a=n.parentNode}return null}function yo(n){if(n=n[bt]||n[mo]){var o=n.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return n}return null}function Ts(n){var o=n.tag;if(o===5||o===26||o===27||o===6)return n.stateNode;throw Error(s(33))}function vo(n){var o=n[yf];return o||(o=n[yf]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function St(n){n[Es]=!0}var vf=new Set,_f={};function qi(n,o){_o(n,o),_o(n+"Capture",o)}function _o(n,o){for(_f[n]=o,n=0;n<o.length;n++)vf.add(o[n])}var $_=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Sf={},Ef={};function J_(n){return Ne.call(Ef,n)?!0:Ne.call(Sf,n)?!1:$_.test(n)?Ef[n]=!0:(Sf[n]=!0,!1)}function xr(n,o,a){if(J_(o))if(a===null)n.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(o);return;case"boolean":var u=o.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(o);return}}n.setAttribute(o,""+a)}}function Rr(n,o,a){if(a===null)n.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttribute(o,""+a)}}function qn(n,o,a,u){if(u===null)n.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(o,a,""+u)}}function rn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Tf(n){var o=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function K_(n,o,a){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,o);if(!n.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,y=u.set;return Object.defineProperty(n,o,{configurable:!0,get:function(){return g.call(this)},set:function(E){a=""+E,y.call(this,E)}}),Object.defineProperty(n,o,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(E){a=""+E},stopTracking:function(){n._valueTracker=null,delete n[o]}}}}function Gl(n){if(!n._valueTracker){var o=Tf(n)?"checked":"value";n._valueTracker=K_(n,o,""+n[o])}}function wf(n){if(!n)return!1;var o=n._valueTracker;if(!o)return!0;var a=o.getValue(),u="";return n&&(u=Tf(n)?n.checked?"true":"false":n.value),n=u,n!==a?(o.setValue(n),!0):!1}function Nr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var j_=/[\n"\\]/g;function an(n){return n.replace(j_,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Bl(n,o,a,u,g,y,E,b){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),o!=null?E==="number"?(o===0&&n.value===""||n.value!=o)&&(n.value=""+rn(o)):n.value!==""+rn(o)&&(n.value=""+rn(o)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),o!=null?Hl(n,E,rn(o)):a!=null?Hl(n,E,rn(a)):u!=null&&n.removeAttribute("value"),g==null&&y!=null&&(n.defaultChecked=!!y),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.name=""+rn(b):n.removeAttribute("name")}function bf(n,o,a,u,g,y,E,b){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(n.type=y),o!=null||a!=null){if(!(y!=="submit"&&y!=="reset"||o!=null)){Gl(n);return}a=a!=null?""+rn(a):"",o=o!=null?""+rn(o):a,b||o===n.value||(n.value=o),n.defaultValue=o}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=b?n.checked:!!u,n.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E),Gl(n)}function Hl(n,o,a){o==="number"&&Nr(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function So(n,o,a,u){if(n=n.options,o){o={};for(var g=0;g<a.length;g++)o["$"+a[g]]=!0;for(a=0;a<n.length;a++)g=o.hasOwnProperty("$"+n[a].value),n[a].selected!==g&&(n[a].selected=g),g&&u&&(n[a].defaultSelected=!0)}else{for(a=""+rn(a),o=null,g=0;g<n.length;g++){if(n[g].value===a){n[g].selected=!0,u&&(n[g].defaultSelected=!0);return}o!==null||n[g].disabled||(o=n[g])}o!==null&&(o.selected=!0)}}function Af(n,o,a){if(o!=null&&(o=""+rn(o),o!==n.value&&(n.value=o),a==null)){n.defaultValue!==o&&(n.defaultValue=o);return}n.defaultValue=a!=null?""+rn(a):""}function Cf(n,o,a,u){if(o==null){if(u!=null){if(a!=null)throw Error(s(92));if(st(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),o=a}a=rn(o),n.defaultValue=a,u=n.textContent,u===a&&u!==""&&u!==null&&(n.value=u),Gl(n)}function Eo(n,o){if(o){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=o;return}}n.textContent=o}var Y_=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xf(n,o,a){var u=o.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?n.setProperty(o,""):o==="float"?n.cssFloat="":n[o]="":u?n.setProperty(o,a):typeof a!="number"||a===0||Y_.has(o)?o==="float"?n.cssFloat=a:n[o]=(""+a).trim():n[o]=a+"px"}function Rf(n,o,a){if(o!=null&&typeof o!="object")throw Error(s(62));if(n=n.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||o!=null&&o.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var g in o)u=o[g],o.hasOwnProperty(g)&&a[g]!==u&&xf(n,g,u)}else for(var y in o)o.hasOwnProperty(y)&&xf(n,y,o[y])}function Vl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var X_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Q_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ir(n){return Q_.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Gn(){}var zl=null;function Fl(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var To=null,wo=null;function Nf(n){var o=yo(n);if(o&&(n=o.stateNode)){var a=n[Ht]||null;e:switch(n=o.stateNode,o.type){case"input":if(Bl(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),o=a.name,a.type==="radio"&&o!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+an(""+o)+'"][type="radio"]'),o=0;o<a.length;o++){var u=a[o];if(u!==n&&u.form===n.form){var g=u[Ht]||null;if(!g)throw Error(s(90));Bl(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<a.length;o++)u=a[o],u.form===n.form&&wf(u)}break e;case"textarea":Af(n,a.value,a.defaultValue);break e;case"select":o=a.value,o!=null&&So(n,!!a.multiple,o,!1)}}}var $l=!1;function If(n,o,a){if($l)return n(o,a);$l=!0;try{var u=n(o);return u}finally{if($l=!1,(To!==null||wo!==null)&&(ya(),To&&(o=To,n=wo,wo=To=null,Nf(o),n)))for(o=0;o<n.length;o++)Nf(n[o])}}function ws(n,o){var a=n.stateNode;if(a===null)return null;var u=a[Ht]||null;if(u===null)return null;a=u[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(s(231,o,typeof a));return a}var Bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jl=!1;if(Bn)try{var bs={};Object.defineProperty(bs,"passive",{get:function(){Jl=!0}}),window.addEventListener("test",bs,bs),window.removeEventListener("test",bs,bs)}catch{Jl=!1}var ui=null,Kl=null,Mr=null;function Mf(){if(Mr)return Mr;var n,o=Kl,a=o.length,u,g="value"in ui?ui.value:ui.textContent,y=g.length;for(n=0;n<a&&o[n]===g[n];n++);var E=a-n;for(u=1;u<=E&&o[a-u]===g[y-u];u++);return Mr=g.slice(n,1<u?1-u:void 0)}function kr(n){var o=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&o===13&&(n=13)):n=o,n===10&&(n=13),32<=n||n===13?n:0}function Dr(){return!0}function kf(){return!1}function Vt(n){function o(a,u,g,y,E){this._reactName=a,this._targetInst=g,this.type=u,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var b in n)n.hasOwnProperty(b)&&(a=n[b],this[b]=a?a(y):y[b]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Dr:kf,this.isPropagationStopped=kf,this}return _(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Dr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Dr)},persist:function(){},isPersistent:Dr}),o}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ur=Vt(Gi),As=_({},Gi,{view:0,detail:0}),W_=Vt(As),jl,Yl,Cs,Or=_({},As,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ql,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Cs&&(Cs&&n.type==="mousemove"?(jl=n.screenX-Cs.screenX,Yl=n.screenY-Cs.screenY):Yl=jl=0,Cs=n),jl)},movementY:function(n){return"movementY"in n?n.movementY:Yl}}),Df=Vt(Or),Z_=_({},Or,{dataTransfer:0}),eS=Vt(Z_),tS=_({},As,{relatedTarget:0}),Xl=Vt(tS),nS=_({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),iS=Vt(nS),oS=_({},Gi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),sS=Vt(oS),rS=_({},Gi,{data:0}),Uf=Vt(rS),aS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cS(n){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(n):(n=uS[n])?!!o[n]:!1}function Ql(){return cS}var dS=_({},As,{key:function(n){if(n.key){var o=aS[n.key]||n.key;if(o!=="Unidentified")return o}return n.type==="keypress"?(n=kr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?lS[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ql,charCode:function(n){return n.type==="keypress"?kr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?kr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),fS=Vt(dS),hS=_({},Or,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Of=Vt(hS),pS=_({},As,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ql}),mS=Vt(pS),gS=_({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),yS=Vt(gS),vS=_({},Or,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),_S=Vt(vS),SS=_({},Gi,{newState:0,oldState:0}),ES=Vt(SS),TS=[9,13,27,32],Wl=Bn&&"CompositionEvent"in window,xs=null;Bn&&"documentMode"in document&&(xs=document.documentMode);var wS=Bn&&"TextEvent"in window&&!xs,Pf=Bn&&(!Wl||xs&&8<xs&&11>=xs),Lf=" ",qf=!1;function Gf(n,o){switch(n){case"keyup":return TS.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var bo=!1;function bS(n,o){switch(n){case"compositionend":return Bf(o);case"keypress":return o.which!==32?null:(qf=!0,Lf);case"textInput":return n=o.data,n===Lf&&qf?null:n;default:return null}}function AS(n,o){if(bo)return n==="compositionend"||!Wl&&Gf(n,o)?(n=Mf(),Mr=Kl=ui=null,bo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Pf&&o.locale!=="ko"?null:o.data;default:return null}}var CS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hf(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o==="input"?!!CS[n.type]:o==="textarea"}function Vf(n,o,a,u){To?wo?wo.push(u):wo=[u]:To=u,o=ba(o,"onChange"),0<o.length&&(a=new Ur("onChange","change",null,a,u),n.push({event:a,listeners:o}))}var Rs=null,Ns=null;function xS(n){bm(n,0)}function Pr(n){var o=Ts(n);if(wf(o))return n}function zf(n,o){if(n==="change")return o}var Ff=!1;if(Bn){var Zl;if(Bn){var eu="oninput"in document;if(!eu){var $f=document.createElement("div");$f.setAttribute("oninput","return;"),eu=typeof $f.oninput=="function"}Zl=eu}else Zl=!1;Ff=Zl&&(!document.documentMode||9<document.documentMode)}function Jf(){Rs&&(Rs.detachEvent("onpropertychange",Kf),Ns=Rs=null)}function Kf(n){if(n.propertyName==="value"&&Pr(Ns)){var o=[];Vf(o,Ns,n,Fl(n)),If(xS,o)}}function RS(n,o,a){n==="focusin"?(Jf(),Rs=o,Ns=a,Rs.attachEvent("onpropertychange",Kf)):n==="focusout"&&Jf()}function NS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Pr(Ns)}function IS(n,o){if(n==="click")return Pr(o)}function MS(n,o){if(n==="input"||n==="change")return Pr(o)}function kS(n,o){return n===o&&(n!==0||1/n===1/o)||n!==n&&o!==o}var Xt=typeof Object.is=="function"?Object.is:kS;function Is(n,o){if(Xt(n,o))return!0;if(typeof n!="object"||n===null||typeof o!="object"||o===null)return!1;var a=Object.keys(n),u=Object.keys(o);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var g=a[u];if(!Ne.call(o,g)||!Xt(n[g],o[g]))return!1}return!0}function jf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Yf(n,o){var a=jf(n);n=0;for(var u;a;){if(a.nodeType===3){if(u=n+a.textContent.length,n<=o&&u>=o)return{node:a,offset:o-n};n=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=jf(a)}}function Xf(n,o){return n&&o?n===o?!0:n&&n.nodeType===3?!1:o&&o.nodeType===3?Xf(n,o.parentNode):"contains"in n?n.contains(o):n.compareDocumentPosition?!!(n.compareDocumentPosition(o)&16):!1:!1}function Qf(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var o=Nr(n.document);o instanceof n.HTMLIFrameElement;){try{var a=typeof o.contentWindow.location.href=="string"}catch{a=!1}if(a)n=o.contentWindow;else break;o=Nr(n.document)}return o}function tu(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o&&(o==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||o==="textarea"||n.contentEditable==="true")}var DS=Bn&&"documentMode"in document&&11>=document.documentMode,Ao=null,nu=null,Ms=null,iu=!1;function Wf(n,o,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;iu||Ao==null||Ao!==Nr(u)||(u=Ao,"selectionStart"in u&&tu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ms&&Is(Ms,u)||(Ms=u,u=ba(nu,"onSelect"),0<u.length&&(o=new Ur("onSelect","select",null,o,a),n.push({event:o,listeners:u}),o.target=Ao)))}function Bi(n,o){var a={};return a[n.toLowerCase()]=o.toLowerCase(),a["Webkit"+n]="webkit"+o,a["Moz"+n]="moz"+o,a}var Co={animationend:Bi("Animation","AnimationEnd"),animationiteration:Bi("Animation","AnimationIteration"),animationstart:Bi("Animation","AnimationStart"),transitionrun:Bi("Transition","TransitionRun"),transitionstart:Bi("Transition","TransitionStart"),transitioncancel:Bi("Transition","TransitionCancel"),transitionend:Bi("Transition","TransitionEnd")},ou={},Zf={};Bn&&(Zf=document.createElement("div").style,"AnimationEvent"in window||(delete Co.animationend.animation,delete Co.animationiteration.animation,delete Co.animationstart.animation),"TransitionEvent"in window||delete Co.transitionend.transition);function Hi(n){if(ou[n])return ou[n];if(!Co[n])return n;var o=Co[n],a;for(a in o)if(o.hasOwnProperty(a)&&a in Zf)return ou[n]=o[a];return n}var eh=Hi("animationend"),th=Hi("animationiteration"),nh=Hi("animationstart"),US=Hi("transitionrun"),OS=Hi("transitionstart"),PS=Hi("transitioncancel"),ih=Hi("transitionend"),oh=new Map,su="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");su.push("scrollEnd");function _n(n,o){oh.set(n,o),qi(o,[n])}var Lr=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},ln=[],xo=0,ru=0;function qr(){for(var n=xo,o=ru=xo=0;o<n;){var a=ln[o];ln[o++]=null;var u=ln[o];ln[o++]=null;var g=ln[o];ln[o++]=null;var y=ln[o];if(ln[o++]=null,u!==null&&g!==null){var E=u.pending;E===null?g.next=g:(g.next=E.next,E.next=g),u.pending=g}y!==0&&sh(a,g,y)}}function Gr(n,o,a,u){ln[xo++]=n,ln[xo++]=o,ln[xo++]=a,ln[xo++]=u,ru|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function au(n,o,a,u){return Gr(n,o,a,u),Br(n)}function Vi(n,o){return Gr(n,null,null,o),Br(n)}function sh(n,o,a){n.lanes|=a;var u=n.alternate;u!==null&&(u.lanes|=a);for(var g=!1,y=n.return;y!==null;)y.childLanes|=a,u=y.alternate,u!==null&&(u.childLanes|=a),y.tag===22&&(n=y.stateNode,n===null||n._visibility&1||(g=!0)),n=y,y=y.return;return n.tag===3?(y=n.stateNode,g&&o!==null&&(g=31-Ot(a),n=y.hiddenUpdates,u=n[g],u===null?n[g]=[o]:u.push(o),o.lane=a|536870912),y):null}function Br(n){if(50<Zs)throw Zs=0,gc=null,Error(s(185));for(var o=n.return;o!==null;)n=o,o=n.return;return n.tag===3?n.stateNode:null}var Ro={};function LS(n,o,a,u){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qt(n,o,a,u){return new LS(n,o,a,u)}function lu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Hn(n,o){var a=n.alternate;return a===null?(a=Qt(n.tag,o,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=o,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,o=n.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function rh(n,o){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=o,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,o=a.dependencies,n.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),n}function Hr(n,o,a,u,g,y){var E=0;if(u=n,typeof n=="function")lu(n)&&(E=1);else if(typeof n=="string")E=VE(n,a,Q.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case X:return n=Qt(31,a,o,g),n.elementType=X,n.lanes=y,n;case x:return zi(a.children,g,y,o);case C:E=8,g|=24;break;case R:return n=Qt(12,a,o,g|2),n.elementType=R,n.lanes=y,n;case K:return n=Qt(13,a,o,g),n.elementType=K,n.lanes=y,n;case Y:return n=Qt(19,a,o,g),n.elementType=Y,n.lanes=y,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case I:E=10;break e;case D:E=9;break e;case B:E=11;break e;case $:E=14;break e;case ne:E=16,u=null;break e}E=29,a=Error(s(130,n===null?"null":typeof n,"")),u=null}return o=Qt(E,a,o,g),o.elementType=n,o.type=u,o.lanes=y,o}function zi(n,o,a,u){return n=Qt(7,n,u,o),n.lanes=a,n}function uu(n,o,a){return n=Qt(6,n,null,o),n.lanes=a,n}function ah(n){var o=Qt(18,null,null,0);return o.stateNode=n,o}function cu(n,o,a){return o=Qt(4,n.children!==null?n.children:[],n.key,o),o.lanes=a,o.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},o}var lh=new WeakMap;function un(n,o){if(typeof n=="object"&&n!==null){var a=lh.get(n);return a!==void 0?a:(o={value:n,source:o,stack:te(o)},lh.set(n,o),o)}return{value:n,source:o,stack:te(o)}}var No=[],Io=0,Vr=null,ks=0,cn=[],dn=0,ci=null,In=1,Mn="";function Vn(n,o){No[Io++]=ks,No[Io++]=Vr,Vr=n,ks=o}function uh(n,o,a){cn[dn++]=In,cn[dn++]=Mn,cn[dn++]=ci,ci=n;var u=In;n=Mn;var g=32-Ot(u)-1;u&=~(1<<g),a+=1;var y=32-Ot(o)+g;if(30<y){var E=g-g%5;y=(u&(1<<E)-1).toString(32),u>>=E,g-=E,In=1<<32-Ot(o)+g|a<<g|u,Mn=y+n}else In=1<<y|a<<g|u,Mn=n}function du(n){n.return!==null&&(Vn(n,1),uh(n,1,0))}function fu(n){for(;n===Vr;)Vr=No[--Io],No[Io]=null,ks=No[--Io],No[Io]=null;for(;n===ci;)ci=cn[--dn],cn[dn]=null,Mn=cn[--dn],cn[dn]=null,In=cn[--dn],cn[dn]=null}function ch(n,o){cn[dn++]=In,cn[dn++]=Mn,cn[dn++]=ci,In=o.id,Mn=o.overflow,ci=n}var At=null,je=null,ke=!1,di=null,fn=!1,hu=Error(s(519));function fi(n){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ds(un(o,n)),hu}function dh(n){var o=n.stateNode,a=n.type,u=n.memoizedProps;switch(o[bt]=n,o[Ht]=u,a){case"dialog":xe("cancel",o),xe("close",o);break;case"iframe":case"object":case"embed":xe("load",o);break;case"video":case"audio":for(a=0;a<tr.length;a++)xe(tr[a],o);break;case"source":xe("error",o);break;case"img":case"image":case"link":xe("error",o),xe("load",o);break;case"details":xe("toggle",o);break;case"input":xe("invalid",o),bf(o,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":xe("invalid",o);break;case"textarea":xe("invalid",o),Cf(o,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||o.textContent===""+a||u.suppressHydrationWarning===!0||Rm(o.textContent,a)?(u.popover!=null&&(xe("beforetoggle",o),xe("toggle",o)),u.onScroll!=null&&xe("scroll",o),u.onScrollEnd!=null&&xe("scrollend",o),u.onClick!=null&&(o.onclick=Gn),o=!0):o=!1,o||fi(n,!0)}function fh(n){for(At=n.return;At;)switch(At.tag){case 5:case 31:case 13:fn=!1;return;case 27:case 3:fn=!0;return;default:At=At.return}}function Mo(n){if(n!==At)return!1;if(!ke)return fh(n),ke=!0,!1;var o=n.tag,a;if((a=o!==3&&o!==27)&&((a=o===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Mc(n.type,n.memoizedProps)),a=!a),a&&je&&fi(n),fh(n),o===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));je=Lm(n)}else if(o===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));je=Lm(n)}else o===27?(o=je,Ci(n.type)?(n=Pc,Pc=null,je=n):je=o):je=At?pn(n.stateNode.nextSibling):null;return!0}function Fi(){je=At=null,ke=!1}function pu(){var n=di;return n!==null&&(Jt===null?Jt=n:Jt.push.apply(Jt,n),di=null),n}function Ds(n){di===null?di=[n]:di.push(n)}var mu=M(null),$i=null,zn=null;function hi(n,o,a){j(mu,o._currentValue),o._currentValue=a}function Fn(n){n._currentValue=mu.current,V(mu)}function gu(n,o,a){for(;n!==null;){var u=n.alternate;if((n.childLanes&o)!==o?(n.childLanes|=o,u!==null&&(u.childLanes|=o)):u!==null&&(u.childLanes&o)!==o&&(u.childLanes|=o),n===a)break;n=n.return}}function yu(n,o,a,u){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var y=g.dependencies;if(y!==null){var E=g.child;y=y.firstContext;e:for(;y!==null;){var b=y;y=g;for(var N=0;N<o.length;N++)if(b.context===o[N]){y.lanes|=a,b=y.alternate,b!==null&&(b.lanes|=a),gu(y.return,a,n),u||(E=null);break e}y=b.next}}else if(g.tag===18){if(E=g.return,E===null)throw Error(s(341));E.lanes|=a,y=E.alternate,y!==null&&(y.lanes|=a),gu(E,a,n),E=null}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===n){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}}function ko(n,o,a,u){n=null;for(var g=o,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var E=g.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var b=g.type;Xt(g.pendingProps.value,E.value)||(n!==null?n.push(b):n=[b])}}else if(g===_e.current){if(E=g.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(rr):n=[rr])}g=g.return}n!==null&&yu(o,n,a,u),o.flags|=262144}function zr(n){for(n=n.firstContext;n!==null;){if(!Xt(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ji(n){$i=n,zn=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Ct(n){return hh($i,n)}function Fr(n,o){return $i===null&&Ji(n),hh(n,o)}function hh(n,o){var a=o._currentValue;if(o={context:o,memoizedValue:a,next:null},zn===null){if(n===null)throw Error(s(308));zn=o,n.dependencies={lanes:0,firstContext:o},n.flags|=524288}else zn=zn.next=o;return a}var qS=typeof AbortController<"u"?AbortController:function(){var n=[],o=this.signal={aborted:!1,addEventListener:function(a,u){n.push(u)}};this.abort=function(){o.aborted=!0,n.forEach(function(a){return a()})}},GS=t.unstable_scheduleCallback,BS=t.unstable_NormalPriority,ct={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vu(){return{controller:new qS,data:new Map,refCount:0}}function Us(n){n.refCount--,n.refCount===0&&GS(BS,function(){n.controller.abort()})}var Os=null,_u=0,Do=0,Uo=null;function HS(n,o){if(Os===null){var a=Os=[];_u=0,Do=Tc(),Uo={status:"pending",value:void 0,then:function(u){a.push(u)}}}return _u++,o.then(ph,ph),o}function ph(){if(--_u===0&&Os!==null){Uo!==null&&(Uo.status="fulfilled");var n=Os;Os=null,Do=0,Uo=null;for(var o=0;o<n.length;o++)(0,n[o])()}}function VS(n,o){var a=[],u={status:"pending",value:null,reason:null,then:function(g){a.push(g)}};return n.then(function(){u.status="fulfilled",u.value=o;for(var g=0;g<a.length;g++)(0,a[g])(o)},function(g){for(u.status="rejected",u.reason=g,g=0;g<a.length;g++)(0,a[g])(void 0)}),u}var mh=O.S;O.S=function(n,o){Wp=nt(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&HS(n,o),mh!==null&&mh(n,o)};var Ki=M(null);function Su(){var n=Ki.current;return n!==null?n:Fe.pooledCache}function $r(n,o){o===null?j(Ki,Ki.current):j(Ki,o.pool)}function gh(){var n=Su();return n===null?null:{parent:ct._currentValue,pool:n}}var Oo=Error(s(460)),Eu=Error(s(474)),Jr=Error(s(542)),Kr={then:function(){}};function yh(n){return n=n.status,n==="fulfilled"||n==="rejected"}function vh(n,o,a){switch(a=n[a],a===void 0?n.push(o):a!==o&&(o.then(Gn,Gn),o=a),o.status){case"fulfilled":return o.value;case"rejected":throw n=o.reason,Sh(n),n;default:if(typeof o.status=="string")o.then(Gn,Gn);else{if(n=Fe,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=o,n.status="pending",n.then(function(u){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=u}},function(u){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=u}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw n=o.reason,Sh(n),n}throw Yi=o,Oo}}function ji(n){try{var o=n._init;return o(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Yi=a,Oo):a}}var Yi=null;function _h(){if(Yi===null)throw Error(s(459));var n=Yi;return Yi=null,n}function Sh(n){if(n===Oo||n===Jr)throw Error(s(483))}var Po=null,Ps=0;function jr(n){var o=Ps;return Ps+=1,Po===null&&(Po=[]),vh(Po,n,o)}function Ls(n,o){o=o.props.ref,n.ref=o!==void 0?o:null}function Yr(n,o){throw o.$$typeof===S?Error(s(525)):(n=Object.prototype.toString.call(o),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":n)))}function Eh(n){function o(U,k){if(n){var P=U.deletions;P===null?(U.deletions=[k],U.flags|=16):P.push(k)}}function a(U,k){if(!n)return null;for(;k!==null;)o(U,k),k=k.sibling;return null}function u(U){for(var k=new Map;U!==null;)U.key!==null?k.set(U.key,U):k.set(U.index,U),U=U.sibling;return k}function g(U,k){return U=Hn(U,k),U.index=0,U.sibling=null,U}function y(U,k,P){return U.index=P,n?(P=U.alternate,P!==null?(P=P.index,P<k?(U.flags|=67108866,k):P):(U.flags|=67108866,k)):(U.flags|=1048576,k)}function E(U){return n&&U.alternate===null&&(U.flags|=67108866),U}function b(U,k,P,z){return k===null||k.tag!==6?(k=uu(P,U.mode,z),k.return=U,k):(k=g(k,P),k.return=U,k)}function N(U,k,P,z){var ce=P.type;return ce===x?H(U,k,P.props.children,z,P.key):k!==null&&(k.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===ne&&ji(ce)===k.type)?(k=g(k,P.props),Ls(k,P),k.return=U,k):(k=Hr(P.type,P.key,P.props,null,U.mode,z),Ls(k,P),k.return=U,k)}function L(U,k,P,z){return k===null||k.tag!==4||k.stateNode.containerInfo!==P.containerInfo||k.stateNode.implementation!==P.implementation?(k=cu(P,U.mode,z),k.return=U,k):(k=g(k,P.children||[]),k.return=U,k)}function H(U,k,P,z,ce){return k===null||k.tag!==7?(k=zi(P,U.mode,z,ce),k.return=U,k):(k=g(k,P),k.return=U,k)}function F(U,k,P){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=uu(""+k,U.mode,P),k.return=U,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case T:return P=Hr(k.type,k.key,k.props,null,U.mode,P),Ls(P,k),P.return=U,P;case A:return k=cu(k,U.mode,P),k.return=U,k;case ne:return k=ji(k),F(U,k,P)}if(st(k)||be(k))return k=zi(k,U.mode,P,null),k.return=U,k;if(typeof k.then=="function")return F(U,jr(k),P);if(k.$$typeof===I)return F(U,Fr(U,k),P);Yr(U,k)}return null}function q(U,k,P,z){var ce=k!==null?k.key:null;if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return ce!==null?null:b(U,k,""+P,z);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case T:return P.key===ce?N(U,k,P,z):null;case A:return P.key===ce?L(U,k,P,z):null;case ne:return P=ji(P),q(U,k,P,z)}if(st(P)||be(P))return ce!==null?null:H(U,k,P,z,null);if(typeof P.then=="function")return q(U,k,jr(P),z);if(P.$$typeof===I)return q(U,k,Fr(U,P),z);Yr(U,P)}return null}function G(U,k,P,z,ce){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return U=U.get(P)||null,b(k,U,""+z,ce);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case T:return U=U.get(z.key===null?P:z.key)||null,N(k,U,z,ce);case A:return U=U.get(z.key===null?P:z.key)||null,L(k,U,z,ce);case ne:return z=ji(z),G(U,k,P,z,ce)}if(st(z)||be(z))return U=U.get(P)||null,H(k,U,z,ce,null);if(typeof z.then=="function")return G(U,k,P,jr(z),ce);if(z.$$typeof===I)return G(U,k,P,Fr(k,z),ce);Yr(k,z)}return null}function se(U,k,P,z){for(var ce=null,De=null,ae=k,Te=k=0,Me=null;ae!==null&&Te<P.length;Te++){ae.index>Te?(Me=ae,ae=null):Me=ae.sibling;var Ue=q(U,ae,P[Te],z);if(Ue===null){ae===null&&(ae=Me);break}n&&ae&&Ue.alternate===null&&o(U,ae),k=y(Ue,k,Te),De===null?ce=Ue:De.sibling=Ue,De=Ue,ae=Me}if(Te===P.length)return a(U,ae),ke&&Vn(U,Te),ce;if(ae===null){for(;Te<P.length;Te++)ae=F(U,P[Te],z),ae!==null&&(k=y(ae,k,Te),De===null?ce=ae:De.sibling=ae,De=ae);return ke&&Vn(U,Te),ce}for(ae=u(ae);Te<P.length;Te++)Me=G(ae,U,Te,P[Te],z),Me!==null&&(n&&Me.alternate!==null&&ae.delete(Me.key===null?Te:Me.key),k=y(Me,k,Te),De===null?ce=Me:De.sibling=Me,De=Me);return n&&ae.forEach(function(Mi){return o(U,Mi)}),ke&&Vn(U,Te),ce}function de(U,k,P,z){if(P==null)throw Error(s(151));for(var ce=null,De=null,ae=k,Te=k=0,Me=null,Ue=P.next();ae!==null&&!Ue.done;Te++,Ue=P.next()){ae.index>Te?(Me=ae,ae=null):Me=ae.sibling;var Mi=q(U,ae,Ue.value,z);if(Mi===null){ae===null&&(ae=Me);break}n&&ae&&Mi.alternate===null&&o(U,ae),k=y(Mi,k,Te),De===null?ce=Mi:De.sibling=Mi,De=Mi,ae=Me}if(Ue.done)return a(U,ae),ke&&Vn(U,Te),ce;if(ae===null){for(;!Ue.done;Te++,Ue=P.next())Ue=F(U,Ue.value,z),Ue!==null&&(k=y(Ue,k,Te),De===null?ce=Ue:De.sibling=Ue,De=Ue);return ke&&Vn(U,Te),ce}for(ae=u(ae);!Ue.done;Te++,Ue=P.next())Ue=G(ae,U,Te,Ue.value,z),Ue!==null&&(n&&Ue.alternate!==null&&ae.delete(Ue.key===null?Te:Ue.key),k=y(Ue,k,Te),De===null?ce=Ue:De.sibling=Ue,De=Ue);return n&&ae.forEach(function(ZE){return o(U,ZE)}),ke&&Vn(U,Te),ce}function Ve(U,k,P,z){if(typeof P=="object"&&P!==null&&P.type===x&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case T:e:{for(var ce=P.key;k!==null;){if(k.key===ce){if(ce=P.type,ce===x){if(k.tag===7){a(U,k.sibling),z=g(k,P.props.children),z.return=U,U=z;break e}}else if(k.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===ne&&ji(ce)===k.type){a(U,k.sibling),z=g(k,P.props),Ls(z,P),z.return=U,U=z;break e}a(U,k);break}else o(U,k);k=k.sibling}P.type===x?(z=zi(P.props.children,U.mode,z,P.key),z.return=U,U=z):(z=Hr(P.type,P.key,P.props,null,U.mode,z),Ls(z,P),z.return=U,U=z)}return E(U);case A:e:{for(ce=P.key;k!==null;){if(k.key===ce)if(k.tag===4&&k.stateNode.containerInfo===P.containerInfo&&k.stateNode.implementation===P.implementation){a(U,k.sibling),z=g(k,P.children||[]),z.return=U,U=z;break e}else{a(U,k);break}else o(U,k);k=k.sibling}z=cu(P,U.mode,z),z.return=U,U=z}return E(U);case ne:return P=ji(P),Ve(U,k,P,z)}if(st(P))return se(U,k,P,z);if(be(P)){if(ce=be(P),typeof ce!="function")throw Error(s(150));return P=ce.call(P),de(U,k,P,z)}if(typeof P.then=="function")return Ve(U,k,jr(P),z);if(P.$$typeof===I)return Ve(U,k,Fr(U,P),z);Yr(U,P)}return typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint"?(P=""+P,k!==null&&k.tag===6?(a(U,k.sibling),z=g(k,P),z.return=U,U=z):(a(U,k),z=uu(P,U.mode,z),z.return=U,U=z),E(U)):a(U,k)}return function(U,k,P,z){try{Ps=0;var ce=Ve(U,k,P,z);return Po=null,ce}catch(ae){if(ae===Oo||ae===Jr)throw ae;var De=Qt(29,ae,null,U.mode);return De.lanes=z,De.return=U,De}finally{}}}var Xi=Eh(!0),Th=Eh(!1),pi=!1;function Tu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wu(n,o){n=n.updateQueue,o.updateQueue===n&&(o.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function mi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function gi(n,o,a){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Pe&2)!==0){var g=u.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),u.pending=o,o=Br(n),sh(n,null,a),o}return Gr(n,u,o,a),Br(n)}function qs(n,o,a){if(o=o.updateQueue,o!==null&&(o=o.shared,(a&4194048)!==0)){var u=o.lanes;u&=n.pendingLanes,a|=u,o.lanes=a,hf(n,a)}}function bu(n,o){var a=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var g=null,y=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};y===null?g=y=E:y=y.next=E,a=a.next}while(a!==null);y===null?g=y=o:y=y.next=o}else g=y=o;a={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=o:n.next=o,a.lastBaseUpdate=o}var Au=!1;function Gs(){if(Au){var n=Uo;if(n!==null)throw n}}function Bs(n,o,a,u){Au=!1;var g=n.updateQueue;pi=!1;var y=g.firstBaseUpdate,E=g.lastBaseUpdate,b=g.shared.pending;if(b!==null){g.shared.pending=null;var N=b,L=N.next;N.next=null,E===null?y=L:E.next=L,E=N;var H=n.alternate;H!==null&&(H=H.updateQueue,b=H.lastBaseUpdate,b!==E&&(b===null?H.firstBaseUpdate=L:b.next=L,H.lastBaseUpdate=N))}if(y!==null){var F=g.baseState;E=0,H=L=N=null,b=y;do{var q=b.lane&-536870913,G=q!==b.lane;if(G?(Ie&q)===q:(u&q)===q){q!==0&&q===Do&&(Au=!0),H!==null&&(H=H.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var se=n,de=b;q=o;var Ve=a;switch(de.tag){case 1:if(se=de.payload,typeof se=="function"){F=se.call(Ve,F,q);break e}F=se;break e;case 3:se.flags=se.flags&-65537|128;case 0:if(se=de.payload,q=typeof se=="function"?se.call(Ve,F,q):se,q==null)break e;F=_({},F,q);break e;case 2:pi=!0}}q=b.callback,q!==null&&(n.flags|=64,G&&(n.flags|=8192),G=g.callbacks,G===null?g.callbacks=[q]:G.push(q))}else G={lane:q,tag:b.tag,payload:b.payload,callback:b.callback,next:null},H===null?(L=H=G,N=F):H=H.next=G,E|=q;if(b=b.next,b===null){if(b=g.shared.pending,b===null)break;G=b,b=G.next,G.next=null,g.lastBaseUpdate=G,g.shared.pending=null}}while(!0);H===null&&(N=F),g.baseState=N,g.firstBaseUpdate=L,g.lastBaseUpdate=H,y===null&&(g.shared.lanes=0),Ei|=E,n.lanes=E,n.memoizedState=F}}function wh(n,o){if(typeof n!="function")throw Error(s(191,n));n.call(o)}function bh(n,o){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)wh(a[n],o)}var Lo=M(null),Xr=M(0);function Ah(n,o){n=Zn,j(Xr,n),j(Lo,o),Zn=n|o.baseLanes}function Cu(){j(Xr,Zn),j(Lo,Lo.current)}function xu(){Zn=Xr.current,V(Lo),V(Xr)}var Wt=M(null),hn=null;function yi(n){var o=n.alternate;j(it,it.current&1),j(Wt,n),hn===null&&(o===null||Lo.current!==null||o.memoizedState!==null)&&(hn=n)}function Ru(n){j(it,it.current),j(Wt,n),hn===null&&(hn=n)}function Ch(n){n.tag===22?(j(it,it.current),j(Wt,n),hn===null&&(hn=n)):vi()}function vi(){j(it,it.current),j(Wt,Wt.current)}function Zt(n){V(Wt),hn===n&&(hn=null),V(it)}var it=M(0);function Qr(n){for(var o=n;o!==null;){if(o.tag===13){var a=o.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Uc(a)||Oc(a)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var $n=0,Se=null,Be=null,dt=null,Wr=!1,qo=!1,Qi=!1,Zr=0,Hs=0,Go=null,zS=0;function et(){throw Error(s(321))}function Nu(n,o){if(o===null)return!1;for(var a=0;a<o.length&&a<n.length;a++)if(!Xt(n[a],o[a]))return!1;return!0}function Iu(n,o,a,u,g,y){return $n=y,Se=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,O.H=n===null||n.memoizedState===null?up:$u,Qi=!1,y=a(u,g),Qi=!1,qo&&(y=Rh(o,a,u,g)),xh(n),y}function xh(n){O.H=Fs;var o=Be!==null&&Be.next!==null;if($n=0,dt=Be=Se=null,Wr=!1,Hs=0,Go=null,o)throw Error(s(300));n===null||ft||(n=n.dependencies,n!==null&&zr(n)&&(ft=!0))}function Rh(n,o,a,u){Se=n;var g=0;do{if(qo&&(Go=null),Hs=0,qo=!1,25<=g)throw Error(s(301));if(g+=1,dt=Be=null,n.updateQueue!=null){var y=n.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}O.H=cp,y=o(a,u)}while(qo);return y}function FS(){var n=O.H,o=n.useState()[0];return o=typeof o.then=="function"?Vs(o):o,n=n.useState()[0],(Be!==null?Be.memoizedState:null)!==n&&(Se.flags|=1024),o}function Mu(){var n=Zr!==0;return Zr=0,n}function ku(n,o,a){o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~a}function Du(n){if(Wr){for(n=n.memoizedState;n!==null;){var o=n.queue;o!==null&&(o.pending=null),n=n.next}Wr=!1}$n=0,dt=Be=Se=null,qo=!1,Hs=Zr=0,Go=null}function Pt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?Se.memoizedState=dt=n:dt=dt.next=n,dt}function ot(){if(Be===null){var n=Se.alternate;n=n!==null?n.memoizedState:null}else n=Be.next;var o=dt===null?Se.memoizedState:dt.next;if(o!==null)dt=o,Be=n;else{if(n===null)throw Se.alternate===null?Error(s(467)):Error(s(310));Be=n,n={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},dt===null?Se.memoizedState=dt=n:dt=dt.next=n}return dt}function ea(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vs(n){var o=Hs;return Hs+=1,Go===null&&(Go=[]),n=vh(Go,n,o),o=Se,(dt===null?o.memoizedState:dt.next)===null&&(o=o.alternate,O.H=o===null||o.memoizedState===null?up:$u),n}function ta(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Vs(n);if(n.$$typeof===I)return Ct(n)}throw Error(s(438,String(n)))}function Uu(n){var o=null,a=Se.updateQueue;if(a!==null&&(o=a.memoCache),o==null){var u=Se.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(o={data:u.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),a===null&&(a=ea(),Se.updateQueue=a),a.memoCache=o,a=o.data[o.index],a===void 0)for(a=o.data[o.index]=Array(n),u=0;u<n;u++)a[u]=ue;return o.index++,a}function Jn(n,o){return typeof o=="function"?o(n):o}function na(n){var o=ot();return Ou(o,Be,n)}function Ou(n,o,a){var u=n.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var g=n.baseQueue,y=u.pending;if(y!==null){if(g!==null){var E=g.next;g.next=y.next,y.next=E}o.baseQueue=g=y,u.pending=null}if(y=n.baseState,g===null)n.memoizedState=y;else{o=g.next;var b=E=null,N=null,L=o,H=!1;do{var F=L.lane&-536870913;if(F!==L.lane?(Ie&F)===F:($n&F)===F){var q=L.revertLane;if(q===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),F===Do&&(H=!0);else if(($n&q)===q){L=L.next,q===Do&&(H=!0);continue}else F={lane:0,revertLane:L.revertLane,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},N===null?(b=N=F,E=y):N=N.next=F,Se.lanes|=q,Ei|=q;F=L.action,Qi&&a(y,F),y=L.hasEagerState?L.eagerState:a(y,F)}else q={lane:F,revertLane:L.revertLane,gesture:L.gesture,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},N===null?(b=N=q,E=y):N=N.next=q,Se.lanes|=F,Ei|=F;L=L.next}while(L!==null&&L!==o);if(N===null?E=y:N.next=b,!Xt(y,n.memoizedState)&&(ft=!0,H&&(a=Uo,a!==null)))throw a;n.memoizedState=y,n.baseState=E,n.baseQueue=N,u.lastRenderedState=y}return g===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Pu(n){var o=ot(),a=o.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=n;var u=a.dispatch,g=a.pending,y=o.memoizedState;if(g!==null){a.pending=null;var E=g=g.next;do y=n(y,E.action),E=E.next;while(E!==g);Xt(y,o.memoizedState)||(ft=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),a.lastRenderedState=y}return[y,u]}function Nh(n,o,a){var u=Se,g=ot(),y=ke;if(y){if(a===void 0)throw Error(s(407));a=a()}else a=o();var E=!Xt((Be||g).memoizedState,a);if(E&&(g.memoizedState=a,ft=!0),g=g.queue,Gu(kh.bind(null,u,g,n),[n]),g.getSnapshot!==o||E||dt!==null&&dt.memoizedState.tag&1){if(u.flags|=2048,Bo(9,{destroy:void 0},Mh.bind(null,u,g,a,o),null),Fe===null)throw Error(s(349));y||($n&127)!==0||Ih(u,o,a)}return a}function Ih(n,o,a){n.flags|=16384,n={getSnapshot:o,value:a},o=Se.updateQueue,o===null?(o=ea(),Se.updateQueue=o,o.stores=[n]):(a=o.stores,a===null?o.stores=[n]:a.push(n))}function Mh(n,o,a,u){o.value=a,o.getSnapshot=u,Dh(o)&&Uh(n)}function kh(n,o,a){return a(function(){Dh(o)&&Uh(n)})}function Dh(n){var o=n.getSnapshot;n=n.value;try{var a=o();return!Xt(n,a)}catch{return!0}}function Uh(n){var o=Vi(n,2);o!==null&&Kt(o,n,2)}function Lu(n){var o=Pt();if(typeof n=="function"){var a=n;if(n=a(),Qi){sn(!0);try{a()}finally{sn(!1)}}}return o.memoizedState=o.baseState=n,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jn,lastRenderedState:n},o}function Oh(n,o,a,u){return n.baseState=a,Ou(n,Be,typeof u=="function"?u:Jn)}function $S(n,o,a,u,g){if(sa(n))throw Error(s(485));if(n=o.action,n!==null){var y={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){y.listeners.push(E)}};O.T!==null?a(!0):y.isTransition=!1,u(y),a=o.pending,a===null?(y.next=o.pending=y,Ph(o,y)):(y.next=a.next,o.pending=a.next=y)}}function Ph(n,o){var a=o.action,u=o.payload,g=n.state;if(o.isTransition){var y=O.T,E={};O.T=E;try{var b=a(g,u),N=O.S;N!==null&&N(E,b),Lh(n,o,b)}catch(L){qu(n,o,L)}finally{y!==null&&E.types!==null&&(y.types=E.types),O.T=y}}else try{y=a(g,u),Lh(n,o,y)}catch(L){qu(n,o,L)}}function Lh(n,o,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){qh(n,o,u)},function(u){return qu(n,o,u)}):qh(n,o,a)}function qh(n,o,a){o.status="fulfilled",o.value=a,Gh(o),n.state=a,o=n.pending,o!==null&&(a=o.next,a===o?n.pending=null:(a=a.next,o.next=a,Ph(n,a)))}function qu(n,o,a){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do o.status="rejected",o.reason=a,Gh(o),o=o.next;while(o!==u)}n.action=null}function Gh(n){n=n.listeners;for(var o=0;o<n.length;o++)(0,n[o])()}function Bh(n,o){return o}function Hh(n,o){if(ke){var a=Fe.formState;if(a!==null){e:{var u=Se;if(ke){if(je){t:{for(var g=je,y=fn;g.nodeType!==8;){if(!y){g=null;break t}if(g=pn(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){je=pn(g.nextSibling),u=g.data==="F!";break e}}fi(u)}u=!1}u&&(o=a[0])}}return a=Pt(),a.memoizedState=a.baseState=o,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bh,lastRenderedState:o},a.queue=u,a=rp.bind(null,Se,u),u.dispatch=a,u=Lu(!1),y=Fu.bind(null,Se,!1,u.queue),u=Pt(),g={state:o,dispatch:null,action:n,pending:null},u.queue=g,a=$S.bind(null,Se,g,y,a),g.dispatch=a,u.memoizedState=n,[o,a,!1]}function Vh(n){var o=ot();return zh(o,Be,n)}function zh(n,o,a){if(o=Ou(n,o,Bh)[0],n=na(Jn)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var u=Vs(o)}catch(E){throw E===Oo?Jr:E}else u=o;o=ot();var g=o.queue,y=g.dispatch;return a!==o.memoizedState&&(Se.flags|=2048,Bo(9,{destroy:void 0},JS.bind(null,g,a),null)),[u,y,n]}function JS(n,o){n.action=o}function Fh(n){var o=ot(),a=Be;if(a!==null)return zh(o,a,n);ot(),o=o.memoizedState,a=ot();var u=a.queue.dispatch;return a.memoizedState=n,[o,u,!1]}function Bo(n,o,a,u){return n={tag:n,create:a,deps:u,inst:o,next:null},o=Se.updateQueue,o===null&&(o=ea(),Se.updateQueue=o),a=o.lastEffect,a===null?o.lastEffect=n.next=n:(u=a.next,a.next=n,n.next=u,o.lastEffect=n),n}function $h(){return ot().memoizedState}function ia(n,o,a,u){var g=Pt();Se.flags|=n,g.memoizedState=Bo(1|o,{destroy:void 0},a,u===void 0?null:u)}function oa(n,o,a,u){var g=ot();u=u===void 0?null:u;var y=g.memoizedState.inst;Be!==null&&u!==null&&Nu(u,Be.memoizedState.deps)?g.memoizedState=Bo(o,y,a,u):(Se.flags|=n,g.memoizedState=Bo(1|o,y,a,u))}function Jh(n,o){ia(8390656,8,n,o)}function Gu(n,o){oa(2048,8,n,o)}function KS(n){Se.flags|=4;var o=Se.updateQueue;if(o===null)o=ea(),Se.updateQueue=o,o.events=[n];else{var a=o.events;a===null?o.events=[n]:a.push(n)}}function Kh(n){var o=ot().memoizedState;return KS({ref:o,nextImpl:n}),function(){if((Pe&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function jh(n,o){return oa(4,2,n,o)}function Yh(n,o){return oa(4,4,n,o)}function Xh(n,o){if(typeof o=="function"){n=n();var a=o(n);return function(){typeof a=="function"?a():o(null)}}if(o!=null)return n=n(),o.current=n,function(){o.current=null}}function Qh(n,o,a){a=a!=null?a.concat([n]):null,oa(4,4,Xh.bind(null,o,n),a)}function Bu(){}function Wh(n,o){var a=ot();o=o===void 0?null:o;var u=a.memoizedState;return o!==null&&Nu(o,u[1])?u[0]:(a.memoizedState=[n,o],n)}function Zh(n,o){var a=ot();o=o===void 0?null:o;var u=a.memoizedState;if(o!==null&&Nu(o,u[1]))return u[0];if(u=n(),Qi){sn(!0);try{n()}finally{sn(!1)}}return a.memoizedState=[u,o],u}function Hu(n,o,a){return a===void 0||($n&1073741824)!==0&&(Ie&261930)===0?n.memoizedState=o:(n.memoizedState=a,n=em(),Se.lanes|=n,Ei|=n,a)}function ep(n,o,a,u){return Xt(a,o)?a:Lo.current!==null?(n=Hu(n,a,u),Xt(n,o)||(ft=!0),n):($n&42)===0||($n&1073741824)!==0&&(Ie&261930)===0?(ft=!0,n.memoizedState=a):(n=em(),Se.lanes|=n,Ei|=n,o)}function tp(n,o,a,u,g){var y=J.p;J.p=y!==0&&8>y?y:8;var E=O.T,b={};O.T=b,Fu(n,!1,o,a);try{var N=g(),L=O.S;if(L!==null&&L(b,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var H=VS(N,u);zs(n,o,H,nn(n))}else zs(n,o,u,nn(n))}catch(F){zs(n,o,{then:function(){},status:"rejected",reason:F},nn())}finally{J.p=y,E!==null&&b.types!==null&&(E.types=b.types),O.T=E}}function jS(){}function Vu(n,o,a,u){if(n.tag!==5)throw Error(s(476));var g=np(n).queue;tp(n,g,o,re,a===null?jS:function(){return ip(n),a(u)})}function np(n){var o=n.memoizedState;if(o!==null)return o;o={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jn,lastRenderedState:re},next:null};var a={};return o.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jn,lastRenderedState:a},next:null},n.memoizedState=o,n=n.alternate,n!==null&&(n.memoizedState=o),o}function ip(n){var o=np(n);o.next===null&&(o=n.alternate.memoizedState),zs(n,o.next.queue,{},nn())}function zu(){return Ct(rr)}function op(){return ot().memoizedState}function sp(){return ot().memoizedState}function YS(n){for(var o=n.return;o!==null;){switch(o.tag){case 24:case 3:var a=nn();n=mi(a);var u=gi(o,n,a);u!==null&&(Kt(u,o,a),qs(u,o,a)),o={cache:vu()},n.payload=o;return}o=o.return}}function XS(n,o,a){var u=nn();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},sa(n)?ap(o,a):(a=au(n,o,a,u),a!==null&&(Kt(a,n,u),lp(a,o,u)))}function rp(n,o,a){var u=nn();zs(n,o,a,u)}function zs(n,o,a,u){var g={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(sa(n))ap(o,g);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var E=o.lastRenderedState,b=y(E,a);if(g.hasEagerState=!0,g.eagerState=b,Xt(b,E))return Gr(n,o,g,0),Fe===null&&qr(),!1}catch{}finally{}if(a=au(n,o,g,u),a!==null)return Kt(a,n,u),lp(a,o,u),!0}return!1}function Fu(n,o,a,u){if(u={lane:2,revertLane:Tc(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},sa(n)){if(o)throw Error(s(479))}else o=au(n,a,u,2),o!==null&&Kt(o,n,2)}function sa(n){var o=n.alternate;return n===Se||o!==null&&o===Se}function ap(n,o){qo=Wr=!0;var a=n.pending;a===null?o.next=o:(o.next=a.next,a.next=o),n.pending=o}function lp(n,o,a){if((a&4194048)!==0){var u=o.lanes;u&=n.pendingLanes,a|=u,o.lanes=a,hf(n,a)}}var Fs={readContext:Ct,use:ta,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useLayoutEffect:et,useInsertionEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useSyncExternalStore:et,useId:et,useHostTransitionStatus:et,useFormState:et,useActionState:et,useOptimistic:et,useMemoCache:et,useCacheRefresh:et};Fs.useEffectEvent=et;var up={readContext:Ct,use:ta,useCallback:function(n,o){return Pt().memoizedState=[n,o===void 0?null:o],n},useContext:Ct,useEffect:Jh,useImperativeHandle:function(n,o,a){a=a!=null?a.concat([n]):null,ia(4194308,4,Xh.bind(null,o,n),a)},useLayoutEffect:function(n,o){return ia(4194308,4,n,o)},useInsertionEffect:function(n,o){ia(4,2,n,o)},useMemo:function(n,o){var a=Pt();o=o===void 0?null:o;var u=n();if(Qi){sn(!0);try{n()}finally{sn(!1)}}return a.memoizedState=[u,o],u},useReducer:function(n,o,a){var u=Pt();if(a!==void 0){var g=a(o);if(Qi){sn(!0);try{a(o)}finally{sn(!1)}}}else g=o;return u.memoizedState=u.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},u.queue=n,n=n.dispatch=XS.bind(null,Se,n),[u.memoizedState,n]},useRef:function(n){var o=Pt();return n={current:n},o.memoizedState=n},useState:function(n){n=Lu(n);var o=n.queue,a=rp.bind(null,Se,o);return o.dispatch=a,[n.memoizedState,a]},useDebugValue:Bu,useDeferredValue:function(n,o){var a=Pt();return Hu(a,n,o)},useTransition:function(){var n=Lu(!1);return n=tp.bind(null,Se,n.queue,!0,!1),Pt().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,o,a){var u=Se,g=Pt();if(ke){if(a===void 0)throw Error(s(407));a=a()}else{if(a=o(),Fe===null)throw Error(s(349));(Ie&127)!==0||Ih(u,o,a)}g.memoizedState=a;var y={value:a,getSnapshot:o};return g.queue=y,Jh(kh.bind(null,u,y,n),[n]),u.flags|=2048,Bo(9,{destroy:void 0},Mh.bind(null,u,y,a,o),null),a},useId:function(){var n=Pt(),o=Fe.identifierPrefix;if(ke){var a=Mn,u=In;a=(u&~(1<<32-Ot(u)-1)).toString(32)+a,o="_"+o+"R_"+a,a=Zr++,0<a&&(o+="H"+a.toString(32)),o+="_"}else a=zS++,o="_"+o+"r_"+a.toString(32)+"_";return n.memoizedState=o},useHostTransitionStatus:zu,useFormState:Hh,useActionState:Hh,useOptimistic:function(n){var o=Pt();o.memoizedState=o.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=a,o=Fu.bind(null,Se,!0,a),a.dispatch=o,[n,o]},useMemoCache:Uu,useCacheRefresh:function(){return Pt().memoizedState=YS.bind(null,Se)},useEffectEvent:function(n){var o=Pt(),a={impl:n};return o.memoizedState=a,function(){if((Pe&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},$u={readContext:Ct,use:ta,useCallback:Wh,useContext:Ct,useEffect:Gu,useImperativeHandle:Qh,useInsertionEffect:jh,useLayoutEffect:Yh,useMemo:Zh,useReducer:na,useRef:$h,useState:function(){return na(Jn)},useDebugValue:Bu,useDeferredValue:function(n,o){var a=ot();return ep(a,Be.memoizedState,n,o)},useTransition:function(){var n=na(Jn)[0],o=ot().memoizedState;return[typeof n=="boolean"?n:Vs(n),o]},useSyncExternalStore:Nh,useId:op,useHostTransitionStatus:zu,useFormState:Vh,useActionState:Vh,useOptimistic:function(n,o){var a=ot();return Oh(a,Be,n,o)},useMemoCache:Uu,useCacheRefresh:sp};$u.useEffectEvent=Kh;var cp={readContext:Ct,use:ta,useCallback:Wh,useContext:Ct,useEffect:Gu,useImperativeHandle:Qh,useInsertionEffect:jh,useLayoutEffect:Yh,useMemo:Zh,useReducer:Pu,useRef:$h,useState:function(){return Pu(Jn)},useDebugValue:Bu,useDeferredValue:function(n,o){var a=ot();return Be===null?Hu(a,n,o):ep(a,Be.memoizedState,n,o)},useTransition:function(){var n=Pu(Jn)[0],o=ot().memoizedState;return[typeof n=="boolean"?n:Vs(n),o]},useSyncExternalStore:Nh,useId:op,useHostTransitionStatus:zu,useFormState:Fh,useActionState:Fh,useOptimistic:function(n,o){var a=ot();return Be!==null?Oh(a,Be,n,o):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:Uu,useCacheRefresh:sp};cp.useEffectEvent=Kh;function Ju(n,o,a,u){o=n.memoizedState,a=a(u,o),a=a==null?o:_({},o,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Ku={enqueueSetState:function(n,o,a){n=n._reactInternals;var u=nn(),g=mi(u);g.payload=o,a!=null&&(g.callback=a),o=gi(n,g,u),o!==null&&(Kt(o,n,u),qs(o,n,u))},enqueueReplaceState:function(n,o,a){n=n._reactInternals;var u=nn(),g=mi(u);g.tag=1,g.payload=o,a!=null&&(g.callback=a),o=gi(n,g,u),o!==null&&(Kt(o,n,u),qs(o,n,u))},enqueueForceUpdate:function(n,o){n=n._reactInternals;var a=nn(),u=mi(a);u.tag=2,o!=null&&(u.callback=o),o=gi(n,u,a),o!==null&&(Kt(o,n,a),qs(o,n,a))}};function dp(n,o,a,u,g,y,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,y,E):o.prototype&&o.prototype.isPureReactComponent?!Is(a,u)||!Is(g,y):!0}function fp(n,o,a,u){n=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(a,u),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(a,u),o.state!==n&&Ku.enqueueReplaceState(o,o.state,null)}function Wi(n,o){var a=o;if("ref"in o){a={};for(var u in o)u!=="ref"&&(a[u]=o[u])}if(n=n.defaultProps){a===o&&(a=_({},a));for(var g in n)a[g]===void 0&&(a[g]=n[g])}return a}function hp(n){Lr(n)}function pp(n){console.error(n)}function mp(n){Lr(n)}function ra(n,o){try{var a=n.onUncaughtError;a(o.value,{componentStack:o.stack})}catch(u){setTimeout(function(){throw u})}}function gp(n,o,a){try{var u=n.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function ju(n,o,a){return a=mi(a),a.tag=3,a.payload={element:null},a.callback=function(){ra(n,o)},a}function yp(n){return n=mi(n),n.tag=3,n}function vp(n,o,a,u){var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var y=u.value;n.payload=function(){return g(y)},n.callback=function(){gp(o,a,u)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){gp(o,a,u),typeof g!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this));var b=u.stack;this.componentDidCatch(u.value,{componentStack:b!==null?b:""})})}function QS(n,o,a,u,g){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(o=a.alternate,o!==null&&ko(o,a,g,!0),a=Wt.current,a!==null){switch(a.tag){case 31:case 13:return hn===null?va():a.alternate===null&&tt===0&&(tt=3),a.flags&=-257,a.flags|=65536,a.lanes=g,u===Kr?a.flags|=16384:(o=a.updateQueue,o===null?a.updateQueue=new Set([u]):o.add(u),_c(n,u,g)),!1;case 22:return a.flags|=65536,u===Kr?a.flags|=16384:(o=a.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=o):(a=o.retryQueue,a===null?o.retryQueue=new Set([u]):a.add(u)),_c(n,u,g)),!1}throw Error(s(435,a.tag))}return _c(n,u,g),va(),!1}if(ke)return o=Wt.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,u!==hu&&(n=Error(s(422),{cause:u}),Ds(un(n,a)))):(u!==hu&&(o=Error(s(423),{cause:u}),Ds(un(o,a))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,u=un(u,a),g=ju(n.stateNode,u,g),bu(n,g),tt!==4&&(tt=2)),!1;var y=Error(s(520),{cause:u});if(y=un(y,a),Ws===null?Ws=[y]:Ws.push(y),tt!==4&&(tt=2),o===null)return!0;u=un(u,a),a=o;do{switch(a.tag){case 3:return a.flags|=65536,n=g&-g,a.lanes|=n,n=ju(a.stateNode,u,n),bu(a,n),!1;case 1:if(o=a.type,y=a.stateNode,(a.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ti===null||!Ti.has(y))))return a.flags|=65536,g&=-g,a.lanes|=g,g=yp(g),vp(g,n,a,u),bu(a,g),!1}a=a.return}while(a!==null);return!1}var Yu=Error(s(461)),ft=!1;function xt(n,o,a,u){o.child=n===null?Th(o,null,a,u):Xi(o,n.child,a,u)}function _p(n,o,a,u,g){a=a.render;var y=o.ref;if("ref"in u){var E={};for(var b in u)b!=="ref"&&(E[b]=u[b])}else E=u;return Ji(o),u=Iu(n,o,a,E,y,g),b=Mu(),n!==null&&!ft?(ku(n,o,g),Kn(n,o,g)):(ke&&b&&du(o),o.flags|=1,xt(n,o,u,g),o.child)}function Sp(n,o,a,u,g){if(n===null){var y=a.type;return typeof y=="function"&&!lu(y)&&y.defaultProps===void 0&&a.compare===null?(o.tag=15,o.type=y,Ep(n,o,y,u,g)):(n=Hr(a.type,null,u,o,o.mode,g),n.ref=o.ref,n.return=o,o.child=n)}if(y=n.child,!ic(n,g)){var E=y.memoizedProps;if(a=a.compare,a=a!==null?a:Is,a(E,u)&&n.ref===o.ref)return Kn(n,o,g)}return o.flags|=1,n=Hn(y,u),n.ref=o.ref,n.return=o,o.child=n}function Ep(n,o,a,u,g){if(n!==null){var y=n.memoizedProps;if(Is(y,u)&&n.ref===o.ref)if(ft=!1,o.pendingProps=u=y,ic(n,g))(n.flags&131072)!==0&&(ft=!0);else return o.lanes=n.lanes,Kn(n,o,g)}return Xu(n,o,a,u,g)}function Tp(n,o,a,u){var g=u.children,y=n!==null?n.memoizedState:null;if(n===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((o.flags&128)!==0){if(y=y!==null?y.baseLanes|a:a,n!==null){for(u=o.child=n.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~y}else u=0,o.child=null;return wp(n,o,y,a,u)}if((a&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},n!==null&&$r(o,y!==null?y.cachePool:null),y!==null?Ah(o,y):Cu(),Ch(o);else return u=o.lanes=536870912,wp(n,o,y!==null?y.baseLanes|a:a,a,u)}else y!==null?($r(o,y.cachePool),Ah(o,y),vi(),o.memoizedState=null):(n!==null&&$r(o,null),Cu(),vi());return xt(n,o,g,a),o.child}function $s(n,o){return n!==null&&n.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function wp(n,o,a,u,g){var y=Su();return y=y===null?null:{parent:ct._currentValue,pool:y},o.memoizedState={baseLanes:a,cachePool:y},n!==null&&$r(o,null),Cu(),Ch(o),n!==null&&ko(n,o,u,!0),o.childLanes=g,null}function aa(n,o){return o=ua({mode:o.mode,children:o.children},n.mode),o.ref=n.ref,n.child=o,o.return=n,o}function bp(n,o,a){return Xi(o,n.child,null,a),n=aa(o,o.pendingProps),n.flags|=2,Zt(o),o.memoizedState=null,n}function WS(n,o,a){var u=o.pendingProps,g=(o.flags&128)!==0;if(o.flags&=-129,n===null){if(ke){if(u.mode==="hidden")return n=aa(o,u),o.lanes=536870912,$s(null,n);if(Ru(o),(n=je)?(n=Pm(n,fn),n=n!==null&&n.data==="&"?n:null,n!==null&&(o.memoizedState={dehydrated:n,treeContext:ci!==null?{id:In,overflow:Mn}:null,retryLane:536870912,hydrationErrors:null},a=ah(n),a.return=o,o.child=a,At=o,je=null)):n=null,n===null)throw fi(o);return o.lanes=536870912,null}return aa(o,u)}var y=n.memoizedState;if(y!==null){var E=y.dehydrated;if(Ru(o),g)if(o.flags&256)o.flags&=-257,o=bp(n,o,a);else if(o.memoizedState!==null)o.child=n.child,o.flags|=128,o=null;else throw Error(s(558));else if(ft||ko(n,o,a,!1),g=(a&n.childLanes)!==0,ft||g){if(u=Fe,u!==null&&(E=pf(u,a),E!==0&&E!==y.retryLane))throw y.retryLane=E,Vi(n,E),Kt(u,n,E),Yu;va(),o=bp(n,o,a)}else n=y.treeContext,je=pn(E.nextSibling),At=o,ke=!0,di=null,fn=!1,n!==null&&ch(o,n),o=aa(o,u),o.flags|=4096;return o}return n=Hn(n.child,{mode:u.mode,children:u.children}),n.ref=o.ref,o.child=n,n.return=o,n}function la(n,o){var a=o.ref;if(a===null)n!==null&&n.ref!==null&&(o.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(n===null||n.ref!==a)&&(o.flags|=4194816)}}function Xu(n,o,a,u,g){return Ji(o),a=Iu(n,o,a,u,void 0,g),u=Mu(),n!==null&&!ft?(ku(n,o,g),Kn(n,o,g)):(ke&&u&&du(o),o.flags|=1,xt(n,o,a,g),o.child)}function Ap(n,o,a,u,g,y){return Ji(o),o.updateQueue=null,a=Rh(o,u,a,g),xh(n),u=Mu(),n!==null&&!ft?(ku(n,o,y),Kn(n,o,y)):(ke&&u&&du(o),o.flags|=1,xt(n,o,a,y),o.child)}function Cp(n,o,a,u,g){if(Ji(o),o.stateNode===null){var y=Ro,E=a.contextType;typeof E=="object"&&E!==null&&(y=Ct(E)),y=new a(u,y),o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Ku,o.stateNode=y,y._reactInternals=o,y=o.stateNode,y.props=u,y.state=o.memoizedState,y.refs={},Tu(o),E=a.contextType,y.context=typeof E=="object"&&E!==null?Ct(E):Ro,y.state=o.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(Ju(o,a,E,u),y.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(E=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),E!==y.state&&Ku.enqueueReplaceState(y,y.state,null),Bs(o,u,y,g),Gs(),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308),u=!0}else if(n===null){y=o.stateNode;var b=o.memoizedProps,N=Wi(a,b);y.props=N;var L=y.context,H=a.contextType;E=Ro,typeof H=="object"&&H!==null&&(E=Ct(H));var F=a.getDerivedStateFromProps;H=typeof F=="function"||typeof y.getSnapshotBeforeUpdate=="function",b=o.pendingProps!==b,H||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(b||L!==E)&&fp(o,y,u,E),pi=!1;var q=o.memoizedState;y.state=q,Bs(o,u,y,g),Gs(),L=o.memoizedState,b||q!==L||pi?(typeof F=="function"&&(Ju(o,a,F,u),L=o.memoizedState),(N=pi||dp(o,a,N,u,q,L,E))?(H||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(o.flags|=4194308)):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=u,o.memoizedState=L),y.props=u,y.state=L,y.context=E,u=N):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),u=!1)}else{y=o.stateNode,wu(n,o),E=o.memoizedProps,H=Wi(a,E),y.props=H,F=o.pendingProps,q=y.context,L=a.contextType,N=Ro,typeof L=="object"&&L!==null&&(N=Ct(L)),b=a.getDerivedStateFromProps,(L=typeof b=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==F||q!==N)&&fp(o,y,u,N),pi=!1,q=o.memoizedState,y.state=q,Bs(o,u,y,g),Gs();var G=o.memoizedState;E!==F||q!==G||pi||n!==null&&n.dependencies!==null&&zr(n.dependencies)?(typeof b=="function"&&(Ju(o,a,b,u),G=o.memoizedState),(H=pi||dp(o,a,H,u,q,G,N)||n!==null&&n.dependencies!==null&&zr(n.dependencies))?(L||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,G,N),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,G,N)),typeof y.componentDidUpdate=="function"&&(o.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof y.componentDidUpdate!="function"||E===n.memoizedProps&&q===n.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&q===n.memoizedState||(o.flags|=1024),o.memoizedProps=u,o.memoizedState=G),y.props=u,y.state=G,y.context=N,u=H):(typeof y.componentDidUpdate!="function"||E===n.memoizedProps&&q===n.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&q===n.memoizedState||(o.flags|=1024),u=!1)}return y=u,la(n,o),u=(o.flags&128)!==0,y||u?(y=o.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:y.render(),o.flags|=1,n!==null&&u?(o.child=Xi(o,n.child,null,g),o.child=Xi(o,null,a,g)):xt(n,o,a,g),o.memoizedState=y.state,n=o.child):n=Kn(n,o,g),n}function xp(n,o,a,u){return Fi(),o.flags|=256,xt(n,o,a,u),o.child}var Qu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wu(n){return{baseLanes:n,cachePool:gh()}}function Zu(n,o,a){return n=n!==null?n.childLanes&~a:0,o&&(n|=tn),n}function Rp(n,o,a){var u=o.pendingProps,g=!1,y=(o.flags&128)!==0,E;if((E=y)||(E=n!==null&&n.memoizedState===null?!1:(it.current&2)!==0),E&&(g=!0,o.flags&=-129),E=(o.flags&32)!==0,o.flags&=-33,n===null){if(ke){if(g?yi(o):vi(),(n=je)?(n=Pm(n,fn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(o.memoizedState={dehydrated:n,treeContext:ci!==null?{id:In,overflow:Mn}:null,retryLane:536870912,hydrationErrors:null},a=ah(n),a.return=o,o.child=a,At=o,je=null)):n=null,n===null)throw fi(o);return Oc(n)?o.lanes=32:o.lanes=536870912,null}var b=u.children;return u=u.fallback,g?(vi(),g=o.mode,b=ua({mode:"hidden",children:b},g),u=zi(u,g,a,null),b.return=o,u.return=o,b.sibling=u,o.child=b,u=o.child,u.memoizedState=Wu(a),u.childLanes=Zu(n,E,a),o.memoizedState=Qu,$s(null,u)):(yi(o),ec(o,b))}var N=n.memoizedState;if(N!==null&&(b=N.dehydrated,b!==null)){if(y)o.flags&256?(yi(o),o.flags&=-257,o=tc(n,o,a)):o.memoizedState!==null?(vi(),o.child=n.child,o.flags|=128,o=null):(vi(),b=u.fallback,g=o.mode,u=ua({mode:"visible",children:u.children},g),b=zi(b,g,a,null),b.flags|=2,u.return=o,b.return=o,u.sibling=b,o.child=u,Xi(o,n.child,null,a),u=o.child,u.memoizedState=Wu(a),u.childLanes=Zu(n,E,a),o.memoizedState=Qu,o=$s(null,u));else if(yi(o),Oc(b)){if(E=b.nextSibling&&b.nextSibling.dataset,E)var L=E.dgst;E=L,u=Error(s(419)),u.stack="",u.digest=E,Ds({value:u,source:null,stack:null}),o=tc(n,o,a)}else if(ft||ko(n,o,a,!1),E=(a&n.childLanes)!==0,ft||E){if(E=Fe,E!==null&&(u=pf(E,a),u!==0&&u!==N.retryLane))throw N.retryLane=u,Vi(n,u),Kt(E,n,u),Yu;Uc(b)||va(),o=tc(n,o,a)}else Uc(b)?(o.flags|=192,o.child=n.child,o=null):(n=N.treeContext,je=pn(b.nextSibling),At=o,ke=!0,di=null,fn=!1,n!==null&&ch(o,n),o=ec(o,u.children),o.flags|=4096);return o}return g?(vi(),b=u.fallback,g=o.mode,N=n.child,L=N.sibling,u=Hn(N,{mode:"hidden",children:u.children}),u.subtreeFlags=N.subtreeFlags&65011712,L!==null?b=Hn(L,b):(b=zi(b,g,a,null),b.flags|=2),b.return=o,u.return=o,u.sibling=b,o.child=u,$s(null,u),u=o.child,b=n.child.memoizedState,b===null?b=Wu(a):(g=b.cachePool,g!==null?(N=ct._currentValue,g=g.parent!==N?{parent:N,pool:N}:g):g=gh(),b={baseLanes:b.baseLanes|a,cachePool:g}),u.memoizedState=b,u.childLanes=Zu(n,E,a),o.memoizedState=Qu,$s(n.child,u)):(yi(o),a=n.child,n=a.sibling,a=Hn(a,{mode:"visible",children:u.children}),a.return=o,a.sibling=null,n!==null&&(E=o.deletions,E===null?(o.deletions=[n],o.flags|=16):E.push(n)),o.child=a,o.memoizedState=null,a)}function ec(n,o){return o=ua({mode:"visible",children:o},n.mode),o.return=n,n.child=o}function ua(n,o){return n=Qt(22,n,null,o),n.lanes=0,n}function tc(n,o,a){return Xi(o,n.child,null,a),n=ec(o,o.pendingProps.children),n.flags|=2,o.memoizedState=null,n}function Np(n,o,a){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o),gu(n.return,o,a)}function nc(n,o,a,u,g,y){var E=n.memoizedState;E===null?n.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:g,treeForkCount:y}:(E.isBackwards=o,E.rendering=null,E.renderingStartTime=0,E.last=u,E.tail=a,E.tailMode=g,E.treeForkCount=y)}function Ip(n,o,a){var u=o.pendingProps,g=u.revealOrder,y=u.tail;u=u.children;var E=it.current,b=(E&2)!==0;if(b?(E=E&1|2,o.flags|=128):E&=1,j(it,E),xt(n,o,u,a),u=ke?ks:0,!b&&n!==null&&(n.flags&128)!==0)e:for(n=o.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Np(n,a,o);else if(n.tag===19)Np(n,a,o);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===o)break e;for(;n.sibling===null;){if(n.return===null||n.return===o)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(g){case"forwards":for(a=o.child,g=null;a!==null;)n=a.alternate,n!==null&&Qr(n)===null&&(g=a),a=a.sibling;a=g,a===null?(g=o.child,o.child=null):(g=a.sibling,a.sibling=null),nc(o,!1,g,a,y,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,g=o.child,o.child=null;g!==null;){if(n=g.alternate,n!==null&&Qr(n)===null){o.child=g;break}n=g.sibling,g.sibling=a,a=g,g=n}nc(o,!0,a,null,y,u);break;case"together":nc(o,!1,null,null,void 0,u);break;default:o.memoizedState=null}return o.child}function Kn(n,o,a){if(n!==null&&(o.dependencies=n.dependencies),Ei|=o.lanes,(a&o.childLanes)===0)if(n!==null){if(ko(n,o,a,!1),(a&o.childLanes)===0)return null}else return null;if(n!==null&&o.child!==n.child)throw Error(s(153));if(o.child!==null){for(n=o.child,a=Hn(n,n.pendingProps),o.child=a,a.return=o;n.sibling!==null;)n=n.sibling,a=a.sibling=Hn(n,n.pendingProps),a.return=o;a.sibling=null}return o.child}function ic(n,o){return(n.lanes&o)!==0?!0:(n=n.dependencies,!!(n!==null&&zr(n)))}function ZS(n,o,a){switch(o.tag){case 3:Je(o,o.stateNode.containerInfo),hi(o,ct,n.memoizedState.cache),Fi();break;case 27:case 5:Oi(o);break;case 4:Je(o,o.stateNode.containerInfo);break;case 10:hi(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Ru(o),null;break;case 13:var u=o.memoizedState;if(u!==null)return u.dehydrated!==null?(yi(o),o.flags|=128,null):(a&o.child.childLanes)!==0?Rp(n,o,a):(yi(o),n=Kn(n,o,a),n!==null?n.sibling:null);yi(o);break;case 19:var g=(n.flags&128)!==0;if(u=(a&o.childLanes)!==0,u||(ko(n,o,a,!1),u=(a&o.childLanes)!==0),g){if(u)return Ip(n,o,a);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),j(it,it.current),u)break;return null;case 22:return o.lanes=0,Tp(n,o,a,o.pendingProps);case 24:hi(o,ct,n.memoizedState.cache)}return Kn(n,o,a)}function Mp(n,o,a){if(n!==null)if(n.memoizedProps!==o.pendingProps)ft=!0;else{if(!ic(n,a)&&(o.flags&128)===0)return ft=!1,ZS(n,o,a);ft=(n.flags&131072)!==0}else ft=!1,ke&&(o.flags&1048576)!==0&&uh(o,ks,o.index);switch(o.lanes=0,o.tag){case 16:e:{var u=o.pendingProps;if(n=ji(o.elementType),o.type=n,typeof n=="function")lu(n)?(u=Wi(n,u),o.tag=1,o=Cp(null,o,n,u,a)):(o.tag=0,o=Xu(null,o,n,u,a));else{if(n!=null){var g=n.$$typeof;if(g===B){o.tag=11,o=_p(null,o,n,u,a);break e}else if(g===$){o.tag=14,o=Sp(null,o,n,u,a);break e}}throw o=ze(n)||n,Error(s(306,o,""))}}return o;case 0:return Xu(n,o,o.type,o.pendingProps,a);case 1:return u=o.type,g=Wi(u,o.pendingProps),Cp(n,o,u,g,a);case 3:e:{if(Je(o,o.stateNode.containerInfo),n===null)throw Error(s(387));u=o.pendingProps;var y=o.memoizedState;g=y.element,wu(n,o),Bs(o,u,null,a);var E=o.memoizedState;if(u=E.cache,hi(o,ct,u),u!==y.cache&&yu(o,[ct],a,!0),Gs(),u=E.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:E.cache},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){o=xp(n,o,u,a);break e}else if(u!==g){g=un(Error(s(424)),o),Ds(g),o=xp(n,o,u,a);break e}else{switch(n=o.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(je=pn(n.firstChild),At=o,ke=!0,di=null,fn=!0,a=Th(o,null,u,a),o.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Fi(),u===g){o=Kn(n,o,a);break e}xt(n,o,u,a)}o=o.child}return o;case 26:return la(n,o),n===null?(a=Vm(o.type,null,o.pendingProps,null))?o.memoizedState=a:ke||(a=o.type,n=o.pendingProps,u=Aa(ve.current).createElement(a),u[bt]=o,u[Ht]=n,Rt(u,a,n),St(u),o.stateNode=u):o.memoizedState=Vm(o.type,n.memoizedProps,o.pendingProps,n.memoizedState),null;case 27:return Oi(o),n===null&&ke&&(u=o.stateNode=Gm(o.type,o.pendingProps,ve.current),At=o,fn=!0,g=je,Ci(o.type)?(Pc=g,je=pn(u.firstChild)):je=g),xt(n,o,o.pendingProps.children,a),la(n,o),n===null&&(o.flags|=4194304),o.child;case 5:return n===null&&ke&&((g=u=je)&&(u=NE(u,o.type,o.pendingProps,fn),u!==null?(o.stateNode=u,At=o,je=pn(u.firstChild),fn=!1,g=!0):g=!1),g||fi(o)),Oi(o),g=o.type,y=o.pendingProps,E=n!==null?n.memoizedProps:null,u=y.children,Mc(g,y)?u=null:E!==null&&Mc(g,E)&&(o.flags|=32),o.memoizedState!==null&&(g=Iu(n,o,FS,null,null,a),rr._currentValue=g),la(n,o),xt(n,o,u,a),o.child;case 6:return n===null&&ke&&((n=a=je)&&(a=IE(a,o.pendingProps,fn),a!==null?(o.stateNode=a,At=o,je=null,n=!0):n=!1),n||fi(o)),null;case 13:return Rp(n,o,a);case 4:return Je(o,o.stateNode.containerInfo),u=o.pendingProps,n===null?o.child=Xi(o,null,u,a):xt(n,o,u,a),o.child;case 11:return _p(n,o,o.type,o.pendingProps,a);case 7:return xt(n,o,o.pendingProps,a),o.child;case 8:return xt(n,o,o.pendingProps.children,a),o.child;case 12:return xt(n,o,o.pendingProps.children,a),o.child;case 10:return u=o.pendingProps,hi(o,o.type,u.value),xt(n,o,u.children,a),o.child;case 9:return g=o.type._context,u=o.pendingProps.children,Ji(o),g=Ct(g),u=u(g),o.flags|=1,xt(n,o,u,a),o.child;case 14:return Sp(n,o,o.type,o.pendingProps,a);case 15:return Ep(n,o,o.type,o.pendingProps,a);case 19:return Ip(n,o,a);case 31:return WS(n,o,a);case 22:return Tp(n,o,a,o.pendingProps);case 24:return Ji(o),u=Ct(ct),n===null?(g=Su(),g===null&&(g=Fe,y=vu(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=a),g=y),o.memoizedState={parent:u,cache:g},Tu(o),hi(o,ct,g)):((n.lanes&a)!==0&&(wu(n,o),Bs(o,null,null,a),Gs()),g=n.memoizedState,y=o.memoizedState,g.parent!==u?(g={parent:u,cache:u},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),hi(o,ct,u)):(u=y.cache,hi(o,ct,u),u!==g.cache&&yu(o,[ct],a,!0))),xt(n,o,o.pendingProps.children,a),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function jn(n){n.flags|=4}function oc(n,o,a,u,g){if((o=(n.mode&32)!==0)&&(o=!1),o){if(n.flags|=16777216,(g&335544128)===g)if(n.stateNode.complete)n.flags|=8192;else if(om())n.flags|=8192;else throw Yi=Kr,Eu}else n.flags&=-16777217}function kp(n,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Km(o))if(om())n.flags|=8192;else throw Yi=Kr,Eu}function ca(n,o){o!==null&&(n.flags|=4),n.flags&16384&&(o=n.tag!==22?df():536870912,n.lanes|=o,Fo|=o)}function Js(n,o){if(!ke)switch(n.tailMode){case"hidden":o=n.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?o||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Ye(n){var o=n.alternate!==null&&n.alternate.child===n.child,a=0,u=0;if(o)for(var g=n.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=u,n.childLanes=a,o}function eE(n,o,a){var u=o.pendingProps;switch(fu(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(o),null;case 1:return Ye(o),null;case 3:return a=o.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Fn(ct),Ze(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(Mo(o)?jn(o):n===null||n.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,pu())),Ye(o),null;case 26:var g=o.type,y=o.memoizedState;return n===null?(jn(o),y!==null?(Ye(o),kp(o,y)):(Ye(o),oc(o,g,null,u,a))):y?y!==n.memoizedState?(jn(o),Ye(o),kp(o,y)):(Ye(o),o.flags&=-16777217):(n=n.memoizedProps,n!==u&&jn(o),Ye(o),oc(o,g,n,u,a)),null;case 27:if(fo(o),a=ve.current,g=o.type,n!==null&&o.stateNode!=null)n.memoizedProps!==u&&jn(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return Ye(o),null}n=Q.current,Mo(o)?dh(o):(n=Gm(g,u,a),o.stateNode=n,jn(o))}return Ye(o),null;case 5:if(fo(o),g=o.type,n!==null&&o.stateNode!=null)n.memoizedProps!==u&&jn(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return Ye(o),null}if(y=Q.current,Mo(o))dh(o);else{var E=Aa(ve.current);switch(y){case 1:y=E.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:y=E.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":y=E.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":y=E.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":y=E.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?E.createElement("select",{is:u.is}):E.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?E.createElement(g,{is:u.is}):E.createElement(g)}}y[bt]=o,y[Ht]=u;e:for(E=o.child;E!==null;){if(E.tag===5||E.tag===6)y.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===o)break e;for(;E.sibling===null;){if(E.return===null||E.return===o)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}o.stateNode=y;e:switch(Rt(y,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&jn(o)}}return Ye(o),oc(o,o.type,n===null?null:n.memoizedProps,o.pendingProps,a),null;case 6:if(n&&o.stateNode!=null)n.memoizedProps!==u&&jn(o);else{if(typeof u!="string"&&o.stateNode===null)throw Error(s(166));if(n=ve.current,Mo(o)){if(n=o.stateNode,a=o.memoizedProps,u=null,g=At,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}n[bt]=o,n=!!(n.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||Rm(n.nodeValue,a)),n||fi(o,!0)}else n=Aa(n).createTextNode(u),n[bt]=o,o.stateNode=n}return Ye(o),null;case 31:if(a=o.memoizedState,n===null||n.memoizedState!==null){if(u=Mo(o),a!==null){if(n===null){if(!u)throw Error(s(318));if(n=o.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[bt]=o}else Fi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ye(o),n=!1}else a=pu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return o.flags&256?(Zt(o),o):(Zt(o),null);if((o.flags&128)!==0)throw Error(s(558))}return Ye(o),null;case 13:if(u=o.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=Mo(o),u!==null&&u.dehydrated!==null){if(n===null){if(!g)throw Error(s(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[bt]=o}else Fi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ye(o),g=!1}else g=pu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(Zt(o),o):(Zt(o),null)}return Zt(o),(o.flags&128)!==0?(o.lanes=a,o):(a=u!==null,n=n!==null&&n.memoizedState!==null,a&&(u=o.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==g&&(u.flags|=2048)),a!==n&&a&&(o.child.flags|=8192),ca(o,o.updateQueue),Ye(o),null);case 4:return Ze(),n===null&&Cc(o.stateNode.containerInfo),Ye(o),null;case 10:return Fn(o.type),Ye(o),null;case 19:if(V(it),u=o.memoizedState,u===null)return Ye(o),null;if(g=(o.flags&128)!==0,y=u.rendering,y===null)if(g)Js(u,!1);else{if(tt!==0||n!==null&&(n.flags&128)!==0)for(n=o.child;n!==null;){if(y=Qr(n),y!==null){for(o.flags|=128,Js(u,!1),n=y.updateQueue,o.updateQueue=n,ca(o,n),o.subtreeFlags=0,n=a,a=o.child;a!==null;)rh(a,n),a=a.sibling;return j(it,it.current&1|2),ke&&Vn(o,u.treeForkCount),o.child}n=n.sibling}u.tail!==null&&nt()>ma&&(o.flags|=128,g=!0,Js(u,!1),o.lanes=4194304)}else{if(!g)if(n=Qr(y),n!==null){if(o.flags|=128,g=!0,n=n.updateQueue,o.updateQueue=n,ca(o,n),Js(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!ke)return Ye(o),null}else 2*nt()-u.renderingStartTime>ma&&a!==536870912&&(o.flags|=128,g=!0,Js(u,!1),o.lanes=4194304);u.isBackwards?(y.sibling=o.child,o.child=y):(n=u.last,n!==null?n.sibling=y:o.child=y,u.last=y)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=nt(),n.sibling=null,a=it.current,j(it,g?a&1|2:a&1),ke&&Vn(o,u.treeForkCount),n):(Ye(o),null);case 22:case 23:return Zt(o),xu(),u=o.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(o.flags|=8192):u&&(o.flags|=8192),u?(a&536870912)!==0&&(o.flags&128)===0&&(Ye(o),o.subtreeFlags&6&&(o.flags|=8192)):Ye(o),a=o.updateQueue,a!==null&&ca(o,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),u=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),u!==a&&(o.flags|=2048),n!==null&&V(Ki),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),o.memoizedState.cache!==a&&(o.flags|=2048),Fn(ct),Ye(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function tE(n,o){switch(fu(o),o.tag){case 1:return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 3:return Fn(ct),Ze(),n=o.flags,(n&65536)!==0&&(n&128)===0?(o.flags=n&-65537|128,o):null;case 26:case 27:case 5:return fo(o),null;case 31:if(o.memoizedState!==null){if(Zt(o),o.alternate===null)throw Error(s(340));Fi()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 13:if(Zt(o),n=o.memoizedState,n!==null&&n.dehydrated!==null){if(o.alternate===null)throw Error(s(340));Fi()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 19:return V(it),null;case 4:return Ze(),null;case 10:return Fn(o.type),null;case 22:case 23:return Zt(o),xu(),n!==null&&V(Ki),n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 24:return Fn(ct),null;case 25:return null;default:return null}}function Dp(n,o){switch(fu(o),o.tag){case 3:Fn(ct),Ze();break;case 26:case 27:case 5:fo(o);break;case 4:Ze();break;case 31:o.memoizedState!==null&&Zt(o);break;case 13:Zt(o);break;case 19:V(it);break;case 10:Fn(o.type);break;case 22:case 23:Zt(o),xu(),n!==null&&V(Ki);break;case 24:Fn(ct)}}function Ks(n,o){try{var a=o.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var g=u.next;a=g;do{if((a.tag&n)===n){u=void 0;var y=a.create,E=a.inst;u=y(),E.destroy=u}a=a.next}while(a!==g)}}catch(b){Ge(o,o.return,b)}}function _i(n,o,a){try{var u=o.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var y=g.next;u=y;do{if((u.tag&n)===n){var E=u.inst,b=E.destroy;if(b!==void 0){E.destroy=void 0,g=o;var N=a,L=b;try{L()}catch(H){Ge(g,N,H)}}}u=u.next}while(u!==y)}}catch(H){Ge(o,o.return,H)}}function Up(n){var o=n.updateQueue;if(o!==null){var a=n.stateNode;try{bh(o,a)}catch(u){Ge(n,n.return,u)}}}function Op(n,o,a){a.props=Wi(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(u){Ge(n,o,u)}}function js(n,o){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof a=="function"?n.refCleanup=a(u):a.current=u}}catch(g){Ge(n,o,g)}}function kn(n,o){var a=n.ref,u=n.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(g){Ge(n,o,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(g){Ge(n,o,g)}else a.current=null}function Pp(n){var o=n.type,a=n.memoizedProps,u=n.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(g){Ge(n,n.return,g)}}function sc(n,o,a){try{var u=n.stateNode;wE(u,n.type,a,o),u[Ht]=o}catch(g){Ge(n,n.return,g)}}function Lp(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ci(n.type)||n.tag===4}function rc(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Lp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ci(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ac(n,o,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,o?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,o):(o=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,o.appendChild(n),a=a._reactRootContainer,a!=null||o.onclick!==null||(o.onclick=Gn));else if(u!==4&&(u===27&&Ci(n.type)&&(a=n.stateNode,o=null),n=n.child,n!==null))for(ac(n,o,a),n=n.sibling;n!==null;)ac(n,o,a),n=n.sibling}function da(n,o,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,o?a.insertBefore(n,o):a.appendChild(n);else if(u!==4&&(u===27&&Ci(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(da(n,o,a),n=n.sibling;n!==null;)da(n,o,a),n=n.sibling}function qp(n){var o=n.stateNode,a=n.memoizedProps;try{for(var u=n.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);Rt(o,u,a),o[bt]=n,o[Ht]=a}catch(y){Ge(n,n.return,y)}}var Yn=!1,ht=!1,lc=!1,Gp=typeof WeakSet=="function"?WeakSet:Set,Et=null;function nE(n,o){if(n=n.containerInfo,Nc=ka,n=Qf(n),tu(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var g=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{a.nodeType,y.nodeType}catch{a=null;break e}var E=0,b=-1,N=-1,L=0,H=0,F=n,q=null;t:for(;;){for(var G;F!==a||g!==0&&F.nodeType!==3||(b=E+g),F!==y||u!==0&&F.nodeType!==3||(N=E+u),F.nodeType===3&&(E+=F.nodeValue.length),(G=F.firstChild)!==null;)q=F,F=G;for(;;){if(F===n)break t;if(q===a&&++L===g&&(b=E),q===y&&++H===u&&(N=E),(G=F.nextSibling)!==null)break;F=q,q=F.parentNode}F=G}a=b===-1||N===-1?null:{start:b,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ic={focusedElem:n,selectionRange:a},ka=!1,Et=o;Et!==null;)if(o=Et,n=o.child,(o.subtreeFlags&1028)!==0&&n!==null)n.return=o,Et=n;else for(;Et!==null;){switch(o=Et,y=o.alternate,n=o.flags,o.tag){case 0:if((n&4)!==0&&(n=o.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)g=n[a],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&y!==null){n=void 0,a=o,g=y.memoizedProps,y=y.memoizedState,u=a.stateNode;try{var se=Wi(a.type,g);n=u.getSnapshotBeforeUpdate(se,y),u.__reactInternalSnapshotBeforeUpdate=n}catch(de){Ge(a,a.return,de)}}break;case 3:if((n&1024)!==0){if(n=o.stateNode.containerInfo,a=n.nodeType,a===9)Dc(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Dc(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=o.sibling,n!==null){n.return=o.return,Et=n;break}Et=o.return}}function Bp(n,o,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:Qn(n,a),u&4&&Ks(5,a);break;case 1:if(Qn(n,a),u&4)if(n=a.stateNode,o===null)try{n.componentDidMount()}catch(E){Ge(a,a.return,E)}else{var g=Wi(a.type,o.memoizedProps);o=o.memoizedState;try{n.componentDidUpdate(g,o,n.__reactInternalSnapshotBeforeUpdate)}catch(E){Ge(a,a.return,E)}}u&64&&Up(a),u&512&&js(a,a.return);break;case 3:if(Qn(n,a),u&64&&(n=a.updateQueue,n!==null)){if(o=null,a.child!==null)switch(a.child.tag){case 27:case 5:o=a.child.stateNode;break;case 1:o=a.child.stateNode}try{bh(n,o)}catch(E){Ge(a,a.return,E)}}break;case 27:o===null&&u&4&&qp(a);case 26:case 5:Qn(n,a),o===null&&u&4&&Pp(a),u&512&&js(a,a.return);break;case 12:Qn(n,a);break;case 31:Qn(n,a),u&4&&zp(n,a);break;case 13:Qn(n,a),u&4&&Fp(n,a),u&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=dE.bind(null,a),ME(n,a))));break;case 22:if(u=a.memoizedState!==null||Yn,!u){o=o!==null&&o.memoizedState!==null||ht,g=Yn;var y=ht;Yn=u,(ht=o)&&!y?Wn(n,a,(a.subtreeFlags&8772)!==0):Qn(n,a),Yn=g,ht=y}break;case 30:break;default:Qn(n,a)}}function Hp(n){var o=n.alternate;o!==null&&(n.alternate=null,Hp(o)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(o=n.stateNode,o!==null&&ql(o)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Qe=null,zt=!1;function Xn(n,o,a){for(a=a.child;a!==null;)Vp(n,o,a),a=a.sibling}function Vp(n,o,a){if(vt&&typeof vt.onCommitFiberUnmount=="function")try{vt.onCommitFiberUnmount(vn,a)}catch{}switch(a.tag){case 26:ht||kn(a,o),Xn(n,o,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ht||kn(a,o);var u=Qe,g=zt;Ci(a.type)&&(Qe=a.stateNode,zt=!1),Xn(n,o,a),ir(a.stateNode),Qe=u,zt=g;break;case 5:ht||kn(a,o);case 6:if(u=Qe,g=zt,Qe=null,Xn(n,o,a),Qe=u,zt=g,Qe!==null)if(zt)try{(Qe.nodeType===9?Qe.body:Qe.nodeName==="HTML"?Qe.ownerDocument.body:Qe).removeChild(a.stateNode)}catch(y){Ge(a,o,y)}else try{Qe.removeChild(a.stateNode)}catch(y){Ge(a,o,y)}break;case 18:Qe!==null&&(zt?(n=Qe,Um(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Wo(n)):Um(Qe,a.stateNode));break;case 4:u=Qe,g=zt,Qe=a.stateNode.containerInfo,zt=!0,Xn(n,o,a),Qe=u,zt=g;break;case 0:case 11:case 14:case 15:_i(2,a,o),ht||_i(4,a,o),Xn(n,o,a);break;case 1:ht||(kn(a,o),u=a.stateNode,typeof u.componentWillUnmount=="function"&&Op(a,o,u)),Xn(n,o,a);break;case 21:Xn(n,o,a);break;case 22:ht=(u=ht)||a.memoizedState!==null,Xn(n,o,a),ht=u;break;default:Xn(n,o,a)}}function zp(n,o){if(o.memoizedState===null&&(n=o.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Wo(n)}catch(a){Ge(o,o.return,a)}}}function Fp(n,o){if(o.memoizedState===null&&(n=o.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Wo(n)}catch(a){Ge(o,o.return,a)}}function iE(n){switch(n.tag){case 31:case 13:case 19:var o=n.stateNode;return o===null&&(o=n.stateNode=new Gp),o;case 22:return n=n.stateNode,o=n._retryCache,o===null&&(o=n._retryCache=new Gp),o;default:throw Error(s(435,n.tag))}}function fa(n,o){var a=iE(n);o.forEach(function(u){if(!a.has(u)){a.add(u);var g=fE.bind(null,n,u);u.then(g,g)}})}function Ft(n,o){var a=o.deletions;if(a!==null)for(var u=0;u<a.length;u++){var g=a[u],y=n,E=o,b=E;e:for(;b!==null;){switch(b.tag){case 27:if(Ci(b.type)){Qe=b.stateNode,zt=!1;break e}break;case 5:Qe=b.stateNode,zt=!1;break e;case 3:case 4:Qe=b.stateNode.containerInfo,zt=!0;break e}b=b.return}if(Qe===null)throw Error(s(160));Vp(y,E,g),Qe=null,zt=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)$p(o,n),o=o.sibling}var Sn=null;function $p(n,o){var a=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Ft(o,n),$t(n),u&4&&(_i(3,n,n.return),Ks(3,n),_i(5,n,n.return));break;case 1:Ft(o,n),$t(n),u&512&&(ht||a===null||kn(a,a.return)),u&64&&Yn&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var g=Sn;if(Ft(o,n),$t(n),u&512&&(ht||a===null||kn(a,a.return)),u&4){var y=a!==null?a.memoizedState:null;if(u=n.memoizedState,a===null)if(u===null)if(n.stateNode===null){e:{u=n.type,a=n.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":y=g.getElementsByTagName("title")[0],(!y||y[Es]||y[bt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(u),g.head.insertBefore(y,g.querySelector("head > title"))),Rt(y,u,a),y[bt]=n,St(y),u=y;break e;case"link":var E=$m("link","href",g).get(u+(a.href||""));if(E){for(var b=0;b<E.length;b++)if(y=E[b],y.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&y.getAttribute("rel")===(a.rel==null?null:a.rel)&&y.getAttribute("title")===(a.title==null?null:a.title)&&y.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(b,1);break t}}y=g.createElement(u),Rt(y,u,a),g.head.appendChild(y);break;case"meta":if(E=$m("meta","content",g).get(u+(a.content||""))){for(b=0;b<E.length;b++)if(y=E[b],y.getAttribute("content")===(a.content==null?null:""+a.content)&&y.getAttribute("name")===(a.name==null?null:a.name)&&y.getAttribute("property")===(a.property==null?null:a.property)&&y.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&y.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(b,1);break t}}y=g.createElement(u),Rt(y,u,a),g.head.appendChild(y);break;default:throw Error(s(468,u))}y[bt]=n,St(y),u=y}n.stateNode=u}else Jm(g,n.type,n.stateNode);else n.stateNode=Fm(g,u,n.memoizedProps);else y!==u?(y===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):y.count--,u===null?Jm(g,n.type,n.stateNode):Fm(g,u,n.memoizedProps)):u===null&&n.stateNode!==null&&sc(n,n.memoizedProps,a.memoizedProps)}break;case 27:Ft(o,n),$t(n),u&512&&(ht||a===null||kn(a,a.return)),a!==null&&u&4&&sc(n,n.memoizedProps,a.memoizedProps);break;case 5:if(Ft(o,n),$t(n),u&512&&(ht||a===null||kn(a,a.return)),n.flags&32){g=n.stateNode;try{Eo(g,"")}catch(se){Ge(n,n.return,se)}}u&4&&n.stateNode!=null&&(g=n.memoizedProps,sc(n,g,a!==null?a.memoizedProps:g)),u&1024&&(lc=!0);break;case 6:if(Ft(o,n),$t(n),u&4){if(n.stateNode===null)throw Error(s(162));u=n.memoizedProps,a=n.stateNode;try{a.nodeValue=u}catch(se){Ge(n,n.return,se)}}break;case 3:if(Ra=null,g=Sn,Sn=Ca(o.containerInfo),Ft(o,n),Sn=g,$t(n),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Wo(o.containerInfo)}catch(se){Ge(n,n.return,se)}lc&&(lc=!1,Jp(n));break;case 4:u=Sn,Sn=Ca(n.stateNode.containerInfo),Ft(o,n),$t(n),Sn=u;break;case 12:Ft(o,n),$t(n);break;case 31:Ft(o,n),$t(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,fa(n,u)));break;case 13:Ft(o,n),$t(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(pa=nt()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,fa(n,u)));break;case 22:g=n.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,L=Yn,H=ht;if(Yn=L||g,ht=H||N,Ft(o,n),ht=H,Yn=L,$t(n),u&8192)e:for(o=n.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(a===null||N||Yn||ht||Zi(n)),a=null,o=n;;){if(o.tag===5||o.tag===26){if(a===null){N=a=o;try{if(y=N.stateNode,g)E=y.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{b=N.stateNode;var F=N.memoizedProps.style,q=F!=null&&F.hasOwnProperty("display")?F.display:null;b.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(se){Ge(N,N.return,se)}}}else if(o.tag===6){if(a===null){N=o;try{N.stateNode.nodeValue=g?"":N.memoizedProps}catch(se){Ge(N,N.return,se)}}}else if(o.tag===18){if(a===null){N=o;try{var G=N.stateNode;g?Om(G,!0):Om(N.stateNode,!1)}catch(se){Ge(N,N.return,se)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===n)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break e;for(;o.sibling===null;){if(o.return===null||o.return===n)break e;a===o&&(a=null),o=o.return}a===o&&(a=null),o.sibling.return=o.return,o=o.sibling}u&4&&(u=n.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,fa(n,a))));break;case 19:Ft(o,n),$t(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,fa(n,u)));break;case 30:break;case 21:break;default:Ft(o,n),$t(n)}}function $t(n){var o=n.flags;if(o&2){try{for(var a,u=n.return;u!==null;){if(Lp(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var g=a.stateNode,y=rc(n);da(n,y,g);break;case 5:var E=a.stateNode;a.flags&32&&(Eo(E,""),a.flags&=-33);var b=rc(n);da(n,b,E);break;case 3:case 4:var N=a.stateNode.containerInfo,L=rc(n);ac(n,L,N);break;default:throw Error(s(161))}}catch(H){Ge(n,n.return,H)}n.flags&=-3}o&4096&&(n.flags&=-4097)}function Jp(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var o=n;Jp(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),n=n.sibling}}function Qn(n,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Bp(n,o.alternate,o),o=o.sibling}function Zi(n){for(n=n.child;n!==null;){var o=n;switch(o.tag){case 0:case 11:case 14:case 15:_i(4,o,o.return),Zi(o);break;case 1:kn(o,o.return);var a=o.stateNode;typeof a.componentWillUnmount=="function"&&Op(o,o.return,a),Zi(o);break;case 27:ir(o.stateNode);case 26:case 5:kn(o,o.return),Zi(o);break;case 22:o.memoizedState===null&&Zi(o);break;case 30:Zi(o);break;default:Zi(o)}n=n.sibling}}function Wn(n,o,a){for(a=a&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var u=o.alternate,g=n,y=o,E=y.flags;switch(y.tag){case 0:case 11:case 15:Wn(g,y,a),Ks(4,y);break;case 1:if(Wn(g,y,a),u=y,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(L){Ge(u,u.return,L)}if(u=y,g=u.updateQueue,g!==null){var b=u.stateNode;try{var N=g.shared.hiddenCallbacks;if(N!==null)for(g.shared.hiddenCallbacks=null,g=0;g<N.length;g++)wh(N[g],b)}catch(L){Ge(u,u.return,L)}}a&&E&64&&Up(y),js(y,y.return);break;case 27:qp(y);case 26:case 5:Wn(g,y,a),a&&u===null&&E&4&&Pp(y),js(y,y.return);break;case 12:Wn(g,y,a);break;case 31:Wn(g,y,a),a&&E&4&&zp(g,y);break;case 13:Wn(g,y,a),a&&E&4&&Fp(g,y);break;case 22:y.memoizedState===null&&Wn(g,y,a),js(y,y.return);break;case 30:break;default:Wn(g,y,a)}o=o.sibling}}function uc(n,o){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(n=o.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Us(a))}function cc(n,o){n=null,o.alternate!==null&&(n=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==n&&(o.refCount++,n!=null&&Us(n))}function En(n,o,a,u){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Kp(n,o,a,u),o=o.sibling}function Kp(n,o,a,u){var g=o.flags;switch(o.tag){case 0:case 11:case 15:En(n,o,a,u),g&2048&&Ks(9,o);break;case 1:En(n,o,a,u);break;case 3:En(n,o,a,u),g&2048&&(n=null,o.alternate!==null&&(n=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==n&&(o.refCount++,n!=null&&Us(n)));break;case 12:if(g&2048){En(n,o,a,u),n=o.stateNode;try{var y=o.memoizedProps,E=y.id,b=y.onPostCommit;typeof b=="function"&&b(E,o.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(N){Ge(o,o.return,N)}}else En(n,o,a,u);break;case 31:En(n,o,a,u);break;case 13:En(n,o,a,u);break;case 23:break;case 22:y=o.stateNode,E=o.alternate,o.memoizedState!==null?y._visibility&2?En(n,o,a,u):Ys(n,o):y._visibility&2?En(n,o,a,u):(y._visibility|=2,Ho(n,o,a,u,(o.subtreeFlags&10256)!==0||!1)),g&2048&&uc(E,o);break;case 24:En(n,o,a,u),g&2048&&cc(o.alternate,o);break;default:En(n,o,a,u)}}function Ho(n,o,a,u,g){for(g=g&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var y=n,E=o,b=a,N=u,L=E.flags;switch(E.tag){case 0:case 11:case 15:Ho(y,E,b,N,g),Ks(8,E);break;case 23:break;case 22:var H=E.stateNode;E.memoizedState!==null?H._visibility&2?Ho(y,E,b,N,g):Ys(y,E):(H._visibility|=2,Ho(y,E,b,N,g)),g&&L&2048&&uc(E.alternate,E);break;case 24:Ho(y,E,b,N,g),g&&L&2048&&cc(E.alternate,E);break;default:Ho(y,E,b,N,g)}o=o.sibling}}function Ys(n,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var a=n,u=o,g=u.flags;switch(u.tag){case 22:Ys(a,u),g&2048&&uc(u.alternate,u);break;case 24:Ys(a,u),g&2048&&cc(u.alternate,u);break;default:Ys(a,u)}o=o.sibling}}var Xs=8192;function Vo(n,o,a){if(n.subtreeFlags&Xs)for(n=n.child;n!==null;)jp(n,o,a),n=n.sibling}function jp(n,o,a){switch(n.tag){case 26:Vo(n,o,a),n.flags&Xs&&n.memoizedState!==null&&zE(a,Sn,n.memoizedState,n.memoizedProps);break;case 5:Vo(n,o,a);break;case 3:case 4:var u=Sn;Sn=Ca(n.stateNode.containerInfo),Vo(n,o,a),Sn=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=Xs,Xs=16777216,Vo(n,o,a),Xs=u):Vo(n,o,a));break;default:Vo(n,o,a)}}function Yp(n){var o=n.alternate;if(o!==null&&(n=o.child,n!==null)){o.child=null;do o=n.sibling,n.sibling=null,n=o;while(n!==null)}}function Qs(n){var o=n.deletions;if((n.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var u=o[a];Et=u,Qp(u,n)}Yp(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Xp(n),n=n.sibling}function Xp(n){switch(n.tag){case 0:case 11:case 15:Qs(n),n.flags&2048&&_i(9,n,n.return);break;case 3:Qs(n);break;case 12:Qs(n);break;case 22:var o=n.stateNode;n.memoizedState!==null&&o._visibility&2&&(n.return===null||n.return.tag!==13)?(o._visibility&=-3,ha(n)):Qs(n);break;default:Qs(n)}}function ha(n){var o=n.deletions;if((n.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var u=o[a];Et=u,Qp(u,n)}Yp(n)}for(n=n.child;n!==null;){switch(o=n,o.tag){case 0:case 11:case 15:_i(8,o,o.return),ha(o);break;case 22:a=o.stateNode,a._visibility&2&&(a._visibility&=-3,ha(o));break;default:ha(o)}n=n.sibling}}function Qp(n,o){for(;Et!==null;){var a=Et;switch(a.tag){case 0:case 11:case 15:_i(8,a,o);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Us(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Et=u;else e:for(a=n;Et!==null;){u=Et;var g=u.sibling,y=u.return;if(Hp(u),u===a){Et=null;break e}if(g!==null){g.return=y,Et=g;break e}Et=y}}}var oE={getCacheForType:function(n){var o=Ct(ct),a=o.data.get(n);return a===void 0&&(a=n(),o.data.set(n,a)),a},cacheSignal:function(){return Ct(ct).controller.signal}},sE=typeof WeakMap=="function"?WeakMap:Map,Pe=0,Fe=null,Ce=null,Ie=0,qe=0,en=null,Si=!1,zo=!1,dc=!1,Zn=0,tt=0,Ei=0,eo=0,fc=0,tn=0,Fo=0,Ws=null,Jt=null,hc=!1,pa=0,Wp=0,ma=1/0,ga=null,Ti=null,yt=0,wi=null,$o=null,ei=0,pc=0,mc=null,Zp=null,Zs=0,gc=null;function nn(){return(Pe&2)!==0&&Ie!==0?Ie&-Ie:O.T!==null?Tc():mf()}function em(){if(tn===0)if((Ie&536870912)===0||ke){var n=Bt;Bt<<=1,(Bt&3932160)===0&&(Bt=262144),tn=n}else tn=536870912;return n=Wt.current,n!==null&&(n.flags|=32),tn}function Kt(n,o,a){(n===Fe&&(qe===2||qe===9)||n.cancelPendingCommit!==null)&&(Jo(n,0),bi(n,Ie,tn,!1)),Ss(n,a),((Pe&2)===0||n!==Fe)&&(n===Fe&&((Pe&2)===0&&(eo|=a),tt===4&&bi(n,Ie,tn,!1)),Dn(n))}function tm(n,o,a){if((Pe&6)!==0)throw Error(s(327));var u=!a&&(o&127)===0&&(o&n.expiredLanes)===0||_s(n,o),g=u?lE(n,o):vc(n,o,!0),y=u;do{if(g===0){zo&&!u&&bi(n,o,0,!1);break}else{if(a=n.current.alternate,y&&!rE(a)){g=vc(n,o,!1),y=!1;continue}if(g===2){if(y=o,n.errorRecoveryDisabledLanes&y)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){o=E;e:{var b=n;g=Ws;var N=b.current.memoizedState.isDehydrated;if(N&&(Jo(b,E).flags|=256),E=vc(b,E,!1),E!==2){if(dc&&!N){b.errorRecoveryDisabledLanes|=y,eo|=y,g=4;break e}y=Jt,Jt=g,y!==null&&(Jt===null?Jt=y:Jt.push.apply(Jt,y))}g=E}if(y=!1,g!==2)continue}}if(g===1){Jo(n,0),bi(n,o,0,!0);break}e:{switch(u=n,y=g,y){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:bi(u,o,tn,!Si);break e;case 2:Jt=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(g=pa+300-nt(),10<g)){if(bi(u,o,tn,!Si),po(u,0,!0)!==0)break e;ei=o,u.timeoutHandle=km(nm.bind(null,u,a,Jt,ga,hc,o,tn,eo,Fo,Si,y,"Throttled",-0,0),g);break e}nm(u,a,Jt,ga,hc,o,tn,eo,Fo,Si,y,null,-0,0)}}break}while(!0);Dn(n)}function nm(n,o,a,u,g,y,E,b,N,L,H,F,q,G){if(n.timeoutHandle=-1,F=o.subtreeFlags,F&8192||(F&16785408)===16785408){F={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Gn},jp(o,y,F);var se=(y&62914560)===y?pa-nt():(y&4194048)===y?Wp-nt():0;if(se=FE(F,se),se!==null){ei=y,n.cancelPendingCommit=se(cm.bind(null,n,o,y,a,u,g,E,b,N,H,F,null,q,G)),bi(n,y,E,!L);return}}cm(n,o,y,a,u,g,E,b,N)}function rE(n){for(var o=n;;){var a=o.tag;if((a===0||a===11||a===15)&&o.flags&16384&&(a=o.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var g=a[u],y=g.getSnapshot;g=g.value;try{if(!Xt(y(),g))return!1}catch{return!1}}if(a=o.child,o.subtreeFlags&16384&&a!==null)a.return=o,o=a;else{if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function bi(n,o,a,u){o&=~fc,o&=~eo,n.suspendedLanes|=o,n.pingedLanes&=~o,u&&(n.warmLanes|=o),u=n.expirationTimes;for(var g=o;0<g;){var y=31-Ot(g),E=1<<y;u[y]=-1,g&=~E}a!==0&&ff(n,a,o)}function ya(){return(Pe&6)===0?(er(0),!1):!0}function yc(){if(Ce!==null){if(qe===0)var n=Ce.return;else n=Ce,zn=$i=null,Du(n),Po=null,Ps=0,n=Ce;for(;n!==null;)Dp(n.alternate,n),n=n.return;Ce=null}}function Jo(n,o){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,CE(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),ei=0,yc(),Fe=n,Ce=a=Hn(n.current,null),Ie=o,qe=0,en=null,Si=!1,zo=_s(n,o),dc=!1,Fo=tn=fc=eo=Ei=tt=0,Jt=Ws=null,hc=!1,(o&8)!==0&&(o|=o&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=o;0<u;){var g=31-Ot(u),y=1<<g;o|=n[g],u&=~y}return Zn=o,qr(),a}function im(n,o){Se=null,O.H=Fs,o===Oo||o===Jr?(o=_h(),qe=3):o===Eu?(o=_h(),qe=4):qe=o===Yu?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,en=o,Ce===null&&(tt=1,ra(n,un(o,n.current)))}function om(){var n=Wt.current;return n===null?!0:(Ie&4194048)===Ie?hn===null:(Ie&62914560)===Ie||(Ie&536870912)!==0?n===hn:!1}function sm(){var n=O.H;return O.H=Fs,n===null?Fs:n}function rm(){var n=O.A;return O.A=oE,n}function va(){tt=4,Si||(Ie&4194048)!==Ie&&Wt.current!==null||(zo=!0),(Ei&134217727)===0&&(eo&134217727)===0||Fe===null||bi(Fe,Ie,tn,!1)}function vc(n,o,a){var u=Pe;Pe|=2;var g=sm(),y=rm();(Fe!==n||Ie!==o)&&(ga=null,Jo(n,o)),o=!1;var E=tt;e:do try{if(qe!==0&&Ce!==null){var b=Ce,N=en;switch(qe){case 8:yc(),E=6;break e;case 3:case 2:case 9:case 6:Wt.current===null&&(o=!0);var L=qe;if(qe=0,en=null,Ko(n,b,N,L),a&&zo){E=0;break e}break;default:L=qe,qe=0,en=null,Ko(n,b,N,L)}}aE(),E=tt;break}catch(H){im(n,H)}while(!0);return o&&n.shellSuspendCounter++,zn=$i=null,Pe=u,O.H=g,O.A=y,Ce===null&&(Fe=null,Ie=0,qr()),E}function aE(){for(;Ce!==null;)am(Ce)}function lE(n,o){var a=Pe;Pe|=2;var u=sm(),g=rm();Fe!==n||Ie!==o?(ga=null,ma=nt()+500,Jo(n,o)):zo=_s(n,o);e:do try{if(qe!==0&&Ce!==null){o=Ce;var y=en;t:switch(qe){case 1:qe=0,en=null,Ko(n,o,y,1);break;case 2:case 9:if(yh(y)){qe=0,en=null,lm(o);break}o=function(){qe!==2&&qe!==9||Fe!==n||(qe=7),Dn(n)},y.then(o,o);break e;case 3:qe=7;break e;case 4:qe=5;break e;case 7:yh(y)?(qe=0,en=null,lm(o)):(qe=0,en=null,Ko(n,o,y,7));break;case 5:var E=null;switch(Ce.tag){case 26:E=Ce.memoizedState;case 5:case 27:var b=Ce;if(E?Km(E):b.stateNode.complete){qe=0,en=null;var N=b.sibling;if(N!==null)Ce=N;else{var L=b.return;L!==null?(Ce=L,_a(L)):Ce=null}break t}}qe=0,en=null,Ko(n,o,y,5);break;case 6:qe=0,en=null,Ko(n,o,y,6);break;case 8:yc(),tt=6;break e;default:throw Error(s(462))}}uE();break}catch(H){im(n,H)}while(!0);return zn=$i=null,O.H=u,O.A=g,Pe=a,Ce!==null?0:(Fe=null,Ie=0,qr(),tt)}function uE(){for(;Ce!==null&&!wt();)am(Ce)}function am(n){var o=Mp(n.alternate,n,Zn);n.memoizedProps=n.pendingProps,o===null?_a(n):Ce=o}function lm(n){var o=n,a=o.alternate;switch(o.tag){case 15:case 0:o=Ap(a,o,o.pendingProps,o.type,void 0,Ie);break;case 11:o=Ap(a,o,o.pendingProps,o.type.render,o.ref,Ie);break;case 5:Du(o);default:Dp(a,o),o=Ce=rh(o,Zn),o=Mp(a,o,Zn)}n.memoizedProps=n.pendingProps,o===null?_a(n):Ce=o}function Ko(n,o,a,u){zn=$i=null,Du(o),Po=null,Ps=0;var g=o.return;try{if(QS(n,g,o,a,Ie)){tt=1,ra(n,un(a,n.current)),Ce=null;return}}catch(y){if(g!==null)throw Ce=g,y;tt=1,ra(n,un(a,n.current)),Ce=null;return}o.flags&32768?(ke||u===1?n=!0:zo||(Ie&536870912)!==0?n=!1:(Si=n=!0,(u===2||u===9||u===3||u===6)&&(u=Wt.current,u!==null&&u.tag===13&&(u.flags|=16384))),um(o,n)):_a(o)}function _a(n){var o=n;do{if((o.flags&32768)!==0){um(o,Si);return}n=o.return;var a=eE(o.alternate,o,Zn);if(a!==null){Ce=a;return}if(o=o.sibling,o!==null){Ce=o;return}Ce=o=n}while(o!==null);tt===0&&(tt=5)}function um(n,o){do{var a=tE(n.alternate,n);if(a!==null){a.flags&=32767,Ce=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!o&&(n=n.sibling,n!==null)){Ce=n;return}Ce=n=a}while(n!==null);tt=6,Ce=null}function cm(n,o,a,u,g,y,E,b,N){n.cancelPendingCommit=null;do Sa();while(yt!==0);if((Pe&6)!==0)throw Error(s(327));if(o!==null){if(o===n.current)throw Error(s(177));if(y=o.lanes|o.childLanes,y|=ru,V_(n,a,y,E,b,N),n===Fe&&(Ce=Fe=null,Ie=0),$o=o,wi=n,ei=a,pc=y,mc=g,Zp=u,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,hE(ie,function(){return mm(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||u){u=O.T,O.T=null,g=J.p,J.p=2,E=Pe,Pe|=4;try{nE(n,o,a)}finally{Pe=E,J.p=g,O.T=u}}yt=1,dm(),fm(),hm()}}function dm(){if(yt===1){yt=0;var n=wi,o=$o,a=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||a){a=O.T,O.T=null;var u=J.p;J.p=2;var g=Pe;Pe|=4;try{$p(o,n);var y=Ic,E=Qf(n.containerInfo),b=y.focusedElem,N=y.selectionRange;if(E!==b&&b&&b.ownerDocument&&Xf(b.ownerDocument.documentElement,b)){if(N!==null&&tu(b)){var L=N.start,H=N.end;if(H===void 0&&(H=L),"selectionStart"in b)b.selectionStart=L,b.selectionEnd=Math.min(H,b.value.length);else{var F=b.ownerDocument||document,q=F&&F.defaultView||window;if(q.getSelection){var G=q.getSelection(),se=b.textContent.length,de=Math.min(N.start,se),Ve=N.end===void 0?de:Math.min(N.end,se);!G.extend&&de>Ve&&(E=Ve,Ve=de,de=E);var U=Yf(b,de),k=Yf(b,Ve);if(U&&k&&(G.rangeCount!==1||G.anchorNode!==U.node||G.anchorOffset!==U.offset||G.focusNode!==k.node||G.focusOffset!==k.offset)){var P=F.createRange();P.setStart(U.node,U.offset),G.removeAllRanges(),de>Ve?(G.addRange(P),G.extend(k.node,k.offset)):(P.setEnd(k.node,k.offset),G.addRange(P))}}}}for(F=[],G=b;G=G.parentNode;)G.nodeType===1&&F.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<F.length;b++){var z=F[b];z.element.scrollLeft=z.left,z.element.scrollTop=z.top}}ka=!!Nc,Ic=Nc=null}finally{Pe=g,J.p=u,O.T=a}}n.current=o,yt=2}}function fm(){if(yt===2){yt=0;var n=wi,o=$o,a=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||a){a=O.T,O.T=null;var u=J.p;J.p=2;var g=Pe;Pe|=4;try{Bp(n,o.alternate,o)}finally{Pe=g,J.p=u,O.T=a}}yt=3}}function hm(){if(yt===4||yt===3){yt=0,Gt();var n=wi,o=$o,a=ei,u=Zp;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?yt=5:(yt=0,$o=wi=null,pm(n,n.pendingLanes));var g=n.pendingLanes;if(g===0&&(Ti=null),Pl(a),o=o.stateNode,vt&&typeof vt.onCommitFiberRoot=="function")try{vt.onCommitFiberRoot(vn,o,void 0,(o.current.flags&128)===128)}catch{}if(u!==null){o=O.T,g=J.p,J.p=2,O.T=null;try{for(var y=n.onRecoverableError,E=0;E<u.length;E++){var b=u[E];y(b.value,{componentStack:b.stack})}}finally{O.T=o,J.p=g}}(ei&3)!==0&&Sa(),Dn(n),g=n.pendingLanes,(a&261930)!==0&&(g&42)!==0?n===gc?Zs++:(Zs=0,gc=n):Zs=0,er(0)}}function pm(n,o){(n.pooledCacheLanes&=o)===0&&(o=n.pooledCache,o!=null&&(n.pooledCache=null,Us(o)))}function Sa(){return dm(),fm(),hm(),mm()}function mm(){if(yt!==5)return!1;var n=wi,o=pc;pc=0;var a=Pl(ei),u=O.T,g=J.p;try{J.p=32>a?32:a,O.T=null,a=mc,mc=null;var y=wi,E=ei;if(yt=0,$o=wi=null,ei=0,(Pe&6)!==0)throw Error(s(331));var b=Pe;if(Pe|=4,Xp(y.current),Kp(y,y.current,E,a),Pe=b,er(0,!1),vt&&typeof vt.onPostCommitFiberRoot=="function")try{vt.onPostCommitFiberRoot(vn,y)}catch{}return!0}finally{J.p=g,O.T=u,pm(n,o)}}function gm(n,o,a){o=un(a,o),o=ju(n.stateNode,o,2),n=gi(n,o,2),n!==null&&(Ss(n,2),Dn(n))}function Ge(n,o,a){if(n.tag===3)gm(n,n,a);else for(;o!==null;){if(o.tag===3){gm(o,n,a);break}else if(o.tag===1){var u=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ti===null||!Ti.has(u))){n=un(a,n),a=yp(2),u=gi(o,a,2),u!==null&&(vp(a,u,o,n),Ss(u,2),Dn(u));break}}o=o.return}}function _c(n,o,a){var u=n.pingCache;if(u===null){u=n.pingCache=new sE;var g=new Set;u.set(o,g)}else g=u.get(o),g===void 0&&(g=new Set,u.set(o,g));g.has(a)||(dc=!0,g.add(a),n=cE.bind(null,n,o,a),o.then(n,n))}function cE(n,o,a){var u=n.pingCache;u!==null&&u.delete(o),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,Fe===n&&(Ie&a)===a&&(tt===4||tt===3&&(Ie&62914560)===Ie&&300>nt()-pa?(Pe&2)===0&&Jo(n,0):fc|=a,Fo===Ie&&(Fo=0)),Dn(n)}function ym(n,o){o===0&&(o=df()),n=Vi(n,o),n!==null&&(Ss(n,o),Dn(n))}function dE(n){var o=n.memoizedState,a=0;o!==null&&(a=o.retryLane),ym(n,a)}function fE(n,o){var a=0;switch(n.tag){case 31:case 13:var u=n.stateNode,g=n.memoizedState;g!==null&&(a=g.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(o),ym(n,a)}function hE(n,o){return Ke(n,o)}var Ea=null,jo=null,Sc=!1,Ta=!1,Ec=!1,Ai=0;function Dn(n){n!==jo&&n.next===null&&(jo===null?Ea=jo=n:jo=jo.next=n),Ta=!0,Sc||(Sc=!0,mE())}function er(n,o){if(!Ec&&Ta){Ec=!0;do for(var a=!1,u=Ea;u!==null;){if(n!==0){var g=u.pendingLanes;if(g===0)var y=0;else{var E=u.suspendedLanes,b=u.pingedLanes;y=(1<<31-Ot(42|n)+1)-1,y&=g&~(E&~b),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(a=!0,Em(u,y))}else y=Ie,y=po(u,u===Fe?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||_s(u,y)||(a=!0,Em(u,y));u=u.next}while(a);Ec=!1}}function pE(){vm()}function vm(){Ta=Sc=!1;var n=0;Ai!==0&&AE()&&(n=Ai);for(var o=nt(),a=null,u=Ea;u!==null;){var g=u.next,y=_m(u,o);y===0?(u.next=null,a===null?Ea=g:a.next=g,g===null&&(jo=a)):(a=u,(n!==0||(y&3)!==0)&&(Ta=!0)),u=g}yt!==0&&yt!==5||er(n),Ai!==0&&(Ai=0)}function _m(n,o){for(var a=n.suspendedLanes,u=n.pingedLanes,g=n.expirationTimes,y=n.pendingLanes&-62914561;0<y;){var E=31-Ot(y),b=1<<E,N=g[E];N===-1?((b&a)===0||(b&u)!==0)&&(g[E]=H_(b,o)):N<=o&&(n.expiredLanes|=b),y&=~b}if(o=Fe,a=Ie,a=po(n,n===o?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,a===0||n===o&&(qe===2||qe===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&rt(u),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||_s(n,a)){if(o=a&-a,o===n.callbackPriority)return o;switch(u!==null&&rt(u),Pl(a)){case 2:case 8:a=gt;break;case 32:a=ie;break;case 268435456:a=Ln;break;default:a=ie}return u=Sm.bind(null,n),a=Ke(a,u),n.callbackPriority=o,n.callbackNode=a,o}return u!==null&&u!==null&&rt(u),n.callbackPriority=2,n.callbackNode=null,2}function Sm(n,o){if(yt!==0&&yt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Sa()&&n.callbackNode!==a)return null;var u=Ie;return u=po(n,n===Fe?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(tm(n,u,o),_m(n,nt()),n.callbackNode!=null&&n.callbackNode===a?Sm.bind(null,n):null)}function Em(n,o){if(Sa())return null;tm(n,o,!0)}function mE(){xE(function(){(Pe&6)!==0?Ke(at,pE):vm()})}function Tc(){if(Ai===0){var n=Do;n===0&&(n=_t,_t<<=1,(_t&261888)===0&&(_t=256)),Ai=n}return Ai}function Tm(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ir(""+n)}function wm(n,o){var a=o.ownerDocument.createElement("input");return a.name=o.name,a.value=o.value,n.id&&a.setAttribute("form",n.id),o.parentNode.insertBefore(a,o),n=new FormData(n),a.parentNode.removeChild(a),n}function gE(n,o,a,u,g){if(o==="submit"&&a&&a.stateNode===g){var y=Tm((g[Ht]||null).action),E=u.submitter;E&&(o=(o=E[Ht]||null)?Tm(o.formAction):E.getAttribute("formAction"),o!==null&&(y=o,E=null));var b=new Ur("action","action",null,u,g);n.push({event:b,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ai!==0){var N=E?wm(g,E):new FormData(g);Vu(a,{pending:!0,data:N,method:g.method,action:y},null,N)}}else typeof y=="function"&&(b.preventDefault(),N=E?wm(g,E):new FormData(g),Vu(a,{pending:!0,data:N,method:g.method,action:y},y,N))},currentTarget:g}]})}}for(var wc=0;wc<su.length;wc++){var bc=su[wc],yE=bc.toLowerCase(),vE=bc[0].toUpperCase()+bc.slice(1);_n(yE,"on"+vE)}_n(eh,"onAnimationEnd"),_n(th,"onAnimationIteration"),_n(nh,"onAnimationStart"),_n("dblclick","onDoubleClick"),_n("focusin","onFocus"),_n("focusout","onBlur"),_n(US,"onTransitionRun"),_n(OS,"onTransitionStart"),_n(PS,"onTransitionCancel"),_n(ih,"onTransitionEnd"),_o("onMouseEnter",["mouseout","mouseover"]),_o("onMouseLeave",["mouseout","mouseover"]),_o("onPointerEnter",["pointerout","pointerover"]),_o("onPointerLeave",["pointerout","pointerover"]),qi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qi("onBeforeInput",["compositionend","keypress","textInput","paste"]),qi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_E=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(tr));function bm(n,o){o=(o&4)!==0;for(var a=0;a<n.length;a++){var u=n[a],g=u.event;u=u.listeners;e:{var y=void 0;if(o)for(var E=u.length-1;0<=E;E--){var b=u[E],N=b.instance,L=b.currentTarget;if(b=b.listener,N!==y&&g.isPropagationStopped())break e;y=b,g.currentTarget=L;try{y(g)}catch(H){Lr(H)}g.currentTarget=null,y=N}else for(E=0;E<u.length;E++){if(b=u[E],N=b.instance,L=b.currentTarget,b=b.listener,N!==y&&g.isPropagationStopped())break e;y=b,g.currentTarget=L;try{y(g)}catch(H){Lr(H)}g.currentTarget=null,y=N}}}}function xe(n,o){var a=o[Ll];a===void 0&&(a=o[Ll]=new Set);var u=n+"__bubble";a.has(u)||(Am(o,n,2,!1),a.add(u))}function Ac(n,o,a){var u=0;o&&(u|=4),Am(a,n,u,o)}var wa="_reactListening"+Math.random().toString(36).slice(2);function Cc(n){if(!n[wa]){n[wa]=!0,vf.forEach(function(a){a!=="selectionchange"&&(_E.has(a)||Ac(a,!1,n),Ac(a,!0,n))});var o=n.nodeType===9?n:n.ownerDocument;o===null||o[wa]||(o[wa]=!0,Ac("selectionchange",!1,o))}}function Am(n,o,a,u){switch(eg(o)){case 2:var g=KE;break;case 8:g=jE;break;default:g=Hc}a=g.bind(null,o,a,n),g=void 0,!Jl||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),u?g!==void 0?n.addEventListener(o,a,{capture:!0,passive:g}):n.addEventListener(o,a,!0):g!==void 0?n.addEventListener(o,a,{passive:g}):n.addEventListener(o,a,!1)}function xc(n,o,a,u,g){var y=u;if((o&1)===0&&(o&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var b=u.stateNode.containerInfo;if(b===g)break;if(E===4)for(E=u.return;E!==null;){var N=E.tag;if((N===3||N===4)&&E.stateNode.containerInfo===g)return;E=E.return}for(;b!==null;){if(E=go(b),E===null)return;if(N=E.tag,N===5||N===6||N===26||N===27){u=y=E;continue e}b=b.parentNode}}u=u.return}If(function(){var L=y,H=Fl(a),F=[];e:{var q=oh.get(n);if(q!==void 0){var G=Ur,se=n;switch(n){case"keypress":if(kr(a)===0)break e;case"keydown":case"keyup":G=fS;break;case"focusin":se="focus",G=Xl;break;case"focusout":se="blur",G=Xl;break;case"beforeblur":case"afterblur":G=Xl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Df;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=eS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=mS;break;case eh:case th:case nh:G=iS;break;case ih:G=yS;break;case"scroll":case"scrollend":G=W_;break;case"wheel":G=_S;break;case"copy":case"cut":case"paste":G=sS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=Of;break;case"toggle":case"beforetoggle":G=ES}var de=(o&4)!==0,Ve=!de&&(n==="scroll"||n==="scrollend"),U=de?q!==null?q+"Capture":null:q;de=[];for(var k=L,P;k!==null;){var z=k;if(P=z.stateNode,z=z.tag,z!==5&&z!==26&&z!==27||P===null||U===null||(z=ws(k,U),z!=null&&de.push(nr(k,z,P))),Ve)break;k=k.return}0<de.length&&(q=new G(q,se,null,a,H),F.push({event:q,listeners:de}))}}if((o&7)===0){e:{if(q=n==="mouseover"||n==="pointerover",G=n==="mouseout"||n==="pointerout",q&&a!==zl&&(se=a.relatedTarget||a.fromElement)&&(go(se)||se[mo]))break e;if((G||q)&&(q=H.window===H?H:(q=H.ownerDocument)?q.defaultView||q.parentWindow:window,G?(se=a.relatedTarget||a.toElement,G=L,se=se?go(se):null,se!==null&&(Ve=l(se),de=se.tag,se!==Ve||de!==5&&de!==27&&de!==6)&&(se=null)):(G=null,se=L),G!==se)){if(de=Df,z="onMouseLeave",U="onMouseEnter",k="mouse",(n==="pointerout"||n==="pointerover")&&(de=Of,z="onPointerLeave",U="onPointerEnter",k="pointer"),Ve=G==null?q:Ts(G),P=se==null?q:Ts(se),q=new de(z,k+"leave",G,a,H),q.target=Ve,q.relatedTarget=P,z=null,go(H)===L&&(de=new de(U,k+"enter",se,a,H),de.target=P,de.relatedTarget=Ve,z=de),Ve=z,G&&se)t:{for(de=SE,U=G,k=se,P=0,z=U;z;z=de(z))P++;z=0;for(var ce=k;ce;ce=de(ce))z++;for(;0<P-z;)U=de(U),P--;for(;0<z-P;)k=de(k),z--;for(;P--;){if(U===k||k!==null&&U===k.alternate){de=U;break t}U=de(U),k=de(k)}de=null}else de=null;G!==null&&Cm(F,q,G,de,!1),se!==null&&Ve!==null&&Cm(F,Ve,se,de,!0)}}e:{if(q=L?Ts(L):window,G=q.nodeName&&q.nodeName.toLowerCase(),G==="select"||G==="input"&&q.type==="file")var De=zf;else if(Hf(q))if(Ff)De=MS;else{De=NS;var ae=RS}else G=q.nodeName,!G||G.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?L&&Vl(L.elementType)&&(De=zf):De=IS;if(De&&(De=De(n,L))){Vf(F,De,a,H);break e}ae&&ae(n,q,L),n==="focusout"&&L&&q.type==="number"&&L.memoizedProps.value!=null&&Hl(q,"number",q.value)}switch(ae=L?Ts(L):window,n){case"focusin":(Hf(ae)||ae.contentEditable==="true")&&(Ao=ae,nu=L,Ms=null);break;case"focusout":Ms=nu=Ao=null;break;case"mousedown":iu=!0;break;case"contextmenu":case"mouseup":case"dragend":iu=!1,Wf(F,a,H);break;case"selectionchange":if(DS)break;case"keydown":case"keyup":Wf(F,a,H)}var Te;if(Wl)e:{switch(n){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else bo?Gf(n,a)&&(Me="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Me="onCompositionStart");Me&&(Pf&&a.locale!=="ko"&&(bo||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&bo&&(Te=Mf()):(ui=H,Kl="value"in ui?ui.value:ui.textContent,bo=!0)),ae=ba(L,Me),0<ae.length&&(Me=new Uf(Me,n,null,a,H),F.push({event:Me,listeners:ae}),Te?Me.data=Te:(Te=Bf(a),Te!==null&&(Me.data=Te)))),(Te=wS?bS(n,a):AS(n,a))&&(Me=ba(L,"onBeforeInput"),0<Me.length&&(ae=new Uf("onBeforeInput","beforeinput",null,a,H),F.push({event:ae,listeners:Me}),ae.data=Te)),gE(F,n,L,a,H)}bm(F,o)})}function nr(n,o,a){return{instance:n,listener:o,currentTarget:a}}function ba(n,o){for(var a=o+"Capture",u=[];n!==null;){var g=n,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=ws(n,a),g!=null&&u.unshift(nr(n,g,y)),g=ws(n,o),g!=null&&u.push(nr(n,g,y))),n.tag===3)return u;n=n.return}return[]}function SE(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Cm(n,o,a,u,g){for(var y=o._reactName,E=[];a!==null&&a!==u;){var b=a,N=b.alternate,L=b.stateNode;if(b=b.tag,N!==null&&N===u)break;b!==5&&b!==26&&b!==27||L===null||(N=L,g?(L=ws(a,y),L!=null&&E.unshift(nr(a,L,N))):g||(L=ws(a,y),L!=null&&E.push(nr(a,L,N)))),a=a.return}E.length!==0&&n.push({event:o,listeners:E})}var EE=/\r\n?/g,TE=/\u0000|\uFFFD/g;function xm(n){return(typeof n=="string"?n:""+n).replace(EE,`
`).replace(TE,"")}function Rm(n,o){return o=xm(o),xm(n)===o}function He(n,o,a,u,g,y){switch(a){case"children":typeof u=="string"?o==="body"||o==="textarea"&&u===""||Eo(n,u):(typeof u=="number"||typeof u=="bigint")&&o!=="body"&&Eo(n,""+u);break;case"className":Rr(n,"class",u);break;case"tabIndex":Rr(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Rr(n,a,u);break;case"style":Rf(n,u,y);break;case"data":if(o!=="object"){Rr(n,"data",u);break}case"src":case"href":if(u===""&&(o!=="a"||a!=="href")){n.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(a);break}u=Ir(""+u),n.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(a==="formAction"?(o!=="input"&&He(n,o,"name",g.name,g,null),He(n,o,"formEncType",g.formEncType,g,null),He(n,o,"formMethod",g.formMethod,g,null),He(n,o,"formTarget",g.formTarget,g,null)):(He(n,o,"encType",g.encType,g,null),He(n,o,"method",g.method,g,null),He(n,o,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(a);break}u=Ir(""+u),n.setAttribute(a,u);break;case"onClick":u!=null&&(n.onclick=Gn);break;case"onScroll":u!=null&&xe("scroll",n);break;case"onScrollEnd":u!=null&&xe("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}a=Ir(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,""+u):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":u===!0?n.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,u):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(a,u):n.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(a):n.setAttribute(a,u);break;case"popover":xe("beforetoggle",n),xe("toggle",n),xr(n,"popover",u);break;case"xlinkActuate":qn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":qn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":qn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":qn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":qn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":qn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":qn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":qn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":qn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":xr(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=X_.get(a)||a,xr(n,a,u))}}function Rc(n,o,a,u,g,y){switch(a){case"style":Rf(n,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"children":typeof u=="string"?Eo(n,u):(typeof u=="number"||typeof u=="bigint")&&Eo(n,""+u);break;case"onScroll":u!=null&&xe("scroll",n);break;case"onScrollEnd":u!=null&&xe("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Gn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_f.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(g=a.endsWith("Capture"),o=a.slice(2,g?a.length-7:void 0),y=n[Ht]||null,y=y!=null?y[a]:null,typeof y=="function"&&n.removeEventListener(o,y,g),typeof u=="function")){typeof y!="function"&&y!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(o,u,g);break e}a in n?n[a]=u:u===!0?n.setAttribute(a,""):xr(n,a,u)}}}function Rt(n,o,a){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xe("error",n),xe("load",n);var u=!1,g=!1,y;for(y in a)if(a.hasOwnProperty(y)){var E=a[y];if(E!=null)switch(y){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:He(n,o,y,E,a,null)}}g&&He(n,o,"srcSet",a.srcSet,a,null),u&&He(n,o,"src",a.src,a,null);return;case"input":xe("invalid",n);var b=y=E=g=null,N=null,L=null;for(u in a)if(a.hasOwnProperty(u)){var H=a[u];if(H!=null)switch(u){case"name":g=H;break;case"type":E=H;break;case"checked":N=H;break;case"defaultChecked":L=H;break;case"value":y=H;break;case"defaultValue":b=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,o));break;default:He(n,o,u,H,a,null)}}bf(n,y,b,N,L,E,g,!1);return;case"select":xe("invalid",n),u=E=y=null;for(g in a)if(a.hasOwnProperty(g)&&(b=a[g],b!=null))switch(g){case"value":y=b;break;case"defaultValue":E=b;break;case"multiple":u=b;default:He(n,o,g,b,a,null)}o=y,a=E,n.multiple=!!u,o!=null?So(n,!!u,o,!1):a!=null&&So(n,!!u,a,!0);return;case"textarea":xe("invalid",n),y=g=u=null;for(E in a)if(a.hasOwnProperty(E)&&(b=a[E],b!=null))switch(E){case"value":u=b;break;case"defaultValue":g=b;break;case"children":y=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:He(n,o,E,b,a,null)}Cf(n,u,g,y);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(u=a[N],u!=null))switch(N){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:He(n,o,N,u,a,null)}return;case"dialog":xe("beforetoggle",n),xe("toggle",n),xe("cancel",n),xe("close",n);break;case"iframe":case"object":xe("load",n);break;case"video":case"audio":for(u=0;u<tr.length;u++)xe(tr[u],n);break;case"image":xe("error",n),xe("load",n);break;case"details":xe("toggle",n);break;case"embed":case"source":case"link":xe("error",n),xe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in a)if(a.hasOwnProperty(L)&&(u=a[L],u!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:He(n,o,L,u,a,null)}return;default:if(Vl(o)){for(H in a)a.hasOwnProperty(H)&&(u=a[H],u!==void 0&&Rc(n,o,H,u,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(u=a[b],u!=null&&He(n,o,b,u,a,null))}function wE(n,o,a,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,E=null,b=null,N=null,L=null,H=null;for(G in a){var F=a[G];if(a.hasOwnProperty(G)&&F!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":N=F;default:u.hasOwnProperty(G)||He(n,o,G,null,u,F)}}for(var q in u){var G=u[q];if(F=a[q],u.hasOwnProperty(q)&&(G!=null||F!=null))switch(q){case"type":y=G;break;case"name":g=G;break;case"checked":L=G;break;case"defaultChecked":H=G;break;case"value":E=G;break;case"defaultValue":b=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,o));break;default:G!==F&&He(n,o,q,G,u,F)}}Bl(n,E,b,N,L,H,y,g);return;case"select":G=E=b=q=null;for(y in a)if(N=a[y],a.hasOwnProperty(y)&&N!=null)switch(y){case"value":break;case"multiple":G=N;default:u.hasOwnProperty(y)||He(n,o,y,null,u,N)}for(g in u)if(y=u[g],N=a[g],u.hasOwnProperty(g)&&(y!=null||N!=null))switch(g){case"value":q=y;break;case"defaultValue":b=y;break;case"multiple":E=y;default:y!==N&&He(n,o,g,y,u,N)}o=b,a=E,u=G,q!=null?So(n,!!a,q,!1):!!u!=!!a&&(o!=null?So(n,!!a,o,!0):So(n,!!a,a?[]:"",!1));return;case"textarea":G=q=null;for(b in a)if(g=a[b],a.hasOwnProperty(b)&&g!=null&&!u.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:He(n,o,b,null,u,g)}for(E in u)if(g=u[E],y=a[E],u.hasOwnProperty(E)&&(g!=null||y!=null))switch(E){case"value":q=g;break;case"defaultValue":G=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==y&&He(n,o,E,g,u,y)}Af(n,q,G);return;case"option":for(var se in a)if(q=a[se],a.hasOwnProperty(se)&&q!=null&&!u.hasOwnProperty(se))switch(se){case"selected":n.selected=!1;break;default:He(n,o,se,null,u,q)}for(N in u)if(q=u[N],G=a[N],u.hasOwnProperty(N)&&q!==G&&(q!=null||G!=null))switch(N){case"selected":n.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:He(n,o,N,q,u,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var de in a)q=a[de],a.hasOwnProperty(de)&&q!=null&&!u.hasOwnProperty(de)&&He(n,o,de,null,u,q);for(L in u)if(q=u[L],G=a[L],u.hasOwnProperty(L)&&q!==G&&(q!=null||G!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,o));break;default:He(n,o,L,q,u,G)}return;default:if(Vl(o)){for(var Ve in a)q=a[Ve],a.hasOwnProperty(Ve)&&q!==void 0&&!u.hasOwnProperty(Ve)&&Rc(n,o,Ve,void 0,u,q);for(H in u)q=u[H],G=a[H],!u.hasOwnProperty(H)||q===G||q===void 0&&G===void 0||Rc(n,o,H,q,u,G);return}}for(var U in a)q=a[U],a.hasOwnProperty(U)&&q!=null&&!u.hasOwnProperty(U)&&He(n,o,U,null,u,q);for(F in u)q=u[F],G=a[F],!u.hasOwnProperty(F)||q===G||q==null&&G==null||He(n,o,F,q,u,G)}function Nm(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function bE(){if(typeof performance.getEntriesByType=="function"){for(var n=0,o=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var g=a[u],y=g.transferSize,E=g.initiatorType,b=g.duration;if(y&&b&&Nm(E)){for(E=0,b=g.responseEnd,u+=1;u<a.length;u++){var N=a[u],L=N.startTime;if(L>b)break;var H=N.transferSize,F=N.initiatorType;H&&Nm(F)&&(N=N.responseEnd,E+=H*(N<b?1:(b-L)/(N-L)))}if(--u,o+=8*(y+E)/(g.duration/1e3),n++,10<n)break}}if(0<n)return o/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Nc=null,Ic=null;function Aa(n){return n.nodeType===9?n:n.ownerDocument}function Im(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Mm(n,o){if(n===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&o==="foreignObject"?0:n}function Mc(n,o){return n==="textarea"||n==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var kc=null;function AE(){var n=window.event;return n&&n.type==="popstate"?n===kc?!1:(kc=n,!0):(kc=null,!1)}var km=typeof setTimeout=="function"?setTimeout:void 0,CE=typeof clearTimeout=="function"?clearTimeout:void 0,Dm=typeof Promise=="function"?Promise:void 0,xE=typeof queueMicrotask=="function"?queueMicrotask:typeof Dm<"u"?function(n){return Dm.resolve(null).then(n).catch(RE)}:km;function RE(n){setTimeout(function(){throw n})}function Ci(n){return n==="head"}function Um(n,o){var a=o,u=0;do{var g=a.nextSibling;if(n.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"||a==="/&"){if(u===0){n.removeChild(g),Wo(o);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")ir(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,ir(a);for(var y=a.firstChild;y;){var E=y.nextSibling,b=y.nodeName;y[Es]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&y.rel.toLowerCase()==="stylesheet"||a.removeChild(y),y=E}}else a==="body"&&ir(n.ownerDocument.body);a=g}while(a);Wo(o)}function Om(n,o){var a=n;n=0;do{var u=a.nextSibling;if(a.nodeType===1?o?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(o?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=u}while(a)}function Dc(n){var o=n.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var a=o;switch(o=o.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Dc(a),ql(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function NE(n,o,a,u){for(;n.nodeType===1;){var g=a;if(n.nodeName.toLowerCase()!==o.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Es])switch(o){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(y=n.getAttribute("rel"),y==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(y!==g.rel||n.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(y=n.getAttribute("src"),(y!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(o==="input"&&n.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===y)return n}else return n;if(n=pn(n.nextSibling),n===null)break}return null}function IE(n,o,a){if(o==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=pn(n.nextSibling),n===null))return null;return n}function Pm(n,o){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=pn(n.nextSibling),n===null))return null;return n}function Uc(n){return n.data==="$?"||n.data==="$~"}function Oc(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function ME(n,o){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=o;else if(n.data!=="$?"||a.readyState!=="loading")o();else{var u=function(){o(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function pn(n){for(;n!=null;n=n.nextSibling){var o=n.nodeType;if(o===1||o===3)break;if(o===8){if(o=n.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return n}var Pc=null;function Lm(n){n=n.nextSibling;for(var o=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(o===0)return pn(n.nextSibling);o--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||o++}n=n.nextSibling}return null}function qm(n){n=n.previousSibling;for(var o=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(o===0)return n;o--}else a!=="/$"&&a!=="/&"||o++}n=n.previousSibling}return null}function Gm(n,o,a){switch(o=Aa(a),n){case"html":if(n=o.documentElement,!n)throw Error(s(452));return n;case"head":if(n=o.head,!n)throw Error(s(453));return n;case"body":if(n=o.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function ir(n){for(var o=n.attributes;o.length;)n.removeAttributeNode(o[0]);ql(n)}var mn=new Map,Bm=new Set;function Ca(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ti=J.d;J.d={f:kE,r:DE,D:UE,C:OE,L:PE,m:LE,X:GE,S:qE,M:BE};function kE(){var n=ti.f(),o=ya();return n||o}function DE(n){var o=yo(n);o!==null&&o.tag===5&&o.type==="form"?ip(o):ti.r(n)}var Yo=typeof document>"u"?null:document;function Hm(n,o,a){var u=Yo;if(u&&typeof o=="string"&&o){var g=an(o);g='link[rel="'+n+'"][href="'+g+'"]',typeof a=="string"&&(g+='[crossorigin="'+a+'"]'),Bm.has(g)||(Bm.add(g),n={rel:n,crossOrigin:a,href:o},u.querySelector(g)===null&&(o=u.createElement("link"),Rt(o,"link",n),St(o),u.head.appendChild(o)))}}function UE(n){ti.D(n),Hm("dns-prefetch",n,null)}function OE(n,o){ti.C(n,o),Hm("preconnect",n,o)}function PE(n,o,a){ti.L(n,o,a);var u=Yo;if(u&&n&&o){var g='link[rel="preload"][as="'+an(o)+'"]';o==="image"&&a&&a.imageSrcSet?(g+='[imagesrcset="'+an(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(g+='[imagesizes="'+an(a.imageSizes)+'"]')):g+='[href="'+an(n)+'"]';var y=g;switch(o){case"style":y=Xo(n);break;case"script":y=Qo(n)}mn.has(y)||(n=_({rel:"preload",href:o==="image"&&a&&a.imageSrcSet?void 0:n,as:o},a),mn.set(y,n),u.querySelector(g)!==null||o==="style"&&u.querySelector(or(y))||o==="script"&&u.querySelector(sr(y))||(o=u.createElement("link"),Rt(o,"link",n),St(o),u.head.appendChild(o)))}}function LE(n,o){ti.m(n,o);var a=Yo;if(a&&n){var u=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+an(u)+'"][href="'+an(n)+'"]',y=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Qo(n)}if(!mn.has(y)&&(n=_({rel:"modulepreload",href:n},o),mn.set(y,n),a.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(sr(y)))return}u=a.createElement("link"),Rt(u,"link",n),St(u),a.head.appendChild(u)}}}function qE(n,o,a){ti.S(n,o,a);var u=Yo;if(u&&n){var g=vo(u).hoistableStyles,y=Xo(n);o=o||"default";var E=g.get(y);if(!E){var b={loading:0,preload:null};if(E=u.querySelector(or(y)))b.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":o},a),(a=mn.get(y))&&Lc(n,a);var N=E=u.createElement("link");St(N),Rt(N,"link",n),N._p=new Promise(function(L,H){N.onload=L,N.onerror=H}),N.addEventListener("load",function(){b.loading|=1}),N.addEventListener("error",function(){b.loading|=2}),b.loading|=4,xa(E,o,u)}E={type:"stylesheet",instance:E,count:1,state:b},g.set(y,E)}}}function GE(n,o){ti.X(n,o);var a=Yo;if(a&&n){var u=vo(a).hoistableScripts,g=Qo(n),y=u.get(g);y||(y=a.querySelector(sr(g)),y||(n=_({src:n,async:!0},o),(o=mn.get(g))&&qc(n,o),y=a.createElement("script"),St(y),Rt(y,"link",n),a.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function BE(n,o){ti.M(n,o);var a=Yo;if(a&&n){var u=vo(a).hoistableScripts,g=Qo(n),y=u.get(g);y||(y=a.querySelector(sr(g)),y||(n=_({src:n,async:!0,type:"module"},o),(o=mn.get(g))&&qc(n,o),y=a.createElement("script"),St(y),Rt(y,"link",n),a.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function Vm(n,o,a,u){var g=(g=ve.current)?Ca(g):null;if(!g)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(o=Xo(a.href),a=vo(g).hoistableStyles,u=a.get(o),u||(u={type:"style",instance:null,count:0,state:null},a.set(o,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=Xo(a.href);var y=vo(g).hoistableStyles,E=y.get(n);if(E||(g=g.ownerDocument||g,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(n,E),(y=g.querySelector(or(n)))&&!y._p&&(E.instance=y,E.state.loading=5),mn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},mn.set(n,a),y||HE(g,n,a,E.state))),o&&u===null)throw Error(s(528,""));return E}if(o&&u!==null)throw Error(s(529,""));return null;case"script":return o=a.async,a=a.src,typeof a=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Qo(a),a=vo(g).hoistableScripts,u=a.get(o),u||(u={type:"script",instance:null,count:0,state:null},a.set(o,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function Xo(n){return'href="'+an(n)+'"'}function or(n){return'link[rel="stylesheet"]['+n+"]"}function zm(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function HE(n,o,a,u){n.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=n.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),Rt(o,"link",a),St(o),n.head.appendChild(o))}function Qo(n){return'[src="'+an(n)+'"]'}function sr(n){return"script[async]"+n}function Fm(n,o,a){if(o.count++,o.instance===null)switch(o.type){case"style":var u=n.querySelector('style[data-href~="'+an(a.href)+'"]');if(u)return o.instance=u,St(u),u;var g=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),St(u),Rt(u,"style",g),xa(u,a.precedence,n),o.instance=u;case"stylesheet":g=Xo(a.href);var y=n.querySelector(or(g));if(y)return o.state.loading|=4,o.instance=y,St(y),y;u=zm(a),(g=mn.get(g))&&Lc(u,g),y=(n.ownerDocument||n).createElement("link"),St(y);var E=y;return E._p=new Promise(function(b,N){E.onload=b,E.onerror=N}),Rt(y,"link",u),o.state.loading|=4,xa(y,a.precedence,n),o.instance=y;case"script":return y=Qo(a.src),(g=n.querySelector(sr(y)))?(o.instance=g,St(g),g):(u=a,(g=mn.get(y))&&(u=_({},a),qc(u,g)),n=n.ownerDocument||n,g=n.createElement("script"),St(g),Rt(g,"link",u),n.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(u=o.instance,o.state.loading|=4,xa(u,a.precedence,n));return o.instance}function xa(n,o,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,y=g,E=0;E<u.length;E++){var b=u[E];if(b.dataset.precedence===o)y=b;else if(y!==g)break}y?y.parentNode.insertBefore(n,y.nextSibling):(o=a.nodeType===9?a.head:a,o.insertBefore(n,o.firstChild))}function Lc(n,o){n.crossOrigin==null&&(n.crossOrigin=o.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=o.referrerPolicy),n.title==null&&(n.title=o.title)}function qc(n,o){n.crossOrigin==null&&(n.crossOrigin=o.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=o.referrerPolicy),n.integrity==null&&(n.integrity=o.integrity)}var Ra=null;function $m(n,o,a){if(Ra===null){var u=new Map,g=Ra=new Map;g.set(a,u)}else g=Ra,u=g.get(a),u||(u=new Map,g.set(a,u));if(u.has(n))return u;for(u.set(n,null),a=a.getElementsByTagName(n),g=0;g<a.length;g++){var y=a[g];if(!(y[Es]||y[bt]||n==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var E=y.getAttribute(o)||"";E=n+E;var b=u.get(E);b?b.push(y):u.set(E,[y])}}return u}function Jm(n,o,a){n=n.ownerDocument||n,n.head.insertBefore(a,o==="title"?n.querySelector("head > title"):null)}function VE(n,o,a){if(a===1||o.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return n=o.disabled,typeof o.precedence=="string"&&n==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Km(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function zE(n,o,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=Xo(u.href),y=o.querySelector(or(g));if(y){o=y._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(n.count++,n=Na.bind(n),o.then(n,n)),a.state.loading|=4,a.instance=y,St(y);return}y=o.ownerDocument||o,u=zm(u),(g=mn.get(g))&&Lc(u,g),y=y.createElement("link"),St(y);var E=y;E._p=new Promise(function(b,N){E.onload=b,E.onerror=N}),Rt(y,"link",u),a.instance=y}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,o),(o=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=Na.bind(n),o.addEventListener("load",a),o.addEventListener("error",a))}}var Gc=0;function FE(n,o){return n.stylesheets&&n.count===0&&Ma(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var u=setTimeout(function(){if(n.stylesheets&&Ma(n,n.stylesheets),n.unsuspend){var y=n.unsuspend;n.unsuspend=null,y()}},6e4+o);0<n.imgBytes&&Gc===0&&(Gc=62500*bE());var g=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Ma(n,n.stylesheets),n.unsuspend)){var y=n.unsuspend;n.unsuspend=null,y()}},(n.imgBytes>Gc?50:800)+o);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function Na(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ma(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Ia=null;function Ma(n,o){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Ia=new Map,o.forEach($E,n),Ia=null,Na.call(n))}function $E(n,o){if(!(o.state.loading&4)){var a=Ia.get(n);if(a)var u=a.get(null);else{a=new Map,Ia.set(n,a);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var E=g[y];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),u=E)}u&&a.set(null,u)}g=o.instance,E=g.getAttribute("data-precedence"),y=a.get(E)||u,y===u&&a.set(null,g),a.set(E,g),this.count++,u=Na.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),y?y.parentNode.insertBefore(g,y.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),o.state.loading|=4}}var rr={$$typeof:I,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function JE(n,o,a,u,g,y,E,b,N){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ul(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ul(0),this.hiddenUpdates=Ul(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function jm(n,o,a,u,g,y,E,b,N,L,H,F){return n=new JE(n,o,a,E,N,L,H,F,b),o=1,y===!0&&(o|=24),y=Qt(3,null,null,o),n.current=y,y.stateNode=n,o=vu(),o.refCount++,n.pooledCache=o,o.refCount++,y.memoizedState={element:u,isDehydrated:a,cache:o},Tu(y),n}function Ym(n){return n?(n=Ro,n):Ro}function Xm(n,o,a,u,g,y){g=Ym(g),u.context===null?u.context=g:u.pendingContext=g,u=mi(o),u.payload={element:a},y=y===void 0?null:y,y!==null&&(u.callback=y),a=gi(n,u,o),a!==null&&(Kt(a,n,o),qs(a,n,o))}function Qm(n,o){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<o?a:o}}function Bc(n,o){Qm(n,o),(n=n.alternate)&&Qm(n,o)}function Wm(n){if(n.tag===13||n.tag===31){var o=Vi(n,67108864);o!==null&&Kt(o,n,67108864),Bc(n,67108864)}}function Zm(n){if(n.tag===13||n.tag===31){var o=nn();o=Ol(o);var a=Vi(n,o);a!==null&&Kt(a,n,o),Bc(n,o)}}var ka=!0;function KE(n,o,a,u){var g=O.T;O.T=null;var y=J.p;try{J.p=2,Hc(n,o,a,u)}finally{J.p=y,O.T=g}}function jE(n,o,a,u){var g=O.T;O.T=null;var y=J.p;try{J.p=8,Hc(n,o,a,u)}finally{J.p=y,O.T=g}}function Hc(n,o,a,u){if(ka){var g=Vc(u);if(g===null)xc(n,o,u,Da,a),tg(n,u);else if(XE(g,n,o,a,u))u.stopPropagation();else if(tg(n,u),o&4&&-1<YE.indexOf(n)){for(;g!==null;){var y=yo(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var E=Nn(y.pendingLanes);if(E!==0){var b=y;for(b.pendingLanes|=2,b.entangledLanes|=2;E;){var N=1<<31-Ot(E);b.entanglements[1]|=N,E&=~N}Dn(y),(Pe&6)===0&&(ma=nt()+500,er(0))}}break;case 31:case 13:b=Vi(y,2),b!==null&&Kt(b,y,2),ya(),Bc(y,2)}if(y=Vc(u),y===null&&xc(n,o,u,Da,a),y===g)break;g=y}g!==null&&u.stopPropagation()}else xc(n,o,u,null,a)}}function Vc(n){return n=Fl(n),zc(n)}var Da=null;function zc(n){if(Da=null,n=go(n),n!==null){var o=l(n);if(o===null)n=null;else{var a=o.tag;if(a===13){if(n=c(o),n!==null)return n;n=null}else if(a===31){if(n=f(o),n!==null)return n;n=null}else if(a===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null)}}return Da=n,null}function eg(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Xe()){case at:return 2;case gt:return 8;case ie:case Le:return 32;case Ln:return 268435456;default:return 32}default:return 32}}var Fc=!1,xi=null,Ri=null,Ni=null,ar=new Map,lr=new Map,Ii=[],YE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function tg(n,o){switch(n){case"focusin":case"focusout":xi=null;break;case"dragenter":case"dragleave":Ri=null;break;case"mouseover":case"mouseout":Ni=null;break;case"pointerover":case"pointerout":ar.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":lr.delete(o.pointerId)}}function ur(n,o,a,u,g,y){return n===null||n.nativeEvent!==y?(n={blockedOn:o,domEventName:a,eventSystemFlags:u,nativeEvent:y,targetContainers:[g]},o!==null&&(o=yo(o),o!==null&&Wm(o)),n):(n.eventSystemFlags|=u,o=n.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),n)}function XE(n,o,a,u,g){switch(o){case"focusin":return xi=ur(xi,n,o,a,u,g),!0;case"dragenter":return Ri=ur(Ri,n,o,a,u,g),!0;case"mouseover":return Ni=ur(Ni,n,o,a,u,g),!0;case"pointerover":var y=g.pointerId;return ar.set(y,ur(ar.get(y)||null,n,o,a,u,g)),!0;case"gotpointercapture":return y=g.pointerId,lr.set(y,ur(lr.get(y)||null,n,o,a,u,g)),!0}return!1}function ng(n){var o=go(n.target);if(o!==null){var a=l(o);if(a!==null){if(o=a.tag,o===13){if(o=c(a),o!==null){n.blockedOn=o,gf(n.priority,function(){Zm(a)});return}}else if(o===31){if(o=f(a),o!==null){n.blockedOn=o,gf(n.priority,function(){Zm(a)});return}}else if(o===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ua(n){if(n.blockedOn!==null)return!1;for(var o=n.targetContainers;0<o.length;){var a=Vc(n.nativeEvent);if(a===null){a=n.nativeEvent;var u=new a.constructor(a.type,a);zl=u,a.target.dispatchEvent(u),zl=null}else return o=yo(a),o!==null&&Wm(o),n.blockedOn=a,!1;o.shift()}return!0}function ig(n,o,a){Ua(n)&&a.delete(o)}function QE(){Fc=!1,xi!==null&&Ua(xi)&&(xi=null),Ri!==null&&Ua(Ri)&&(Ri=null),Ni!==null&&Ua(Ni)&&(Ni=null),ar.forEach(ig),lr.forEach(ig)}function Oa(n,o){n.blockedOn===o&&(n.blockedOn=null,Fc||(Fc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,QE)))}var Pa=null;function og(n){Pa!==n&&(Pa=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Pa===n&&(Pa=null);for(var o=0;o<n.length;o+=3){var a=n[o],u=n[o+1],g=n[o+2];if(typeof u!="function"){if(zc(u||a)===null)continue;break}var y=yo(a);y!==null&&(n.splice(o,3),o-=3,Vu(y,{pending:!0,data:g,method:a.method,action:u},u,g))}}))}function Wo(n){function o(N){return Oa(N,n)}xi!==null&&Oa(xi,n),Ri!==null&&Oa(Ri,n),Ni!==null&&Oa(Ni,n),ar.forEach(o),lr.forEach(o);for(var a=0;a<Ii.length;a++){var u=Ii[a];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Ii.length&&(a=Ii[0],a.blockedOn===null);)ng(a),a.blockedOn===null&&Ii.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var g=a[u],y=a[u+1],E=g[Ht]||null;if(typeof y=="function")E||og(a);else if(E){var b=null;if(y&&y.hasAttribute("formAction")){if(g=y,E=y[Ht]||null)b=E.formAction;else if(zc(g)!==null)continue}else b=E.action;typeof b=="function"?a[u+1]=b:(a.splice(u,3),u-=3),og(a)}}}function sg(){function n(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(E){return g=E})},focusReset:"manual",scroll:"manual"})}function o(){g!==null&&(g(),g=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),g!==null&&(g(),g=null)}}}function $c(n){this._internalRoot=n}La.prototype.render=$c.prototype.render=function(n){var o=this._internalRoot;if(o===null)throw Error(s(409));var a=o.current,u=nn();Xm(a,u,n,o,null,null)},La.prototype.unmount=$c.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var o=n.containerInfo;Xm(n.current,2,null,n,null,null),ya(),o[mo]=null}};function La(n){this._internalRoot=n}La.prototype.unstable_scheduleHydration=function(n){if(n){var o=mf();n={blockedOn:null,target:n,priority:o};for(var a=0;a<Ii.length&&o!==0&&o<Ii[a].priority;a++);Ii.splice(a,0,n),a===0&&ng(n)}};var rg=e.version;if(rg!=="19.2.3")throw Error(s(527,rg,"19.2.3"));J.findDOMNode=function(n){var o=n._reactInternals;if(o===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=p(o),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var WE={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qa.isDisabled&&qa.supportsFiber)try{vn=qa.inject(WE),vt=qa}catch{}}return dr.createRoot=function(n,o){if(!r(n))throw Error(s(299));var a=!1,u="",g=hp,y=pp,E=mp;return o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(y=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError)),o=jm(n,1,!1,null,null,a,u,null,g,y,E,sg),n[mo]=o.current,Cc(n),new $c(o)},dr.hydrateRoot=function(n,o,a){if(!r(n))throw Error(s(299));var u=!1,g="",y=hp,E=pp,b=mp,N=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(N=a.formState)),o=jm(n,1,!0,o,a??null,u,g,N,y,E,b,sg),o.context=Ym(null),a=o.current,u=nn(),u=Ol(u),g=mi(u),g.callback=null,gi(a,g,u),a=u,o.current.lanes=a,Ss(o,a),Dn(o),n[mo]=o.current,Cc(n),new La(o)},dr.version="19.2.3",dr}var gg;function cT(){if(gg)return jc.exports;gg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),jc.exports=uT(),jc.exports}var dT=cT();const fT=Hd(dT),hT=({onTutorialClick:t,user:e,onLogout:i,onLogin:s})=>{var f,m;const[r,l]=ye.useState(!1),c=()=>l(!r);return w.jsx("header",{className:"bg-[#1f2022] border-b border-gray-700/50 shadow-md sticky top-0 z-50",children:w.jsxs("nav",{className:"container mx-auto px-4 lg:px-6 py-4 flex justify-between items-center",children:[w.jsx("a",{href:"/",className:"flex-shrink-0",children:w.jsx("img",{src:"/assets/images/logo.png",alt:"Robi Technology Logo",className:"h-10 sm:h-12 w-auto object-contain"})}),w.jsxs("div",{className:"flex items-center space-x-4 lg:space-x-6",children:[w.jsxs("a",{href:"#",className:"hidden md:flex items-center gap-2 bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-2.5 rounded-lg text-base font-bold transition-all shadow-md border border-emerald-500/50 hover:shadow-emerald-500/20 whitespace-nowrap",children:[w.jsx("i",{className:"bi bi-cash-coin text-lg"}),w.jsx("span",{children:"    "})]}),w.jsxs("div",{className:"hidden lg:flex items-center space-x-6 text-sm",children:[w.jsx("a",{href:"https://robitechnology.com",target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white transition-colors",children:"OUR SERVICE"}),w.jsx("a",{href:"https://robiaistore.com/",target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white transition-colors",children:"BUY AI"}),w.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors",children:"CONTACT US"})]}),w.jsxs("button",{onClick:t,className:"relative overflow-hidden bg-gradient-to-r from-red-700 to-red-500 text-white px-5 py-2 rounded-lg text-sm font-medium shadow-lg transition-transform hover:scale-105 hover:shadow-red-500/30 flex items-center gap-2 group border border-red-500/50 whitespace-nowrap",children:[w.jsx("span",{className:"absolute inset-0 w-full h-full bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:animate-shimmer"}),w.jsx("i",{className:"bi bi-play-circle-fill animate-pulse"}),w.jsx("span",{className:"hidden sm:inline",children:"Tutorial"})]}),e?w.jsxs("div",{className:"relative",children:[w.jsx("button",{onClick:c,className:"flex items-center focus:outline-none",children:w.jsx("img",{src:((f=e.user_metadata)==null?void 0:f.avatar_url)||"/assets/images/profile.png",alt:"Profile",className:"w-10 h-10 rounded-full border-2 border-[color:var(--theme-color)] object-cover"})}),r&&w.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-[#202123] rounded-md shadow-lg py-1 border border-gray-700 z-50",children:[w.jsxs("div",{className:"px-4 py-2 border-b border-gray-700",children:[w.jsx("p",{className:"text-sm text-white font-medium truncate",children:((m=e.user_metadata)==null?void 0:m.full_name)||e.email}),w.jsx("p",{className:"text-xs text-gray-500 truncate",children:e.email})]}),w.jsxs("button",{onClick:()=>{i(),l(!1)},className:"block w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-gray-700 transition-colors",children:[w.jsx("i",{className:"bi bi-box-arrow-right mr-2"}),"Logout"]})]})]}):w.jsxs("button",{onClick:s,className:"flex items-center gap-2 bg-[#2a2b2e] hover:bg-[#3b3b3e] text-white px-4 py-2 rounded-lg text-sm font-medium border border-gray-600 transition-colors shadow-sm",children:[w.jsx("i",{className:"bi bi-person-circle"}),w.jsx("span",{children:"Login"})]}),r&&w.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>l(!1)})]})]})})},fr=({id:t,min:e,max:i,value:s,onChange:r,themeColor:l})=>{const c=(s-e)/(i-e)*100;return w.jsx("input",{type:"range",id:t,min:e,max:i,value:s,onChange:r,className:"w-full h-2 rounded-lg cursor-pointer slider-custom",style:{"--fill-percentage":`${c}%`,"--theme-color":l}})},Un=({id:t,checked:e,onChange:i,label:s,tooltip:r})=>w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsxs("label",{htmlFor:t,className:"text-sm text-gray-400 flex items-center cursor-pointer",children:[s,r&&w.jsxs("div",{className:"info-icon group relative ml-1.5",children:[w.jsx("i",{className:"bi bi-info-circle-fill text-gray-500"}),w.jsx("span",{className:"tooltip invisible group-hover:visible absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-52 bg-[#17181a] text-white text-xs rounded-md p-2 border border-gray-600 shadow-lg z-10",children:r})]})]}),w.jsxs("div",{className:"switch relative inline-block w-10 h-6 flex-shrink-0",children:[w.jsx("input",{type:"checkbox",id:t,checked:e,onChange:i}),w.jsx("label",{htmlFor:t,className:"slider cursor-pointer"})]})]}),pT=({settings:t,onSettingsChange:e,onSave:i,onApiKeyClick:s,themeColor:r,onThemeColorChange:l,fileExtension:c,onFileExtensionChange:f})=>{const m=ye.useRef(null),p=ye.useRef(null),v=ye.useRef(null),_=ye.useRef(null),S=ye.useCallback(()=>{if(!m.current||!p.current)return;const R=t.activeTab==="metadata"?v:_;if(!R.current)return;const D=m.current.getBoundingClientRect(),I=R.current.getBoundingClientRect();p.current.style.left=`${I.left-D.left}px`,p.current.style.width=`${I.width}px`},[t.activeTab]);ye.useEffect(()=>(S(),window.addEventListener("resize",S),()=>window.removeEventListener("resize",S)),[S]);const T=R=>{e({...t,activeTab:R})},A=(R,D)=>{e({...t,[R]:D})},x=(R,D)=>{e({...t,advanceTitle:{...t.advanceTitle,[R]:D}})},C=(R,D)=>{e({...t,promptSwitches:{...t.promptSwitches,[R]:D}})};return w.jsxs("div",{className:"panel-bg p-4 sm:p-6 lg:sticky top-[88px] bg-[#202123] border border-[#363636] rounded-xl shadow-lg lg:max-h-[calc(100vh-104px)] lg:overflow-y-auto",children:[w.jsxs("div",{className:"flex justify-between items-center mb-6",children:[w.jsx("h2",{className:"text-xl font-semibold text-white",children:"Generation Controls"}),w.jsxs("button",{onClick:s,title:"Manage API Keys & Model",className:"flex items-center space-x-2 bg-white text-gray-800 px-3 py-1.5 rounded-lg font-medium shadow-sm hover:bg-gray-100 transition-colors text-sm",children:[w.jsx("i",{className:"bi bi-key-fill"}),w.jsx("span",{children:"API Key"})]})]}),w.jsxs("div",{ref:m,className:"relative border-b border-gray-700 mb-6",children:[w.jsxs("div",{className:"flex space-x-4",children:[w.jsx("button",{ref:v,onClick:()=>T("metadata"),className:`tab-btn py-2 px-1 hover:text-gray-200 font-medium transition-colors ${t.activeTab==="metadata"?"text-[color:var(--theme-color)]":"text-gray-400"}`,children:"Metadata"}),w.jsx("button",{ref:_,onClick:()=>T("prompt"),className:`tab-btn py-2 px-1 hover:text-gray-200 font-medium transition-colors ${t.activeTab==="prompt"?"text-[color:var(--theme-color)]":"text-gray-400"}`,children:"Prompt"})]}),w.jsx("div",{ref:p,className:"absolute bottom-[-1px] h-0.5 bg-[color:var(--theme-color)] transition-all duration-300 ease-in-out"})]}),w.jsxs("div",{className:`${t.activeTab==="metadata"?"block":"hidden"} space-y-6`,children:[w.jsxs("div",{children:[w.jsxs("div",{className:"flex justify-between items-center mb-2",children:[w.jsx("label",{htmlFor:"batch-size",className:"text-sm font-medium text-gray-300",children:"Processing Batch Size"}),w.jsxs("span",{className:"text-sm font-semibold text-white",children:[t.batchSize||3," Files"]})]}),w.jsx(fr,{id:"batch-size",min:1,max:10,value:t.batchSize||3,onChange:R=>A("batchSize",parseInt(R.target.value)),themeColor:r}),w.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Number of images to process simultaneously."})]}),w.jsx("div",{className:"pt-2 pb-2 border-b border-gray-700",children:w.jsx(Un,{id:"auto-download-csv",label:"Auto Download CSV",checked:t.autoDownloadCsv,onChange:R=>A("autoDownloadCsv",R.target.checked),tooltip:"Automatically download the CSV file when all files have been processed."})}),w.jsxs("div",{children:[w.jsxs("div",{className:"flex justify-between items-center mb-2",children:[w.jsx("label",{htmlFor:"title-length",className:"text-sm font-medium text-gray-300",children:"Title Length"}),w.jsxs("span",{className:"text-sm font-semibold text-white",children:[t.titleLength," Chars"]})]}),w.jsx(fr,{id:"title-length",min:20,max:200,value:t.titleLength,onChange:R=>A("titleLength",parseInt(R.target.value)),themeColor:r})]}),w.jsxs("div",{children:[w.jsxs("div",{className:"flex justify-between items-center mb-2",children:[w.jsx("label",{htmlFor:"desc-length",className:"text-sm font-medium text-gray-300",children:"Description Character Length"}),w.jsxs("span",{className:"text-sm font-semibold text-white",children:[t.descLength," Chars"]})]}),w.jsx(fr,{id:"desc-length",min:50,max:500,value:t.descLength,onChange:R=>A("descLength",parseInt(R.target.value)),themeColor:r})]}),w.jsxs("div",{children:[w.jsxs("div",{className:"flex justify-between items-center mb-2",children:[w.jsx("label",{htmlFor:"keywords-count",className:"text-sm font-medium text-gray-300",children:"Keywords Count"}),w.jsxs("span",{className:"text-sm font-semibold text-white",children:[t.keywordsCount," Keywords"]})]}),w.jsx(fr,{id:"keywords-count",min:5,max:50,value:t.keywordsCount,onChange:R=>A("keywordsCount",parseInt(R.target.value)),themeColor:r})]}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("button",{onClick:()=>A("isAdvanceContentHidden",!t.isAdvanceContentHidden),className:"flex justify-between items-center w-full text-left",children:[w.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Advance Title"}),w.jsx("span",{className:"text-sm font-medium text-[color:var(--theme-color)] hover:text-[color:var(--theme-color-hover)]",children:t.isAdvanceContentHidden?"Expand":"Collapse"})]}),!t.isAdvanceContentHidden&&w.jsxs("div",{className:"space-y-4 pl-2",children:[w.jsx(Un,{id:"toggle-transparent-bg",label:"isolated on transparent background",checked:t.advanceTitle.transparentBg,onChange:R=>x("transparentBg",R.target.checked)}),w.jsx(Un,{id:"toggle-white-bg",label:"isolated on white background",checked:t.advanceTitle.whiteBg,onChange:R=>x("whiteBg",R.target.checked)}),w.jsx(Un,{id:"toggle-vector",label:"Vector",checked:t.advanceTitle.vector,onChange:R=>x("vector",R.target.checked)}),w.jsx(Un,{id:"toggle-illustration",label:"illustration",checked:t.advanceTitle.illustration,onChange:R=>x("illustration",R.target.checked)})]})]}),w.jsxs("div",{className:"space-y-4",children:[w.jsx("label",{htmlFor:"custom-prompt-select",className:"block text-sm font-medium text-gray-300 mb-2",children:"Custom Prompt"}),w.jsxs("select",{id:"custom-prompt-select",value:t.customPromptSelect,onChange:R=>A("customPromptSelect",R.target.value),className:"bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-[color:var(--theme-color)] focus:border-[color:var(--theme-color)] block w-full p-2.5",children:[w.jsx("option",{value:"default",children:"Default (Recommended)"}),w.jsx("option",{value:"set_custom",children:"Set Custom Prompt"})]}),t.customPromptSelect==="set_custom"&&w.jsx("textarea",{value:t.customPromptEntry,onChange:R=>A("customPromptEntry",R.target.value),rows:4,className:"bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-[color:var(--theme-color)] focus:border-[color:var(--theme-color)] block w-full p-2.5",placeholder:"Enter your custom prompt here..."})]}),w.jsxs("div",{className:"space-y-2",children:[w.jsx("label",{htmlFor:"file-extension-select",className:"block text-sm font-medium text-gray-300",children:"Change File extension"}),w.jsxs("select",{id:"file-extension-select",value:c,onChange:R=>f(R.target.value),className:"bg-[#4a4a4a] border border-[#6b6b6b] text-[#d1d1d1] text-sm rounded-md p-2 w-full appearance-none bg-no-repeat bg-right-2",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23a0a0a0' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`},children:[w.jsx("option",{value:"default",children:"Default"}),w.jsx("option",{value:"jpg",children:"jpg"}),w.jsx("option",{value:"jpeg",children:"jpeg"}),w.jsx("option",{value:"png",children:"png"}),w.jsx("option",{value:"svg",children:"svg"}),w.jsx("option",{value:"eps",children:"eps"}),w.jsx("option",{value:"ai",children:"ai"}),w.jsx("option",{value:"mp4",children:"mp4"})]})]}),w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("label",{htmlFor:"theme-color-picker",className:"text-sm font-medium text-gray-300",children:"Theme Color :"}),w.jsxs("div",{children:[w.jsx("input",{type:"color",value:r,onChange:R=>l(R.target.value),className:"absolute opacity-0 w-0 h-0 p-0 border-none",id:"theme-color-picker"}),w.jsx("label",{htmlFor:"theme-color-picker",style:{backgroundColor:r},className:"inline-block w-8 h-8 rounded-full cursor-pointer align-middle",title:"Change theme color"})]})]})]}),w.jsxs("div",{className:`${t.activeTab==="prompt"?"block":"hidden"} space-y-6`,children:[w.jsxs("div",{children:[w.jsxs("div",{className:"flex justify-between items-center mb-2",children:[w.jsx("label",{htmlFor:"desc-words-slider",className:"text-sm font-medium text-gray-300 flex items-center",children:"Max Description Words"}),w.jsx("span",{className:"text-sm font-semibold text-white bg-gray-700 px-2 py-0.5 rounded-md",children:t.descWords})]}),w.jsx(fr,{id:"desc-words-slider",min:10,max:100,value:t.descWords,onChange:R=>A("descWords",parseInt(R.target.value)),themeColor:r})]}),w.jsx("div",{className:"pt-2 pb-2 border-b border-gray-700",children:w.jsx(Un,{id:"auto-download-csv-prompt",label:"Auto Download CSV",checked:t.autoDownloadCsv,onChange:R=>A("autoDownloadCsv",R.target.checked),tooltip:"Automatically download the CSV file when all prompts have been generated."})}),w.jsxs("div",{className:"space-y-4 pt-4",children:[w.jsx(Un,{id:"toggle-silhouette",label:"SILHOUETTE",checked:t.promptSwitches.silhouette,onChange:R=>C("silhouette",R.target.checked),tooltip:"Use this for silhouette-style images to improve their discoverability in marketplaces."}),w.jsx(Un,{id:"toggle-white-bg-prompt",label:"White Background",checked:t.promptSwitches.whiteBg,onChange:R=>C("whiteBg",R.target.checked),tooltip:"Optimize metadata for isolated objects on white background to improve their discoverability in search results."}),w.jsx(Un,{id:"toggle-transparent-bg-prompt",label:"Transparent Background",checked:t.promptSwitches.transparentBg,onChange:R=>C("transparentBg",R.target.checked),tooltip:"Optimize metadata for isolated objects on transparent background to improve their discoverability in search results."}),w.jsx(Un,{id:"toggle-custom-prompt-prompt",label:"CUSTOM PROMPT",checked:t.promptSwitches.customPrompt,onChange:R=>C("customPrompt",R.target.checked),tooltip:"Create your own custom prompt for AI-generated metadata. This will override the default prompts while still ensuring proper formatting and keyword count."})]}),t.promptSwitches.customPrompt&&w.jsxs("div",{className:"space-y-2",children:[w.jsx("label",{htmlFor:"custom-prompt-entry-prompt",className:"block text-sm font-medium text-gray-300",children:"Custom Prompt Text"}),w.jsx("textarea",{id:"custom-prompt-entry-prompt",value:t.customPromptEntryPrompt,onChange:R=>A("customPromptEntryPrompt",R.target.value),rows:4,className:"bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-[color:var(--theme-color)] focus:border-[color:var(--theme-color)] block w-full p-2.5",placeholder:"Enter your custom prompt here..."})]})]}),w.jsx("div",{className:"mt-6",children:w.jsx("button",{onClick:i,className:"w-full py-2.5 px-5 bg-[color:var(--theme-color)] hover:bg-[color:var(--theme-color-hover)] text-white font-medium rounded-lg shadow-md transition-colors text-sm",children:"Save All Settings"})})]})},mT=t=>new Promise((e,i)=>{const s=new Image,r=URL.createObjectURL(t);s.onload=()=>{URL.revokeObjectURL(r),e(s)},s.onerror=l=>{URL.revokeObjectURL(r),i(l)},s.src=r}),zd=async(t,e,i)=>{const s=await mT(t),r=document.createElement("canvas");let{width:l,height:c}=s;l>e&&(c=e/l*c,l=e),r.width=l,r.height=c;const f=r.getContext("2d");if(!f)throw new Error("Could not get canvas context");const m=t.type==="image/png";return m||(f.fillStyle="#FFFFFF",f.fillRect(0,0,l,c)),f.drawImage(s,0,0,l,c),m?r.toDataURL("image/png"):r.toDataURL("image/jpeg",i)},Rv=async(t,e)=>{const i=await t.text(),s=new Blob([i],{type:"image/svg+xml;charset=utf-8"});return zd(new File([s],t.name,{type:"image/svg+xml"}),e,.6)},Nv=(t,e)=>new Promise((i,s)=>{const r=document.createElement("video");r.preload="metadata";const l=URL.createObjectURL(t);r.onloadeddata=()=>{r.currentTime=Math.min(1,r.duration/2)},r.onseeked=()=>{const c=document.createElement("canvas");let{videoWidth:f,videoHeight:m}=r;f>e&&(m=e/f*m,f=e),c.width=f,c.height=m;const p=c.getContext("2d");if(!p)return s(new Error("Could not get canvas context"));p.fillStyle="#FFFFFF",p.fillRect(0,0,f,m),p.drawImage(r,0,0,f,m);const v=c.toDataURL("image/jpeg",.5);URL.revokeObjectURL(l),i(v)},r.onerror=c=>{URL.revokeObjectURL(l),s(c)},r.src=l}),gT=async t=>{var i;if(/^image\/(jpeg|png|gif)$/.test(t.type))return await zd(t,300,.7);if(t.type==="image/svg+xml")return await Rv(t,300);if(t.type.startsWith("video/"))return await Nv(t,300);if(t.type==="application/postscript"||t.type==="application/pdf")return`https://placehold.co/300x300/ffffff/333333?text=${((i=t.name.split(".").pop())==null?void 0:i.toUpperCase())||"Vector"}`;throw new Error("Unsupported file type for thumbnail generation.")},yT=async t=>{const i=t.file;let s,r="image/jpeg";if(/^image\/(jpeg|png|gif)$/.test(i.type))s=await zd(i,512,.6),i.type==="image/png"&&(r="image/png");else if(i.type==="image/svg+xml")s=await Rv(i,512);else if(i.type.startsWith("video/"))s=await Nv(i,512);else if(i.type==="application/postscript"||i.type==="application/pdf"){const c=document.createElement("canvas");c.width=100,c.height=100;const f=c.getContext("2d");if(!f)throw new Error("Could not create canvas context for placeholder.");f.fillStyle="#FFFFFF",f.fillRect(0,0,100,100),f.fillStyle="#333333",f.font="12px sans-serif",f.textAlign="center",f.fillText("Vector File",50,50),s=c.toDataURL("image/jpeg",.5)}else throw new Error("Unsupported file type for API processing.");const l=s.split(",")[1];if(!l)throw new Error("Failed to extract base64 data from data URL.");return{base64Data:l,mimeType:r}},Ga=21,vT=15,_T=3,hr={themeColor:"#f05a27",selectedStockSite:"General",fileExtension:"default",controls:{activeTab:"metadata",titleLength:60,descLength:150,keywordsCount:30,batchSize:3,autoDownloadCsv:!1,advanceTitle:{transparentBg:!1,whiteBg:!1,vector:!1,illustration:!1},isAdvanceContentHidden:!0,customPromptSelect:"default",customPromptEntry:"",descWords:40,promptSwitches:{silhouette:!1,whiteBg:!1,transparentBg:!1,customPrompt:!1},customPromptEntryPrompt:""}},ST=[{key:"General",name:"General",logo:"/assets/images/stock-logos/general.png"},{key:"adobe-stock",name:"Adobe Stock",logo:"/assets/images/stock-logos/adobe-stock.png"},{key:"shutterstock",name:"Shutterstock",logo:"/assets/images/stock-logos/shutterstock.png"},{key:"freepik",name:"Freepik",logo:"/assets/images/stock-logos/freepik.png"},{key:"getty",name:"Getty Images",logo:"/assets/images/stock-logos/general.png"},{key:"istock",name:"iStock",logo:"/assets/images/stock-logos/general.png"},{key:"dreamstime",name:"Dreamstime",logo:"/assets/images/stock-logos/dreamstime.png"},{key:"vecteezy",name:"Vecteezy",logo:"/assets/images/stock-logos/vecteezy.png"}],ET=()=>w.jsxs("div",{className:"col-span-7 flex flex-col items-center justify-center p-5 text-center",children:[w.jsxs("div",{className:"flex space-x-4 sm:space-x-8 mb-4",children:[w.jsxs("div",{className:"flex flex-col items-center w-16 text-orange-500",children:[w.jsx("i",{className:"bi bi-image",style:{fontSize:"40px"}}),w.jsx("span",{className:"text-sm font-medium mt-1",children:"Image"})]}),w.jsxs("div",{className:"flex flex-col items-center w-16 text-indigo-400",children:[w.jsx("i",{className:"bi bi-film",style:{fontSize:"40px"}}),w.jsx("span",{className:"text-sm font-medium mt-1",children:"Videos"})]}),w.jsxs("div",{className:"flex flex-col items-center w-16 text-pink-500",children:[w.jsx("i",{className:"bi bi-file-earmark-code",style:{fontSize:"40px"}}),w.jsx("span",{className:"text-sm font-medium mt-1",children:"EPS"})]})]}),w.jsxs("p",{className:"mb-2 text-sm text-center px-4 text-gray-400",children:[w.jsx("span",{className:"font-semibold text-gray-300",children:"Drag & drop files here"}),", or ",w.jsx("span",{className:"font-semibold text-teal-400",children:"click to select"})]}),w.jsx("p",{className:"text-xs text-gray-500 px-4 text-center",children:"Supported: JPG, PNG, GIF, MP4, MOV, EPS, AI, PDF"})]}),TT=({fileState:t,onRemove:e})=>{let i=null;return t.status==="compressing"?i=w.jsxs("div",{className:"absolute inset-0 bg-black/70 flex flex-col items-center justify-center text-white z-10",children:[w.jsx("div",{className:"spinner"}),w.jsx("span",{className:"text-xs mt-1.5",children:"Preparing..."})]}):t.status==="processing"?i=w.jsxs("div",{className:"absolute inset-0 bg-[color:var(--theme-color)]/80 flex flex-col items-center justify-center text-white z-10",children:[w.jsx("div",{className:"spinner"}),w.jsx("span",{className:"text-xs mt-1.5",children:"Generating..."})]}):t.status==="error"&&(i=w.jsxs("div",{className:"absolute inset-0 bg-red-800/80 flex flex-col items-center justify-center text-white z-10",children:[w.jsx("i",{className:"bi bi-exclamation-triangle-fill text-2xl"}),w.jsx("span",{className:"text-xs mt-1.5",children:"Error"})]})),w.jsxs("div",{className:"gallery-item group relative w-full aspect-square rounded-lg overflow-hidden bg-[#3b3b3e] shadow-md",children:[w.jsx("img",{src:t.thumbnailDataUrl,alt:t.file.name,className:"w-full h-full object-cover"}),i,w.jsx("button",{onClick:()=>e(t.id),className:"remove-file-btn absolute top-1 right-1 w-6 h-6 bg-black/60 text-white rounded-full flex items-center justify-center text-lg leading-none cursor-pointer opacity-0 group-hover:opacity-100 transition-all hover:bg-red-600 z-20",title:"Remove file",children:""})]})},wT=t=>{const{user:e,onLogin:i,stagedFiles:s,setStagedFiles:r,progress:l,isGenerating:c,isPaused:f,setIsPaused:m,startGeneration:p,generatedMetadata:v,setProgress:_,showToast:S,selectedStockSite:T,onStockSiteChange:A,fileExtension:x,clearAll:C,onExportCsv:R}=t,[D,I]=ye.useState(!1),B=ye.useRef(null),K=s.filter(Z=>Z.status==="ready").length,Y=c||s.length===0||K!==s.length,$=v.length===0,ne=s.length>Ga,X=ne?s.slice(0,Ga-1):s,ue=s.length-(Ga-1),pe=ye.useCallback(async Z=>{const Ee="data:image/gif;base64,R0lGODlhAQABAIAAAMLCwgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==",M=[];for(const j of Array.from(Z))if(/^(image\/(jpeg|png|gif|svg\+xml)|video\/(mp4|quicktime)|application\/(postscript|pdf))$/.test(j.type)){if(!s.some(Q=>Q.file.name===j.name&&Q.file.lastModified===j.lastModified)){const Q=`file-${Date.now()}-${Math.random()}`;M.push({file:j,id:Q,status:"compressing",thumbnailDataUrl:Ee,apiData:null})}}else S(`Unsupported file type: "${j.name}"`,"warning");if(M.length===0)return;r(j=>[...j,...M]);const V=M.length;_({percent:0,status:`Preparing 1/${V}...`,currentFile:1,totalFiles:V});for(let j=0;j<M.length;j++){const Q=M[j];_(ee=>({...ee,status:`Preparing ${j+1}/${V}...`,currentFile:j+1}));try{const ee=await gT(Q.file);r(_e=>_e.map(Je=>Je.id===Q.id?{...Je,thumbnailDataUrl:ee}:Je));const ve=await yT(Q);r(_e=>_e.map(Je=>Je.id===Q.id?{...Je,apiData:ve,status:"ready"}:Je))}catch(ee){console.error(`Processing error for ${Q.file.name}`,ee),r(ve=>ve.map(_e=>_e.id===Q.id?{..._e,status:"error"}:_e)),S(`Failed to prepare ${Q.file.name}.`,"error")}_(ee=>({...ee,percent:(j+1)/V*100}))}setTimeout(()=>{c||_({percent:0,status:"Ready.",currentFile:0,totalFiles:0})},1500)},[s,r,_,S,c]),be=Z=>{Z.preventDefault(),I(!0)},Re=Z=>{Z.preventDefault(),I(!1)},ze=Z=>{Z.preventDefault(),I(!1),pe(Z.dataTransfer.files)},st=()=>{var Z;(Z=B.current)==null||Z.click()},O=Z=>{Z.target.files&&pe(Z.target.files)},J=Z=>{r(Ee=>Ee.filter(M=>M.id!==Z))},re=()=>{m(Z=>!Z)};return w.jsxs("div",{className:"panel-bg p-4 sm:p-6 bg-[#202123] border border-[#363636] rounded-xl shadow-lg",children:[w.jsx("h2",{className:"text-xl font-semibold text-white mb-4 sm:mb-6",children:"Upload Files"}),w.jsx("div",{className:"flex overflow-x-auto gap-2 mb-4 pb-2",children:ST.map(Z=>w.jsxs("button",{onClick:()=>A(Z.key),className:`flex items-center gap-2 px-3 py-1.5 border rounded-lg text-sm font-medium transition-all whitespace-nowrap ${T===Z.key?"text-[color:var(--theme-color)] border-[color:var(--theme-color)] bg-[color:var(--theme-color-active-bg)] shadow-[0_0_5px_var(--theme-color-shadow)]":"text-gray-400 border-gray-600 bg-[#2a2b2e] hover:text-white hover:border-gray-500"}`,children:[w.jsx("img",{src:Z.logo,alt:`${Z.name} Logo`,className:`w-5 h-5 object-contain transition-all ${T!==Z.key?"filter grayscale brightness-125":""}`}),w.jsx("span",{children:Z.name})]},Z.key))}),e?w.jsxs("div",{onDragOver:be,onDragLeave:Re,onDrop:ze,onClick:st,className:`relative w-full border-2 border-dashed rounded-lg transition-colors overflow-hidden cursor-pointer bg-gray-800/20 ${D?"border-[color:var(--theme-color)] bg-[color:var(--theme-color-active-bg)]":"border-gray-600 hover:bg-gray-700/30"}`,children:[w.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-7 gap-3 justify-center items-center p-4 min-h-[200px]",children:s.length===0?w.jsx(ET,{}):w.jsxs(w.Fragment,{children:[X.map(Z=>w.jsx(TT,{fileState:Z,onRemove:J},Z.id)),ne&&w.jsxs("div",{className:"relative w-full aspect-square rounded-lg overflow-hidden bg-[#3b3b3e] shadow-md flex items-center justify-center text-white font-bold text-lg text-center p-2",title:`${ue} more files`,children:[w.jsx("img",{src:s[Ga-1].thumbnailDataUrl,alt:"More files background",className:"absolute inset-0 w-full h-full object-cover filter blur-sm brightness-50"}),w.jsxs("span",{className:"relative z-10",children:["+",ue," More"]})]})]})}),w.jsx("input",{ref:B,onChange:O,type:"file",className:"hidden",multiple:!0,accept:"image/jpeg,image/png,image/gif,image/svg+xml,video/mp4,video/quicktime,application/postscript,application/pdf"})]}):w.jsxs("div",{className:"w-full h-64 border-2 border-dashed border-gray-700 rounded-lg flex flex-col items-center justify-center bg-[#252629] text-gray-400 gap-4",children:[w.jsx("i",{className:"bi bi-lock-fill text-4xl text-gray-500"}),w.jsxs("div",{className:"text-center",children:[w.jsx("p",{className:"text-lg font-medium text-gray-300",children:"Login Required"}),w.jsx("p",{className:"text-sm text-gray-500",children:"Please login to upload and process files."})]}),w.jsx("button",{onClick:i,className:"px-6 py-2 bg-[color:var(--theme-color)] hover:bg-[color:var(--theme-color-hover)] text-white rounded-lg font-medium transition-colors",children:"Login Now"})]}),w.jsxs("div",{className:"mt-6 space-y-2",children:[w.jsxs("div",{className:"flex justify-between text-sm",children:[w.jsx("span",{className:"font-medium text-gray-300 truncate pr-2",children:l.status}),w.jsxs("span",{className:"font-medium text-white flex-shrink-0",children:[Math.round(l.percent),"%"]})]}),w.jsx("div",{className:"w-full bg-gray-600 rounded-full h-2.5",children:w.jsx("div",{className:`h-2.5 rounded-full transition-all duration-300 ${l.percent>0&&l.percent<100?"progress-bar-animated":""}`,style:{width:`${l.percent}%`,backgroundColor:"var(--theme-color)"}})})]}),w.jsxs("div",{className:"mt-8 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3 sm:gap-4",children:[w.jsxs("button",{onClick:C,className:"flex items-center justify-center space-x-2 py-2.5 px-4 sm:px-5 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg shadow-md transition-colors text-sm sm:text-base",children:[w.jsx("i",{className:"bi bi-trash-fill"}),w.jsx("span",{className:"truncate",children:"Clear All"})]}),w.jsx("button",{onClick:re,disabled:!c,className:"flex items-center justify-center space-x-2 py-2.5 px-4 sm:px-5 bg-yellow-500 hover:bg-yellow-600 text-gray-900 font-medium rounded-lg shadow-md transition-colors text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed",children:f?w.jsxs(w.Fragment,{children:[w.jsx("i",{className:"bi bi-play-fill"}),w.jsx("span",{className:"truncate",children:"Resume"})]}):w.jsxs(w.Fragment,{children:[w.jsx("i",{className:"bi bi-pause-fill"}),w.jsx("span",{className:"truncate",children:"Pause"})]})}),w.jsxs("button",{onClick:p,disabled:Y,className:"flex items-center justify-center space-x-2 py-2.5 px-4 sm:px-5 bg-[color:var(--theme-color)] hover:bg-[color:var(--theme-color-hover)] text-white font-medium rounded-lg shadow-md transition-colors text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed",children:[c?w.jsx("div",{className:"spinner-sm"}):w.jsx("i",{className:"bi bi-stars"}),w.jsx("span",{className:"truncate",children:c?"Generating...":`Generate (${K})`})]}),w.jsxs("button",{onClick:R,disabled:$,className:"flex items-center justify-center space-x-2 py-2.5 px-4 sm:px-5 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg shadow-md transition-colors text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed",children:[w.jsx("i",{className:"bi bi-download"}),w.jsx("span",{className:"truncate",children:"Export CSV"})]}),w.jsxs("button",{onClick:()=>{var Z;v.length>0?(Z=document.getElementById("results-container"))==null||Z.scrollIntoView({behavior:"smooth"}):S("No history yet. Generate metadata first.","info")},className:"flex items-center justify-center space-x-2 py-2.5 px-4 sm:px-5 bg-gray-600 hover:bg-gray-700 text-white font-medium rounded-lg shadow-md transition-colors text-sm sm:text-base col-span-2 sm:col-span-1 lg:col-span-1",children:[w.jsx("i",{className:"bi bi-clock-history"}),w.jsx("span",{className:"truncate",children:"History"})]})]})]})},bT=({data:t,index:e,onDelete:i,onRegenerate:s})=>{const[r,l]=ye.useState(!1),[c,f]=ye.useState(null),m=async()=>{l(!0),await s(e),l(!1)},p=(R,D)=>{navigator.clipboard&&navigator.clipboard.writeText(R).then(()=>{f(D),setTimeout(()=>f(null),2e3)})},v=t.description||"No description",_=t.keywords||[],S=_.join(", "),T=t.title||(t.mode==="metadata"?"No title":""),A=t.category||"N/A",x=t.mode==="prompt",C=t.apiData?`data:image/jpeg;base64,${t.apiData.base64Data}`:t.thumbnailUrl;return w.jsxs("div",{className:`result-card flex flex-col ${x?"sm:h-48":""} sm:flex-row gap-4 rounded-lg overflow-hidden shadow-lg bg-[#2a2b2e] p-4`,children:[w.jsxs("div",{className:`result-card-image-container relative ${x?"w-full sm:w-48":"w-full sm:w-1/3"} flex-shrink-0 ${x?"aspect-square":"aspect-[16/10]"} rounded-md overflow-hidden bg-[#3b3b3e] group`,children:[w.jsx("img",{src:C,alt:t.filename,className:"w-full h-full object-cover"}),w.jsx("button",{onClick:()=>i(e),className:"absolute top-2 right-2 w-7 h-7 bg-black/50 text-red-500 rounded-full flex items-center justify-center cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity hover:bg-black/80 hover:text-red-400 z-10",title:"Delete",children:w.jsx("i",{className:"bi bi-trash-fill"})}),w.jsx("div",{className:`absolute inset-0 bg-black/60 flex items-center justify-center transition-opacity duration-300 ${r?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:r?w.jsx("div",{className:"spinner-sm"}):w.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-3 py-1.5 bg-[color:var(--theme-color)] text-white font-semibold text-sm rounded-md hover:bg-[color:var(--theme-color-hover)] transition-colors",children:[w.jsx("i",{className:"bi bi-arrow-clockwise"}),w.jsx("span",{children:"Regenerate"})]})})]}),w.jsxs("div",{className:"result-card-info flex flex-col gap-3 flex-grow min-w-0",children:[!x&&w.jsxs("div",{children:[w.jsxs("h3",{className:"text-sm font-semibold text-gray-400 flex justify-between items-center mb-1",children:[w.jsxs("span",{className:"flex items-center gap-2",children:["Title",w.jsx("button",{onClick:()=>p(T,"title"),title:"Copy title",className:"text-gray-500 hover:text-white transition-colors",children:c==="title"?w.jsx("i",{className:"bi bi-check-lg text-green-500"}):w.jsx("i",{className:"bi bi-clipboard"})})]}),w.jsxs("span",{className:"text-xs font-normal text-gray-500",children:[T.length," Chars"]})]}),w.jsx("p",{className:"result-card-text-content text-sm text-gray-200 line-clamp-2 bg-[#202123] p-2 rounded-md border border-gray-700",title:T,children:T})]}),w.jsxs("div",{className:`flex flex-col ${x?"flex-grow min-h-0":""}`,children:[w.jsxs("h3",{className:"text-sm font-semibold text-gray-400 flex justify-between items-center mb-1",children:[w.jsxs("span",{className:"flex items-center gap-2",children:["Description",!x&&w.jsx("button",{onClick:()=>p(v,"description"),title:"Copy description",className:"text-gray-500 hover:text-white transition-colors",children:c==="description"?w.jsx("i",{className:"bi bi-check-lg text-green-500"}):w.jsx("i",{className:"bi bi-clipboard"})})]}),w.jsxs("span",{className:"text-xs font-normal text-gray-500",children:[v.split(/\s+/).filter(Boolean).length," Words"]})]}),w.jsxs("div",{className:`relative ${x?"flex-grow":""}`,children:[w.jsx("p",{className:`result-card-text-content text-sm text-gray-200 bg-[#202123] p-2 rounded-md border border-gray-700 ${x?"h-full overflow-y-auto pr-10":"line-clamp-3"}`,title:v,children:v}),x&&w.jsx("button",{onClick:()=>p(v,"description"),title:"Copy description",className:"absolute top-2 right-2 z-10 text-gray-400 hover:text-white",children:c==="description"?w.jsx("i",{className:"bi bi-check-lg text-green-500 text-base"}):w.jsx("i",{className:"bi bi-clipboard text-base"})})]})]}),!x&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{children:[w.jsxs("h3",{className:"text-sm font-semibold text-gray-400 flex justify-between items-center mb-1",children:[w.jsxs("span",{className:"flex items-center gap-2",children:["Keywords",w.jsx("button",{onClick:()=>p(S,"keywords"),title:"Copy all keywords",className:"text-gray-500 hover:text-white transition-colors",children:c==="keywords"?w.jsx("i",{className:"bi bi-check-lg text-green-500"}):w.jsx("i",{className:"bi bi-clipboard"})})]}),w.jsx("span",{className:"text-xs font-normal text-gray-500",children:_.length})]}),w.jsx("div",{className:"flex flex-wrap gap-1.5 max-h-20 overflow-y-auto pt-1",children:_.map((R,D)=>w.jsx("span",{className:"keyword-tag bg-[#3b3b3e] text-gray-300 text-xs font-medium px-2.5 py-1 rounded-full",children:R},D))})]}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-sm font-semibold text-gray-400 flex justify-between items-center mb-1",children:w.jsx("span",{children:"Category"})}),w.jsx("div",{className:"flex flex-wrap gap-1.5 pt-1",children:w.jsx("span",{className:"keyword-tag bg-sky-800/70 text-sky-200 text-xs font-medium px-2.5 py-1 rounded-full",children:A})})]})]})]})]})},AT=({metadata:t,setMetadata:e,onRegenerate:i})=>{const s=r=>{e(l=>l.filter((c,f)=>f!==r))};return w.jsxs("div",{id:"results-container",className:"panel-bg p-4 sm:p-6 bg-[#202123] border border-[#363636] rounded-xl shadow-lg",children:[w.jsx("h2",{className:"text-xl font-semibold text-white mb-4 sm:mb-6",children:"Generated Metadata"}),t.length===0?w.jsx("p",{className:"text-gray-400 text-center py-6",children:"Upload files and click 'Generate' to see results here."}):w.jsx("div",{className:"grid grid-cols-1 gap-4",children:t.map((r,l)=>w.jsx(bT,{data:r,index:l,onDelete:s,onRegenerate:i},l)).reverse()})]})},CT=()=>w.jsx("footer",{className:"bg-[#1f2022] border-t border-gray-700/50 mt-12",children:w.jsxs("div",{className:"container mx-auto px-4 lg:px-6 py-6 flex flex-col md:flex-row justify-between items-center text-sm text-gray-400",children:[w.jsx("p",{children:" 2025 Robi Technology. All rights reserved. Robi Technology Privacy Policy"}),w.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[w.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Facebook"}),w.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"YouTube"})]})]})}),xT=({isOpen:t,onClose:e,apiKeys:i,setApiKeys:s,grokApiKeys:r,setGrokApiKeys:l,mistralApiKeys:c,setMistralApiKeys:f,groqCloudApiKeys:m,setGroqCloudApiKeys:p,selectedProvider:v,setSelectedProvider:_,selectedModel:S,setSelectedModel:T,showToast:A,themeColor:x})=>{const[C,R]=ye.useState(""),[D,I]=ye.useState(S),[B,K]=ye.useState({});ye.useEffect(()=>{t&&(I(S),K({}),R(""))},[t,S,v]);const Y=O=>{const J=O.target.value;_(J),localStorage.setItem("aiProvider",J),J==="gemini"?(I("gemini-2.5-flash"),T("gemini-2.5-flash")):J==="grok"?(I("grok-2-vision-1212"),T("grok-2-vision-1212")):J==="mistral"?(I("pixtral-12b-2409"),T("pixtral-12b-2409")):J==="groq"&&(I("llama-3.2-11b-vision-preview"),T("llama-3.2-11b-vision-preview")),K({})},$=O=>{const J=O.target.value;I(J),T(J);let re="geminiModel";v==="grok"&&(re="grokModel"),v==="mistral"&&(re="mistralModel"),v==="groq"&&(re="groqModel"),localStorage.setItem(re,J)};if(!t)return null;let ne=[],X,ue="",pe="";v==="gemini"?(ne=i,X=s,ue="geminiApiKeys",pe="Gemini"):v==="grok"?(ne=r,X=l,ue="grokApiKeys",pe="Grok"):v==="mistral"?(ne=c,X=f,ue="mistralApiKeys",pe="Mistral"):v==="groq"&&(ne=m,X=p,ue="groqCloudApiKeys",pe="Groq Cloud");const be=()=>{if(!C.trim()){A("Please enter an API key.","warning");return}if(ne.includes(C.trim())){A("API Key already exists.","warning");return}const O=[...ne,C.trim()];X(O),localStorage.setItem(ue,JSON.stringify(O)),R(""),A(`${pe} API Key saved.`,"success")},Re=O=>{const J=ne.filter((re,Z)=>Z!==O);X(J),localStorage.setItem(ue,JSON.stringify(J)),A("API Key deleted.","success")},ze=O=>{K(J=>({...J,[O]:!J[O]}))},st=(O,J)=>{let re=!1;O[0]==="#"&&(O=O.slice(1),re=!0);const Z=parseInt(O,16);let Ee=(Z>>16)+J;Ee>255?Ee=255:Ee<0&&(Ee=0);let M=(Z>>8&255)+J;M>255?M=255:M<0&&(M=0);let V=(Z&255)+J;return V>255?V=255:V<0&&(V=0),(re?"#":"")+(V|M<<8|Ee<<16).toString(16).padStart(6,"0")};return w.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100]",onClick:e,children:w.jsxs("div",{className:"w-full max-w-md bg-[#202123] rounded-xl border border-gray-700/80 shadow-2xl flex flex-col",onClick:O=>O.stopPropagation(),children:[w.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-700/80",children:[w.jsx("h2",{className:"text-lg font-semibold text-white",children:"Manage AI Settings"}),w.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white text-2xl leading-none",children:""})]}),w.jsxs("div",{className:"p-6 space-y-6",children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"provider-select",className:"block text-sm font-medium text-gray-300 mb-2",children:"AI Provider"}),w.jsxs("select",{id:"provider-select",value:v,onChange:Y,className:"bg-[#2c2d2f] border border-gray-600 text-white text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",children:[w.jsx("option",{value:"gemini",children:"Google Gemini"}),w.jsx("option",{value:"grok",children:"xAI Grok"}),w.jsx("option",{value:"mistral",children:"Mistral AI"}),w.jsx("option",{value:"groq",children:"Groq Cloud"})]})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"model-select",className:"block text-sm font-medium text-gray-300 mb-2",children:"Select Model"}),w.jsx("select",{id:"model-select",value:D,onChange:$,className:"bg-[#2c2d2f] border border-gray-600 text-white text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",children:v==="gemini"?w.jsxs(w.Fragment,{children:[w.jsx("option",{value:"gemini-2.5-flash",children:"gemini-2.5-flash"}),w.jsx("option",{value:"gemini-2.5-flash-lite",children:"gemini-2.5-flash-lite"}),w.jsx("option",{value:"gemini-robotics-er-1.5-preview",children:"gemini-robotics-er-1.5-preview"})]}):v==="grok"?w.jsxs(w.Fragment,{children:[w.jsx("option",{value:"grok-2-vision-1212",children:"grok-2-vision-1212"}),w.jsx("option",{value:"grok-4-latest",children:"grok-4-latest"}),w.jsx("option",{value:"grok-4-1-fast",children:"grok-4-1-fast"}),w.jsx("option",{value:"grok-4-1-fast-reasoning-latest",children:"grok-4-1-fast-reasoning-latest"})]}):v==="mistral"?w.jsxs(w.Fragment,{children:[w.jsx("option",{value:"pixtral-12b-2409",children:"pixtral-12b-2409 (Vision - Images)"}),w.jsx("option",{value:"open-mistral-nemo",children:"open-mistral-nemo (Text Only)"}),w.jsx("option",{value:"mistral-large-latest",children:"mistral-large-latest (Premium)"}),w.jsx("option",{value:"mistral-medium-latest",children:"mistral-medium-latest (Premium)"}),w.jsx("option",{value:"mistral-small-latest",children:"mistral-small-latest (Premium)"})]}):w.jsxs(w.Fragment,{children:[w.jsx("option",{value:"llama-3.2-11b-vision-preview",children:"Llama 3.2 11b Vision (Faster)"}),w.jsx("option",{value:"llama-3.2-90b-vision-preview",children:"Llama 3.2 90b Vision (Best)"}),w.jsx("option",{value:"meta-llama/llama-4-maverick-17b-128e-instruct",children:"Llama 4 Maverick 17b (Beta)"})]})})]}),w.jsxs("div",{children:[w.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Saved ",pe," API Keys"]}),w.jsx("div",{className:"max-h-36 overflow-y-auto space-y-2 pr-2",children:ne.length===0?w.jsx("div",{className:"flex items-center justify-center p-3 bg-[#2c2d2f] rounded-md",children:w.jsxs("p",{className:"text-sm text-gray-500",children:["No ",pe," keys saved."]})}):ne.map((O,J)=>w.jsxs("div",{className:"flex justify-between items-center p-2 pl-4 bg-[#2c2d2f] rounded-md",children:[w.jsx("span",{className:"text-sm text-gray-300 font-mono flex-grow overflow-hidden overflow-ellipsis whitespace-nowrap pr-2",children:B[J]?O:`${O.slice(-6)}`}),w.jsxs("div",{className:"flex items-center space-x-3 flex-shrink-0",children:[w.jsx("button",{onClick:()=>ze(J),className:"text-gray-400 hover:text-white",title:B[J]?"Hide key":"Show key",children:w.jsx("i",{className:`bi ${B[J]?"bi-eye-slash-fill":"bi-eye-fill"}`})}),w.jsx("button",{onClick:()=>Re(J),className:"text-red-500 hover:text-red-400",title:"Delete key",children:w.jsx("i",{className:"bi bi-trash-fill"})})]})]},J))})]}),w.jsxs("div",{children:[w.jsxs("label",{htmlFor:"new-api-key-input",className:"block text-sm font-medium text-gray-300 mb-2",children:["Enter new ",pe," API key"]}),w.jsxs("div",{className:"flex space-x-3",children:[w.jsx("input",{type:"password",id:"new-api-key-input",value:C,onChange:O=>R(O.target.value),className:"bg-[#2c2d2f] border border-gray-600 text-white text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:`Enter ${pe} API key`}),w.jsx("button",{onClick:be,className:"py-2.5 px-6 text-white font-medium rounded-lg shadow-md transition-colors",style:{backgroundColor:x,"--hover-color":st(x,-20)},onMouseOver:O=>O.currentTarget.style.backgroundColor=O.currentTarget.style.getPropertyValue("--hover-color"),onMouseOut:O=>O.currentTarget.style.backgroundColor=x,children:"Save"})]})]})]}),w.jsxs("div",{className:"p-6 border-t border-gray-700/80",children:[v==="gemini"&&w.jsxs("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-full p-3 bg-blue-600 hover:bg-blue-700 rounded-lg font-semibold text-white transition-colors",children:[w.jsx("i",{className:"bi bi-key-fill mr-2.5"}),"Get Gemini API Key"]}),v==="grok"&&w.jsxs("a",{href:"https://console.x.ai/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-full p-3 bg-gray-700 hover:bg-gray-600 rounded-lg font-semibold text-white transition-colors",children:[w.jsx("i",{className:"bi bi-key-fill mr-2.5"}),"Get xAI API Key"]}),v==="mistral"&&w.jsxs("a",{href:"https://console.mistral.ai/api-keys/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-full p-3 bg-yellow-600 hover:bg-yellow-700 rounded-lg font-semibold text-white transition-colors",children:[w.jsx("i",{className:"bi bi-key-fill mr-2.5"}),"Get Mistral API Key"]}),v==="groq"&&w.jsxs("a",{href:"https://console.groq.com/keys",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-full p-3 bg-orange-600 hover:bg-orange-700 rounded-lg font-semibold text-white transition-colors",children:[w.jsx("i",{className:"bi bi-key-fill mr-2.5"}),"Get Groq API Key"]})]})]})})},Wc=({href:t,className:e,icon:i,label:s,description:r})=>w.jsxs("div",{className:"flex flex-col items-center text-center",children:[w.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:`flex items-center justify-center w-16 h-16 rounded-lg text-3xl text-white hover:opacity-90 transition-opacity ${e}`,"aria-label":s,children:w.jsx("i",{className:`bi ${i}`})}),w.jsx("p",{className:"mt-2 text-sm font-medium text-gray-200",children:s}),w.jsx("p",{className:"text-xs text-gray-500",children:r})]}),RT=({isOpen:t,onClose:e,stats:i,generatedMetadata:s,selectedStockSite:r,fileExtension:l})=>{if(!t)return null;const c=()=>{if(s.length===0)return;const f=x=>`"${String(x??"").replace(/"/g,'""')}"`,m=x=>{if(l==="default"||!l)return x;const C=x.lastIndexOf(".");return C===-1?`${x}.${l}`:`${x.substring(0,C)}.${l}`};let p="";const v=s.length>0?s[0].mode:"metadata";if(v==="prompt"){const x=["serial number","Description"],C=s.filter(R=>R.mode==="prompt").map((R,D)=>[D+1,R.description].map(f).join(","));p=x.join(",")+`
`+C.join(`
`)}else{let x=[],C=[];const R=s.filter(D=>D.mode==="metadata");switch(r){case"adobe-stock":x=["Filename","Title","Keywords","Category"],C=R.map(D=>{var I;return[m(D.filename),D.title,(I=D.keywords)==null?void 0:I.join(", "),D.category].map(f).join(",")});break;case"shutterstock":x=["Filename","Description","Keywords","Categorie"],C=R.map(D=>{var I;return[m(D.filename),D.title,(I=D.keywords)==null?void 0:I.slice(0,50).join(","),D.category].map(f).join(",")});break;case"freepik":x=["File name","Title","Keywords","Prompt","Category"],C=R.map(D=>{var I;return[m(D.filename),D.title,(I=D.keywords)==null?void 0:I.join(", "),"",D.category].map(f).join(",")});break;case"getty":x=["Filename","Title","Description","Keywords","Category"],C=R.map(D=>{var I;return[m(D.filename),D.title,D.description,(I=D.keywords)==null?void 0:I.join(", "),D.category].map(f).join(",")});break;case"istock":x=["filename","title","keywords","category","release"],C=R.map(D=>{var I;return[m(D.filename),D.title,(I=D.keywords)==null?void 0:I.join(", "),D.category,""].map(f).join(",")});break;case"dreamstime":x=["filename","title","keywords","category","exclusive","editorial","model_releases","property_releases","image_id","mr_ids"],C=R.map(D=>{var I;return[m(D.filename),D.title,(I=D.keywords)==null?void 0:I.join(", "),D.category,"","","","","",""].map(f).join(",")});break;case"vecteezy":x=["Filename","Title","Description","Keywords"],C=R.map(D=>{var I;return[m(D.filename),D.title,D.description,(I=D.keywords)==null?void 0:I.join(", ")].map(f).join(",")});break;case"General":default:x=["Filename","Title","Description","Keywords","Category"],C=R.map(D=>{var I;return[m(D.filename),D.title,D.description,(I=D.keywords)==null?void 0:I.join(", "),D.category].map(f).join(",")});break}C.length>0&&(p=x.join(",")+`
`+C.join(`
`))}if(!p.trim())return;const _=new Blob([p],{type:"text/csv;charset=utf-8;"}),S=document.createElement("a"),T=URL.createObjectURL(_);S.setAttribute("href",T);const A=v==="prompt"?`${r}_prompts.csv`:`${r}_metadata.csv`;S.setAttribute("download",A),S.style.visibility="hidden",document.body.appendChild(S),S.click(),document.body.removeChild(S),e()};return w.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-[100]",onClick:e,children:w.jsxs("div",{className:"relative w-full max-w-sm bg-[#202123] rounded-xl border border-gray-700 shadow-2xl p-6 sm:p-8 text-center",onClick:f=>f.stopPropagation(),children:[w.jsx("button",{onClick:e,className:"absolute top-3 right-4 text-gray-500 hover:text-white text-2xl leading-none",children:""}),w.jsx("h2",{className:"text-2xl font-bold text-white mb-1.5",children:"Metadata Generated!"}),w.jsxs("p",{className:"text-gray-400 mb-6",children:["Successfully generated ",i.success," items."]}),w.jsx("h3",{className:"text-base font-medium text-gray-300 mb-4",children:"Connect With Us"}),w.jsxs("div",{className:"grid grid-cols-3 gap-x-4 gap-y-6 mb-8",children:[w.jsx(Wc,{href:"https://www.youtube.com/@robitechnology",className:"bg-[#FF0000]",icon:"bi-youtube",label:"YouTube",description:"Robi Tech"}),w.jsx(Wc,{href:"https://www.facebook.com/groups/809434351197208",className:"bg-[#1877F2]",icon:"bi-facebook",label:"Facebook",description:"Our Group"}),w.jsx(Wc,{href:"https://chat.whatsapp.com/BztzKMpcqHw5Hv2utCgBFN",className:"bg-[#25D366]",icon:"bi-whatsapp",label:"WhatsApp",description:"Join Chat"})]}),w.jsxs("button",{onClick:c,className:"w-full flex items-center justify-center gap-3 py-3 bg-[color:var(--theme-color)] hover:bg-[color:var(--theme-color-hover)] rounded-lg transition-colors text-base font-semibold text-white shadow-lg",children:[w.jsx("i",{className:"bi bi-download"}),w.jsx("span",{children:"Download CSV File"})]})]})})},NT=({isOpen:t,onClose:e})=>t?w.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-[110] backdrop-blur-sm",onClick:e,children:w.jsxs("div",{className:"relative w-full max-w-5xl bg-[#202123] rounded-2xl border border-gray-700 shadow-2xl overflow-hidden mx-4",onClick:s=>s.stopPropagation(),children:[w.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-700 bg-[#2a2b2e]",children:[w.jsxs("div",{className:"flex items-center gap-2 text-white",children:[w.jsx("i",{className:"bi bi-youtube text-red-500 text-xl"}),w.jsx("h3",{className:"font-semibold text-lg",children:"Tutorial Video"})]}),w.jsx("button",{onClick:e,className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-700 text-gray-400 hover:text-white hover:bg-gray-600 transition-colors",children:w.jsx("i",{className:"bi bi-x-lg"})})]}),w.jsx("div",{className:"relative aspect-video w-full bg-black",children:w.jsx("iframe",{className:"absolute inset-0 w-full h-full",src:"https://www.youtube.com/embed/kzSEso_LrEc?autoplay=1",title:"Tutorial Video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})}):null;var ni={},Ba={},cd=function(t,e){return cd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(i[r]=s[r])},cd(t,e)};function Iv(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");cd(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}var al=function(){return al=Object.assign||function(e){for(var i,s=1,r=arguments.length;s<r;s++){i=arguments[s];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},al.apply(this,arguments)};function ps(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]]);return i}function Mv(t,e,i,s){var r=arguments.length,l=r<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,i):s,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(t,e,i,s);else for(var f=t.length-1;f>=0;f--)(c=t[f])&&(l=(r<3?c(l):r>3?c(e,i,l):c(e,i))||l);return r>3&&l&&Object.defineProperty(e,i,l),l}function kv(t,e){return function(i,s){e(i,s,t)}}function Dv(t,e,i,s,r,l){function c(R){if(R!==void 0&&typeof R!="function")throw new TypeError("Function expected");return R}for(var f=s.kind,m=f==="getter"?"get":f==="setter"?"set":"value",p=!e&&t?s.static?t:t.prototype:null,v=e||(p?Object.getOwnPropertyDescriptor(p,s.name):{}),_,S=!1,T=i.length-1;T>=0;T--){var A={};for(var x in s)A[x]=x==="access"?{}:s[x];for(var x in s.access)A.access[x]=s.access[x];A.addInitializer=function(R){if(S)throw new TypeError("Cannot add initializers after decoration has completed");l.push(c(R||null))};var C=(0,i[T])(f==="accessor"?{get:v.get,set:v.set}:v[m],A);if(f==="accessor"){if(C===void 0)continue;if(C===null||typeof C!="object")throw new TypeError("Object expected");(_=c(C.get))&&(v.get=_),(_=c(C.set))&&(v.set=_),(_=c(C.init))&&r.unshift(_)}else(_=c(C))&&(f==="field"?r.unshift(_):v[m]=_)}p&&Object.defineProperty(p,s.name,v),S=!0}function Uv(t,e,i){for(var s=arguments.length>2,r=0;r<e.length;r++)i=s?e[r].call(t,i):e[r].call(t);return s?i:void 0}function Ov(t){return typeof t=="symbol"?t:"".concat(t)}function Pv(t,e,i){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:i?"".concat(i," ",e):e})}function Lv(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function oe(t,e,i,s){function r(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function f(v){try{p(s.next(v))}catch(_){c(_)}}function m(v){try{p(s.throw(v))}catch(_){c(_)}}function p(v){v.done?l(v.value):r(v.value).then(f,m)}p((s=s.apply(t,e||[])).next())})}function qv(t,e){var i={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,r,l,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=f(0),c.throw=f(1),c.return=f(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function f(p){return function(v){return m([p,v])}}function m(p){if(s)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(i=0)),i;)try{if(s=1,r&&(l=p[0]&2?r.return:p[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,p[1])).done)return l;switch(r=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return i.label++,{value:p[1],done:!1};case 5:i.label++,r=p[1],p=[0];continue;case 7:p=i.ops.pop(),i.trys.pop();continue;default:if(l=i.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){i=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){i.label=p[1];break}if(p[0]===6&&i.label<l[1]){i.label=l[1],l=p;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(p);break}l[2]&&i.ops.pop(),i.trys.pop();continue}p=e.call(t,i)}catch(v){p=[6,v],r=0}finally{s=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var Tl=Object.create?(function(t,e,i,s){s===void 0&&(s=i);var r=Object.getOwnPropertyDescriptor(e,i);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,s,r)}):(function(t,e,i,s){s===void 0&&(s=i),t[s]=e[i]});function Gv(t,e){for(var i in t)i!=="default"&&!Object.prototype.hasOwnProperty.call(e,i)&&Tl(e,t,i)}function ll(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],s=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Fd(t,e){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var s=i.call(t),r,l=[],c;try{for(;(e===void 0||e-- >0)&&!(r=s.next()).done;)l.push(r.value)}catch(f){c={error:f}}finally{try{r&&!r.done&&(i=s.return)&&i.call(s)}finally{if(c)throw c.error}}return l}function Bv(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Fd(arguments[e]));return t}function Hv(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;for(var s=Array(t),r=0,e=0;e<i;e++)for(var l=arguments[e],c=0,f=l.length;c<f;c++,r++)s[r]=l[c];return s}function Vv(t,e,i){if(i||arguments.length===2)for(var s=0,r=e.length,l;s<r;s++)(l||!(s in e))&&(l||(l=Array.prototype.slice.call(e,0,s)),l[s]=e[s]);return t.concat(l||Array.prototype.slice.call(e))}function fs(t){return this instanceof fs?(this.v=t,this):new fs(t)}function zv(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=i.apply(t,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(T){return function(A){return Promise.resolve(A).then(T,_)}}function f(T,A){s[T]&&(r[T]=function(x){return new Promise(function(C,R){l.push([T,x,C,R])>1||m(T,x)})},A&&(r[T]=A(r[T])))}function m(T,A){try{p(s[T](A))}catch(x){S(l[0][3],x)}}function p(T){T.value instanceof fs?Promise.resolve(T.value.v).then(v,_):S(l[0][2],T)}function v(T){m("next",T)}function _(T){m("throw",T)}function S(T,A){T(A),l.shift(),l.length&&m(l[0][0],l[0][1])}}function Fv(t){var e,i;return e={},s("next"),s("throw",function(r){throw r}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(r,l){e[r]=t[r]?function(c){return(i=!i)?{value:fs(t[r](c)),done:!1}:l?l(c):c}:l}}function $v(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof ll=="function"?ll(t):t[Symbol.iterator](),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(l){i[l]=t[l]&&function(c){return new Promise(function(f,m){c=t[l](c),r(f,m,c.done,c.value)})}}function r(l,c,f,m){Promise.resolve(m).then(function(p){l({value:p,done:f})},c)}}function Jv(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var IT=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},dd=function(t){return dd=Object.getOwnPropertyNames||function(e){var i=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(i[i.length]=s);return i},dd(t)};function Kv(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var i=dd(t),s=0;s<i.length;s++)i[s]!=="default"&&Tl(e,t,i[s]);return IT(e,t),e}function jv(t){return t&&t.__esModule?t:{default:t}}function Yv(t,e,i,s){if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?s:i==="a"?s.call(t):s?s.value:e.get(t)}function Xv(t,e,i,s,r){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?r.call(t,i):r?r.value=i:e.set(t,i),i}function Qv(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Wv(t,e,i){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var s,r;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=e[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=e[Symbol.dispose],i&&(r=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");r&&(s=function(){try{r.call(this)}catch(l){return Promise.reject(l)}}),t.stack.push({value:e,dispose:s,async:i})}else i&&t.stack.push({async:!0});return e}var MT=typeof SuppressedError=="function"?SuppressedError:function(t,e,i){var s=new Error(i);return s.name="SuppressedError",s.error=t,s.suppressed=e,s};function Zv(t){function e(l){t.error=t.hasError?new MT(l,t.error,"An error was suppressed during disposal."):l,t.hasError=!0}var i,s=0;function r(){for(;i=t.stack.pop();)try{if(!i.async&&s===1)return s=0,t.stack.push(i),Promise.resolve().then(r);if(i.dispose){var l=i.dispose.call(i.value);if(i.async)return s|=2,Promise.resolve(l).then(r,function(c){return e(c),r()})}else s|=1}catch(c){e(c)}if(s===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return r()}function e0(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(i,s,r,l,c){return s?e?".jsx":".js":r&&(!l||!c)?i:r+l+"."+c.toLowerCase()+"js"}):t}const kT={__extends:Iv,__assign:al,__rest:ps,__decorate:Mv,__param:kv,__esDecorate:Dv,__runInitializers:Uv,__propKey:Ov,__setFunctionName:Pv,__metadata:Lv,__awaiter:oe,__generator:qv,__createBinding:Tl,__exportStar:Gv,__values:ll,__read:Fd,__spread:Bv,__spreadArrays:Hv,__spreadArray:Vv,__await:fs,__asyncGenerator:zv,__asyncDelegator:Fv,__asyncValues:$v,__makeTemplateObject:Jv,__importStar:Kv,__importDefault:jv,__classPrivateFieldGet:Yv,__classPrivateFieldSet:Xv,__classPrivateFieldIn:Qv,__addDisposableResource:Wv,__disposeResources:Zv,__rewriteRelativeImportExtension:e0},DT=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Wv,get __assign(){return al},__asyncDelegator:Fv,__asyncGenerator:zv,__asyncValues:$v,__await:fs,__awaiter:oe,__classPrivateFieldGet:Yv,__classPrivateFieldIn:Qv,__classPrivateFieldSet:Xv,__createBinding:Tl,__decorate:Mv,__disposeResources:Zv,__esDecorate:Dv,__exportStar:Gv,__extends:Iv,__generator:qv,__importDefault:jv,__importStar:Kv,__makeTemplateObject:Jv,__metadata:Lv,__param:kv,__propKey:Ov,__read:Fd,__rest:ps,__rewriteRelativeImportExtension:e0,__runInitializers:Uv,__setFunctionName:Pv,__spread:Bv,__spreadArray:Vv,__spreadArrays:Hv,__values:ll,default:kT},Symbol.toStringTag,{value:"Module"})),UT=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);let wl=class extends Error{constructor(e,i="FunctionsError",s){super(e),this.name=i,this.context=s}},t0=class extends wl{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},fd=class extends wl{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},hd=class extends wl{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var ul;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(ul||(ul={}));class OT{constructor(e,{headers:i={},customFetch:s,region:r=ul.Any}={}){this.url=e,this.headers=i,this.region=r,this.fetch=UT(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return oe(this,arguments,void 0,function*(i,s={}){var r;let l,c;try{const{headers:f,method:m,body:p,signal:v,timeout:_}=s;let S={},{region:T}=s;T||(T=this.region);const A=new URL(`${this.url}/${i}`);T&&T!=="any"&&(S["x-region"]=T,A.searchParams.set("forceFunctionRegion",T));let x;p&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(S["Content-Type"]="application/octet-stream",x=p):typeof p=="string"?(S["Content-Type"]="text/plain",x=p):typeof FormData<"u"&&p instanceof FormData?x=p:(S["Content-Type"]="application/json",x=JSON.stringify(p)):x=p;let C=v;_&&(c=new AbortController,l=setTimeout(()=>c.abort(),_),v?(C=c.signal,v.addEventListener("abort",()=>c.abort())):C=c.signal);const R=yield this.fetch(A.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},S),this.headers),f),body:x,signal:C}).catch(K=>{throw new t0(K)}),D=R.headers.get("x-relay-error");if(D&&D==="true")throw new fd(R);if(!R.ok)throw new hd(R);let I=((r=R.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),B;return I==="application/json"?B=yield R.json():I==="application/octet-stream"||I==="application/pdf"?B=yield R.blob():I==="text/event-stream"?B=R:I==="multipart/form-data"?B=yield R.formData():B=yield R.text(),{data:B,error:null,response:R}}catch(f){return{data:null,error:f,response:f instanceof hd||f instanceof fd?f.context:void 0}}finally{l&&clearTimeout(l)}})}}const PT=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return ul},FunctionsClient:OT,FunctionsError:wl,FunctionsFetchError:t0,FunctionsHttpError:hd,FunctionsRelayError:fd},Symbol.toStringTag,{value:"Module"})),n0=wr(PT);var kt={};const ms=wr(DT);var Ha={},Va={},za={},Fa={},$a={},Ja={},yg;function i0(){if(yg)return Ja;yg=1,Object.defineProperty(Ja,"__esModule",{value:!0});class t extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}}return Ja.default=t,Ja}var vg;function o0(){if(vg)return $a;vg=1,Object.defineProperty($a,"__esModule",{value:!0});const e=ms.__importDefault(i0());let i=class{constructor(r){var l,c;this.shouldThrowOnError=!1,this.method=r.method,this.url=r.url,this.headers=new Headers(r.headers),this.schema=r.schema,this.body=r.body,this.shouldThrowOnError=(l=r.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=r.signal,this.isMaybeSingle=(c=r.isMaybeSingle)!==null&&c!==void 0?c:!1,r.fetch?this.fetch=r.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(r,l){return this.headers=new Headers(this.headers),this.headers.set(r,l),this}then(r,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let f=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var p,v,_,S;let T=null,A=null,x=null,C=m.status,R=m.statusText;if(m.ok){if(this.method!=="HEAD"){const K=await m.text();K===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?A=K:A=JSON.parse(K))}const I=(v=this.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),B=(_=m.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");I&&B&&B.length>1&&(x=parseInt(B[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(A)&&(A.length>1?(T={code:"PGRST116",details:`Results contain ${A.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},A=null,x=null,C=406,R="Not Acceptable"):A.length===1?A=A[0]:A=null)}else{const I=await m.text();try{T=JSON.parse(I),Array.isArray(T)&&m.status===404&&(A=[],T=null,C=200,R="OK")}catch{m.status===404&&I===""?(C=204,R="No Content"):T={message:I}}if(T&&this.isMaybeSingle&&(!((S=T==null?void 0:T.details)===null||S===void 0)&&S.includes("0 rows"))&&(T=null,C=200,R="OK"),T&&this.shouldThrowOnError)throw new e.default(T)}return{error:T,data:A,count:x,status:C,statusText:R}});return this.shouldThrowOnError||(f=f.catch(m=>{var p,v,_,S,T,A;let x="";const C=m==null?void 0:m.cause;if(C){const R=(p=C==null?void 0:C.message)!==null&&p!==void 0?p:"",D=(v=C==null?void 0:C.code)!==null&&v!==void 0?v:"";x=`${(_=m==null?void 0:m.name)!==null&&_!==void 0?_:"FetchError"}: ${m==null?void 0:m.message}`,x+=`

Caused by: ${(S=C==null?void 0:C.name)!==null&&S!==void 0?S:"Error"}: ${R}`,D&&(x+=` (${D})`),C!=null&&C.stack&&(x+=`
${C.stack}`)}else x=(T=m==null?void 0:m.stack)!==null&&T!==void 0?T:"";return{error:{message:`${(A=m==null?void 0:m.name)!==null&&A!==void 0?A:"FetchError"}: ${m==null?void 0:m.message}`,details:x,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),f.then(r,l)}returns(){return this}overrideTypes(){return this}};return $a.default=i,$a}var _g;function s0(){if(_g)return Fa;_g=1,Object.defineProperty(Fa,"__esModule",{value:!0});const e=ms.__importDefault(o0());let i=class extends e.default{select(r){let l=!1;const c=(r??"*").split("").map(f=>/\s/.test(f)&&!l?"":(f==='"'&&(l=!l),f)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(r,{ascending:l=!0,nullsFirst:c,foreignTable:f,referencedTable:m=f}={}){const p=m?`${m}.order`:"order",v=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${v?`${v},`:""}${r}.${l?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:l,referencedTable:c=l}={}){const f=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(f,`${r}`),this}range(r,l,{foreignTable:c,referencedTable:f=c}={}){const m=typeof f>"u"?"offset":`${f}.offset`,p=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(m,`${r}`),this.url.searchParams.set(p,`${l-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:r=!1,verbose:l=!1,settings:c=!1,buffers:f=!1,wal:m=!1,format:p="text"}={}){var v;const _=[r?"analyze":null,l?"verbose":null,c?"settings":null,f?"buffers":null,m?"wal":null].filter(Boolean).join("|"),S=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${S}"; options=${_};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(r){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${r}`),this}};return Fa.default=i,Fa}var Sg;function $d(){if(Sg)return za;Sg=1,Object.defineProperty(za,"__esModule",{value:!0});const e=ms.__importDefault(s0()),i=new RegExp("[,()]");let s=class extends e.default{eq(l,c){return this.url.searchParams.append(l,`eq.${c}`),this}neq(l,c){return this.url.searchParams.append(l,`neq.${c}`),this}gt(l,c){return this.url.searchParams.append(l,`gt.${c}`),this}gte(l,c){return this.url.searchParams.append(l,`gte.${c}`),this}lt(l,c){return this.url.searchParams.append(l,`lt.${c}`),this}lte(l,c){return this.url.searchParams.append(l,`lte.${c}`),this}like(l,c){return this.url.searchParams.append(l,`like.${c}`),this}likeAllOf(l,c){return this.url.searchParams.append(l,`like(all).{${c.join(",")}}`),this}likeAnyOf(l,c){return this.url.searchParams.append(l,`like(any).{${c.join(",")}}`),this}ilike(l,c){return this.url.searchParams.append(l,`ilike.${c}`),this}ilikeAllOf(l,c){return this.url.searchParams.append(l,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(l,c){return this.url.searchParams.append(l,`ilike(any).{${c.join(",")}}`),this}regexMatch(l,c){return this.url.searchParams.append(l,`match.${c}`),this}regexIMatch(l,c){return this.url.searchParams.append(l,`imatch.${c}`),this}is(l,c){return this.url.searchParams.append(l,`is.${c}`),this}isDistinct(l,c){return this.url.searchParams.append(l,`isdistinct.${c}`),this}in(l,c){const f=Array.from(new Set(c)).map(m=>typeof m=="string"&&i.test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(l,`in.(${f})`),this}contains(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cs.{${c.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(c)}`),this}containedBy(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cd.{${c.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(c)}`),this}rangeGt(l,c){return this.url.searchParams.append(l,`sr.${c}`),this}rangeGte(l,c){return this.url.searchParams.append(l,`nxl.${c}`),this}rangeLt(l,c){return this.url.searchParams.append(l,`sl.${c}`),this}rangeLte(l,c){return this.url.searchParams.append(l,`nxr.${c}`),this}rangeAdjacent(l,c){return this.url.searchParams.append(l,`adj.${c}`),this}overlaps(l,c){return typeof c=="string"?this.url.searchParams.append(l,`ov.${c}`):this.url.searchParams.append(l,`ov.{${c.join(",")}}`),this}textSearch(l,c,{config:f,type:m}={}){let p="";m==="plain"?p="pl":m==="phrase"?p="ph":m==="websearch"&&(p="w");const v=f===void 0?"":`(${f})`;return this.url.searchParams.append(l,`${p}fts${v}.${c}`),this}match(l){return Object.entries(l).forEach(([c,f])=>{this.url.searchParams.append(c,`eq.${f}`)}),this}not(l,c,f){return this.url.searchParams.append(l,`not.${c}.${f}`),this}or(l,{foreignTable:c,referencedTable:f=c}={}){const m=f?`${f}.or`:"or";return this.url.searchParams.append(m,`(${l})`),this}filter(l,c,f){return this.url.searchParams.append(l,`${c}.${f}`),this}};return za.default=s,za}var Eg;function r0(){if(Eg)return Va;Eg=1,Object.defineProperty(Va,"__esModule",{value:!0});const e=ms.__importDefault($d());let i=class{constructor(r,{headers:l={},schema:c,fetch:f}){this.url=r,this.headers=new Headers(l),this.schema=c,this.fetch=f}select(r,l){const{head:c=!1,count:f}=l??{},m=c?"HEAD":"GET";let p=!1;const v=(r??"*").split("").map(_=>/\s/.test(_)&&!p?"":(_==='"'&&(p=!p),_)).join("");return this.url.searchParams.set("select",v),f&&this.headers.append("Prefer",`count=${f}`),new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(r,{count:l,defaultToNull:c=!0}={}){var f;const m="POST";if(l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const p=r.reduce((v,_)=>v.concat(Object.keys(_)),[]);if(p.length>0){const v=[...new Set(p)].map(_=>`"${_}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}upsert(r,{onConflict:l,ignoreDuplicates:c=!1,count:f,defaultToNull:m=!0}={}){var p;const v="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),f&&this.headers.append("Prefer",`count=${f}`),m||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const _=r.reduce((S,T)=>S.concat(Object.keys(T)),[]);if(_.length>0){const S=[...new Set(_)].map(T=>`"${T}"`);this.url.searchParams.set("columns",S.join(","))}}return new e.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(r,{count:l}={}){var c;const f="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:r}={}){var l;const c="DELETE";return r&&this.headers.append("Prefer",`count=${r}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};return Va.default=i,Va}var Tg;function LT(){if(Tg)return Ha;Tg=1,Object.defineProperty(Ha,"__esModule",{value:!0});const t=ms,e=t.__importDefault(r0()),i=t.__importDefault($d());let s=class a0{constructor(l,{headers:c={},schema:f,fetch:m}={}){this.url=l,this.headers=new Headers(c),this.schemaName=f,this.fetch=m}from(l){if(!l||typeof l!="string"||l.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const c=new URL(`${this.url}/${l}`);return new e.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new a0(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,c={},{head:f=!1,get:m=!1,count:p}={}){var v;let _;const S=new URL(`${this.url}/rpc/${l}`);let T;f||m?(_=f?"HEAD":"GET",Object.entries(c).filter(([x,C])=>C!==void 0).map(([x,C])=>[x,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([x,C])=>{S.searchParams.append(x,C)})):(_="POST",T=c);const A=new Headers(this.headers);return p&&A.set("Prefer",`count=${p}`),new i.default({method:_,url:S,headers:A,schema:this.schemaName,body:T,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}};return Ha.default=s,Ha}var wg;function l0(){if(wg)return kt;wg=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.PostgrestError=kt.PostgrestBuilder=kt.PostgrestTransformBuilder=kt.PostgrestFilterBuilder=kt.PostgrestQueryBuilder=kt.PostgrestClient=void 0;const t=ms,e=t.__importDefault(LT());kt.PostgrestClient=e.default;const i=t.__importDefault(r0());kt.PostgrestQueryBuilder=i.default;const s=t.__importDefault($d());kt.PostgrestFilterBuilder=s.default;const r=t.__importDefault(s0());kt.PostgrestTransformBuilder=r.default;const l=t.__importDefault(o0());kt.PostgrestBuilder=l.default;const c=t.__importDefault(i0());return kt.PostgrestError=c.default,kt.default={PostgrestClient:e.default,PostgrestQueryBuilder:i.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:r.default,PostgrestBuilder:l.default,PostgrestError:c.default},kt}class u0{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const i=process.versions;if(i&&i.node){const s=i.node,r=parseInt(s.replace(/^v/,"").split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let i=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(i+=`

Suggested solution: ${e.workaround}`),new Error(i)}static createWebSocket(e,i){const s=this.getWebSocketConstructor();return new s(e,i)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const qT="2.87.1",GT=`realtime-js/${qT}`,c0="1.0.0",BT="2.0.0",bg=c0,pd=1e4,HT=1e3,VT=100;var ao;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ao||(ao={}));var pt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(pt||(pt={}));var bn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(bn||(bn={}));var md;(function(t){t.websocket="websocket"})(md||(md={}));var lo;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(lo||(lo={}));class zT{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,i){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return i(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return i(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var i;return this._isArrayBuffer((i=e.payload)===null||i===void 0?void 0:i.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var i,s;const r=(s=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,r)}_encodeJsonUserBroadcastPush(e){var i,s;const r=(s=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&s!==void 0?s:{},c=new TextEncoder().encode(JSON.stringify(r)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(e,i,s){var r,l;const c=e.topic,f=(r=e.ref)!==null&&r!==void 0?r:"",m=(l=e.join_ref)!==null&&l!==void 0?l:"",p=e.payload.event,v=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},_=Object.keys(v).length===0?"":JSON.stringify(v);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`metadata length ${_.length} exceeds maximum of 255`);const S=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+f.length+c.length+p.length+_.length,T=new ArrayBuffer(this.HEADER_LENGTH+S);let A=new DataView(T),x=0;A.setUint8(x++,this.KINDS.userBroadcastPush),A.setUint8(x++,m.length),A.setUint8(x++,f.length),A.setUint8(x++,c.length),A.setUint8(x++,p.length),A.setUint8(x++,_.length),A.setUint8(x++,i),Array.from(m,R=>A.setUint8(x++,R.charCodeAt(0))),Array.from(f,R=>A.setUint8(x++,R.charCodeAt(0))),Array.from(c,R=>A.setUint8(x++,R.charCodeAt(0))),Array.from(p,R=>A.setUint8(x++,R.charCodeAt(0))),Array.from(_,R=>A.setUint8(x++,R.charCodeAt(0)));var C=new Uint8Array(T.byteLength+s.byteLength);return C.set(new Uint8Array(T),0),C.set(new Uint8Array(s),T.byteLength),C.buffer}decode(e,i){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return i(s)}if(typeof e=="string"){const s=JSON.parse(e),[r,l,c,f,m]=s;return i({join_ref:r,ref:l,topic:c,event:f,payload:m})}return i({})}_binaryDecode(e){const i=new DataView(e),s=i.getUint8(0),r=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,i,r)}}_decodeUserBroadcast(e,i,s){const r=i.getUint8(1),l=i.getUint8(2),c=i.getUint8(3),f=i.getUint8(4);let m=this.HEADER_LENGTH+4;const p=s.decode(e.slice(m,m+r));m=m+r;const v=s.decode(e.slice(m,m+l));m=m+l;const _=s.decode(e.slice(m,m+c));m=m+c;const S=e.slice(m,e.byteLength),T=f===this.JSON_ENCODING?JSON.parse(s.decode(S)):S,A={type:this.BROADCAST_EVENT,event:v,payload:T};return c>0&&(A.meta=JSON.parse(_)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:A}}_isArrayBuffer(e){var i;return e instanceof ArrayBuffer||((i=e==null?void 0:e.constructor)===null||i===void 0?void 0:i.name)==="ArrayBuffer"}_pick(e,i){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([s])=>i.includes(s)))}}class d0{constructor(e,i){this.callback=e,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var $e;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})($e||($e={}));const Ag=(t,e,i={})=>{var s;const r=(s=i.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((l,c)=>(l[c]=FT(c,t,e,r),l),{}):{}},FT=(t,e,i,s)=>{const r=e.find(f=>f.name===t),l=r==null?void 0:r.type,c=i[t];return l&&!s.includes(l)?f0(l,c):gd(c)},f0=(t,e)=>{if(t.charAt(0)==="_"){const i=t.slice(1,t.length);return jT(e,i)}switch(t){case $e.bool:return $T(e);case $e.float4:case $e.float8:case $e.int2:case $e.int4:case $e.int8:case $e.numeric:case $e.oid:return JT(e);case $e.json:case $e.jsonb:return KT(e);case $e.timestamp:return YT(e);case $e.abstime:case $e.date:case $e.daterange:case $e.int4range:case $e.int8range:case $e.money:case $e.reltime:case $e.text:case $e.time:case $e.timestamptz:case $e.timetz:case $e.tsrange:case $e.tstzrange:return gd(e);default:return gd(e)}},gd=t=>t,$T=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},JT=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},KT=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},jT=(t,e)=>{if(typeof t!="string")return t;const i=t.length-1,s=t[i];if(t[0]==="{"&&s==="}"){let l;const c=t.slice(1,i);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(f=>f0(e,f))}return t},YT=t=>typeof t=="string"?t.replace(" ","T"):t,h0=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Zc{constructor(e,i,s={},r=pd){this.channel=e,this.event=i,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,i){var s;return this._hasReceived(e)&&i((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:i}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(i))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var yd;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(yd||(yd={}));let p0=class el{constructor(e,i){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(i==null?void 0:i.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},r=>{const{onJoin:l,onLeave:c,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=el.syncState(this.state,r,l,c),this.pendingDiffs.forEach(m=>{this.state=el.syncDiff(this.state,m,l,c)}),this.pendingDiffs=[],f()}),this.channel._on(s.diff,{},r=>{const{onJoin:l,onLeave:c,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=el.syncDiff(this.state,r,l,c),f())}),this.onJoin((r,l,c)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:l,newPresences:c})}),this.onLeave((r,l,c)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,i,s,r){const l=this.cloneDeep(e),c=this.transformState(i),f={},m={};return this.map(l,(p,v)=>{c[p]||(m[p]=v)}),this.map(c,(p,v)=>{const _=l[p];if(_){const S=v.map(C=>C.presence_ref),T=_.map(C=>C.presence_ref),A=v.filter(C=>T.indexOf(C.presence_ref)<0),x=_.filter(C=>S.indexOf(C.presence_ref)<0);A.length>0&&(f[p]=A),x.length>0&&(m[p]=x)}else f[p]=v}),this.syncDiff(l,{joins:f,leaves:m},s,r)}static syncDiff(e,i,s,r){const{joins:l,leaves:c}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(l,(f,m)=>{var p;const v=(p=e[f])!==null&&p!==void 0?p:[];if(e[f]=this.cloneDeep(m),v.length>0){const _=e[f].map(T=>T.presence_ref),S=v.filter(T=>_.indexOf(T.presence_ref)<0);e[f].unshift(...S)}s(f,v,m)}),this.map(c,(f,m)=>{let p=e[f];if(!p)return;const v=m.map(_=>_.presence_ref);p=p.filter(_=>v.indexOf(_.presence_ref)<0),e[f]=p,r(f,p,m),p.length===0&&delete e[f]}),e}static map(e,i){return Object.getOwnPropertyNames(e).map(s=>i(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((i,s)=>{const r=e[s];return"metas"in r?i[s]=r.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):i[s]=r,i},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var vd;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(vd||(vd={}));var ls;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(ls||(ls={}));var On;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(On||(On={}));const XT=pt;let m0=class yr{constructor(e,i={config:{}},s){var r,l;if(this.topic=e,this.params=i,this.socket=s,this.bindings={},this.state=pt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new Zc(this,bn.join,this.params,this.timeout),this.rejoinTimer=new d0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pt.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(bn.reply,{},(c,f)=>{this._trigger(this._replyEventName(f),c)}),this.presence=new p0(this),this.broadcastEndpointURL=h0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(r=this.params.config)===null||r===void 0?void 0:r.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,i=this.timeout){var s,r,l;if(this.socket.isConnected()||this.socket.connect(),this.state==pt.closed){const{config:{broadcast:c,presence:f,private:m}}=this.params,p=(r=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(T=>T.filter))!==null&&r!==void 0?r:[],v=!!this.bindings[ls.PRESENCE]&&this.bindings[ls.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,_={},S={broadcast:c,presence:Object.assign(Object.assign({},f),{enabled:v}),postgres_changes:p,private:m};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(T=>e==null?void 0:e(On.CHANNEL_ERROR,T)),this._onClose(()=>e==null?void 0:e(On.CLOSED)),this.updateJoinPayload(Object.assign({config:S},_)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:T})=>{var A;if(this.socket._isManualToken()||this.socket.setAuth(),T===void 0){e==null||e(On.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,C=(A=x==null?void 0:x.length)!==null&&A!==void 0?A:0,R=[];for(let D=0;D<C;D++){const I=x[D],{filter:{event:B,schema:K,table:Y,filter:$}}=I,ne=T&&T[D];if(ne&&ne.event===B&&yr.isFilterValueEqual(ne.schema,K)&&yr.isFilterValueEqual(ne.table,Y)&&yr.isFilterValueEqual(ne.filter,$))R.push(Object.assign(Object.assign({},I),{id:ne.id}));else{this.unsubscribe(),this.state=pt.errored,e==null||e(On.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=R,e&&e(On.SUBSCRIBED);return}}).receive("error",T=>{this.state=pt.errored,e==null||e(On.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(T).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(On.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,i={}){return await this.send({type:"presence",event:"track",payload:e},i.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,i,s){return this.state===pt.joined&&e===ls.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,i,s)}async httpSend(e,i,s={}){var r;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(i==null)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:i,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);if(f.status===202)return{success:!0};let m=f.statusText;try{const p=await f.json();m=p.error||p.message||m}catch{}return Promise.reject(new Error(m))}async send(e,i={}){var s,r;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:c}=e,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(s=i.timeout)!==null&&s!==void 0?s:this.timeout);return await((r=p.body)===null||r===void 0?void 0:r.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,f,m;const p=this._push(e.type,e,i.timeout||this.timeout);e.type==="broadcast"&&!(!((m=(f=(c=this.params)===null||c===void 0?void 0:c.config)===null||f===void 0?void 0:f.broadcast)===null||m===void 0)&&m.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=pt.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(bn.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new Zc(this,bn.leave,{},e),s.receive("ok",()=>{i(),r("ok")}).receive("timeout",()=>{i(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=pt.closed,this.bindings={}}async _fetchWithTimeout(e,i,s){const r=new AbortController,l=setTimeout(()=>r.abort(),s),c=await this.socket.fetch(e,Object.assign(Object.assign({},i),{signal:r.signal}));return clearTimeout(l),c}_push(e,i,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Zc(this,e,i,s);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>VT){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(e,i,s){return i}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,i,s){var r,l;const c=e.toLocaleLowerCase(),{close:f,error:m,leave:p,join:v}=bn;if(s&&[f,m,p,v].indexOf(c)>=0&&s!==this._joinRef())return;let S=this._onMessage(c,i,s);if(i&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(T=>{var A,x,C;return((A=T.filter)===null||A===void 0?void 0:A.event)==="*"||((C=(x=T.filter)===null||x===void 0?void 0:x.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===c}).map(T=>T.callback(S,s)):(l=this.bindings[c])===null||l===void 0||l.filter(T=>{var A,x,C,R,D,I;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in T){const B=T.id,K=(A=T.filter)===null||A===void 0?void 0:A.event;return B&&((x=i.ids)===null||x===void 0?void 0:x.includes(B))&&(K==="*"||(K==null?void 0:K.toLocaleLowerCase())===((C=i.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const B=(D=(R=T==null?void 0:T.filter)===null||R===void 0?void 0:R.event)===null||D===void 0?void 0:D.toLocaleLowerCase();return B==="*"||B===((I=i==null?void 0:i.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return T.type.toLocaleLowerCase()===c}).map(T=>{if(typeof S=="object"&&"ids"in S){const A=S.data,{schema:x,table:C,commit_timestamp:R,type:D,errors:I}=A;S=Object.assign(Object.assign({},{schema:x,table:C,commit_timestamp:R,eventType:D,new:{},old:{},errors:I}),this._getPayloadRecords(A))}T.callback(S,s)})}_isClosed(){return this.state===pt.closed}_isJoined(){return this.state===pt.joined}_isJoining(){return this.state===pt.joining}_isLeaving(){return this.state===pt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,i,s){const r=e.toLocaleLowerCase(),l={type:r,filter:i,callback:s};return this.bindings[r]?this.bindings[r].push(l):this.bindings[r]=[l],this}_off(e,i){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(r=>{var l;return!(((l=r.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&yr.isEqual(r.filter,i))})),this}static isEqual(e,i){if(Object.keys(e).length!==Object.keys(i).length)return!1;for(const s in e)if(e[s]!==i[s])return!1;return!0}static isFilterValueEqual(e,i){return(e??void 0)===(i??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(bn.close,{},e)}_onError(e){this._on(bn.error,{},i=>e(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const i={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(i.new=Ag(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(i.old=Ag(e.columns,e.old_record)),i}};const ed=()=>{},Ka={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},QT=[1e3,2e3,5e3,1e4],WT=1e4,ZT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let ew=class{constructor(e,i){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=pd,this.transport=null,this.heartbeatIntervalMs=Ka.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ed,this.ref=0,this.reconnectTimer=null,this.vsn=bg,this.logger=ed,this.conn=null,this.sendBuffer=[],this.serializer=new zT,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=r=>r?(...l)=>r(...l):(...l)=>fetch(...l),!(!((s=i==null?void 0:i.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${e}/${md.websocket}`,this.httpEndpoint=h0(e),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i==null?void 0:i.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=u0.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const i=e.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,i??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const i=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const e=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,i,s){this.logger(e,i,s)}connectionState(){switch(this.conn&&this.conn.readyState){case ao.connecting:return lo.Connecting;case ao.open:return lo.Open;case ao.closing:return lo.Closing;default:return lo.Closed}}isConnected(){return this.connectionState()===lo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,i={config:{}}){const s=`realtime:${e}`,r=this.getChannels().find(l=>l.topic===s);if(r)return r;{const l=new m0(`realtime:${e}`,i,this);return this.channels.push(l),l}}push(e){const{topic:i,event:s,payload:r,ref:l}=e,c=()=>{this.encode(e,f=>{var m;(m=this.conn)===null||m===void 0||m.send(f)})};this.log("push",`${i} ${s} (${l})`,r),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(HT,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},Ka.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let i=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${e}"`),i.unsubscribe())}_remove(e){this.channels=this.channels.filter(i=>i.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply")try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}i.ref&&i.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:r,payload:l,ref:c}=i,f=c?`(${c})`:"",m=l.status||"";this.log("receive",`${m} ${s} ${r} ${f}`.trim(),l),this.channels.filter(p=>p._isMember(s)).forEach(p=>p._trigger(r,l,c)),this._triggerStateCallbacks("message",i)})}_clearTimer(e){var i;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===ao.open||this.conn.readyState===ao.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(i=>{this.log("error","error waiting for auth on connect",i),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this.workerRef.terminate()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var i;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(bn.error))}_appendParams(e,i){if(Object.keys(i).length===0)return e;const s=e.match(/\?/)?"&":"?",r=new URLSearchParams(i);return`${e}${s}${r}`}_workerObjectUrl(e){let i;if(e)i=e;else{const s=new Blob([ZT],{type:"application/javascript"});i=URL.createObjectURL(s)}return i}_setConnectionState(e,i=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(e=null){let i,s=!1;if(e)i=e,s=!0;else if(this.accessToken)try{i=await this.accessToken()}catch(r){this.log("error","Error fetching access token from callback",r),i=this.accessTokenValue}else i=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(r=>{const l={access_token:i,version:GT};i&&r.updateJoinPayload(l),r.joinedOnce&&r._isJoined()&&r._push(bn.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(i=>{this.log("error",`Error setting auth in ${e}`,i)})}_triggerStateCallbacks(e,i){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(i)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new d0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ka.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var i,s,r,l,c,f,m,p,v,_,S,T;switch(this.transport=(i=e==null?void 0:e.transport)!==null&&i!==void 0?i:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:pd,this.heartbeatIntervalMs=(r=e==null?void 0:e.heartbeatIntervalMs)!==null&&r!==void 0?r:Ka.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(f=e==null?void 0:e.heartbeatCallback)!==null&&f!==void 0?f:ed,this.vsn=(m=e==null?void 0:e.vsn)!==null&&m!==void 0?m:bg,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e==null?void 0:e.reconnectAfterMs)!==null&&p!==void 0?p:(A=>QT[A-1]||WT),this.vsn){case c0:this.encode=(v=e==null?void 0:e.encode)!==null&&v!==void 0?v:((A,x)=>x(JSON.stringify(A))),this.decode=(_=e==null?void 0:e.decode)!==null&&_!==void 0?_:((A,x)=>x(JSON.parse(A)));break;case BT:this.encode=(S=e==null?void 0:e.encode)!==null&&S!==void 0?S:this.serializer.encode.bind(this.serializer),this.decode=(T=e==null?void 0:e.decode)!==null&&T!==void 0?T:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}};const tw=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:XT,get REALTIME_LISTEN_TYPES(){return ls},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return vd},get REALTIME_PRESENCE_LISTEN_EVENTS(){return yd},get REALTIME_SUBSCRIBE_STATES(){return On},RealtimeChannel:m0,RealtimeClient:ew,RealtimePresence:p0,WebSocketFactory:u0},Symbol.toStringTag,{value:"Module"})),g0=wr(tw);class br extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function We(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class y0 extends br{constructor(e,i,s){super(e),this.name="StorageApiError",this.status=i,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class cl extends br{constructor(e,i){super(e),this.name="StorageUnknownError",this.originalError=i}}const Jd=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),nw=()=>Response,_d=t=>{if(Array.isArray(t))return t.map(i=>_d(i));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([i,s])=>{const r=i.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[r]=_d(s)}),e},iw=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},ow=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),td=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},sw=(t,e,i)=>oe(void 0,void 0,void 0,function*(){const s=yield nw();t instanceof s&&!(i!=null&&i.noResolveJson)?t.json().then(r=>{const l=t.status||500,c=(r==null?void 0:r.statusCode)||l+"";e(new y0(td(r),l,c))}).catch(r=>{e(new cl(td(r),r))}):e(new cl(td(t),t))}),rw=(t,e,i,s)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!s?r:(iw(s)?(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(s)):r.body=s,e!=null&&e.duplex&&(r.duplex=e.duplex),Object.assign(Object.assign({},r),i))};function Ar(t,e,i,s,r,l){return oe(this,void 0,void 0,function*(){return new Promise((c,f)=>{t(i,rw(e,s,r,l)).then(m=>{if(!m.ok)throw m;return s!=null&&s.noResolveJson?m:m.json()}).then(m=>c(m)).catch(m=>sw(m,f,s))})})}function Er(t,e,i,s){return oe(this,void 0,void 0,function*(){return Ar(t,"GET",e,i,s)})}function wn(t,e,i,s,r){return oe(this,void 0,void 0,function*(){return Ar(t,"POST",e,s,r,i)})}function Sd(t,e,i,s,r){return oe(this,void 0,void 0,function*(){return Ar(t,"PUT",e,s,r,i)})}function aw(t,e,i,s){return oe(this,void 0,void 0,function*(){return Ar(t,"HEAD",e,Object.assign(Object.assign({},i),{noResolveJson:!0}),s)})}function Kd(t,e,i,s,r){return oe(this,void 0,void 0,function*(){return Ar(t,"DELETE",e,s,r,i)})}class lw{constructor(e,i){this.downloadFn=e,this.shouldThrowOnError=i}then(e,i){return this.execute().then(e,i)}execute(){return oe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(We(e))return{data:null,error:e};throw e}})}}var v0;class uw{constructor(e,i){this.downloadFn=e,this.shouldThrowOnError=i,this[v0]="BlobDownloadBuilder",this.promise=null}asStream(){return new lw(this.downloadFn,this.shouldThrowOnError)}then(e,i){return this.getPromise().then(e,i)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return oe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(We(e))return{data:null,error:e};throw e}})}}v0=Symbol.toStringTag;const cw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Cg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class dw{constructor(e,i={},s,r){this.shouldThrowOnError=!1,this.url=e,this.headers=i,this.bucketId=s,this.fetch=Jd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,i,s,r){return oe(this,void 0,void 0,function*(){try{let l;const c=Object.assign(Object.assign({},Cg),r);let f=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const m=c.metadata;typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),m&&l.append("metadata",this.encodeMetadata(m)),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.has("cacheControl")||l.append("cacheControl",c.cacheControl),m&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(m))):(l=s,f["cache-control"]=`max-age=${c.cacheControl}`,f["content-type"]=c.contentType,m&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(m))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!c.duplex&&(c.duplex="half")),r!=null&&r.headers&&(f=Object.assign(Object.assign({},f),r.headers));const p=this._removeEmptyFolders(i),v=this._getFinalPath(p),_=yield(e=="PUT"?Sd:wn)(this.fetch,`${this.url}/object/${v}`,l,Object.assign({headers:f},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:p,id:_.Id,fullPath:_.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(We(l))return{data:null,error:l};throw l}})}upload(e,i,s){return oe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,i,s)})}uploadToSignedUrl(e,i,s,r){return oe(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),c=this._getFinalPath(l),f=new URL(this.url+`/object/upload/sign/${c}`);f.searchParams.set("token",i);try{let m;const p=Object.assign({upsert:Cg.upsert},r),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&s instanceof Blob?(m=new FormData,m.append("cacheControl",p.cacheControl),m.append("",s)):typeof FormData<"u"&&s instanceof FormData?(m=s,m.append("cacheControl",p.cacheControl)):(m=s,v["cache-control"]=`max-age=${p.cacheControl}`,v["content-type"]=p.contentType);const _=yield Sd(this.fetch,f.toString(),m,{headers:v});return{data:{path:l,fullPath:_.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(We(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(e,i){return oe(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=Object.assign({},this.headers);i!=null&&i.upsert&&(r["x-upsert"]="true");const l=yield wn(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:r}),c=new URL(this.url+l.url),f=c.searchParams.get("token");if(!f)throw new br("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:f},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(We(s))return{data:null,error:s};throw s}})}update(e,i,s){return oe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,i,s)})}move(e,i,s){return oe(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:i,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}})}copy(e,i,s){return oe(this,void 0,void 0,function*(){try{return{data:{path:(yield wn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:i,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}})}createSignedUrl(e,i,s){return oe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),l=yield wn(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:i},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const c=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${c}`)},{data:l,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}})}createSignedUrls(e,i,s){return oe(this,void 0,void 0,function*(){try{const r=yield wn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:i,paths:e},{headers:this.headers}),l=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:r.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${l}`):null})),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}})}download(e,i){const r=typeof(i==null?void 0:i.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((i==null?void 0:i.transform)||{}),c=l?`?${l}`:"",f=this._getFinalPath(e),m=()=>Er(this.fetch,`${this.url}/${r}/${f}${c}`,{headers:this.headers,noResolveJson:!0});return new uw(m,this.shouldThrowOnError)}info(e){return oe(this,void 0,void 0,function*(){const i=this._getFinalPath(e);try{const s=yield Er(this.fetch,`${this.url}/object/info/${i}`,{headers:this.headers});return{data:_d(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(We(s))return{data:null,error:s};throw s}})}exists(e){return oe(this,void 0,void 0,function*(){const i=this._getFinalPath(e);try{return yield aw(this.fetch,`${this.url}/object/${i}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(We(s)&&s instanceof cl){const r=s.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,i){const s=this._getFinalPath(e),r=[],l=i!=null&&i.download?`download=${i.download===!0?"":i.download}`:"";l!==""&&r.push(l);const f=typeof(i==null?void 0:i.transform)<"u"?"render/image":"object",m=this.transformOptsToQueryString((i==null?void 0:i.transform)||{});m!==""&&r.push(m);let p=r.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${s}${p}`)}}}remove(e){return oe(this,void 0,void 0,function*(){try{return{data:yield Kd(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(We(i))return{data:null,error:i};throw i}})}list(e,i,s){return oe(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},cw),i),{prefix:e||""});return{data:yield wn(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}})}listV2(e,i){return oe(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield wn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},i),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(We(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const i=[];return e.width&&i.push(`width=${e.width}`),e.height&&i.push(`height=${e.height}`),e.resize&&i.push(`resize=${e.resize}`),e.format&&i.push(`format=${e.format}`),e.quality&&i.push(`quality=${e.quality}`),i.join("&")}}const _0="2.87.1",S0={"X-Client-Info":`storage-js/${_0}`};class fw{constructor(e,i={},s,r){this.shouldThrowOnError=!1;const l=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},S0),i),this.fetch=Jd(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return oe(this,void 0,void 0,function*(){try{const i=this.listBucketOptionsToQueryString(e);return{data:yield Er(this.fetch,`${this.url}/bucket${i}`,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(We(i))return{data:null,error:i};throw i}})}getBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:yield Er(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(We(i))return{data:null,error:i};throw i}})}createBucket(e){return oe(this,arguments,void 0,function*(i,s={public:!1}){try{return{data:yield wn(this.fetch,`${this.url}/bucket`,{id:i,name:i,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}})}updateBucket(e,i){return oe(this,void 0,void 0,function*(){try{return{data:yield Sd(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(We(s))return{data:null,error:s};throw s}})}emptyBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(We(i))return{data:null,error:i};throw i}})}deleteBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:yield Kd(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(We(i))return{data:null,error:i};throw i}})}listBucketOptionsToQueryString(e){const i={};return e&&("limit"in e&&(i.limit=String(e.limit)),"offset"in e&&(i.offset=String(e.offset)),e.search&&(i.search=e.search),e.sortColumn&&(i.sortColumn=e.sortColumn),e.sortOrder&&(i.sortOrder=e.sortOrder)),Object.keys(i).length>0?"?"+new URLSearchParams(i).toString():""}}var Tr=class extends Error{constructor(t,e){var i;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((i=e.icebergType)==null?void 0:i.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function hw(t,e,i){const s=new URL(e,t);if(i)for(const[r,l]of Object.entries(i))l!==void 0&&s.searchParams.set(r,l);return s.toString()}async function pw(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function mw(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:i,path:s,query:r,body:l,headers:c}){const f=hw(t.baseUrl,s,r),m=await pw(t.auth),p=await e(f,{method:i,headers:{...l?{"Content-Type":"application/json"}:{},...m,...c},body:l?JSON.stringify(l):void 0}),v=await p.text(),_=(p.headers.get("content-type")||"").includes("application/json"),S=_&&v?JSON.parse(v):v;if(!p.ok){const T=_?S:void 0,A=T==null?void 0:T.error;throw new Tr((A==null?void 0:A.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:A==null?void 0:A.type,icebergCode:A==null?void 0:A.code,details:T})}return{status:p.status,headers:p.headers,data:S}}}}function ja(t){return t.join("")}var gw=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:ja(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(t,e){const i={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:i})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ja(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ja(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ja(t.namespace)}`}),!0}catch(e){if(e instanceof Tr&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(i){if(i instanceof Tr&&i.status===409)return;throw i}}};function Zo(t){return t.join("")}var yw=class{constructor(t,e="",i){this.client=t,this.prefix=e,this.accessDelegation=i}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Zo(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const i={};return this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Zo(t.namespace)}/tables`,body:e,headers:i})).data.metadata}async updateTable(t,e){const i=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Zo(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":i.data["metadata-location"],metadata:i.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Zo(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Zo(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Zo(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(i){if(i instanceof Tr&&i.status===404)return!1;throw i}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(i){if(i instanceof Tr&&i.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw i}}},vw=class{constructor(t){var s;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const i=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=mw({baseUrl:i,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(s=t.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new gw(this.client,e),this.tableOps=new yw(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class E0{constructor(e,i={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},S0),i),this.fetch=Jd(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(We(i))return{data:null,error:i};throw i}})}listBuckets(e){return oe(this,void 0,void 0,function*(){try{const i=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&i.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&i.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&i.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&i.set("sortOrder",e.sortOrder),e!=null&&e.search&&i.set("search",e.search);const s=i.toString(),r=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield Er(this.fetch,r,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(We(i))return{data:null,error:i};throw i}})}deleteBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:yield Kd(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(We(i))return{data:null,error:i};throw i}})}from(e){if(!ow(e))throw new br("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const i=new vw({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>oe(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(i,{get(l,c){const f=l[c];return typeof f!="function"?f:(...m)=>oe(this,void 0,void 0,function*(){try{return{data:yield f.apply(l,m),error:null}}catch(p){if(s)throw p;return{data:null,error:p}}})}})}}const jd={"X-Client-Info":`storage-js/${_0}`,"Content-Type":"application/json"};class Yd extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Yt(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class tl extends Yd{constructor(e,i,s){super(e),this.name="StorageVectorsApiError",this.status=i,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class T0 extends Yd{constructor(e,i){super(e),this.name="StorageVectorsUnknownError",this.originalError=i}}var Ed;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Ed||(Ed={}));const bl=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),_w=()=>Response,w0=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Sw=t=>Array.from(new Float32Array(t)),Ew=(t,e)=>{if(e!==void 0&&t.float32.length!==e)throw new Error(`Vector dimension mismatch: expected ${e}, got ${t.float32.length}`)},xg=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Tw=(t,e,i)=>oe(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(i!=null&&i.noResolveJson)){const r=t.status||500,l=t;if(typeof l.json=="function")l.json().then(c=>{const f=(c==null?void 0:c.statusCode)||(c==null?void 0:c.code)||r+"";e(new tl(xg(c),r,f))}).catch(()=>{const c=r+"",f=l.statusText||`HTTP ${r} error`;e(new tl(f,r,c))});else{const c=r+"",f=l.statusText||`HTTP ${r} error`;e(new tl(f,r,c))}}else e(new T0(xg(t),t))}),ww=(t,e,i,s)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return s?(w0(s)?(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(s)):r.body=s,Object.assign(Object.assign({},r),i)):r};function bw(t,e,i,s,r,l){return oe(this,void 0,void 0,function*(){return new Promise((c,f)=>{t(i,ww(e,s,r,l)).then(m=>{if(!m.ok)throw m;if(s!=null&&s.noResolveJson)return m;const p=m.headers.get("content-type");return!p||!p.includes("application/json")?{}:m.json()}).then(m=>c(m)).catch(m=>Tw(m,f,s))})})}function on(t,e,i,s,r){return oe(this,void 0,void 0,function*(){return bw(t,"POST",e,s,r,i)})}class b0{constructor(e,i={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},jd),i),this.fetch=bl(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return oe(this,void 0,void 0,function*(){try{return{data:(yield on(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Yt(i))return{data:null,error:i};throw i}})}getIndex(e,i){return oe(this,void 0,void 0,function*(){try{return{data:yield on(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:i},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Yt(s))return{data:null,error:s};throw s}})}listIndexes(e){return oe(this,void 0,void 0,function*(){try{return{data:yield on(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Yt(i))return{data:null,error:i};throw i}})}deleteIndex(e,i){return oe(this,void 0,void 0,function*(){try{return{data:(yield on(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:i},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Yt(s))return{data:null,error:s};throw s}})}}class A0{constructor(e,i={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},jd),i),this.fetch=bl(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return oe(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield on(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Yt(i))return{data:null,error:i};throw i}})}getVectors(e){return oe(this,void 0,void 0,function*(){try{return{data:yield on(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Yt(i))return{data:null,error:i};throw i}})}listVectors(e){return oe(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield on(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Yt(i))return{data:null,error:i};throw i}})}queryVectors(e){return oe(this,void 0,void 0,function*(){try{return{data:yield on(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Yt(i))return{data:null,error:i};throw i}})}deleteVectors(e){return oe(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield on(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Yt(i))return{data:null,error:i};throw i}})}}class C0{constructor(e,i={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},jd),i),this.fetch=bl(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:(yield on(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Yt(i))return{data:null,error:i};throw i}})}getBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:yield on(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Yt(i))return{data:null,error:i};throw i}})}listBuckets(){return oe(this,arguments,void 0,function*(e={}){try{return{data:yield on(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Yt(i))return{data:null,error:i};throw i}})}deleteBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:(yield on(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Yt(i))return{data:null,error:i};throw i}})}}class x0 extends C0{constructor(e,i={}){super(e,i.headers||{},i.fetch)}from(e){return new R0(this.url,this.headers,e,this.fetch)}createBucket(e){const i=Object.create(null,{createBucket:{get:()=>super.createBucket}});return oe(this,void 0,void 0,function*(){return i.createBucket.call(this,e)})}getBucket(e){const i=Object.create(null,{getBucket:{get:()=>super.getBucket}});return oe(this,void 0,void 0,function*(){return i.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return oe(this,arguments,void 0,function*(i={}){return e.listBuckets.call(this,i)})}deleteBucket(e){const i=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return oe(this,void 0,void 0,function*(){return i.deleteBucket.call(this,e)})}}class R0 extends b0{constructor(e,i,s,r){super(e,i,r),this.vectorBucketName=s}createIndex(e){const i=Object.create(null,{createIndex:{get:()=>super.createIndex}});return oe(this,void 0,void 0,function*(){return i.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return oe(this,arguments,void 0,function*(i={}){return e.listIndexes.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const i=Object.create(null,{getIndex:{get:()=>super.getIndex}});return oe(this,void 0,void 0,function*(){return i.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const i=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return oe(this,void 0,void 0,function*(){return i.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new N0(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class N0 extends A0{constructor(e,i,s,r,l){super(e,i,l),this.vectorBucketName=s,this.indexName=r}putVectors(e){const i=Object.create(null,{putVectors:{get:()=>super.putVectors}});return oe(this,void 0,void 0,function*(){return i.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const i=Object.create(null,{getVectors:{get:()=>super.getVectors}});return oe(this,void 0,void 0,function*(){return i.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return oe(this,arguments,void 0,function*(i={}){return e.listVectors.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const i=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return oe(this,void 0,void 0,function*(){return i.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const i=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return oe(this,void 0,void 0,function*(){return i.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Aw extends fw{constructor(e,i={},s,r){super(e,i,s,r)}from(e){return new dw(this.url,this.headers,e,this.fetch)}get vectors(){return new x0(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new E0(this.url+"/iceberg",this.headers,this.fetch)}}const Cw=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:E0,StorageApiError:y0,StorageClient:Aw,StorageError:br,StorageUnknownError:cl,StorageVectorsApiError:tl,StorageVectorsClient:x0,StorageVectorsError:Yd,get StorageVectorsErrorCode(){return Ed},StorageVectorsUnknownError:T0,VectorBucketApi:C0,VectorBucketScope:R0,VectorDataApi:A0,VectorIndexApi:b0,VectorIndexScope:N0,isPlainObject:w0,isStorageError:We,isStorageVectorsError:Yt,normalizeToFloat32:Sw,resolveFetch:bl,resolveResponse:_w,validateVectorDimension:Ew},Symbol.toStringTag,{value:"Module"})),xw=wr(Cw);var nd={},pr={},Rg;function Rw(){return Rg||(Rg=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.version=void 0,pr.version="2.87.1"),pr}var Ng;function Nw(){return Ng||(Ng=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_REALTIME_OPTIONS=t.DEFAULT_AUTH_OPTIONS=t.DEFAULT_DB_OPTIONS=t.DEFAULT_GLOBAL_OPTIONS=t.DEFAULT_HEADERS=void 0;const e=Rw();let i="";typeof Deno<"u"?i="deno":typeof document<"u"?i="web":typeof navigator<"u"&&navigator.product==="ReactNative"?i="react-native":i="node",t.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${i}/${e.version}`},t.DEFAULT_GLOBAL_OPTIONS={headers:t.DEFAULT_HEADERS},t.DEFAULT_DB_OPTIONS={schema:"public"},t.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},t.DEFAULT_REALTIME_OPTIONS={}})(nd)),nd}var id={},Ig;function Iw(){return Ig||(Ig=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fetchWithAuth=t.resolveHeadersConstructor=t.resolveFetch=void 0;const e=r=>r?(...l)=>r(...l):(...l)=>fetch(...l);t.resolveFetch=e;const i=()=>Headers;t.resolveHeadersConstructor=i;const s=(r,l,c)=>{const f=(0,t.resolveFetch)(c),m=(0,t.resolveHeadersConstructor)();return async(p,v)=>{var _;const S=(_=await l())!==null&&_!==void 0?_:r;let T=new m(v==null?void 0:v.headers);return T.has("apikey")||T.set("apikey",r),T.has("Authorization")||T.set("Authorization",`Bearer ${S}`),f(p,Object.assign(Object.assign({},v),{headers:T}))}};t.fetchWithAuth=s})(id)),id}var ii={},Mg;function Mw(){if(Mg)return ii;Mg=1,Object.defineProperty(ii,"__esModule",{value:!0}),ii.isBrowser=void 0,ii.uuid=t,ii.ensureTrailingSlash=e,ii.applySettingDefaults=s,ii.validateSupabaseUrl=r;function t(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(l){var c=Math.random()*16|0,f=l=="x"?c:c&3|8;return f.toString(16)})}function e(l){return l.endsWith("/")?l:l+"/"}const i=()=>typeof window<"u";ii.isBrowser=i;function s(l,c){var f,m;const{db:p,auth:v,realtime:_,global:S}=l,{db:T,auth:A,realtime:x,global:C}=c,R={db:Object.assign(Object.assign({},T),p),auth:Object.assign(Object.assign({},A),v),realtime:Object.assign(Object.assign({},x),_),storage:{},global:Object.assign(Object.assign(Object.assign({},C),S),{headers:Object.assign(Object.assign({},(f=C==null?void 0:C.headers)!==null&&f!==void 0?f:{}),(m=S==null?void 0:S.headers)!==null&&m!==void 0?m:{})}),accessToken:async()=>""};return l.accessToken?R.accessToken=l.accessToken:delete R.accessToken,R}function r(l){const c=l==null?void 0:l.trim();if(!c)throw new Error("supabaseUrl is required.");if(!c.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(e(c))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return ii}var mr={};const I0="2.87.1",is=30*1e3,Td=3,od=Td*is,kw="http://localhost:9999",Dw="supabase.auth.token",Uw={"X-Client-Info":`gotrue-js/${I0}`},wd="X-Supabase-Api-Version",M0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ow=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Pw=600*1e3;let hs=class extends Error{constructor(e,i,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=s}};function le(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}let k0=class extends hs{constructor(e,i,s){super(e,i,s),this.name="AuthApiError",this.status=i,this.code=s}};function D0(t){return le(t)&&t.name==="AuthApiError"}let ki=class extends hs{constructor(e,i){super(e),this.name="AuthUnknownError",this.originalError=i}},si=class extends hs{constructor(e,i,s,r){super(e,s,r),this.name=i,this.status=s}},jt=class extends si{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function U0(t){return le(t)&&t.name==="AuthSessionMissingError"}let io=class extends si{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},vr=class extends si{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},_r=class extends si{constructor(e,i=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function O0(t){return le(t)&&t.name==="AuthImplicitGrantRedirectError"}let bd=class extends si{constructor(e,i=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},dl=class extends si{constructor(e,i){super(e,"AuthRetryableFetchError",i,void 0)}};function nl(t){return le(t)&&t.name==="AuthRetryableFetchError"}let Ad=class extends si{constructor(e,i,s){super(e,"AuthWeakPasswordError",i,"weak_password"),this.reasons=s}};function Lw(t){return le(t)&&t.name==="AuthWeakPasswordError"}let fl=class extends si{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};const hl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),kg=` 	
\r=`.split(""),qw=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<kg.length;e+=1)t[kg[e].charCodeAt(0)]=-2;for(let e=0;e<hl.length;e+=1)t[hl[e].charCodeAt(0)]=e;return t})();function Dg(t,e,i){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;i(hl[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;i(hl[s]),e.queuedBits-=6}}function P0(t,e,i){const s=qw[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)i(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Ug(t){const e=[],i=c=>{e.push(String.fromCodePoint(c))},s={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},l=c=>{Hw(c,s,i)};for(let c=0;c<t.length;c+=1)P0(t.charCodeAt(c),r,l);return e.join("")}function Gw(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Bw(t,e){for(let i=0;i<t.length;i+=1){let s=t.charCodeAt(i);if(s>55295&&s<=56319){const r=(s-55296)*1024&65535;s=(t.charCodeAt(i+1)-56320&65535|r)+65536,i+=1}Gw(s,e)}}function Hw(t,e,i){if(e.utf8seq===0){if(t<=127){i(t);return}for(let s=1;s<6;s+=1)if((t>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&i(e.codepoint)}}function us(t){const e=[],i={queue:0,queuedBits:0},s=r=>{e.push(r)};for(let r=0;r<t.length;r+=1)P0(t.charCodeAt(r),i,s);return new Uint8Array(e)}function Vw(t){const e=[];return Bw(t,i=>e.push(i)),new Uint8Array(e)}function uo(t){const e=[],i={queue:0,queuedBits:0},s=r=>{e.push(r)};return t.forEach(r=>Dg(r,i,s)),Dg(null,i,s),e.join("")}function zw(t){return Math.round(Date.now()/1e3)+t}function Fw(){return Symbol("auth-callback")}const It=()=>typeof window<"u"&&typeof document<"u",to={tested:!1,writable:!1},L0=()=>{if(!It())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(to.tested)return to.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),to.tested=!0,to.writable=!0}catch{to.tested=!0,to.writable=!1}return to.writable};function $w(t){const e={},i=new URL(t);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((r,l)=>{e[l]=r})}catch{}return i.searchParams.forEach((s,r)=>{e[r]=s}),e}const q0=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Jw=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",os=async(t,e,i)=>{await t.setItem(e,JSON.stringify(i))},no=async(t,e)=>{const i=await t.getItem(e);if(!i)return null;try{return JSON.parse(i)}catch{return i}},Nt=async(t,e)=>{await t.removeItem(e)};class Al{constructor(){this.promise=new Al.promiseConstructor((e,i)=>{this.resolve=e,this.reject=i})}}Al.promiseConstructor=Promise;function sd(t){const e=t.split(".");if(e.length!==3)throw new fl("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!Ow.test(e[s]))throw new fl("JWT not in base64url format");return{header:JSON.parse(Ug(e[0])),payload:JSON.parse(Ug(e[1])),signature:us(e[2]),raw:{header:e[0],payload:e[1]}}}async function Kw(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function jw(t,e){return new Promise((s,r)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await t(l);if(!e(l,null,c)){s(c);return}}catch(c){if(!e(l,c)){r(c);return}}})()})}function Yw(t){return("0"+t.toString(16)).substr(-2)}function Xw(){const e=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=i.length;let r="";for(let l=0;l<56;l++)r+=i.charAt(Math.floor(Math.random()*s));return r}return crypto.getRandomValues(e),Array.from(e,Yw).join("")}async function Qw(t){const i=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",i),r=new Uint8Array(s);return Array.from(r).map(l=>String.fromCharCode(l)).join("")}async function Ww(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const i=await Qw(t);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function es(t,e,i=!1){const s=Xw();let r=s;i&&(r+="/PASSWORD_RECOVERY"),await os(t,`${e}-code-verifier`,r);const l=await Ww(s);return[l,s===l?"plain":"s256"]}const Zw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function eb(t){const e=t.headers.get(wd);if(!e||!e.match(Zw))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function tb(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function nb(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ib=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ts(t){if(!ib.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function rd(){const t={};return new Proxy(t,{get:(e,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const s=i.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ob(t,e){return new Proxy(t,{get:(i,s,r)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(i,s,r)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(i,s,r)}})}function Og(t){return JSON.parse(JSON.stringify(t))}const oo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),sb=[502,503,504];async function Pg(t){var e;if(!Jw(t))throw new dl(oo(t),0);if(sb.includes(t.status))throw new dl(oo(t),t.status);let i;try{i=await t.json()}catch(l){throw new ki(oo(l),l)}let s;const r=eb(t);if(r&&r.getTime()>=M0["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?s=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(s=i.error_code),s){if(s==="weak_password")throw new Ad(oo(i),t.status,((e=i.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new jt}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new Ad(oo(i),t.status,i.weak_password.reasons);throw new k0(oo(i),t.status||500,s)}const rb=(t,e,i,s)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),i))};async function fe(t,e,i,s){var r;const l=Object.assign({},s==null?void 0:s.headers);l[wd]||(l[wd]=M0["2024-01-01"].name),s!=null&&s.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const c=(r=s==null?void 0:s.query)!==null&&r!==void 0?r:{};s!=null&&s.redirectTo&&(c.redirect_to=s.redirectTo);const f=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",m=await ab(t,e,i+f,{headers:l,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(m):{data:Object.assign({},m),error:null}}async function ab(t,e,i,s,r,l){const c=rb(e,s,r,l);let f;try{f=await t(i,Object.assign({},c))}catch(m){throw console.error(m),new dl(oo(m),0)}if(f.ok||await Pg(f),s!=null&&s.noResolveJson)return f;try{return await f.json()}catch(m){await Pg(m)}}function Tn(t){var e;let i=null;cb(t)&&(i=Object.assign({},t),t.expires_at||(i.expires_at=zw(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:i,user:s},error:null}}function Lg(t){const e=Tn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((i,s)=>i&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Di(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function lb(t){return{data:t,error:null}}function ub(t){const{action_link:e,email_otp:i,hashed_token:s,redirect_to:r,verification_type:l}=t,c=ps(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:e,email_otp:i,hashed_token:s,redirect_to:r,verification_type:l},m=Object.assign({},c);return{data:{properties:f,user:m},error:null}}function qg(t){return t}function cb(t){return t.access_token&&t.refresh_token&&t.expires_in}const il=["global","local","others"];let Xd=class{constructor({url:e="",headers:i={},fetch:s}){this.url=e,this.headers=i,this.fetch=q0(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,i=il[0]){if(il.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${il.join(", ")}`);try{return await fe(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(le(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,i={}){try{return await fe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:Di})}catch(s){if(le(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:i}=e,s=ps(e,["options"]),r=Object.assign(Object.assign({},s),i);return"newEmail"in s&&(r.new_email=s==null?void 0:s.newEmail,delete r.newEmail),await fe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:ub,redirectTo:i==null?void 0:i.redirectTo})}catch(i){if(le(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(e){try{return await fe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Di})}catch(i){if(le(i))return{data:{user:null},error:i};throw i}}async listUsers(e){var i,s,r,l,c,f,m;try{const p={nextPage:null,lastPage:0,total:0},v=await fe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(i=e==null?void 0:e.page)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:"",per_page:(l=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:""},xform:qg});if(v.error)throw v.error;const _=await v.json(),S=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,T=(m=(f=v.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return T.length>0&&(T.forEach(A=>{const x=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(A.split(";")[1].split("=")[1]);p[`${C}Page`]=x}),p.total=parseInt(S)),{data:Object.assign(Object.assign({},_),p),error:null}}catch(p){if(le(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){ts(e);try{return await fe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Di})}catch(i){if(le(i))return{data:{user:null},error:i};throw i}}async updateUserById(e,i){ts(e);try{return await fe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:i,headers:this.headers,xform:Di})}catch(s){if(le(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,i=!1){ts(e);try{return await fe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:i},xform:Di})}catch(s){if(le(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){ts(e.userId);try{const{data:i,error:s}=await fe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:i,error:s}}catch(i){if(le(i))return{data:null,error:i};throw i}}async _deleteFactor(e){ts(e.userId),ts(e.id);try{return{data:await fe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(i){if(le(i))return{data:null,error:i};throw i}}async _listOAuthClients(e){var i,s,r,l,c,f,m;try{const p={nextPage:null,lastPage:0,total:0},v=await fe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(i=e==null?void 0:e.page)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:"",per_page:(l=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:""},xform:qg});if(v.error)throw v.error;const _=await v.json(),S=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,T=(m=(f=v.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return T.length>0&&(T.forEach(A=>{const x=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(A.split(";")[1].split("=")[1]);p[`${C}Page`]=x}),p.total=parseInt(S)),{data:Object.assign(Object.assign({},_),p),error:null}}catch(p){if(le(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await fe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(le(i))return{data:null,error:i};throw i}}async _getOAuthClient(e){try{return await fe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(le(i))return{data:null,error:i};throw i}}async _updateOAuthClient(e,i){try{return await fe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:i,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(le(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await fe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(i){if(le(i))return{data:null,error:i};throw i}}async _regenerateOAuthClientSecret(e){try{return await fe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(le(i))return{data:null,error:i};throw i}}};function Gg(t={}){return{getItem:e=>t[e]||null,setItem:(e,i)=>{t[e]=i},removeItem:e=>{delete t[e]}}}const so={debug:!!(globalThis&&L0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Qd extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}let G0=class extends Qd{};class db extends Qd{}async function B0(t,e,i){so.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),so.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async r=>{if(r){so.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,r.name);try{return await i()}finally{so.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,r.name)}}else{if(e===0)throw so.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new G0(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(so.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}const Bg={};async function fb(t,e,i){var s;const r=(s=Bg[t])!==null&&s!==void 0?s:Promise.resolve(),l=Promise.race([r.catch(()=>null),e>=0?new Promise((c,f)=>{setTimeout(()=>{f(new db(`Acquring process lock with name "${t}" timed out`))},e)}):null].filter(c=>c)).catch(c=>{if(c&&c.isAcquireTimeout)throw c;return null}).then(async()=>await i());return Bg[t]=l.catch(async c=>{if(c&&c.isAcquireTimeout)return await r,null;throw c}),await l}function hb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function H0(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function pb(t){return parseInt(t,16)}function mb(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function gb(t){var e;const{chainId:i,domain:s,expirationTime:r,issuedAt:l=new Date,nonce:c,notBefore:f,requestId:m,resources:p,scheme:v,uri:_,version:S}=t;{if(!Number.isInteger(i))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${i}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(S!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${S}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const T=H0(t.address),A=v?`${v}://${s}`:s,x=t.statement?`${t.statement}
`:"",C=`${A} wants you to sign in with your Ethereum account:
${T}

${x}`;let R=`URI: ${_}
Version: ${S}
Chain ID: ${i}${c?`
Nonce: ${c}`:""}
Issued At: ${l.toISOString()}`;if(r&&(R+=`
Expiration Time: ${r.toISOString()}`),f&&(R+=`
Not Before: ${f.toISOString()}`),m&&(R+=`
Request ID: ${m}`),p){let D=`
Resources:`;for(const I of p){if(!I||typeof I!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${I}`);D+=`
- ${I}`}R+=D}return`${C}
${R}`}class mt extends Error{constructor({message:e,code:i,cause:s,name:r}){var l;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(l=r??(s instanceof Error?s.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=i}}class pl extends mt{constructor(e,i){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i,message:e}),this.name="WebAuthnUnknownError",this.originalError=i}}function yb({error:t,options:e}){var i,s,r;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new mt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((i=l.authenticatorSelection)===null||i===void 0?void 0:i.requireResidentKey)===!0)return new mt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new mt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((r=l.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new mt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new mt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new mt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return l.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new mt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new mt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const c=window.location.hostname;if(V0(c)){if(l.rp.id!==c)return new mt({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new mt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new mt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new mt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new mt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function vb({error:t,options:e}){const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new mt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new mt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(V0(s)){if(i.rpId!==s)return new mt({message:`The RP ID "${i.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new mt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new mt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new mt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class _b{createNewAbortSignal(){if(this.controller){const i=new Error("Cancelling existing WebAuthn API call for new one");i.name="AbortError",this.controller.abort(i)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Sb=new _b;function Eb(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:i,excludeCredentials:s}=t,r=ps(t,["challenge","user","excludeCredentials"]),l=us(e).buffer,c=Object.assign(Object.assign({},i),{id:us(i.id).buffer}),f=Object.assign(Object.assign({},r),{challenge:l,user:c});if(s&&s.length>0){f.excludeCredentials=new Array(s.length);for(let m=0;m<s.length;m++){const p=s[m];f.excludeCredentials[m]=Object.assign(Object.assign({},p),{id:us(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return f}function Tb(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:i}=t,s=ps(t,["challenge","allowCredentials"]),r=us(e).buffer,l=Object.assign(Object.assign({},s),{challenge:r});if(i&&i.length>0){l.allowCredentials=new Array(i.length);for(let c=0;c<i.length;c++){const f=i[c];l.allowCredentials[c]=Object.assign(Object.assign({},f),{id:us(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return l}function wb(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const i=t;return{id:t.id,rawId:t.id,response:{attestationObject:uo(new Uint8Array(t.response.attestationObject)),clientDataJSON:uo(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function bb(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const i=t,s=t.getClientExtensionResults(),r=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:uo(new Uint8Array(r.authenticatorData)),clientDataJSON:uo(new Uint8Array(r.clientDataJSON)),signature:uo(new Uint8Array(r.signature)),userHandle:r.userHandle?uo(new Uint8Array(r.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function V0(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Hg(){var t,e;return!!(It()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Ab(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new pl("Browser returned unexpected credential type",e)}:{data:null,error:new pl("Empty credential response",e)}}catch(e){return{data:null,error:yb({error:e,options:t})}}}async function Cb(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new pl("Browser returned unexpected credential type",e)}:{data:null,error:new pl("Empty credential response",e)}}catch(e){return{data:null,error:vb({error:e,options:t})}}}const xb={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Rb={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ml(...t){const e=r=>r!==null&&typeof r=="object"&&!Array.isArray(r),i=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),s={};for(const r of t)if(r)for(const l in r){const c=r[l];if(c!==void 0)if(Array.isArray(c))s[l]=c;else if(i(c))s[l]=c;else if(e(c)){const f=s[l];e(f)?s[l]=ml(f,c):s[l]=ml(c)}else s[l]=c}return s}function Nb(t,e){return ml(xb,t,e||{})}function Ib(t,e){return ml(Rb,t,e||{})}class Mb{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:i,friendlyName:s,signal:r},l){try{const{data:c,error:f}=await this.client.mfa.challenge({factorId:e,webauthn:i});if(!c)return{data:null,error:f};const m=r??Sb.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:p}=c.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${s}`),p.displayName||(p.displayName=p.name)}switch(c.webauthn.type){case"create":{const p=Nb(c.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:v,error:_}=await Ab({publicKey:p,signal:m});return v?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:v}},error:null}:{data:null,error:_}}case"request":{const p=Ib(c.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:v,error:_}=await Cb(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:p,signal:m}));return v?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:v}},error:null}:{data:null,error:_}}}}catch(c){return le(c)?{data:null,error:c}:{data:null,error:new ki("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:i,webauthn:s}){return this.client.mfa.verify({factorId:i,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},l){if(!i)return{data:null,error:new hs("rpId is required for WebAuthn authentication")};try{if(!Hg())return{data:null,error:new ki("Browser does not support WebAuthn",null)};const{data:c,error:f}=await this.challenge({factorId:e,webauthn:{rpId:i,rpOrigins:s},signal:r},{request:l});if(!c)return{data:null,error:f};const{webauthn:m}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:m.type,rpId:i,rpOrigins:s,credential_response:m.credential_response}})}catch(c){return le(c)?{data:null,error:c}:{data:null,error:new ki("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},l){if(!i)return{data:null,error:new hs("rpId is required for WebAuthn registration")};try{if(!Hg())return{data:null,error:new ki("Browser does not support WebAuthn",null)};const{data:c,error:f}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(v=>{var _;return(_=v.data)===null||_===void 0?void 0:_.all.find(S=>S.factor_type==="webauthn"&&S.friendly_name===e&&S.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:f};const{data:m,error:p}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:i,rpOrigins:s},signal:r},{create:l});return m?this._verify({factorId:c.id,challengeId:m.challengeId,webauthn:{rpId:i,rpOrigins:s,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:p}}catch(c){return le(c)?{data:null,error:c}:{data:null,error:new ki("Unexpected error in register",c)}}}}hb();const kb={url:kw,storageKey:Dw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Uw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Vg(t,e,i){return await i()}const ns={};let Wd=class Cd{get jwks(){var e,i;return(i=(e=ns[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(e){ns[this.storageKey]=Object.assign(Object.assign({},ns[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,i;return(i=(e=ns[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ns[this.storageKey]=Object.assign(Object.assign({},ns[this.storageKey]),{cachedAt:e})}constructor(e){var i,s,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},kb),e);if(this.storageKey=l.storageKey,this.instanceID=(i=Cd.nextInstanceID[this.storageKey])!==null&&i!==void 0?i:0,Cd.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&It()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new Xd({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=q0(l.fetch),this.lock=l.lock||Vg,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:this.persistSession&&It()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=B0:this.lock=Vg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Mb(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:L0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Gg(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Gg(this.memoryStorage)),It()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${I0}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let i={},s="none";if(It()&&(i=$w(window.location.href),this._isImplicitGrantCallback(i)?s="implicit":await this._isPKCECallback(i)&&(s="pkce")),It()&&this.detectSessionInUrl&&s!=="none"){const{data:r,error:l}=await this._getSessionFromURL(i,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),O0(l)){const m=(e=l.details)===null||e===void 0?void 0:e.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:c,redirectType:f}=r;return this._debug("#_initialize()","detected session in URL",c,"redirect type",f),await this._saveSession(c),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return le(i)?this._returnResult({error:i}):this._returnResult({error:new ki("Unexpected error during initialization",i)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var i,s,r;try{const l=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:Tn}),{data:c,error:f}=l;if(f||!c)return this._returnResult({data:{user:null,session:null},error:f});const m=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(l){if(le(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var i,s,r;try{let l;if("email"in e){const{email:v,password:_,options:S}=e;let T=null,A=null;this.flowType==="pkce"&&([T,A]=await es(this.storage,this.storageKey)),l=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S==null?void 0:S.emailRedirectTo,body:{email:v,password:_,data:(i=S==null?void 0:S.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken},code_challenge:T,code_challenge_method:A},xform:Tn})}else if("phone"in e){const{phone:v,password:_,options:S}=e;l=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:_,data:(s=S==null?void 0:S.data)!==null&&s!==void 0?s:{},channel:(r=S==null?void 0:S.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken}},xform:Tn})}else throw new vr("You must provide either an email or phone number and a password");const{data:c,error:f}=l;if(f||!c)return await Nt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:f});const m=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(l){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),le(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let i;if("email"in e){const{email:l,password:c,options:f}=e;i=await fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Lg})}else if("phone"in e){const{phone:l,password:c,options:f}=e;i=await fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Lg})}else throw new vr("You must provide either an email or phone number and a password");const{data:s,error:r}=i;if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!s||!s.session||!s.user){const l=new io;return this._returnResult({data:{user:null,session:null},error:l})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r})}catch(i){if(le(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOAuth(e){var i,s,r,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:i}=e;switch(i){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}}async signInWithEthereum(e){var i,s,r,l,c,f,m,p,v,_,S;let T,A;if("message"in e)T=e.message,A=e.signature;else{const{chain:x,wallet:C,statement:R,options:D}=e;let I;if(It())if(typeof C=="object")I=C;else{const X=window;if("ethereum"in X&&typeof X.ethereum=="object"&&"request"in X.ethereum&&typeof X.ethereum.request=="function")I=X.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(D!=null&&D.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=C}const B=new URL((i=D==null?void 0:D.url)!==null&&i!==void 0?i:window.location.href),K=await I.request({method:"eth_requestAccounts"}).then(X=>X).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!K||K.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Y=H0(K[0]);let $=(s=D==null?void 0:D.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!$){const X=await I.request({method:"eth_chainId"});$=pb(X)}const ne={domain:B.host,address:Y,statement:R,uri:B.href,version:"1",chainId:$,nonce:(r=D==null?void 0:D.signInWithEthereum)===null||r===void 0?void 0:r.nonce,issuedAt:(c=(l=D==null?void 0:D.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(f=D==null?void 0:D.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(m=D==null?void 0:D.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(p=D==null?void 0:D.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(v=D==null?void 0:D.signInWithEthereum)===null||v===void 0?void 0:v.resources};T=gb(ne),A=await I.request({method:"personal_sign",params:[mb(T),Y]})}try{const{data:x,error:C}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:T,signature:A},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(S=e.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:Tn});if(C)throw C;if(!x||!x.session||!x.user){const R=new io;return this._returnResult({data:{user:null,session:null},error:R})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:C})}catch(x){if(le(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(e){var i,s,r,l,c,f,m,p,v,_,S,T;let A,x;if("message"in e)A=e.message,x=e.signature;else{const{chain:C,wallet:R,statement:D,options:I}=e;let B;if(It())if(typeof R=="object")B=R;else{const Y=window;if("solana"in Y&&typeof Y.solana=="object"&&("signIn"in Y.solana&&typeof Y.solana.signIn=="function"||"signMessage"in Y.solana&&typeof Y.solana.signMessage=="function"))B=Y.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!(I!=null&&I.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=R}const K=new URL((i=I==null?void 0:I.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in B&&B.signIn){const Y=await B.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},I==null?void 0:I.signInWithSolana),{version:"1",domain:K.host,uri:K.href}),D?{statement:D}:null));let $;if(Array.isArray(Y)&&Y[0]&&typeof Y[0]=="object")$=Y[0];else if(Y&&typeof Y=="object"&&"signedMessage"in Y&&"signature"in Y)$=Y;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in $&&"signature"in $&&(typeof $.signedMessage=="string"||$.signedMessage instanceof Uint8Array)&&$.signature instanceof Uint8Array)A=typeof $.signedMessage=="string"?$.signedMessage:new TextDecoder().decode($.signedMessage),x=$.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in B)||typeof B.signMessage!="function"||!("publicKey"in B)||typeof B!="object"||!B.publicKey||!("toBase58"in B.publicKey)||typeof B.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");A=[`${K.host} wants you to sign in with your Solana account:`,B.publicKey.toBase58(),...D?["",D,""]:[""],"Version: 1",`URI: ${K.href}`,`Issued At: ${(r=(s=I==null?void 0:I.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((l=I==null?void 0:I.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${I.signInWithSolana.notBefore}`]:[],...!((c=I==null?void 0:I.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${I.signInWithSolana.expirationTime}`]:[],...!((f=I==null?void 0:I.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${I.signInWithSolana.chainId}`]:[],...!((m=I==null?void 0:I.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${I.signInWithSolana.nonce}`]:[],...!((p=I==null?void 0:I.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${I.signInWithSolana.requestId}`]:[],...!((_=(v=I==null?void 0:I.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||_===void 0)&&_.length?["Resources",...I.signInWithSolana.resources.map($=>`- ${$}`)]:[]].join(`
`);const Y=await B.signMessage(new TextEncoder().encode(A),"utf8");if(!Y||!(Y instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=Y}}try{const{data:C,error:R}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:A,signature:uo(x)},!((S=e.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(T=e.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:Tn});if(R)throw R;if(!C||!C.session||!C.user){const D=new io;return this._returnResult({data:{user:null,session:null},error:D})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:R})}catch(C){if(le(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async _exchangeCodeForSession(e){const i=await no(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(i??"").split("/");try{const{data:l,error:c}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Tn});if(await Nt(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!l||!l.session||!l.user){const f=new io;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:r??null}),error:c})}catch(l){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),le(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:i,provider:s,token:r,access_token:l,nonce:c}=e,f=await fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:Tn}),{data:m,error:p}=f;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m||!m.session||!m.user){const v=new io;return this._returnResult({data:{user:null,session:null},error:v})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:p})}catch(i){if(le(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOtp(e){var i,s,r,l,c;try{if("email"in e){const{email:f,options:m}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await es(this.storage,this.storageKey));const{error:_}=await fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(i=m==null?void 0:m.data)!==null&&i!==void 0?i:{},create_user:(s=m==null?void 0:m.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:v},redirectTo:m==null?void 0:m.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in e){const{phone:f,options:m}=e,{data:p,error:v}=await fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},create_user:(l=m==null?void 0:m.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(c=m==null?void 0:m.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:v})}throw new vr("You must provide either an email or phone number.")}catch(f){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),le(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(e){var i,s;try{let r,l;"options"in e&&(r=(i=e.options)===null||i===void 0?void 0:i.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:c,error:f}=await fe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:r,xform:Tn});if(f)throw f;if(!c)throw new Error("An error occurred on token verification.");const m=c.session,p=c.user;return m!=null&&m.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(r){if(le(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithSSO(e){var i,s,r,l,c;try{let f=null,m=null;this.flowType==="pkce"&&([f,m]=await es(this.storage,this.storageKey));const p=await fe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(i=e.options)===null||i===void 0?void 0:i.redirectTo)!==null&&s!==void 0?s:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:m}),headers:this.headers,xform:lb});return!((l=p.data)===null||l===void 0)&&l.url&&It()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(f){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),le(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:i},error:s}=e;if(s)throw s;if(!i)throw new jt;const{error:r}=await fe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return this._returnResult({data:{user:null,session:null},error:r})})}catch(e){if(le(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const i=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:l}=e,{error:c}=await fe(this.fetch,"POST",i,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:s,type:r,options:l}=e,{data:c,error:f}=await fe(this.fetch,"POST",i,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:f})}throw new vr("You must provide either an email or phone number and a type")}catch(i){if(le(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async i=>i))}async _acquireLock(e,i){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await s,await i()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=i();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await e(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const i=await no(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?e=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<od:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const c=await no(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=rd()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=ob(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:r,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:r},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const i=await this._acquireLock(-1,async()=>await this._getUser());return i.data.user&&(this.suppressGetSessionWarning=!0),i}async _getUser(e){try{return e?await fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Di}):await this._useSession(async i=>{var s,r,l;const{data:c,error:f}=i;if(f)throw f;return!(!((s=c.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new jt}:await fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(r=c.session)===null||r===void 0?void 0:r.access_token)!==null&&l!==void 0?l:void 0,xform:Di})})}catch(i){if(le(i))return U0(i)&&(await this._removeSession(),await Nt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:i});throw i}}async updateUser(e,i={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,i))}async _updateUser(e,i={}){try{return await this._useSession(async s=>{const{data:r,error:l}=s;if(l)throw l;if(!r.session)throw new jt;const c=r.session;let f=null,m=null;this.flowType==="pkce"&&e.email!=null&&([f,m]=await es(this.storage,this.storageKey));const{data:p,error:v}=await fe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i==null?void 0:i.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:f,code_challenge_method:m}),jwt:c.access_token,xform:Di});if(v)throw v;return c.user=p.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(s){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),le(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new jt;const i=Date.now()/1e3;let s=i,r=!0,l=null;const{payload:c}=sd(e.access_token);if(c.exp&&(s=c.exp,r=s<=i),r){const{data:f,error:m}=await this._callRefreshToken(e.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!f)return{data:{user:null,session:null},error:null};l=f}else{const{data:f,error:m}=await this._getUser(e.access_token);if(m)throw m;l={access_token:e.access_token,refresh_token:e.refresh_token,user:f.user,token_type:"bearer",expires_in:s-i,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(i){if(le(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async i=>{var s;if(!e){const{data:c,error:f}=i;if(f)throw f;e=(s=c.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new jt;const{data:r,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):r?this._returnResult({data:{user:r.user,session:r},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(i){if(le(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async _getSessionFromURL(e,i){try{if(!It())throw new _r("No browser detected.");if(e.error||e.error_description||e.error_code)throw new _r(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new bd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new _r("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new bd("No code detected.");const{data:D,error:I}=await this._exchangeCodeForSession(e.code);if(I)throw I;const B=new URL(window.location.href);return B.searchParams.delete("code"),window.history.replaceState(window.history.state,"",B.toString()),{data:{session:D.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:r,access_token:l,refresh_token:c,expires_in:f,expires_at:m,token_type:p}=e;if(!l||!f||!c||!p)throw new _r("No session defined in URL");const v=Math.round(Date.now()/1e3),_=parseInt(f);let S=v+_;m&&(S=parseInt(m));const T=S-v;T*1e3<=is&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${T}s, should have been closer to ${_}s`);const A=S-_;v-A>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",A,S,v):v-A<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",A,S,v);const{data:x,error:C}=await this._getUser(l);if(C)throw C;const R={provider_token:s,provider_refresh_token:r,access_token:l,expires_in:_,expires_at:S,refresh_token:c,token_type:p,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:R,redirectType:e.type},error:null})}catch(s){if(le(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const i=await no(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&i)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async i=>{var s;const{data:r,error:l}=i;if(l)return this._returnResult({error:l});const c=(s=r.session)===null||s===void 0?void 0:s.access_token;if(c){const{error:f}=await this.admin.signOut(c,e);if(f&&!(D0(f)&&(f.status===404||f.status===401||f.status===403)))return this._returnResult({error:f})}return e!=="others"&&(await this._removeSession(),await Nt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const i=Fw(),s={id:i,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async i=>{var s,r;try{const{data:{session:l},error:c}=i;if(c)throw c;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,i={}){let s=null,r=null;this.flowType==="pkce"&&([s,r]=await es(this.storage,this.storageKey,!0));try{return await fe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(l){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),le(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:i,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=i.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(i){if(le(i))return this._returnResult({data:null,error:i});throw i}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var i;try{const{data:s,error:r}=await this._useSession(async l=>{var c,f,m,p,v;const{data:_,error:S}=l;if(S)throw S;const T=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(f=e.options)===null||f===void 0?void 0:f.scopes,queryParams:(m=e.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await fe(this.fetch,"GET",T,{headers:this.headers,jwt:(v=(p=_.session)===null||p===void 0?void 0:p.access_token)!==null&&v!==void 0?v:void 0})});if(r)throw r;return It()&&!(!((i=e.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:e.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(le(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async i=>{var s;try{const{error:r,data:{session:l}}=i;if(r)throw r;const{options:c,provider:f,token:m,access_token:p,nonce:v}=e,_=await fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=l==null?void 0:l.access_token)!==null&&s!==void 0?s:void 0,body:{provider:f,id_token:m,access_token:p,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Tn}),{data:S,error:T}=_;return T?this._returnResult({data:{user:null,session:null},error:T}):!S||!S.session||!S.user?this._returnResult({data:{user:null,session:null},error:new io}):(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("USER_UPDATED",S.session)),this._returnResult({data:S,error:T}))}catch(r){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),le(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}async unlinkIdentity(e){try{return await this._useSession(async i=>{var s,r;const{data:l,error:c}=i;if(c)throw c;return await fe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0})})}catch(i){if(le(i))return this._returnResult({data:null,error:i});throw i}}async _refreshAccessToken(e){const i=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{const s=Date.now();return await jw(async r=>(r>0&&await Kw(200*Math.pow(2,r-1)),this._debug(i,"refreshing attempt",r),await fe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Tn})),(r,l)=>{const c=200*Math.pow(2,r);return l&&nl(l)&&Date.now()+c-s<is})}catch(s){if(this._debug(i,"error",s),le(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(i,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,i){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",i,"url",s),It()&&!i.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,i;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=await no(this.storage,this.storageKey);if(r&&this.userStorage){let c=await no(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:r.user},await os(this.userStorage,this.storageKey+"-user",c)),r.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:rd()}else if(r&&!r.user&&!r.user){const c=await no(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(r.user=c.user,await Nt(this.storage,this.storageKey+"-user"),await os(this.storage,this.storageKey,r)):r.user=rd()}if(this._debug(s,"session from storage",r),!this._isValidSession(r)){this._debug(s,"session is not valid"),r!==null&&await this._removeSession();return}const l=((i=r.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<od;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${od}s`),l){if(this.autoRefreshToken&&r.refresh_token){const{error:c}=await this._callRefreshToken(r.refresh_token);c&&(console.error(c),nl(c)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:f}=await this._getUser(r.access_token);!f&&(c!=null&&c.user)?(r.user=c.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(s,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(s,"error",r),console.error(r);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var i,s;if(!e)throw new jt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Al;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new jt;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const f={data:l.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(l){if(this._debug(r,"error",l),le(l)){const c={data:null,error:l};return nl(l)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(c),c}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,i,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",i,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:i});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(e,i)}catch(m){l.push(m)}});if(await Promise.all(c),l.length>0){for(let f=0;f<l.length;f+=1)console.error(l[f]);throw l[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Nt(this.storage,`${this.storageKey}-code-verifier`);const i=Object.assign({},e),s=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&i.user&&await os(this.userStorage,this.storageKey+"-user",{user:i.user});const r=Object.assign({},i);delete r.user;const l=Og(r);await os(this.storage,this.storageKey,l)}else{const r=Og(i);await os(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Nt(this.storage,this.storageKey),await Nt(this.storage,this.storageKey+"-code-verifier"),await Nt(this.storage,this.storageKey+"-user"),this.userStorage&&await Nt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&It()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),is);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async i=>{const{data:{session:s}}=i;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((s.expires_at*1e3-e)/is);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${is}ms, refresh threshold is ${Td} ticks`),r<=Td&&await this._callRefreshToken(s.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Qd)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!It()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const i=`#_onVisibilityChanged(${e})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,i,s){const r=[`provider=${encodeURIComponent(i)}`];if(s!=null&&s.redirectTo&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,c]=await es(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});r.push(f.toString())}if(s!=null&&s.queryParams){const l=new URLSearchParams(s.queryParams);r.push(l.toString())}return s!=null&&s.skipBrowserRedirect&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async i=>{var s;const{data:r,error:l}=i;return l?this._returnResult({data:null,error:l}):await fe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(i){if(le(i))return this._returnResult({data:null,error:i});throw i}}async _enroll(e){try{return await this._useSession(async i=>{var s,r;const{data:l,error:c}=i;if(c)return this._returnResult({data:null,error:c});const f=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:m,error:p}=await fe(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(s=l==null?void 0:l.session)===null||s===void 0?void 0:s.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&m.type==="totp"&&(!((r=m==null?void 0:m.totp)===null||r===void 0)&&r.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(i){if(le(i))return this._returnResult({data:null,error:i});throw i}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var s;const{data:r,error:l}=i;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?wb(e.webauthn.credential_response):bb(e.webauthn.credential_response)})}:{code:e.code}),{data:f,error:m}=await fe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:m}))})}catch(i){if(le(i))return this._returnResult({data:null,error:i});throw i}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var s;const{data:r,error:l}=i;if(l)return this._returnResult({data:null,error:l});const c=await fe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});if(c.error)return c;const{data:f}=c;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:Eb(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:Tb(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(i){if(le(i))return this._returnResult({data:null,error:i});throw i}})}async _challengeAndVerify(e){const{data:i,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:i.id,code:e.code})}async _listFactors(){var e;const{data:{user:i},error:s}=await this.getUser();if(s)return{data:null,error:s};const r={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=i==null?void 0:i.factors)!==null&&e!==void 0?e:[])r.all.push(l),l.status==="verified"&&r[l.factor_type].push(l);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(){var e,i;const{data:{session:s},error:r}=await this.getSession();if(r)return this._returnResult({data:null,error:r});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=sd(s.access_token);let c=null;l.aal&&(c=l.aal);let f=c;((i=(e=s.user.factors)===null||e===void 0?void 0:e.filter(v=>v.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(f="aal2");const p=l.amr||[];return{data:{currentLevel:c,nextLevel:f,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async i=>{const{data:{session:s},error:r}=i;return r?this._returnResult({data:null,error:r}):s?await fe(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new jt})})}catch(i){if(le(i))return this._returnResult({data:null,error:i});throw i}}async _approveAuthorization(e,i){try{return await this._useSession(async s=>{const{data:{session:r},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!r)return this._returnResult({data:null,error:new jt});const c=await fe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return c.data&&c.data.redirect_url&&It()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(s){if(le(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,i){try{return await this._useSession(async s=>{const{data:{session:r},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!r)return this._returnResult({data:null,error:new jt});const c=await fe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return c.data&&c.data.redirect_url&&It()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(s){if(le(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:i},error:s}=e;return s?this._returnResult({data:null,error:s}):i?await fe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,xform:r=>({data:r,error:null})}):this._returnResult({data:null,error:new jt})})}catch(e){if(le(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async i=>{const{data:{session:s},error:r}=i;return r?this._returnResult({data:null,error:r}):s?(await fe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new jt})})}catch(i){if(le(i))return this._returnResult({data:null,error:i});throw i}}async fetchJwk(e,i={keys:[]}){let s=i.keys.find(f=>f.kid===e);if(s)return s;const r=Date.now();if(s=this.jwks.keys.find(f=>f.kid===e),s&&this.jwks_cached_at+Pw>r)return s;const{data:l,error:c}=await fe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=r,s=l.keys.find(f=>f.kid===e),!s)?null:s}async getClaims(e,i={}){try{let s=e;if(!s){const{data:T,error:A}=await this.getSession();if(A||!T.session)return this._returnResult({data:null,error:A});s=T.session.access_token}const{header:r,payload:l,signature:c,raw:{header:f,payload:m}}=sd(s);i!=null&&i.allowExpired||tb(l.exp);const p=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,i!=null&&i.keys?{keys:i.keys}:i==null?void 0:i.jwks);if(!p){const{error:T}=await this.getUser(s);if(T)throw T;return{data:{claims:l,header:r,signature:c},error:null}}const v=nb(r.alg),_=await crypto.subtle.importKey("jwk",p,v,!0,["verify"]);if(!await crypto.subtle.verify(v,_,c,Vw(`${f}.${m}`)))throw new fl("Invalid JWT signature");return{data:{claims:l,header:r,signature:c},error:null}}catch(s){if(le(s))return this._returnResult({data:null,error:s});throw s}}};Wd.nextInstanceID={};const Db=Xd,Ub=Wd,Ob=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:Db,AuthApiError:k0,AuthClient:Ub,AuthError:hs,AuthImplicitGrantRedirectError:_r,AuthInvalidCredentialsError:vr,AuthInvalidJwtError:fl,AuthInvalidTokenResponseError:io,AuthPKCEGrantCodeExchangeError:bd,AuthRetryableFetchError:dl,AuthSessionMissingError:jt,AuthUnknownError:ki,AuthWeakPasswordError:Ad,CustomAuthError:si,GoTrueAdminApi:Xd,GoTrueClient:Wd,NavigatorLockAcquireTimeoutError:G0,SIGN_OUT_SCOPES:il,isAuthApiError:D0,isAuthError:le,isAuthImplicitGrantRedirectError:O0,isAuthRetryableFetchError:nl,isAuthSessionMissingError:U0,isAuthWeakPasswordError:Lw,lockInternals:so,navigatorLock:B0,processLock:fb},Symbol.toStringTag,{value:"Module"})),z0=wr(Ob);var zg;function Pb(){if(zg)return mr;zg=1,Object.defineProperty(mr,"__esModule",{value:!0}),mr.SupabaseAuthClient=void 0;const t=z0;let e=class extends t.AuthClient{constructor(s){super(s)}};return mr.SupabaseAuthClient=e,mr}var Fg;function $g(){if(Fg)return Ba;Fg=1,Object.defineProperty(Ba,"__esModule",{value:!0});const t=n0,e=l0(),i=g0,s=xw,r=Nw(),l=Iw(),c=Mw(),f=Pb();class m{constructor(v,_,S){var T,A,x;this.supabaseUrl=v,this.supabaseKey=_;const C=(0,c.validateSupabaseUrl)(v);if(!_)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",C),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",C),this.storageUrl=new URL("storage/v1",C),this.functionsUrl=new URL("functions/v1",C);const R=`sb-${C.hostname.split(".")[0]}-auth-token`,D={db:r.DEFAULT_DB_OPTIONS,realtime:r.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},r.DEFAULT_AUTH_OPTIONS),{storageKey:R}),global:r.DEFAULT_GLOBAL_OPTIONS},I=(0,c.applySettingDefaults)(S??{},D);this.storageKey=(T=I.auth.storageKey)!==null&&T!==void 0?T:"",this.headers=(A=I.global.headers)!==null&&A!==void 0?A:{},I.accessToken?(this.accessToken=I.accessToken,this.auth=new Proxy({},{get:(B,K)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(K)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((x=I.auth)!==null&&x!==void 0?x:{},this.headers,I.global.fetch),this.fetch=(0,l.fetchWithAuth)(_,this._getAccessToken.bind(this),I.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},I.realtime)),this.accessToken&&this.accessToken().then(B=>this.realtime.setAuth(B)).catch(B=>console.warn("Failed to set initial Realtime auth token:",B)),this.rest=new e.PostgrestClient(new URL("rest/v1",C).href,{headers:this.headers,schema:I.db.schema,fetch:this.fetch}),this.storage=new s.StorageClient(this.storageUrl.href,this.headers,this.fetch,S==null?void 0:S.storage),I.accessToken||this._listenForAuthEvents()}get functions(){return new t.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(v){return this.rest.from(v)}schema(v){return this.rest.schema(v)}rpc(v,_={},S={head:!1,get:!1,count:void 0}){return this.rest.rpc(v,_,S)}channel(v,_={config:{}}){return this.realtime.channel(v,_)}getChannels(){return this.realtime.getChannels()}removeChannel(v){return this.realtime.removeChannel(v)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var v,_;if(this.accessToken)return await this.accessToken();const{data:S}=await this.auth.getSession();return(_=(v=S.session)===null||v===void 0?void 0:v.access_token)!==null&&_!==void 0?_:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:v,persistSession:_,detectSessionInUrl:S,storage:T,userStorage:A,storageKey:x,flowType:C,lock:R,debug:D,throwOnError:I},B,K){const Y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new f.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},Y),B),storageKey:x,autoRefreshToken:v,persistSession:_,detectSessionInUrl:S,storage:T,userStorage:A,flowType:C,lock:R,debug:D,throwOnError:I,fetch:K,hasCustomAuthorizationHeader:Object.keys(this.headers).some($=>$.toLowerCase()==="authorization")})}_initRealtimeClient(v){return new i.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},v),{params:Object.assign({apikey:this.supabaseKey},v==null?void 0:v.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((_,S)=>{this._handleTokenChanged(_,"CLIENT",S==null?void 0:S.access_token)})}_handleTokenChanged(v,_,S){(v==="TOKEN_REFRESHED"||v==="SIGNED_IN")&&this.changedAccessToken!==S?(this.changedAccessToken=S,this.realtime.setAuth(S)):v==="SIGNED_OUT"&&(this.realtime.setAuth(),_=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return Ba.default=m,Ba}var Jg;function Lb(){return Jg||(Jg=1,(function(t){var e=ni&&ni.__createBinding||(Object.create?(function(v,_,S,T){T===void 0&&(T=S);var A=Object.getOwnPropertyDescriptor(_,S);(!A||("get"in A?!_.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return _[S]}}),Object.defineProperty(v,T,A)}):(function(v,_,S,T){T===void 0&&(T=S),v[T]=_[S]})),i=ni&&ni.__exportStar||function(v,_){for(var S in v)S!=="default"&&!Object.prototype.hasOwnProperty.call(_,S)&&e(_,v,S)},s=ni&&ni.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(t,"__esModule",{value:!0}),t.createClient=t.SupabaseClient=t.FunctionRegion=t.FunctionsError=t.FunctionsRelayError=t.FunctionsFetchError=t.FunctionsHttpError=t.PostgrestError=void 0;const r=s($g());i(z0,t);var l=l0();Object.defineProperty(t,"PostgrestError",{enumerable:!0,get:function(){return l.PostgrestError}});var c=n0;Object.defineProperty(t,"FunctionsHttpError",{enumerable:!0,get:function(){return c.FunctionsHttpError}}),Object.defineProperty(t,"FunctionsFetchError",{enumerable:!0,get:function(){return c.FunctionsFetchError}}),Object.defineProperty(t,"FunctionsRelayError",{enumerable:!0,get:function(){return c.FunctionsRelayError}}),Object.defineProperty(t,"FunctionsError",{enumerable:!0,get:function(){return c.FunctionsError}}),Object.defineProperty(t,"FunctionRegion",{enumerable:!0,get:function(){return c.FunctionRegion}}),i(g0,t);var f=$g();Object.defineProperty(t,"SupabaseClient",{enumerable:!0,get:function(){return s(f).default}});const m=(v,_,S)=>new r.default(v,_,S);t.createClient=m;function p(){if(typeof window<"u"||typeof process>"u")return!1;const v=process.version;if(v==null)return!1;const _=v.match(/^v(\d+)\./);return _?parseInt(_[1],10)<=18:!1}p()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(ni)),ni}var F0=Lb();const $0=Hd(F0),qb=eT({__proto__:null,default:$0},[F0]),{PostgrestError:kk,FunctionsHttpError:Dk,FunctionsFetchError:Uk,FunctionsRelayError:Ok,FunctionsError:Pk,FunctionRegion:Lk,SupabaseClient:qk,createClient:Gb,GoTrueAdminApi:Gk,GoTrueClient:Bk,AuthAdminApi:Hk,AuthClient:Vk,navigatorLock:zk,NavigatorLockAcquireTimeoutError:Fk,lockInternals:$k,processLock:Jk,SIGN_OUT_SCOPES:Kk,AuthError:jk,AuthApiError:Yk,AuthUnknownError:Xk,CustomAuthError:Qk,AuthSessionMissingError:Wk,AuthInvalidTokenResponseError:Zk,AuthInvalidCredentialsError:eD,AuthImplicitGrantRedirectError:tD,AuthPKCEGrantCodeExchangeError:nD,AuthRetryableFetchError:iD,AuthWeakPasswordError:oD,AuthInvalidJwtError:sD,isAuthError:rD,isAuthApiError:aD,isAuthSessionMissingError:lD,isAuthImplicitGrantRedirectError:uD,isAuthRetryableFetchError:cD,isAuthWeakPasswordError:dD,RealtimePresence:fD,RealtimeChannel:hD,RealtimeClient:pD,REALTIME_LISTEN_TYPES:mD,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:gD,REALTIME_PRESENCE_LISTEN_EVENTS:yD,REALTIME_SUBSCRIBE_STATES:vD,REALTIME_CHANNEL_STATES:_D}=$0||qb,Bb="https://your-project.supabase.co",Hb="your-anon-key",ol=Gb(Bb,Hb),Vb=({isOpen:t,onClose:e})=>{if(!t)return null;const i=async()=>{try{await ol.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}})}catch(s){console.error("Error logging in:",s)}};return w.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-[100]",onClick:e,children:w.jsxs("div",{className:"profile-card w-[330px] bg-white rounded-xl shadow-xl overflow-hidden text-center",onClick:s=>s.stopPropagation(),children:[w.jsx("div",{className:"profile-header bg-[color:var(--theme-color)] h-24 relative",children:w.jsx("img",{src:"/assets/images/profile.png",alt:"Profile",className:"w-24 h-24 rounded-full absolute -bottom-12 left-1/2 -translate-x-1/2 border-4 border-white object-cover"})}),w.jsxs("div",{className:"profile-body pt-14 pb-6 px-5",children:[w.jsx("h4",{className:"text-xl font-bold text-gray-800",children:"Welcome Back"}),w.jsx("p",{className:"text-sm text-gray-500 mb-5",children:"Sign in to manage your files"}),w.jsxs("div",{className:"grid grid-cols-3 gap-y-5 mb-6",children:[w.jsxs("a",{href:"https://www.youtube.com/@robitechnology",target:"_blank",rel:"noopener noreferrer",className:"social-box flex flex-col items-center text-xs text-gray-600 font-medium no-underline hover:opacity-80",children:[w.jsx("i",{className:"bi bi-youtube text-red-600 text-3xl mb-1"}),"Robi Tech.."]}),w.jsxs("a",{href:"https://www.youtube.com/@rtstock",target:"_blank",rel:"noopener noreferrer",className:"social-box flex flex-col items-center text-xs text-gray-600 font-medium no-underline hover:opacity-80",children:[w.jsx("i",{className:"bi bi-youtube text-red-600 text-3xl mb-1"}),"RT Stock"]}),w.jsxs("a",{href:"https://www.youtube.com/@robiadsexpert",target:"_blank",rel:"noopener noreferrer",className:"social-box flex flex-col items-center text-xs text-gray-600 font-medium no-underline hover:opacity-80",children:[w.jsx("i",{className:"bi bi-youtube text-red-600 text-3xl mb-1"}),"Robi Ads.."]}),w.jsxs("a",{href:"https://www.facebook.com/robitechnology22",target:"_blank",rel:"noopener noreferrer",className:"social-box flex flex-col items-center text-xs text-gray-600 font-medium no-underline hover:opacity-80",children:[w.jsx("i",{className:"bi bi-facebook text-blue-600 text-3xl mb-1"}),"Robi Tech.."]}),w.jsxs("a",{href:"https://www.facebook.com/groups/809434351197208",target:"_blank",rel:"noopener noreferrer",className:"social-box flex flex-col items-center text-xs text-gray-600 font-medium no-underline hover:opacity-80",children:[w.jsx("i",{className:"bi bi-facebook text-blue-600 text-3xl mb-1"}),"FB Group"]}),w.jsxs("a",{href:"https://chat.whatsapp.com/BztzKMpcqHw5Hv2utCgBFN",target:"_blank",rel:"noopener noreferrer",className:"social-box flex flex-col items-center text-xs text-gray-600 font-medium no-underline hover:opacity-80",children:[w.jsx("i",{className:"bi bi-whatsapp text-green-500 text-3xl mb-1"}),"WhatsApp"]})]}),w.jsxs("button",{onClick:i,className:"google-btn w-full rounded-full bg-white border border-gray-300 text-gray-700 font-medium flex items-center justify-center gap-2.5 p-2.5 transition hover:bg-gray-50 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400",children:[w.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"Google Logo",className:"w-5 h-5"}),"Sign in with Google"]})]})]})})},zb=({message:t,type:e,onDismiss:i})=>{const[s,r]=ye.useState(!1);ye.useEffect(()=>{r(!0);const m=setTimeout(()=>{r(!1),setTimeout(i,500)},3e3);return()=>clearTimeout(m)},[i]);const l={success:{bg:"bg-green-600",icon:"bi-check-circle-fill"},error:{bg:"bg-red-600",icon:"bi-x-octagon-fill"},warning:{bg:"bg-yellow-500 text-black",icon:"bi-exclamation-triangle-fill"},info:{bg:"bg-blue-600",icon:"bi-info-circle-fill"}},{bg:c,icon:f}=l[e];return w.jsxs("div",{className:`fixed right-5 z-[101] flex items-center min-w-[250px] max-w-sm p-4 rounded-lg shadow-lg text-white transition-all duration-500 ease-out ${c} ${s?"top-5 opacity-100":"-top-full opacity-0"}`,children:[w.jsx("i",{className:`bi ${f} text-xl mr-3`}),w.jsx("span",{children:t})]})};var Fb={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let $b,Jb;function Kb(){return{geminiUrl:$b,vertexUrl:Jb}}function jb(t,e,i,s){var r,l;if(!(t!=null&&t.baseUrl)){const c=Kb();return e?(r=c.vertexUrl)!==null&&r!==void 0?r:i:(l=c.geminiUrl)!==null&&l!==void 0?l:s}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ri{}function W(t,e){const i=/\{([^}]+)\}/g;return t.replace(i,(s,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function h(t,e,i){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const f=c.slice(0,-2);if(!(f in t))if(Array.isArray(i))t[f]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[f])){const m=t[f];if(Array.isArray(i))for(let p=0;p<m.length;p++){const v=m[p];h(v,e.slice(l+1),i[p])}else for(const p of m)h(p,e.slice(l+1),i)}return}else if(c.endsWith("[0]")){const f=c.slice(0,-3);f in t||(t[f]=[{}]);const m=t[f];h(m[0],e.slice(l+1),i);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const s=e[e.length-1],r=t[s];if(r!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===r)return;if(typeof r=="object"&&typeof i=="object"&&r!==null&&i!==null)Object.assign(r,i);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof i=="object"&&i!==null&&!Array.isArray(i)?Object.assign(t,i):t[s]=i}function d(t,e,i=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let s=0;s<e.length;s++){if(typeof t!="object"||t===null)return i;const r=e[s];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in t){const c=t[l];return Array.isArray(c)?c.map(f=>d(f,e.slice(s+1),i)):i}else return i}else t=t[r]}return t}catch(s){if(s instanceof TypeError)return i;throw s}}function Yb(t,e){for(const[i,s]of Object.entries(e)){const r=i.split("."),l=s.split("."),c=new Set;let f=-1;for(let m=0;m<r.length;m++)if(r[m]==="*"){f=m;break}if(f!==-1&&l.length>f)for(let m=f;m<l.length;m++){const p=l[m];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&c.add(p)}xd(t,r,l,0,c)}}function xd(t,e,i,s,r){if(s>=e.length||typeof t!="object"||t===null)return;const l=e[s];if(l.endsWith("[]")){const c=l.slice(0,-2),f=t;if(c in f&&Array.isArray(f[c]))for(const m of f[c])xd(m,e,i,s+1,r)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const c=t,f=Object.keys(c).filter(p=>!p.startsWith("_")&&!r.has(p)),m={};for(const p of f)m[p]=c[p];for(const[p,v]of Object.entries(m)){const _=[];for(const S of i.slice(s))S==="*"?_.push(p):_.push(S);h(c,_,v)}for(const p of f)delete c[p]}}else{const c=t;l in c&&xd(c[l],e,i,s+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zd(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xb(t){const e={},i=d(t,["operationName"]);i!=null&&h(e,["operationName"],i);const s=d(t,["resourceName"]);return s!=null&&h(e,["_url","resourceName"],s),e}function Qb(t){const e={},i=d(t,["name"]);i!=null&&h(e,["name"],i);const s=d(t,["metadata"]);s!=null&&h(e,["metadata"],s);const r=d(t,["done"]);r!=null&&h(e,["done"],r);const l=d(t,["error"]);l!=null&&h(e,["error"],l);const c=d(t,["response","generateVideoResponse"]);return c!=null&&h(e,["response"],Zb(c)),e}function Wb(t){const e={},i=d(t,["name"]);i!=null&&h(e,["name"],i);const s=d(t,["metadata"]);s!=null&&h(e,["metadata"],s);const r=d(t,["done"]);r!=null&&h(e,["done"],r);const l=d(t,["error"]);l!=null&&h(e,["error"],l);const c=d(t,["response"]);return c!=null&&h(e,["response"],eA(c)),e}function Zb(t){const e={},i=d(t,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>tA(c))),h(e,["generatedVideos"],l)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const r=d(t,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function eA(t){const e={},i=d(t,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>nA(c))),h(e,["generatedVideos"],l)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const r=d(t,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function tA(t){const e={},i=d(t,["video"]);return i!=null&&h(e,["video"],lA(i)),e}function nA(t){const e={},i=d(t,["_self"]);return i!=null&&h(e,["video"],uA(i)),e}function iA(t){const e={},i=d(t,["operationName"]);return i!=null&&h(e,["_url","operationName"],i),e}function oA(t){const e={},i=d(t,["operationName"]);return i!=null&&h(e,["_url","operationName"],i),e}function sA(t){const e={},i=d(t,["name"]);i!=null&&h(e,["name"],i);const s=d(t,["metadata"]);s!=null&&h(e,["metadata"],s);const r=d(t,["done"]);r!=null&&h(e,["done"],r);const l=d(t,["error"]);l!=null&&h(e,["error"],l);const c=d(t,["response"]);return c!=null&&h(e,["response"],rA(c)),e}function rA(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["parent"]);s!=null&&h(e,["parent"],s);const r=d(t,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function J0(t){const e={},i=d(t,["name"]);i!=null&&h(e,["name"],i);const s=d(t,["metadata"]);s!=null&&h(e,["metadata"],s);const r=d(t,["done"]);r!=null&&h(e,["done"],r);const l=d(t,["error"]);l!=null&&h(e,["error"],l);const c=d(t,["response"]);return c!=null&&h(e,["response"],aA(c)),e}function aA(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["parent"]);s!=null&&h(e,["parent"],s);const r=d(t,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function lA(t){const e={},i=d(t,["uri"]);i!=null&&h(e,["uri"],i);const s=d(t,["encodedVideo"]);s!=null&&h(e,["videoBytes"],Zd(s));const r=d(t,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function uA(t){const e={},i=d(t,["gcsUri"]);i!=null&&h(e,["uri"],i);const s=d(t,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],Zd(s));const r=d(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Kg;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Kg||(Kg={}));var jg;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(jg||(jg={}));var Yg;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Yg||(Yg={}));var Dt;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Dt||(Dt={}));var Xg;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Xg||(Xg={}));var Qg;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Qg||(Qg={}));var Wg;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Wg||(Wg={}));var Zg;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Zg||(Zg={}));var ey;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(ey||(ey={}));var ty;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(ty||(ty={}));var ny;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(ny||(ny={}));var iy;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(iy||(iy={}));var oy;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(oy||(oy={}));var sy;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(sy||(sy={}));var ry;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(ry||(ry={}));var ay;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(ay||(ay={}));var ly;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(ly||(ly={}));var uy;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(uy||(uy={}));var cy;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(cy||(cy={}));var gl;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(gl||(gl={}));var dy;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(dy||(dy={}));var fy;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(fy||(fy={}));var hy;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(hy||(hy={}));var Rd;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Rd||(Rd={}));var py;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(py||(py={}));var my;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(my||(my={}));var gy;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(gy||(gy={}));var yy;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(yy||(yy={}));var vy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(vy||(vy={}));var _y;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(_y||(_y={}));var Sy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Sy||(Sy={}));var Ey;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Ey||(Ey={}));var Ty;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Ty||(Ty={}));var wy;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(wy||(wy={}));var by;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(by||(by={}));var Ay;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Ay||(Ay={}));var Cy;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Cy||(Cy={}));var xy;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(xy||(xy={}));var Ry;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Ry||(Ry={}));var Ny;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Ny||(Ny={}));var Iy;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Iy||(Iy={}));var My;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(My||(My={}));var ky;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(ky||(ky={}));var Dy;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Dy||(Dy={}));var Uy;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Uy||(Uy={}));var Oy;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Oy||(Oy={}));var Py;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Py||(Py={}));var Ly;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Ly||(Ly={}));var qy;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(qy||(qy={}));var Gy;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Gy||(Gy={}));var By;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(By||(By={}));var Hy;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Hy||(Hy={}));var Vy;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Vy||(Vy={}));var zy;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(zy||(zy={}));var Fy;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Fy||(Fy={}));var rs;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(rs||(rs={}));class Nd{constructor(e){const i={};for(const s of e.headers.entries())i[s[0]]=s[1];this.headers=i,this.responseInternal=e}json(){return this.responseInternal.json()}}class gr{get text(){var e,i,s,r,l,c,f,m;if(((r=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const _=[];for(const S of(m=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[T,A]of Object.entries(S))T!=="text"&&T!=="thought"&&T!=="thoughtSignature"&&(A!==null||A!==void 0)&&_.push(T);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,p+=S.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var e,i,s,r,l,c,f,m;if(((r=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const _ of(m=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[S,T]of Object.entries(_))S!=="inlineData"&&(T!==null||T!==void 0)&&v.push(S);_.inlineData&&typeof _.inlineData.data=="string"&&(p+=atob(_.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,i,s,r,l,c,f,m;if(((r=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(m=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,i,s,r,l,c,f,m,p;if(((r=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(m=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,i,s,r,l,c,f,m,p;if(((r=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(m=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.output}}class $y{}class Jy{}class cA{}class dA{}class fA{}class hA{}class Ky{}class jy{}class Yy{}class pA{}class yl{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const s=new yl;let r;const l=e;return i?r=Wb(l):r=Qb(l),Object.assign(s,r),s}}class Xy{}class Qy{}class Wy{}class Zy{}class mA{}class gA{}class yA{}class ef{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const s=new ef,l=sA(e);return Object.assign(s,l),s}}class vA{}class _A{}class SA{}class ev{}class EA{get text(){var e,i,s;let r="",l=!1;const c=[];for(const f of(s=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&s!==void 0?s:[]){for(const[m,p]of Object.entries(f))m!=="text"&&m!=="thought"&&p!==null&&c.push(m);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;l=!0,r+=f.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,i,s;let r="";const l=[];for(const c of(s=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&s!==void 0?s:[]){for(const[f,m]of Object.entries(c))f!=="inlineData"&&m!==null&&l.push(f);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class TA{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class tf{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const s=new tf,l=J0(e);return Object.assign(s,l),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Oe(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const i=e.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function K0(t,e){const i=Oe(t,e);return i?i.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}`:i.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${i}`:i:""}function j0(t){return Array.isArray(t)?t.map(e=>vl(e)):[vl(t)]}function vl(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Y0(t){const e=vl(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function X0(t){const e=vl(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function tv(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Q0(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>tv(e)):[tv(t)]}function Id(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function nv(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function iv(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Ut(t){if(t==null)throw new Error("ContentUnion is required");return Id(t)?t:{role:"user",parts:Q0(t)}}function nf(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(i=>{const s=Ut(i);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(t.isVertexAI()){const i=Ut(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(e)?e.map(i=>Ut(i)):[Ut(e)]}function gn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(nv(t)||iv(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ut(t)]}const e=[],i=[],s=Id(t[0]);for(const r of t){const l=Id(r);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(nv(r)||iv(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(r)}}return s||e.push({role:"user",parts:Q0(i)}),e}function wA(t,e){t.includes("null")&&(e.nullable=!0);const i=t.filter(s=>s!=="null");if(i.length===1)e.type=Object.values(Dt).includes(i[0].toUpperCase())?i[0].toUpperCase():Dt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of i)e.anyOf.push({type:Object.values(Dt).includes(s.toUpperCase())?s.toUpperCase():Dt.TYPE_UNSPECIFIED})}}function cs(t){const e={},i=["items"],s=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&wA(t.type,e);for(const[c,f]of Object.entries(t))if(f!=null)if(c=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(Dt).includes(f.toUpperCase())?f.toUpperCase():Dt.TYPE_UNSPECIFIED}else if(i.includes(c))e[c]=cs(f);else if(s.includes(c)){const m=[];for(const p of f){if(p.type=="null"){e.nullable=!0;continue}m.push(cs(p))}e[c]=m}else if(r.includes(c)){const m={};for(const[p,v]of Object.entries(f))m[p]=cs(v);e[c]=m}else{if(c==="additionalProperties")continue;e[c]=f}return e}function of(t){return cs(t)}function sf(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function rf(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function gs(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=cs(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=cs(e.response));return t}function ys(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of t)e.push(i);return e}function bA(t,e,i,s=1){const r=!e.startsWith(`${i}/`)&&e.split("/").length===s;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${i}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}/${e}`:e:r?`${i}/${e}`:e}function ai(t,e){if(typeof e!="string")throw new Error("name must be a string");return bA(t,e,"cachedContents")}function W0(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ui(t){return Zd(t)}function AA(t){return t!=null&&typeof t=="object"&&"name"in t}function CA(t){return t!=null&&typeof t=="object"&&"video"in t}function xA(t){return t!=null&&typeof t=="object"&&"uri"in t}function Z0(t){var e;let i;if(AA(t)&&(i=t.name),!(xA(t)&&(i=t.uri,i===void 0))&&!(CA(t)&&(i=(e=t.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof t=="string"&&(i=t),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const r=i.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${i}`);i=r[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function e_(t,e){let i;return t.isVertexAI()?i=e?"publishers/google/models":"models":i=e?"models":"tunedModels",i}function t_(t){for(const e of["models","tunedModels","publisherModels"])if(RA(t,e))return t[e];return[]}function RA(t,e){return t!==null&&typeof t=="object"&&e in t}function NA(t,e={}){const i=t,s={name:i.name,description:i.description,parametersJsonSchema:i.inputSchema};return i.outputSchema&&(s.responseJsonSchema=i.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function IA(t,e={}){const i=[],s=new Set;for(const r of t){const l=r.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const c=NA(r,e);c.functionDeclarations&&i.push(...c.functionDeclarations)}return{functionDeclarations:i}}function n_(t,e){let i;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))i={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))i={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))i={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");i={inlinedRequests:e}}else i=e;const s=[i.gcsUri,i.bigqueryUri].filter(Boolean).length,r=[i.inlinedRequests,i.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return i}function MA(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function i_(t){if(typeof t!="object"||t===null)return{};const e=t,i=e.inlinedResponses;if(typeof i!="object"||i===null)return t;const r=i.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let l=!1;for(const c of r){if(typeof c!="object"||c===null)continue;const m=c.response;if(typeof m!="object"||m===null)continue;if(m.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function vs(t,e){const i=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function o_(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kA(t){const e={},i=d(t,["responsesFile"]);i!=null&&h(e,["fileName"],i);const s=d(t,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>fC(c))),h(e,["inlinedResponses"],l)}const r=d(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["inlinedEmbedContentResponses"],l)}return e}function DA(t){const e={},i=d(t,["predictionsFormat"]);i!=null&&h(e,["format"],i);const s=d(t,["gcsDestination","outputUriPrefix"]);s!=null&&h(e,["gcsUri"],s);const r=d(t,["bigqueryDestination","outputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function UA(t){const e={},i=d(t,["format"]);i!=null&&h(e,["predictionsFormat"],i);const s=d(t,["gcsUri"]);s!=null&&h(e,["gcsDestination","outputUriPrefix"],s);const r=d(t,["bigqueryUri"]);if(r!=null&&h(e,["bigqueryDestination","outputUri"],r),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function sl(t){const e={},i=d(t,["name"]);i!=null&&h(e,["name"],i);const s=d(t,["metadata","displayName"]);s!=null&&h(e,["displayName"],s);const r=d(t,["metadata","state"]);r!=null&&h(e,["state"],o_(r));const l=d(t,["metadata","createTime"]);l!=null&&h(e,["createTime"],l);const c=d(t,["metadata","endTime"]);c!=null&&h(e,["endTime"],c);const f=d(t,["metadata","updateTime"]);f!=null&&h(e,["updateTime"],f);const m=d(t,["metadata","model"]);m!=null&&h(e,["model"],m);const p=d(t,["metadata","output"]);return p!=null&&h(e,["dest"],kA(i_(p))),e}function Md(t){const e={},i=d(t,["name"]);i!=null&&h(e,["name"],i);const s=d(t,["displayName"]);s!=null&&h(e,["displayName"],s);const r=d(t,["state"]);r!=null&&h(e,["state"],o_(r));const l=d(t,["error"]);l!=null&&h(e,["error"],l);const c=d(t,["createTime"]);c!=null&&h(e,["createTime"],c);const f=d(t,["startTime"]);f!=null&&h(e,["startTime"],f);const m=d(t,["endTime"]);m!=null&&h(e,["endTime"],m);const p=d(t,["updateTime"]);p!=null&&h(e,["updateTime"],p);const v=d(t,["model"]);v!=null&&h(e,["model"],v);const _=d(t,["inputConfig"]);_!=null&&h(e,["src"],OA(_));const S=d(t,["outputConfig"]);S!=null&&h(e,["dest"],DA(i_(S)));const T=d(t,["completionStats"]);return T!=null&&h(e,["completionStats"],T),e}function OA(t){const e={},i=d(t,["instancesFormat"]);i!=null&&h(e,["format"],i);const s=d(t,["gcsSource","uris"]);s!=null&&h(e,["gcsUri"],s);const r=d(t,["bigquerySource","inputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function PA(t,e){const i={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=d(e,["fileName"]);s!=null&&h(i,["fileName"],s);const r=d(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>dC(t,c))),h(i,["requests","requests"],l)}return i}function LA(t){const e={},i=d(t,["format"]);i!=null&&h(e,["instancesFormat"],i);const s=d(t,["gcsUri"]);s!=null&&h(e,["gcsSource","uris"],s);const r=d(t,["bigqueryUri"]);if(r!=null&&h(e,["bigquerySource","inputUri"],r),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function qA(t){const e={},i=d(t,["data"]);if(i!=null&&h(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function GA(t,e){const i={},s=d(e,["name"]);return s!=null&&h(i,["_url","name"],vs(t,s)),i}function BA(t,e){const i={},s=d(e,["name"]);return s!=null&&h(i,["_url","name"],vs(t,s)),i}function HA(t){const e={},i=d(t,["content"]);i!=null&&h(e,["content"],i);const s=d(t,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],VA(s));const r=d(t,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const l=d(t,["finishReason"]);l!=null&&h(e,["finishReason"],l);const c=d(t,["avgLogprobs"]);c!=null&&h(e,["avgLogprobs"],c);const f=d(t,["groundingMetadata"]);f!=null&&h(e,["groundingMetadata"],f);const m=d(t,["index"]);m!=null&&h(e,["index"],m);const p=d(t,["logprobsResult"]);p!=null&&h(e,["logprobsResult"],p);const v=d(t,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(T=>T)),h(e,["safetyRatings"],S)}const _=d(t,["urlContextMetadata"]);return _!=null&&h(e,["urlContextMetadata"],_),e}function VA(t){const e={},i=d(t,["citationSources"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>r)),h(e,["citations"],s)}return e}function s_(t){const e={},i=d(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>_C(l))),h(e,["parts"],r)}const s=d(t,["role"]);return s!=null&&h(e,["role"],s),e}function zA(t,e){const i={},s=d(t,["displayName"]);if(e!==void 0&&s!=null&&h(e,["batch","displayName"],s),d(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function FA(t,e){const i={},s=d(t,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const r=d(t,["dest"]);return e!==void 0&&r!=null&&h(e,["outputConfig"],UA(MA(r))),i}function ov(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["_url","model"],Oe(t,s));const r=d(e,["src"]);r!=null&&h(i,["batch","inputConfig"],PA(t,n_(t,r)));const l=d(e,["config"]);return l!=null&&zA(l,i),i}function $A(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["model"],Oe(t,s));const r=d(e,["src"]);r!=null&&h(i,["inputConfig"],LA(n_(t,r)));const l=d(e,["config"]);return l!=null&&FA(l,i),i}function JA(t,e){const i={},s=d(t,["displayName"]);return e!==void 0&&s!=null&&h(e,["batch","displayName"],s),i}function KA(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["_url","model"],Oe(t,s));const r=d(e,["src"]);r!=null&&h(i,["batch","inputConfig"],eC(t,r));const l=d(e,["config"]);return l!=null&&JA(l,i),i}function jA(t,e){const i={},s=d(e,["name"]);return s!=null&&h(i,["_url","name"],vs(t,s)),i}function YA(t,e){const i={},s=d(e,["name"]);return s!=null&&h(i,["_url","name"],vs(t,s)),i}function XA(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["name"]);s!=null&&h(e,["name"],s);const r=d(t,["done"]);r!=null&&h(e,["done"],r);const l=d(t,["error"]);return l!=null&&h(e,["error"],l),e}function QA(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["name"]);s!=null&&h(e,["name"],s);const r=d(t,["done"]);r!=null&&h(e,["done"],r);const l=d(t,["error"]);return l!=null&&h(e,["error"],l),e}function WA(t,e){const i={},s=d(e,["contents"]);if(s!=null){let l=nf(t,s);Array.isArray(l)&&(l=l.map(c=>c)),h(i,["requests[]","request","content"],l)}const r=d(e,["config"]);return r!=null&&(h(i,["_self"],ZA(r,i)),Yb(i,{"requests[].*":"requests[].request.*"})),i}function ZA(t,e){const i={},s=d(t,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const r=d(t,["title"]);e!==void 0&&r!=null&&h(e,["requests[]","title"],r);const l=d(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function eC(t,e){const i={},s=d(e,["fileName"]);s!=null&&h(i,["file_name"],s);const r=d(e,["inlinedRequests"]);return r!=null&&h(i,["requests"],WA(t,r)),i}function tC(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&h(e,["fileUri"],i);const s=d(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function nC(t){const e={},i=d(t,["id"]);i!=null&&h(e,["id"],i);const s=d(t,["args"]);s!=null&&h(e,["args"],s);const r=d(t,["name"]);if(r!=null&&h(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function iC(t){const e={},i=d(t,["mode"]);i!=null&&h(e,["mode"],i);const s=d(t,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function oC(t,e,i){const s={},r=d(e,["systemInstruction"]);i!==void 0&&r!=null&&h(i,["systemInstruction"],s_(Ut(r)));const l=d(e,["temperature"]);l!=null&&h(s,["temperature"],l);const c=d(e,["topP"]);c!=null&&h(s,["topP"],c);const f=d(e,["topK"]);f!=null&&h(s,["topK"],f);const m=d(e,["candidateCount"]);m!=null&&h(s,["candidateCount"],m);const p=d(e,["maxOutputTokens"]);p!=null&&h(s,["maxOutputTokens"],p);const v=d(e,["stopSequences"]);v!=null&&h(s,["stopSequences"],v);const _=d(e,["responseLogprobs"]);_!=null&&h(s,["responseLogprobs"],_);const S=d(e,["logprobs"]);S!=null&&h(s,["logprobs"],S);const T=d(e,["presencePenalty"]);T!=null&&h(s,["presencePenalty"],T);const A=d(e,["frequencyPenalty"]);A!=null&&h(s,["frequencyPenalty"],A);const x=d(e,["seed"]);x!=null&&h(s,["seed"],x);const C=d(e,["responseMimeType"]);C!=null&&h(s,["responseMimeType"],C);const R=d(e,["responseSchema"]);R!=null&&h(s,["responseSchema"],of(R));const D=d(e,["responseJsonSchema"]);if(D!=null&&h(s,["responseJsonSchema"],D),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=d(e,["safetySettings"]);if(i!==void 0&&I!=null){let Re=I;Array.isArray(Re)&&(Re=Re.map(ze=>SC(ze))),h(i,["safetySettings"],Re)}const B=d(e,["tools"]);if(i!==void 0&&B!=null){let Re=ys(B);Array.isArray(Re)&&(Re=Re.map(ze=>TC(gs(ze)))),h(i,["tools"],Re)}const K=d(e,["toolConfig"]);if(i!==void 0&&K!=null&&h(i,["toolConfig"],EC(K)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Y=d(e,["cachedContent"]);i!==void 0&&Y!=null&&h(i,["cachedContent"],ai(t,Y));const $=d(e,["responseModalities"]);$!=null&&h(s,["responseModalities"],$);const ne=d(e,["mediaResolution"]);ne!=null&&h(s,["mediaResolution"],ne);const X=d(e,["speechConfig"]);if(X!=null&&h(s,["speechConfig"],sf(X)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ue=d(e,["thinkingConfig"]);ue!=null&&h(s,["thinkingConfig"],ue);const pe=d(e,["imageConfig"]);pe!=null&&h(s,["imageConfig"],cC(pe));const be=d(e,["enableEnhancedCivicAnswers"]);return be!=null&&h(s,["enableEnhancedCivicAnswers"],be),s}function sC(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(p=>HA(p))),h(e,["candidates"],m)}const r=d(t,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const l=d(t,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const c=d(t,["responseId"]);c!=null&&h(e,["responseId"],c);const f=d(t,["usageMetadata"]);return f!=null&&h(e,["usageMetadata"],f),e}function rC(t,e){const i={},s=d(e,["name"]);return s!=null&&h(i,["_url","name"],vs(t,s)),i}function aC(t,e){const i={},s=d(e,["name"]);return s!=null&&h(i,["_url","name"],vs(t,s)),i}function lC(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&h(e,["enableWidget"],i),e}function uC(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&h(e,["timeRangeFilter"],i),e}function cC(t){const e={},i=d(t,["aspectRatio"]);i!=null&&h(e,["aspectRatio"],i);const s=d(t,["imageSize"]);if(s!=null&&h(e,["imageSize"],s),d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function dC(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["request","model"],Oe(t,s));const r=d(e,["contents"]);if(r!=null){let f=gn(r);Array.isArray(f)&&(f=f.map(m=>s_(m))),h(i,["request","contents"],f)}const l=d(e,["metadata"]);l!=null&&h(i,["metadata"],l);const c=d(e,["config"]);return c!=null&&h(i,["request","generationConfig"],oC(t,c,d(i,["request"],{}))),i}function fC(t){const e={},i=d(t,["response"]);i!=null&&h(e,["response"],sC(i));const s=d(t,["error"]);return s!=null&&h(e,["error"],s),e}function hC(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=d(t,["pageToken"]);if(e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),d(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function pC(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=d(t,["pageToken"]);e!==void 0&&r!=null&&h(e,["_query","pageToken"],r);const l=d(t,["filter"]);return e!==void 0&&l!=null&&h(e,["_query","filter"],l),i}function mC(t){const e={},i=d(t,["config"]);return i!=null&&hC(i,e),e}function gC(t){const e={},i=d(t,["config"]);return i!=null&&pC(i,e),e}function yC(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=d(t,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>sl(c))),h(e,["batchJobs"],l)}return e}function vC(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=d(t,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Md(c))),h(e,["batchJobs"],l)}return e}function _C(t){const e={},i=d(t,["mediaResolution"]);i!=null&&h(e,["mediaResolution"],i);const s=d(t,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=d(t,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&h(e,["fileData"],tC(l));const c=d(t,["functionCall"]);c!=null&&h(e,["functionCall"],nC(c));const f=d(t,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(t,["inlineData"]);m!=null&&h(e,["inlineData"],qA(m));const p=d(t,["text"]);p!=null&&h(e,["text"],p);const v=d(t,["thought"]);v!=null&&h(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&h(e,["thoughtSignature"],_);const S=d(t,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function SC(t){const e={},i=d(t,["category"]);if(i!=null&&h(e,["category"],i),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=d(t,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function EC(t){const e={},i=d(t,["functionCallingConfig"]);i!=null&&h(e,["functionCallingConfig"],iC(i));const s=d(t,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function TC(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(_=>_)),h(e,["functionDeclarations"],v)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(t,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const r=d(t,["computerUse"]);r!=null&&h(e,["computerUse"],r);const l=d(t,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=d(t,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&h(e,["googleMaps"],lC(f));const m=d(t,["googleSearch"]);m!=null&&h(e,["googleSearch"],uC(m));const p=d(t,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var oi;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(oi||(oi={}));class co{constructor(e,i,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(e,s,r)}init(e,i,s){var r,l;this.nameInternal=e,this.pageInternal=i[this.nameInternal]||[],this.sdkHttpResponseInternal=i==null?void 0:i.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=i.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wC extends ri{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new co(oi.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(i),i),this.create=async i=>(this.apiClient.isVertexAI()&&(i.config=this.formatDestination(i.src,i.config)),this.createInternal(i)),this.createEmbeddings=async i=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(i)}}createInlinedGenerateContentRequest(e){const i=ov(this.apiClient,e),s=i._url,r=W("{model}:batchGenerateContent",s),f=i.batch.inputConfig.requests,m=f.requests,p=[];for(const v of m){const _=Object.assign({},v);if(_.systemInstruction){const S=_.systemInstruction;delete _.systemInstruction;const T=_.request;T.systemInstruction=S,_.request=T}p.push(_)}return f.requests=p,delete i.config,delete i._url,delete i._query,{path:r,body:i}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,i){const s=i?Object.assign({},i):{},r=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${r}`),s.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${r}`;else if(c)s.dest=`${c}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=$A(this.apiClient,e);return f=W("batchPredictionJobs",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Md(v))}else{const p=ov(this.apiClient,e);return f=W("{model}:batchGenerateContent",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>sl(v))}}async createEmbeddingsInternal(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=KA(this.apiClient,e);return l=W("{model}:asyncBatchEmbedContent",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>sl(m))}}async get(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=aC(this.apiClient,e);return f=W("batchPredictionJobs/{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Md(v))}else{const p=rC(this.apiClient,e);return f=W("batches/{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>sl(v))}}async cancel(e){var i,s,r,l;let c="",f={};if(this.apiClient.isVertexAI()){const m=BA(this.apiClient,e);c=W("batchPredictionJobs/{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const m=GA(this.apiClient,e);c=W("batches/{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=gC(e);return f=W("batchPredictionJobs",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=vC(v),S=new ev;return Object.assign(S,_),S})}else{const p=mC(e);return f=W("batches",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=yC(v),S=new ev;return Object.assign(S,_),S})}}async delete(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=YA(this.apiClient,e);return f=W("batchPredictionJobs/{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>QA(v))}else{const p=jA(this.apiClient,e);return f=W("batches/{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>XA(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bC(t){const e={},i=d(t,["data"]);if(i!=null&&h(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function sv(t){const e={},i=d(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>KC(l))),h(e,["parts"],r)}const s=d(t,["role"]);return s!=null&&h(e,["role"],s),e}function AC(t,e){const i={},s=d(t,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=d(t,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const l=d(t,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const c=d(t,["contents"]);if(e!==void 0&&c!=null){let v=gn(c);Array.isArray(v)&&(v=v.map(_=>sv(_))),h(e,["contents"],v)}const f=d(t,["systemInstruction"]);e!==void 0&&f!=null&&h(e,["systemInstruction"],sv(Ut(f)));const m=d(t,["tools"]);if(e!==void 0&&m!=null){let v=m;Array.isArray(v)&&(v=v.map(_=>YC(_))),h(e,["tools"],v)}const p=d(t,["toolConfig"]);if(e!==void 0&&p!=null&&h(e,["toolConfig"],jC(p)),d(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function CC(t,e){const i={},s=d(t,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=d(t,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const l=d(t,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const c=d(t,["contents"]);if(e!==void 0&&c!=null){let _=gn(c);Array.isArray(_)&&(_=_.map(S=>S)),h(e,["contents"],_)}const f=d(t,["systemInstruction"]);e!==void 0&&f!=null&&h(e,["systemInstruction"],Ut(f));const m=d(t,["tools"]);if(e!==void 0&&m!=null){let _=m;Array.isArray(_)&&(_=_.map(S=>XC(S))),h(e,["tools"],_)}const p=d(t,["toolConfig"]);e!==void 0&&p!=null&&h(e,["toolConfig"],p);const v=d(t,["kmsKeyName"]);return e!==void 0&&v!=null&&h(e,["encryption_spec","kmsKeyName"],v),i}function xC(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["model"],K0(t,s));const r=d(e,["config"]);return r!=null&&AC(r,i),i}function RC(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["model"],K0(t,s));const r=d(e,["config"]);return r!=null&&CC(r,i),i}function NC(t,e){const i={},s=d(e,["name"]);return s!=null&&h(i,["_url","name"],ai(t,s)),i}function IC(t,e){const i={},s=d(e,["name"]);return s!=null&&h(i,["_url","name"],ai(t,s)),i}function MC(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&h(e,["sdkHttpResponse"],i),e}function kC(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&h(e,["sdkHttpResponse"],i),e}function DC(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&h(e,["fileUri"],i);const s=d(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function UC(t){const e={},i=d(t,["id"]);i!=null&&h(e,["id"],i);const s=d(t,["args"]);s!=null&&h(e,["args"],s);const r=d(t,["name"]);if(r!=null&&h(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function OC(t){const e={},i=d(t,["mode"]);i!=null&&h(e,["mode"],i);const s=d(t,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function PC(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(t,["description"]);i!=null&&h(e,["description"],i);const s=d(t,["name"]);s!=null&&h(e,["name"],s);const r=d(t,["parameters"]);r!=null&&h(e,["parameters"],r);const l=d(t,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=d(t,["response"]);c!=null&&h(e,["response"],c);const f=d(t,["responseJsonSchema"]);return f!=null&&h(e,["responseJsonSchema"],f),e}function LC(t,e){const i={},s=d(e,["name"]);return s!=null&&h(i,["_url","name"],ai(t,s)),i}function qC(t,e){const i={},s=d(e,["name"]);return s!=null&&h(i,["_url","name"],ai(t,s)),i}function GC(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&h(e,["enableWidget"],i),e}function BC(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&h(e,["timeRangeFilter"],i),e}function HC(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),i}function VC(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),i}function zC(t){const e={},i=d(t,["config"]);return i!=null&&HC(i,e),e}function FC(t){const e={},i=d(t,["config"]);return i!=null&&VC(i,e),e}function $C(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=d(t,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["cachedContents"],l)}return e}function JC(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=d(t,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["cachedContents"],l)}return e}function KC(t){const e={},i=d(t,["mediaResolution"]);i!=null&&h(e,["mediaResolution"],i);const s=d(t,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=d(t,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&h(e,["fileData"],DC(l));const c=d(t,["functionCall"]);c!=null&&h(e,["functionCall"],UC(c));const f=d(t,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(t,["inlineData"]);m!=null&&h(e,["inlineData"],bC(m));const p=d(t,["text"]);p!=null&&h(e,["text"],p);const v=d(t,["thought"]);v!=null&&h(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&h(e,["thoughtSignature"],_);const S=d(t,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function jC(t){const e={},i=d(t,["functionCallingConfig"]);i!=null&&h(e,["functionCallingConfig"],OC(i));const s=d(t,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function YC(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(_=>_)),h(e,["functionDeclarations"],v)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(t,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const r=d(t,["computerUse"]);r!=null&&h(e,["computerUse"],r);const l=d(t,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=d(t,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&h(e,["googleMaps"],GC(f));const m=d(t,["googleSearch"]);m!=null&&h(e,["googleSearch"],BC(m));const p=d(t,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function XC(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(S=>PC(S))),h(e,["functionDeclarations"],_)}const s=d(t,["retrieval"]);s!=null&&h(e,["retrieval"],s);const r=d(t,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const l=d(t,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(t,["codeExecution"]);c!=null&&h(e,["codeExecution"],c);const f=d(t,["enterpriseWebSearch"]);f!=null&&h(e,["enterpriseWebSearch"],f);const m=d(t,["googleMaps"]);m!=null&&h(e,["googleMaps"],m);const p=d(t,["googleSearch"]);p!=null&&h(e,["googleSearch"],p);const v=d(t,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function QC(t,e){const i={},s=d(t,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=d(t,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),i}function WC(t,e){const i={},s=d(t,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=d(t,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),i}function ZC(t,e){const i={},s=d(e,["name"]);s!=null&&h(i,["_url","name"],ai(t,s));const r=d(e,["config"]);return r!=null&&QC(r,i),i}function ex(t,e){const i={},s=d(e,["name"]);s!=null&&h(i,["_url","name"],ai(t,s));const r=d(e,["config"]);return r!=null&&WC(r,i),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tx extends ri{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new co(oi.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(i),i)}async create(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=RC(this.apiClient,e);return f=W("cachedContents",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=xC(this.apiClient,e);return f=W("cachedContents",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=qC(this.apiClient,e);return f=W("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=LC(this.apiClient,e);return f=W("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=IC(this.apiClient,e);return f=W("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=kC(v),S=new Wy;return Object.assign(S,_),S})}else{const p=NC(this.apiClient,e);return f=W("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=MC(v),S=new Wy;return Object.assign(S,_),S})}}async update(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=ex(this.apiClient,e);return f=W("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=ZC(this.apiClient,e);return f=W("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=FC(e);return f=W("cachedContents",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=JC(v),S=new Zy;return Object.assign(S,_),S})}else{const p=zC(e);return f=W("cachedContents",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=$C(v),S=new Zy;return Object.assign(S,_),S})}}}function _l(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]]);return i}function rv(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],s=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function me(t){return this instanceof me?(this.v=t,this):new me(t)}function An(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=i.apply(t,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(T){return function(A){return Promise.resolve(A).then(T,_)}}function f(T,A){s[T]&&(r[T]=function(x){return new Promise(function(C,R){l.push([T,x,C,R])>1||m(T,x)})},A&&(r[T]=A(r[T])))}function m(T,A){try{p(s[T](A))}catch(x){S(l[0][3],x)}}function p(T){T.value instanceof me?Promise.resolve(T.value.v).then(v,_):S(l[0][2],T)}function v(T){m("next",T)}function _(T){m("throw",T)}function S(T,A){T(A),l.shift(),l.length&&m(l[0][0],l[0][1])}}function Cn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof rv=="function"?rv(t):t[Symbol.iterator](),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(l){i[l]=t[l]&&function(c){return new Promise(function(f,m){c=t[l](c),r(f,m,c.done,c.value)})}}function r(l,c,f,m){Promise.resolve(m).then(function(p){l({value:p,done:f})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nx(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const i=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return i===void 0?!1:r_(i)}function r_(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function ix(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function av(t){if(t===void 0||t.length===0)return[];const e=[],i=t.length;let s=0;for(;s<i;)if(t[s].role==="user")e.push(t[s]),s++;else{const r=[];let l=!0;for(;s<i&&t[s].role==="model";)r.push(t[s]),l&&!r_(t[s])&&(l=!1),s++;l?e.push(...r):e.pop()}return e}class ox{constructor(e,i){this.modelsModule=e,this.apiClient=i}create(e){return new sx(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class sx{constructor(e,i,s,r={},l=[]){this.apiClient=e,this.modelsModule=i,this.model=s,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),ix(l)}async sendMessage(e){var i;await this.sendPromise;const s=Ut(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(i=e.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var l,c,f;const m=await r,p=(c=(l=m.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,v=m.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let S=[];v!=null&&(S=(f=v.slice(_))!==null&&f!==void 0?f:[]);const T=p?[p]:[];this.recordHistory(s,T,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var i;await this.sendPromise;const s=Ut(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(i=e.config)!==null&&i!==void 0?i:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,s)}getHistory(e=!1){const i=e?av(this.history):this.history;return structuredClone(i)}processStreamResponse(e,i){return An(this,arguments,function*(){var r,l,c,f,m,p;const v=[];try{for(var _=!0,S=Cn(e),T;T=yield me(S.next()),r=T.done,!r;_=!0){f=T.value,_=!1;const A=f;if(nx(A)){const x=(p=(m=A.candidates)===null||m===void 0?void 0:m[0])===null||p===void 0?void 0:p.content;x!==void 0&&v.push(x)}yield yield me(A)}}catch(A){l={error:A}}finally{try{!_&&!r&&(c=S.return)&&(yield me(c.call(S)))}finally{if(l)throw l.error}}this.recordHistory(i,v)})}recordHistory(e,i,s){let r=[];i.length>0&&i.every(l=>l.role!==void 0)?r=i:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...av(s)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Cl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rx(t){const e={},i=d(t,["file"]);return i!=null&&h(e,["file"],i),e}function ax(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&h(e,["sdkHttpResponse"],i),e}function lx(t){const e={},i=d(t,["name"]);return i!=null&&h(e,["_url","file"],Z0(i)),e}function ux(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&h(e,["sdkHttpResponse"],i),e}function cx(t){const e={},i=d(t,["name"]);return i!=null&&h(e,["_url","file"],Z0(i)),e}function dx(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),i}function fx(t){const e={},i=d(t,["config"]);return i!=null&&dx(i,e),e}function hx(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=d(t,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class px extends ri{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new co(oi.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(i),i)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(i=>i)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=fx(e);return l=W("files",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=hx(m),v=new vA;return Object.assign(v,p),v})}}async createInternal(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=rx(e);return l=W("upload/v1beta/files",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=ax(m),v=new _A;return Object.assign(v,p),v})}}async get(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=cx(e);return l=W("files/{file}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async delete(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=lx(e);return l=W("files/{file}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=ux(m),v=new SA;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rl(t){const e={},i=d(t,["data"]);if(i!=null&&h(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function mx(t){const e={},i=d(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>Mx(l))),h(e,["parts"],r)}const s=d(t,["role"]);return s!=null&&h(e,["role"],s),e}function gx(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&h(e,["fileUri"],i);const s=d(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function yx(t){const e={},i=d(t,["id"]);i!=null&&h(e,["id"],i);const s=d(t,["args"]);s!=null&&h(e,["args"],s);const r=d(t,["name"]);if(r!=null&&h(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function vx(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(t,["description"]);i!=null&&h(e,["description"],i);const s=d(t,["name"]);s!=null&&h(e,["name"],s);const r=d(t,["parameters"]);r!=null&&h(e,["parameters"],r);const l=d(t,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=d(t,["response"]);c!=null&&h(e,["response"],c);const f=d(t,["responseJsonSchema"]);return f!=null&&h(e,["responseJsonSchema"],f),e}function _x(t){const e={},i=d(t,["modelSelectionConfig"]);i!=null&&h(e,["modelConfig"],i);const s=d(t,["responseJsonSchema"]);s!=null&&h(e,["responseJsonSchema"],s);const r=d(t,["audioTimestamp"]);r!=null&&h(e,["audioTimestamp"],r);const l=d(t,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const c=d(t,["enableAffectiveDialog"]);c!=null&&h(e,["enableAffectiveDialog"],c);const f=d(t,["frequencyPenalty"]);f!=null&&h(e,["frequencyPenalty"],f);const m=d(t,["logprobs"]);m!=null&&h(e,["logprobs"],m);const p=d(t,["maxOutputTokens"]);p!=null&&h(e,["maxOutputTokens"],p);const v=d(t,["mediaResolution"]);v!=null&&h(e,["mediaResolution"],v);const _=d(t,["presencePenalty"]);_!=null&&h(e,["presencePenalty"],_);const S=d(t,["responseLogprobs"]);S!=null&&h(e,["responseLogprobs"],S);const T=d(t,["responseMimeType"]);T!=null&&h(e,["responseMimeType"],T);const A=d(t,["responseModalities"]);A!=null&&h(e,["responseModalities"],A);const x=d(t,["responseSchema"]);x!=null&&h(e,["responseSchema"],x);const C=d(t,["routingConfig"]);C!=null&&h(e,["routingConfig"],C);const R=d(t,["seed"]);R!=null&&h(e,["seed"],R);const D=d(t,["speechConfig"]);D!=null&&h(e,["speechConfig"],a_(D));const I=d(t,["stopSequences"]);I!=null&&h(e,["stopSequences"],I);const B=d(t,["temperature"]);B!=null&&h(e,["temperature"],B);const K=d(t,["thinkingConfig"]);K!=null&&h(e,["thinkingConfig"],K);const Y=d(t,["topK"]);Y!=null&&h(e,["topK"],Y);const $=d(t,["topP"]);if($!=null&&h(e,["topP"],$),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Sx(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&h(e,["enableWidget"],i),e}function Ex(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&h(e,["timeRangeFilter"],i),e}function Tx(t,e){const i={},s=d(t,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const r=d(t,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=d(t,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=d(t,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const f=d(t,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);const m=d(t,["maxOutputTokens"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","maxOutputTokens"],m);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const v=d(t,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const _=d(t,["speechConfig"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","speechConfig"],rf(_));const S=d(t,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const T=d(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],T);const A=d(t,["systemInstruction"]);e!==void 0&&A!=null&&h(e,["setup","systemInstruction"],mx(Ut(A)));const x=d(t,["tools"]);if(e!==void 0&&x!=null){let Y=ys(x);Array.isArray(Y)&&(Y=Y.map($=>Dx(gs($)))),h(e,["setup","tools"],Y)}const C=d(t,["sessionResumption"]);e!==void 0&&C!=null&&h(e,["setup","sessionResumption"],kx(C));const R=d(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&h(e,["setup","inputAudioTranscription"],R);const D=d(t,["outputAudioTranscription"]);e!==void 0&&D!=null&&h(e,["setup","outputAudioTranscription"],D);const I=d(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&h(e,["setup","realtimeInputConfig"],I);const B=d(t,["contextWindowCompression"]);e!==void 0&&B!=null&&h(e,["setup","contextWindowCompression"],B);const K=d(t,["proactivity"]);if(e!==void 0&&K!=null&&h(e,["setup","proactivity"],K),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return i}function wx(t,e){const i={},s=d(t,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],_x(s));const r=d(t,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=d(t,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=d(t,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const f=d(t,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);const m=d(t,["maxOutputTokens"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","maxOutputTokens"],m);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const v=d(t,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const _=d(t,["speechConfig"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","speechConfig"],a_(rf(_)));const S=d(t,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const T=d(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],T);const A=d(t,["systemInstruction"]);e!==void 0&&A!=null&&h(e,["setup","systemInstruction"],Ut(A));const x=d(t,["tools"]);if(e!==void 0&&x!=null){let $=ys(x);Array.isArray($)&&($=$.map(ne=>Ux(gs(ne)))),h(e,["setup","tools"],$)}const C=d(t,["sessionResumption"]);e!==void 0&&C!=null&&h(e,["setup","sessionResumption"],C);const R=d(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&h(e,["setup","inputAudioTranscription"],R);const D=d(t,["outputAudioTranscription"]);e!==void 0&&D!=null&&h(e,["setup","outputAudioTranscription"],D);const I=d(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&h(e,["setup","realtimeInputConfig"],I);const B=d(t,["contextWindowCompression"]);e!==void 0&&B!=null&&h(e,["setup","contextWindowCompression"],B);const K=d(t,["proactivity"]);e!==void 0&&K!=null&&h(e,["setup","proactivity"],K);const Y=d(t,["explicitVadSignal"]);return e!==void 0&&Y!=null&&h(e,["setup","explicitVadSignal"],Y),i}function bx(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["setup","model"],Oe(t,s));const r=d(e,["config"]);return r!=null&&h(i,["config"],Tx(r,i)),i}function Ax(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["setup","model"],Oe(t,s));const r=d(e,["config"]);return r!=null&&h(i,["config"],wx(r,i)),i}function Cx(t){const e={},i=d(t,["musicGenerationConfig"]);return i!=null&&h(e,["musicGenerationConfig"],i),e}function xx(t){const e={},i=d(t,["weightedPrompts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>r)),h(e,["weightedPrompts"],s)}return e}function Rx(t){const e={},i=d(t,["media"]);if(i!=null){let p=j0(i);Array.isArray(p)&&(p=p.map(v=>rl(v))),h(e,["mediaChunks"],p)}const s=d(t,["audio"]);s!=null&&h(e,["audio"],rl(X0(s)));const r=d(t,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const l=d(t,["video"]);l!=null&&h(e,["video"],rl(Y0(l)));const c=d(t,["text"]);c!=null&&h(e,["text"],c);const f=d(t,["activityStart"]);f!=null&&h(e,["activityStart"],f);const m=d(t,["activityEnd"]);return m!=null&&h(e,["activityEnd"],m),e}function Nx(t){const e={},i=d(t,["media"]);if(i!=null){let p=j0(i);Array.isArray(p)&&(p=p.map(v=>v)),h(e,["mediaChunks"],p)}const s=d(t,["audio"]);s!=null&&h(e,["audio"],X0(s));const r=d(t,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const l=d(t,["video"]);l!=null&&h(e,["video"],Y0(l));const c=d(t,["text"]);c!=null&&h(e,["text"],c);const f=d(t,["activityStart"]);f!=null&&h(e,["activityStart"],f);const m=d(t,["activityEnd"]);return m!=null&&h(e,["activityEnd"],m),e}function Ix(t){const e={},i=d(t,["setupComplete"]);i!=null&&h(e,["setupComplete"],i);const s=d(t,["serverContent"]);s!=null&&h(e,["serverContent"],s);const r=d(t,["toolCall"]);r!=null&&h(e,["toolCall"],r);const l=d(t,["toolCallCancellation"]);l!=null&&h(e,["toolCallCancellation"],l);const c=d(t,["usageMetadata"]);c!=null&&h(e,["usageMetadata"],Ox(c));const f=d(t,["goAway"]);f!=null&&h(e,["goAway"],f);const m=d(t,["sessionResumptionUpdate"]);m!=null&&h(e,["sessionResumptionUpdate"],m);const p=d(t,["voiceActivityDetectionSignal"]);return p!=null&&h(e,["voiceActivityDetectionSignal"],p),e}function Mx(t){const e={},i=d(t,["mediaResolution"]);i!=null&&h(e,["mediaResolution"],i);const s=d(t,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=d(t,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&h(e,["fileData"],gx(l));const c=d(t,["functionCall"]);c!=null&&h(e,["functionCall"],yx(c));const f=d(t,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(t,["inlineData"]);m!=null&&h(e,["inlineData"],rl(m));const p=d(t,["text"]);p!=null&&h(e,["text"],p);const v=d(t,["thought"]);v!=null&&h(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&h(e,["thoughtSignature"],_);const S=d(t,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function kx(t){const e={},i=d(t,["handle"]);if(i!=null&&h(e,["handle"],i),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function a_(t){const e={},i=d(t,["voiceConfig"]);i!=null&&h(e,["voiceConfig"],i);const s=d(t,["languageCode"]);if(s!=null&&h(e,["languageCode"],s),d(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Dx(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(_=>_)),h(e,["functionDeclarations"],v)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(t,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const r=d(t,["computerUse"]);r!=null&&h(e,["computerUse"],r);const l=d(t,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=d(t,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&h(e,["googleMaps"],Sx(f));const m=d(t,["googleSearch"]);m!=null&&h(e,["googleSearch"],Ex(m));const p=d(t,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function Ux(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(S=>vx(S))),h(e,["functionDeclarations"],_)}const s=d(t,["retrieval"]);s!=null&&h(e,["retrieval"],s);const r=d(t,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const l=d(t,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(t,["codeExecution"]);c!=null&&h(e,["codeExecution"],c);const f=d(t,["enterpriseWebSearch"]);f!=null&&h(e,["enterpriseWebSearch"],f);const m=d(t,["googleMaps"]);m!=null&&h(e,["googleMaps"],m);const p=d(t,["googleSearch"]);p!=null&&h(e,["googleSearch"],p);const v=d(t,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function Ox(t){const e={},i=d(t,["promptTokenCount"]);i!=null&&h(e,["promptTokenCount"],i);const s=d(t,["cachedContentTokenCount"]);s!=null&&h(e,["cachedContentTokenCount"],s);const r=d(t,["candidatesTokenCount"]);r!=null&&h(e,["responseTokenCount"],r);const l=d(t,["toolUsePromptTokenCount"]);l!=null&&h(e,["toolUsePromptTokenCount"],l);const c=d(t,["thoughtsTokenCount"]);c!=null&&h(e,["thoughtsTokenCount"],c);const f=d(t,["totalTokenCount"]);f!=null&&h(e,["totalTokenCount"],f);const m=d(t,["promptTokensDetails"]);if(m!=null){let T=m;Array.isArray(T)&&(T=T.map(A=>A)),h(e,["promptTokensDetails"],T)}const p=d(t,["cacheTokensDetails"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(A=>A)),h(e,["cacheTokensDetails"],T)}const v=d(t,["candidatesTokensDetails"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(A=>A)),h(e,["responseTokensDetails"],T)}const _=d(t,["toolUsePromptTokensDetails"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(A=>A)),h(e,["toolUsePromptTokensDetails"],T)}const S=d(t,["trafficType"]);return S!=null&&h(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Px(t){const e={},i=d(t,["data"]);if(i!=null&&h(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function Lx(t){const e={},i=d(t,["content"]);i!=null&&h(e,["content"],i);const s=d(t,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],qx(s));const r=d(t,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const l=d(t,["finishReason"]);l!=null&&h(e,["finishReason"],l);const c=d(t,["avgLogprobs"]);c!=null&&h(e,["avgLogprobs"],c);const f=d(t,["groundingMetadata"]);f!=null&&h(e,["groundingMetadata"],f);const m=d(t,["index"]);m!=null&&h(e,["index"],m);const p=d(t,["logprobsResult"]);p!=null&&h(e,["logprobsResult"],p);const v=d(t,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(T=>T)),h(e,["safetyRatings"],S)}const _=d(t,["urlContextMetadata"]);return _!=null&&h(e,["urlContextMetadata"],_),e}function qx(t){const e={},i=d(t,["citationSources"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>r)),h(e,["citations"],s)}return e}function Gx(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["_url","model"],Oe(t,s));const r=d(e,["contents"]);if(r!=null){let l=gn(r);Array.isArray(l)&&(l=l.map(c=>c)),h(i,["contents"],l)}return i}function Bx(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["tokensInfo"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),h(e,["tokensInfo"],r)}return e}function Hx(t){const e={},i=d(t,["values"]);i!=null&&h(e,["values"],i);const s=d(t,["statistics"]);return s!=null&&h(e,["statistics"],Vx(s)),e}function Vx(t){const e={},i=d(t,["truncated"]);i!=null&&h(e,["truncated"],i);const s=d(t,["token_count"]);return s!=null&&h(e,["tokenCount"],s),e}function xl(t){const e={},i=d(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>QR(l))),h(e,["parts"],r)}const s=d(t,["role"]);return s!=null&&h(e,["role"],s),e}function zx(t){const e={},i=d(t,["controlType"]);i!=null&&h(e,["controlType"],i);const s=d(t,["enableControlImageComputation"]);return s!=null&&h(e,["computeControl"],s),e}function Fx(t){const e={};if(d(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function $x(t,e){const i={},s=d(t,["systemInstruction"]);e!==void 0&&s!=null&&h(e,["systemInstruction"],Ut(s));const r=d(t,["tools"]);if(e!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>f_(f))),h(e,["tools"],c)}const l=d(t,["generationConfig"]);return e!==void 0&&l!=null&&h(e,["generationConfig"],PR(l)),i}function Jx(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["_url","model"],Oe(t,s));const r=d(e,["contents"]);if(r!=null){let c=gn(r);Array.isArray(c)&&(c=c.map(f=>xl(f))),h(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&Fx(l),i}function Kx(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["_url","model"],Oe(t,s));const r=d(e,["contents"]);if(r!=null){let c=gn(r);Array.isArray(c)&&(c=c.map(f=>f)),h(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&$x(l,i),i}function jx(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["totalTokens"]);s!=null&&h(e,["totalTokens"],s);const r=d(t,["cachedContentTokenCount"]);return r!=null&&h(e,["cachedContentTokenCount"],r),e}function Yx(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["totalTokens"]);return s!=null&&h(e,["totalTokens"],s),e}function Xx(t,e){const i={},s=d(e,["model"]);return s!=null&&h(i,["_url","name"],Oe(t,s)),i}function Qx(t,e){const i={},s=d(e,["model"]);return s!=null&&h(i,["_url","name"],Oe(t,s)),i}function Wx(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&h(e,["sdkHttpResponse"],i),e}function Zx(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&h(e,["sdkHttpResponse"],i),e}function eR(t,e){const i={},s=d(t,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const r=d(t,["negativePrompt"]);e!==void 0&&r!=null&&h(e,["parameters","negativePrompt"],r);const l=d(t,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const c=d(t,["aspectRatio"]);e!==void 0&&c!=null&&h(e,["parameters","aspectRatio"],c);const f=d(t,["guidanceScale"]);e!==void 0&&f!=null&&h(e,["parameters","guidanceScale"],f);const m=d(t,["seed"]);e!==void 0&&m!=null&&h(e,["parameters","seed"],m);const p=d(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&h(e,["parameters","safetySetting"],p);const v=d(t,["personGeneration"]);e!==void 0&&v!=null&&h(e,["parameters","personGeneration"],v);const _=d(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&h(e,["parameters","includeSafetyAttributes"],_);const S=d(t,["includeRaiReason"]);e!==void 0&&S!=null&&h(e,["parameters","includeRaiReason"],S);const T=d(t,["language"]);e!==void 0&&T!=null&&h(e,["parameters","language"],T);const A=d(t,["outputMimeType"]);e!==void 0&&A!=null&&h(e,["parameters","outputOptions","mimeType"],A);const x=d(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&h(e,["parameters","outputOptions","compressionQuality"],x);const C=d(t,["addWatermark"]);e!==void 0&&C!=null&&h(e,["parameters","addWatermark"],C);const R=d(t,["labels"]);e!==void 0&&R!=null&&h(e,["labels"],R);const D=d(t,["editMode"]);e!==void 0&&D!=null&&h(e,["parameters","editMode"],D);const I=d(t,["baseSteps"]);return e!==void 0&&I!=null&&h(e,["parameters","editConfig","baseSteps"],I),i}function tR(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["_url","model"],Oe(t,s));const r=d(e,["prompt"]);r!=null&&h(i,["instances[0]","prompt"],r);const l=d(e,["referenceImages"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>iN(m))),h(i,["instances[0]","referenceImages"],f)}const c=d(e,["config"]);return c!=null&&eR(c,i),i}function nR(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>Rl(l))),h(e,["generatedImages"],r)}return e}function iR(t,e){const i={},s=d(t,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const r=d(t,["title"]);e!==void 0&&r!=null&&h(e,["requests[]","title"],r);const l=d(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function oR(t,e){const i={},s=d(t,["taskType"]);e!==void 0&&s!=null&&h(e,["instances[]","task_type"],s);const r=d(t,["title"]);e!==void 0&&r!=null&&h(e,["instances[]","title"],r);const l=d(t,["outputDimensionality"]);e!==void 0&&l!=null&&h(e,["parameters","outputDimensionality"],l);const c=d(t,["mimeType"]);e!==void 0&&c!=null&&h(e,["instances[]","mimeType"],c);const f=d(t,["autoTruncate"]);return e!==void 0&&f!=null&&h(e,["parameters","autoTruncate"],f),i}function sR(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["_url","model"],Oe(t,s));const r=d(e,["contents"]);if(r!=null){let f=nf(t,r);Array.isArray(f)&&(f=f.map(m=>m)),h(i,["requests[]","content"],f)}const l=d(e,["config"]);l!=null&&iR(l,i);const c=d(e,["model"]);return c!==void 0&&h(i,["requests[]","model"],Oe(t,c)),i}function rR(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["_url","model"],Oe(t,s));const r=d(e,["contents"]);if(r!=null){let c=nf(t,r);Array.isArray(c)&&(c=c.map(f=>f)),h(i,["instances[]","content"],c)}const l=d(e,["config"]);return l!=null&&oR(l,i),i}function aR(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["embeddings"],l)}const r=d(t,["metadata"]);return r!=null&&h(e,["metadata"],r),e}function lR(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>Hx(c))),h(e,["embeddings"],l)}const r=d(t,["metadata"]);return r!=null&&h(e,["metadata"],r),e}function uR(t){const e={},i=d(t,["endpoint"]);i!=null&&h(e,["name"],i);const s=d(t,["deployedModelId"]);return s!=null&&h(e,["deployedModelId"],s),e}function cR(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&h(e,["fileUri"],i);const s=d(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function dR(t){const e={},i=d(t,["id"]);i!=null&&h(e,["id"],i);const s=d(t,["args"]);s!=null&&h(e,["args"],s);const r=d(t,["name"]);if(r!=null&&h(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function fR(t){const e={},i=d(t,["mode"]);i!=null&&h(e,["mode"],i);const s=d(t,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function hR(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(t,["description"]);i!=null&&h(e,["description"],i);const s=d(t,["name"]);s!=null&&h(e,["name"],s);const r=d(t,["parameters"]);r!=null&&h(e,["parameters"],r);const l=d(t,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=d(t,["response"]);c!=null&&h(e,["response"],c);const f=d(t,["responseJsonSchema"]);return f!=null&&h(e,["responseJsonSchema"],f),e}function pR(t,e,i){const s={},r=d(e,["systemInstruction"]);i!==void 0&&r!=null&&h(i,["systemInstruction"],xl(Ut(r)));const l=d(e,["temperature"]);l!=null&&h(s,["temperature"],l);const c=d(e,["topP"]);c!=null&&h(s,["topP"],c);const f=d(e,["topK"]);f!=null&&h(s,["topK"],f);const m=d(e,["candidateCount"]);m!=null&&h(s,["candidateCount"],m);const p=d(e,["maxOutputTokens"]);p!=null&&h(s,["maxOutputTokens"],p);const v=d(e,["stopSequences"]);v!=null&&h(s,["stopSequences"],v);const _=d(e,["responseLogprobs"]);_!=null&&h(s,["responseLogprobs"],_);const S=d(e,["logprobs"]);S!=null&&h(s,["logprobs"],S);const T=d(e,["presencePenalty"]);T!=null&&h(s,["presencePenalty"],T);const A=d(e,["frequencyPenalty"]);A!=null&&h(s,["frequencyPenalty"],A);const x=d(e,["seed"]);x!=null&&h(s,["seed"],x);const C=d(e,["responseMimeType"]);C!=null&&h(s,["responseMimeType"],C);const R=d(e,["responseSchema"]);R!=null&&h(s,["responseSchema"],of(R));const D=d(e,["responseJsonSchema"]);if(D!=null&&h(s,["responseJsonSchema"],D),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=d(e,["safetySettings"]);if(i!==void 0&&I!=null){let Re=I;Array.isArray(Re)&&(Re=Re.map(ze=>oN(ze))),h(i,["safetySettings"],Re)}const B=d(e,["tools"]);if(i!==void 0&&B!=null){let Re=ys(B);Array.isArray(Re)&&(Re=Re.map(ze=>dN(gs(ze)))),h(i,["tools"],Re)}const K=d(e,["toolConfig"]);if(i!==void 0&&K!=null&&h(i,["toolConfig"],cN(K)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Y=d(e,["cachedContent"]);i!==void 0&&Y!=null&&h(i,["cachedContent"],ai(t,Y));const $=d(e,["responseModalities"]);$!=null&&h(s,["responseModalities"],$);const ne=d(e,["mediaResolution"]);ne!=null&&h(s,["mediaResolution"],ne);const X=d(e,["speechConfig"]);if(X!=null&&h(s,["speechConfig"],sf(X)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ue=d(e,["thinkingConfig"]);ue!=null&&h(s,["thinkingConfig"],ue);const pe=d(e,["imageConfig"]);pe!=null&&h(s,["imageConfig"],HR(pe));const be=d(e,["enableEnhancedCivicAnswers"]);return be!=null&&h(s,["enableEnhancedCivicAnswers"],be),s}function mR(t,e,i){const s={},r=d(e,["systemInstruction"]);i!==void 0&&r!=null&&h(i,["systemInstruction"],Ut(r));const l=d(e,["temperature"]);l!=null&&h(s,["temperature"],l);const c=d(e,["topP"]);c!=null&&h(s,["topP"],c);const f=d(e,["topK"]);f!=null&&h(s,["topK"],f);const m=d(e,["candidateCount"]);m!=null&&h(s,["candidateCount"],m);const p=d(e,["maxOutputTokens"]);p!=null&&h(s,["maxOutputTokens"],p);const v=d(e,["stopSequences"]);v!=null&&h(s,["stopSequences"],v);const _=d(e,["responseLogprobs"]);_!=null&&h(s,["responseLogprobs"],_);const S=d(e,["logprobs"]);S!=null&&h(s,["logprobs"],S);const T=d(e,["presencePenalty"]);T!=null&&h(s,["presencePenalty"],T);const A=d(e,["frequencyPenalty"]);A!=null&&h(s,["frequencyPenalty"],A);const x=d(e,["seed"]);x!=null&&h(s,["seed"],x);const C=d(e,["responseMimeType"]);C!=null&&h(s,["responseMimeType"],C);const R=d(e,["responseSchema"]);R!=null&&h(s,["responseSchema"],of(R));const D=d(e,["responseJsonSchema"]);D!=null&&h(s,["responseJsonSchema"],D);const I=d(e,["routingConfig"]);I!=null&&h(s,["routingConfig"],I);const B=d(e,["modelSelectionConfig"]);B!=null&&h(s,["modelConfig"],B);const K=d(e,["safetySettings"]);if(i!==void 0&&K!=null){let O=K;Array.isArray(O)&&(O=O.map(J=>J)),h(i,["safetySettings"],O)}const Y=d(e,["tools"]);if(i!==void 0&&Y!=null){let O=ys(Y);Array.isArray(O)&&(O=O.map(J=>f_(gs(J)))),h(i,["tools"],O)}const $=d(e,["toolConfig"]);i!==void 0&&$!=null&&h(i,["toolConfig"],$);const ne=d(e,["labels"]);i!==void 0&&ne!=null&&h(i,["labels"],ne);const X=d(e,["cachedContent"]);i!==void 0&&X!=null&&h(i,["cachedContent"],ai(t,X));const ue=d(e,["responseModalities"]);ue!=null&&h(s,["responseModalities"],ue);const pe=d(e,["mediaResolution"]);pe!=null&&h(s,["mediaResolution"],pe);const be=d(e,["speechConfig"]);be!=null&&h(s,["speechConfig"],d_(sf(be)));const Re=d(e,["audioTimestamp"]);Re!=null&&h(s,["audioTimestamp"],Re);const ze=d(e,["thinkingConfig"]);ze!=null&&h(s,["thinkingConfig"],ze);const st=d(e,["imageConfig"]);if(st!=null&&h(s,["imageConfig"],VR(st)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function lv(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["_url","model"],Oe(t,s));const r=d(e,["contents"]);if(r!=null){let c=gn(r);Array.isArray(c)&&(c=c.map(f=>xl(f))),h(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&h(i,["generationConfig"],pR(t,l,i)),i}function uv(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["_url","model"],Oe(t,s));const r=d(e,["contents"]);if(r!=null){let c=gn(r);Array.isArray(c)&&(c=c.map(f=>f)),h(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&h(i,["generationConfig"],mR(t,l,i)),i}function cv(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(p=>Lx(p))),h(e,["candidates"],m)}const r=d(t,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const l=d(t,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const c=d(t,["responseId"]);c!=null&&h(e,["responseId"],c);const f=d(t,["usageMetadata"]);return f!=null&&h(e,["usageMetadata"],f),e}function dv(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(v=>v)),h(e,["candidates"],p)}const r=d(t,["createTime"]);r!=null&&h(e,["createTime"],r);const l=d(t,["modelVersion"]);l!=null&&h(e,["modelVersion"],l);const c=d(t,["promptFeedback"]);c!=null&&h(e,["promptFeedback"],c);const f=d(t,["responseId"]);f!=null&&h(e,["responseId"],f);const m=d(t,["usageMetadata"]);return m!=null&&h(e,["usageMetadata"],m),e}function gR(t,e){const i={};if(d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=d(t,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const r=d(t,["aspectRatio"]);e!==void 0&&r!=null&&h(e,["parameters","aspectRatio"],r);const l=d(t,["guidanceScale"]);if(e!==void 0&&l!=null&&h(e,["parameters","guidanceScale"],l),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=d(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&h(e,["parameters","safetySetting"],c);const f=d(t,["personGeneration"]);e!==void 0&&f!=null&&h(e,["parameters","personGeneration"],f);const m=d(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&h(e,["parameters","includeSafetyAttributes"],m);const p=d(t,["includeRaiReason"]);e!==void 0&&p!=null&&h(e,["parameters","includeRaiReason"],p);const v=d(t,["language"]);e!==void 0&&v!=null&&h(e,["parameters","language"],v);const _=d(t,["outputMimeType"]);e!==void 0&&_!=null&&h(e,["parameters","outputOptions","mimeType"],_);const S=d(t,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&h(e,["parameters","outputOptions","compressionQuality"],S),d(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const T=d(t,["imageSize"]);if(e!==void 0&&T!=null&&h(e,["parameters","sampleImageSize"],T),d(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function yR(t,e){const i={},s=d(t,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const r=d(t,["negativePrompt"]);e!==void 0&&r!=null&&h(e,["parameters","negativePrompt"],r);const l=d(t,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const c=d(t,["aspectRatio"]);e!==void 0&&c!=null&&h(e,["parameters","aspectRatio"],c);const f=d(t,["guidanceScale"]);e!==void 0&&f!=null&&h(e,["parameters","guidanceScale"],f);const m=d(t,["seed"]);e!==void 0&&m!=null&&h(e,["parameters","seed"],m);const p=d(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&h(e,["parameters","safetySetting"],p);const v=d(t,["personGeneration"]);e!==void 0&&v!=null&&h(e,["parameters","personGeneration"],v);const _=d(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&h(e,["parameters","includeSafetyAttributes"],_);const S=d(t,["includeRaiReason"]);e!==void 0&&S!=null&&h(e,["parameters","includeRaiReason"],S);const T=d(t,["language"]);e!==void 0&&T!=null&&h(e,["parameters","language"],T);const A=d(t,["outputMimeType"]);e!==void 0&&A!=null&&h(e,["parameters","outputOptions","mimeType"],A);const x=d(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&h(e,["parameters","outputOptions","compressionQuality"],x);const C=d(t,["addWatermark"]);e!==void 0&&C!=null&&h(e,["parameters","addWatermark"],C);const R=d(t,["labels"]);e!==void 0&&R!=null&&h(e,["labels"],R);const D=d(t,["imageSize"]);e!==void 0&&D!=null&&h(e,["parameters","sampleImageSize"],D);const I=d(t,["enhancePrompt"]);return e!==void 0&&I!=null&&h(e,["parameters","enhancePrompt"],I),i}function vR(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["_url","model"],Oe(t,s));const r=d(e,["prompt"]);r!=null&&h(i,["instances[0]","prompt"],r);const l=d(e,["config"]);return l!=null&&gR(l,i),i}function _R(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["_url","model"],Oe(t,s));const r=d(e,["prompt"]);r!=null&&h(i,["instances[0]","prompt"],r);const l=d(e,["config"]);return l!=null&&yR(l,i),i}function SR(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>kR(c))),h(e,["generatedImages"],l)}const r=d(t,["positivePromptSafetyAttributes"]);return r!=null&&h(e,["positivePromptSafetyAttributes"],u_(r)),e}function ER(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>Rl(c))),h(e,["generatedImages"],l)}const r=d(t,["positivePromptSafetyAttributes"]);return r!=null&&h(e,["positivePromptSafetyAttributes"],c_(r)),e}function TR(t,e){const i={},s=d(t,["numberOfVideos"]);if(e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s),d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=d(t,["durationSeconds"]);if(e!==void 0&&r!=null&&h(e,["parameters","durationSeconds"],r),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=d(t,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const c=d(t,["resolution"]);e!==void 0&&c!=null&&h(e,["parameters","resolution"],c);const f=d(t,["personGeneration"]);if(e!==void 0&&f!=null&&h(e,["parameters","personGeneration"],f),d(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=d(t,["negativePrompt"]);e!==void 0&&m!=null&&h(e,["parameters","negativePrompt"],m);const p=d(t,["enhancePrompt"]);if(e!==void 0&&p!=null&&h(e,["parameters","enhancePrompt"],p),d(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=d(t,["lastFrame"]);e!==void 0&&v!=null&&h(e,["instances[0]","lastFrame"],Nl(v));const _=d(t,["referenceImages"]);if(e!==void 0&&_!=null){let S=_;Array.isArray(S)&&(S=S.map(T=>bN(T))),h(e,["instances[0]","referenceImages"],S)}if(d(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function wR(t,e){const i={},s=d(t,["numberOfVideos"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const r=d(t,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const l=d(t,["fps"]);e!==void 0&&l!=null&&h(e,["parameters","fps"],l);const c=d(t,["durationSeconds"]);e!==void 0&&c!=null&&h(e,["parameters","durationSeconds"],c);const f=d(t,["seed"]);e!==void 0&&f!=null&&h(e,["parameters","seed"],f);const m=d(t,["aspectRatio"]);e!==void 0&&m!=null&&h(e,["parameters","aspectRatio"],m);const p=d(t,["resolution"]);e!==void 0&&p!=null&&h(e,["parameters","resolution"],p);const v=d(t,["personGeneration"]);e!==void 0&&v!=null&&h(e,["parameters","personGeneration"],v);const _=d(t,["pubsubTopic"]);e!==void 0&&_!=null&&h(e,["parameters","pubsubTopic"],_);const S=d(t,["negativePrompt"]);e!==void 0&&S!=null&&h(e,["parameters","negativePrompt"],S);const T=d(t,["enhancePrompt"]);e!==void 0&&T!=null&&h(e,["parameters","enhancePrompt"],T);const A=d(t,["generateAudio"]);e!==void 0&&A!=null&&h(e,["parameters","generateAudio"],A);const x=d(t,["lastFrame"]);e!==void 0&&x!=null&&h(e,["instances[0]","lastFrame"],xn(x));const C=d(t,["referenceImages"]);if(e!==void 0&&C!=null){let I=C;Array.isArray(I)&&(I=I.map(B=>AN(B))),h(e,["instances[0]","referenceImages"],I)}const R=d(t,["mask"]);e!==void 0&&R!=null&&h(e,["instances[0]","mask"],wN(R));const D=d(t,["compressionQuality"]);return e!==void 0&&D!=null&&h(e,["parameters","compressionQuality"],D),i}function bR(t){const e={},i=d(t,["name"]);i!=null&&h(e,["name"],i);const s=d(t,["metadata"]);s!=null&&h(e,["metadata"],s);const r=d(t,["done"]);r!=null&&h(e,["done"],r);const l=d(t,["error"]);l!=null&&h(e,["error"],l);const c=d(t,["response","generateVideoResponse"]);return c!=null&&h(e,["response"],RR(c)),e}function AR(t){const e={},i=d(t,["name"]);i!=null&&h(e,["name"],i);const s=d(t,["metadata"]);s!=null&&h(e,["metadata"],s);const r=d(t,["done"]);r!=null&&h(e,["done"],r);const l=d(t,["error"]);l!=null&&h(e,["error"],l);const c=d(t,["response"]);return c!=null&&h(e,["response"],NR(c)),e}function CR(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["_url","model"],Oe(t,s));const r=d(e,["prompt"]);r!=null&&h(i,["instances[0]","prompt"],r);const l=d(e,["image"]);l!=null&&h(i,["instances[0]","image"],Nl(l));const c=d(e,["video"]);c!=null&&h(i,["instances[0]","video"],h_(c));const f=d(e,["source"]);f!=null&&IR(f,i);const m=d(e,["config"]);return m!=null&&TR(m,i),i}function xR(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["_url","model"],Oe(t,s));const r=d(e,["prompt"]);r!=null&&h(i,["instances[0]","prompt"],r);const l=d(e,["image"]);l!=null&&h(i,["instances[0]","image"],xn(l));const c=d(e,["video"]);c!=null&&h(i,["instances[0]","video"],p_(c));const f=d(e,["source"]);f!=null&&MR(f,i);const m=d(e,["config"]);return m!=null&&wR(m,i),i}function RR(t){const e={},i=d(t,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>UR(c))),h(e,["generatedVideos"],l)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const r=d(t,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function NR(t){const e={},i=d(t,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>OR(c))),h(e,["generatedVideos"],l)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const r=d(t,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function IR(t,e){const i={},s=d(t,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const r=d(t,["image"]);e!==void 0&&r!=null&&h(e,["instances[0]","image"],Nl(r));const l=d(t,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],h_(l)),i}function MR(t,e){const i={},s=d(t,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const r=d(t,["image"]);e!==void 0&&r!=null&&h(e,["instances[0]","image"],xn(r));const l=d(t,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],p_(l)),i}function kR(t){const e={},i=d(t,["_self"]);i!=null&&h(e,["image"],zR(i));const s=d(t,["raiFilteredReason"]);s!=null&&h(e,["raiFilteredReason"],s);const r=d(t,["_self"]);return r!=null&&h(e,["safetyAttributes"],u_(r)),e}function Rl(t){const e={},i=d(t,["_self"]);i!=null&&h(e,["image"],l_(i));const s=d(t,["raiFilteredReason"]);s!=null&&h(e,["raiFilteredReason"],s);const r=d(t,["_self"]);r!=null&&h(e,["safetyAttributes"],c_(r));const l=d(t,["prompt"]);return l!=null&&h(e,["enhancedPrompt"],l),e}function DR(t){const e={},i=d(t,["_self"]);i!=null&&h(e,["mask"],l_(i));const s=d(t,["labels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),h(e,["labels"],r)}return e}function UR(t){const e={},i=d(t,["video"]);return i!=null&&h(e,["video"],EN(i)),e}function OR(t){const e={},i=d(t,["_self"]);return i!=null&&h(e,["video"],TN(i)),e}function PR(t){const e={},i=d(t,["modelSelectionConfig"]);i!=null&&h(e,["modelConfig"],i);const s=d(t,["responseJsonSchema"]);s!=null&&h(e,["responseJsonSchema"],s);const r=d(t,["audioTimestamp"]);r!=null&&h(e,["audioTimestamp"],r);const l=d(t,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const c=d(t,["enableAffectiveDialog"]);c!=null&&h(e,["enableAffectiveDialog"],c);const f=d(t,["frequencyPenalty"]);f!=null&&h(e,["frequencyPenalty"],f);const m=d(t,["logprobs"]);m!=null&&h(e,["logprobs"],m);const p=d(t,["maxOutputTokens"]);p!=null&&h(e,["maxOutputTokens"],p);const v=d(t,["mediaResolution"]);v!=null&&h(e,["mediaResolution"],v);const _=d(t,["presencePenalty"]);_!=null&&h(e,["presencePenalty"],_);const S=d(t,["responseLogprobs"]);S!=null&&h(e,["responseLogprobs"],S);const T=d(t,["responseMimeType"]);T!=null&&h(e,["responseMimeType"],T);const A=d(t,["responseModalities"]);A!=null&&h(e,["responseModalities"],A);const x=d(t,["responseSchema"]);x!=null&&h(e,["responseSchema"],x);const C=d(t,["routingConfig"]);C!=null&&h(e,["routingConfig"],C);const R=d(t,["seed"]);R!=null&&h(e,["seed"],R);const D=d(t,["speechConfig"]);D!=null&&h(e,["speechConfig"],d_(D));const I=d(t,["stopSequences"]);I!=null&&h(e,["stopSequences"],I);const B=d(t,["temperature"]);B!=null&&h(e,["temperature"],B);const K=d(t,["thinkingConfig"]);K!=null&&h(e,["thinkingConfig"],K);const Y=d(t,["topK"]);Y!=null&&h(e,["topK"],Y);const $=d(t,["topP"]);if($!=null&&h(e,["topP"],$),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function LR(t,e){const i={},s=d(e,["model"]);return s!=null&&h(i,["_url","name"],Oe(t,s)),i}function qR(t,e){const i={},s=d(e,["model"]);return s!=null&&h(i,["_url","name"],Oe(t,s)),i}function GR(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&h(e,["enableWidget"],i),e}function BR(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&h(e,["timeRangeFilter"],i),e}function HR(t){const e={},i=d(t,["aspectRatio"]);i!=null&&h(e,["aspectRatio"],i);const s=d(t,["imageSize"]);if(s!=null&&h(e,["imageSize"],s),d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function VR(t){const e={},i=d(t,["aspectRatio"]);i!=null&&h(e,["aspectRatio"],i);const s=d(t,["imageSize"]);s!=null&&h(e,["imageSize"],s);const r=d(t,["outputMimeType"]);r!=null&&h(e,["imageOutputOptions","mimeType"],r);const l=d(t,["outputCompressionQuality"]);return l!=null&&h(e,["imageOutputOptions","compressionQuality"],l),e}function zR(t){const e={},i=d(t,["bytesBase64Encoded"]);i!=null&&h(e,["imageBytes"],Ui(i));const s=d(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function l_(t){const e={},i=d(t,["gcsUri"]);i!=null&&h(e,["gcsUri"],i);const s=d(t,["bytesBase64Encoded"]);s!=null&&h(e,["imageBytes"],Ui(s));const r=d(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function Nl(t){const e={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=d(t,["imageBytes"]);i!=null&&h(e,["bytesBase64Encoded"],Ui(i));const s=d(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function xn(t){const e={},i=d(t,["gcsUri"]);i!=null&&h(e,["gcsUri"],i);const s=d(t,["imageBytes"]);s!=null&&h(e,["bytesBase64Encoded"],Ui(s));const r=d(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function FR(t,e,i){const s={},r=d(e,["pageSize"]);i!==void 0&&r!=null&&h(i,["_query","pageSize"],r);const l=d(e,["pageToken"]);i!==void 0&&l!=null&&h(i,["_query","pageToken"],l);const c=d(e,["filter"]);i!==void 0&&c!=null&&h(i,["_query","filter"],c);const f=d(e,["queryBase"]);return i!==void 0&&f!=null&&h(i,["_url","models_url"],e_(t,f)),s}function $R(t,e,i){const s={},r=d(e,["pageSize"]);i!==void 0&&r!=null&&h(i,["_query","pageSize"],r);const l=d(e,["pageToken"]);i!==void 0&&l!=null&&h(i,["_query","pageToken"],l);const c=d(e,["filter"]);i!==void 0&&c!=null&&h(i,["_query","filter"],c);const f=d(e,["queryBase"]);return i!==void 0&&f!=null&&h(i,["_url","models_url"],e_(t,f)),s}function JR(t,e){const i={},s=d(e,["config"]);return s!=null&&FR(t,s,i),i}function KR(t,e){const i={},s=d(e,["config"]);return s!=null&&$R(t,s,i),i}function jR(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=d(t,["_self"]);if(r!=null){let l=t_(r);Array.isArray(l)&&(l=l.map(c=>kd(c))),h(e,["models"],l)}return e}function YR(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=d(t,["_self"]);if(r!=null){let l=t_(r);Array.isArray(l)&&(l=l.map(c=>Dd(c))),h(e,["models"],l)}return e}function XR(t){const e={},i=d(t,["maskMode"]);i!=null&&h(e,["maskMode"],i);const s=d(t,["segmentationClasses"]);s!=null&&h(e,["maskClasses"],s);const r=d(t,["maskDilation"]);return r!=null&&h(e,["dilation"],r),e}function kd(t){const e={},i=d(t,["name"]);i!=null&&h(e,["name"],i);const s=d(t,["displayName"]);s!=null&&h(e,["displayName"],s);const r=d(t,["description"]);r!=null&&h(e,["description"],r);const l=d(t,["version"]);l!=null&&h(e,["version"],l);const c=d(t,["_self"]);c!=null&&h(e,["tunedModelInfo"],fN(c));const f=d(t,["inputTokenLimit"]);f!=null&&h(e,["inputTokenLimit"],f);const m=d(t,["outputTokenLimit"]);m!=null&&h(e,["outputTokenLimit"],m);const p=d(t,["supportedGenerationMethods"]);p!=null&&h(e,["supportedActions"],p);const v=d(t,["temperature"]);v!=null&&h(e,["temperature"],v);const _=d(t,["maxTemperature"]);_!=null&&h(e,["maxTemperature"],_);const S=d(t,["topP"]);S!=null&&h(e,["topP"],S);const T=d(t,["topK"]);T!=null&&h(e,["topK"],T);const A=d(t,["thinking"]);return A!=null&&h(e,["thinking"],A),e}function Dd(t){const e={},i=d(t,["name"]);i!=null&&h(e,["name"],i);const s=d(t,["displayName"]);s!=null&&h(e,["displayName"],s);const r=d(t,["description"]);r!=null&&h(e,["description"],r);const l=d(t,["versionId"]);l!=null&&h(e,["version"],l);const c=d(t,["deployedModels"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(S=>uR(S))),h(e,["endpoints"],_)}const f=d(t,["labels"]);f!=null&&h(e,["labels"],f);const m=d(t,["_self"]);m!=null&&h(e,["tunedModelInfo"],hN(m));const p=d(t,["defaultCheckpointId"]);p!=null&&h(e,["defaultCheckpointId"],p);const v=d(t,["checkpoints"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(S=>S)),h(e,["checkpoints"],_)}return e}function QR(t){const e={},i=d(t,["mediaResolution"]);i!=null&&h(e,["mediaResolution"],i);const s=d(t,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=d(t,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&h(e,["fileData"],cR(l));const c=d(t,["functionCall"]);c!=null&&h(e,["functionCall"],dR(c));const f=d(t,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(t,["inlineData"]);m!=null&&h(e,["inlineData"],Px(m));const p=d(t,["text"]);p!=null&&h(e,["text"],p);const v=d(t,["thought"]);v!=null&&h(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&h(e,["thoughtSignature"],_);const S=d(t,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function WR(t){const e={},i=d(t,["productImage"]);return i!=null&&h(e,["image"],xn(i)),e}function ZR(t,e){const i={},s=d(t,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const r=d(t,["baseSteps"]);e!==void 0&&r!=null&&h(e,["parameters","baseSteps"],r);const l=d(t,["outputGcsUri"]);e!==void 0&&l!=null&&h(e,["parameters","storageUri"],l);const c=d(t,["seed"]);e!==void 0&&c!=null&&h(e,["parameters","seed"],c);const f=d(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&h(e,["parameters","safetySetting"],f);const m=d(t,["personGeneration"]);e!==void 0&&m!=null&&h(e,["parameters","personGeneration"],m);const p=d(t,["addWatermark"]);e!==void 0&&p!=null&&h(e,["parameters","addWatermark"],p);const v=d(t,["outputMimeType"]);e!==void 0&&v!=null&&h(e,["parameters","outputOptions","mimeType"],v);const _=d(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&h(e,["parameters","outputOptions","compressionQuality"],_);const S=d(t,["enhancePrompt"]);e!==void 0&&S!=null&&h(e,["parameters","enhancePrompt"],S);const T=d(t,["labels"]);return e!==void 0&&T!=null&&h(e,["labels"],T),i}function eN(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["_url","model"],Oe(t,s));const r=d(e,["source"]);r!=null&&nN(r,i);const l=d(e,["config"]);return l!=null&&ZR(l,i),i}function tN(t){const e={},i=d(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>Rl(r))),h(e,["generatedImages"],s)}return e}function nN(t,e){const i={},s=d(t,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const r=d(t,["personImage"]);e!==void 0&&r!=null&&h(e,["instances[0]","personImage","image"],xn(r));const l=d(t,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>WR(f))),h(e,["instances[0]","productImages"],c)}return i}function iN(t){const e={},i=d(t,["referenceImage"]);i!=null&&h(e,["referenceImage"],xn(i));const s=d(t,["referenceId"]);s!=null&&h(e,["referenceId"],s);const r=d(t,["referenceType"]);r!=null&&h(e,["referenceType"],r);const l=d(t,["maskImageConfig"]);l!=null&&h(e,["maskImageConfig"],XR(l));const c=d(t,["controlImageConfig"]);c!=null&&h(e,["controlImageConfig"],zx(c));const f=d(t,["styleImageConfig"]);f!=null&&h(e,["styleImageConfig"],f);const m=d(t,["subjectImageConfig"]);return m!=null&&h(e,["subjectImageConfig"],m),e}function u_(t){const e={},i=d(t,["safetyAttributes","categories"]);i!=null&&h(e,["categories"],i);const s=d(t,["safetyAttributes","scores"]);s!=null&&h(e,["scores"],s);const r=d(t,["contentType"]);return r!=null&&h(e,["contentType"],r),e}function c_(t){const e={},i=d(t,["safetyAttributes","categories"]);i!=null&&h(e,["categories"],i);const s=d(t,["safetyAttributes","scores"]);s!=null&&h(e,["scores"],s);const r=d(t,["contentType"]);return r!=null&&h(e,["contentType"],r),e}function oN(t){const e={},i=d(t,["category"]);if(i!=null&&h(e,["category"],i),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=d(t,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function sN(t){const e={},i=d(t,["image"]);return i!=null&&h(e,["image"],xn(i)),e}function rN(t,e){const i={},s=d(t,["mode"]);e!==void 0&&s!=null&&h(e,["parameters","mode"],s);const r=d(t,["maxPredictions"]);e!==void 0&&r!=null&&h(e,["parameters","maxPredictions"],r);const l=d(t,["confidenceThreshold"]);e!==void 0&&l!=null&&h(e,["parameters","confidenceThreshold"],l);const c=d(t,["maskDilation"]);e!==void 0&&c!=null&&h(e,["parameters","maskDilation"],c);const f=d(t,["binaryColorThreshold"]);e!==void 0&&f!=null&&h(e,["parameters","binaryColorThreshold"],f);const m=d(t,["labels"]);return e!==void 0&&m!=null&&h(e,["labels"],m),i}function aN(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["_url","model"],Oe(t,s));const r=d(e,["source"]);r!=null&&uN(r,i);const l=d(e,["config"]);return l!=null&&rN(l,i),i}function lN(t){const e={},i=d(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>DR(r))),h(e,["generatedMasks"],s)}return e}function uN(t,e){const i={},s=d(t,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const r=d(t,["image"]);e!==void 0&&r!=null&&h(e,["instances[0]","image"],xn(r));const l=d(t,["scribbleImage"]);return e!==void 0&&l!=null&&h(e,["instances[0]","scribble"],sN(l)),i}function d_(t){const e={},i=d(t,["voiceConfig"]);i!=null&&h(e,["voiceConfig"],i);const s=d(t,["languageCode"]);if(s!=null&&h(e,["languageCode"],s),d(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function cN(t){const e={},i=d(t,["functionCallingConfig"]);i!=null&&h(e,["functionCallingConfig"],fR(i));const s=d(t,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function dN(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(_=>_)),h(e,["functionDeclarations"],v)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(t,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const r=d(t,["computerUse"]);r!=null&&h(e,["computerUse"],r);const l=d(t,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=d(t,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&h(e,["googleMaps"],GR(f));const m=d(t,["googleSearch"]);m!=null&&h(e,["googleSearch"],BR(m));const p=d(t,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function f_(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(S=>hR(S))),h(e,["functionDeclarations"],_)}const s=d(t,["retrieval"]);s!=null&&h(e,["retrieval"],s);const r=d(t,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const l=d(t,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(t,["codeExecution"]);c!=null&&h(e,["codeExecution"],c);const f=d(t,["enterpriseWebSearch"]);f!=null&&h(e,["enterpriseWebSearch"],f);const m=d(t,["googleMaps"]);m!=null&&h(e,["googleMaps"],m);const p=d(t,["googleSearch"]);p!=null&&h(e,["googleSearch"],p);const v=d(t,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function fN(t){const e={},i=d(t,["baseModel"]);i!=null&&h(e,["baseModel"],i);const s=d(t,["createTime"]);s!=null&&h(e,["createTime"],s);const r=d(t,["updateTime"]);return r!=null&&h(e,["updateTime"],r),e}function hN(t){const e={},i=d(t,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&h(e,["baseModel"],i);const s=d(t,["createTime"]);s!=null&&h(e,["createTime"],s);const r=d(t,["updateTime"]);return r!=null&&h(e,["updateTime"],r),e}function pN(t,e){const i={},s=d(t,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const r=d(t,["description"]);e!==void 0&&r!=null&&h(e,["description"],r);const l=d(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),i}function mN(t,e){const i={},s=d(t,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const r=d(t,["description"]);e!==void 0&&r!=null&&h(e,["description"],r);const l=d(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),i}function gN(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["_url","name"],Oe(t,s));const r=d(e,["config"]);return r!=null&&pN(r,i),i}function yN(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["_url","model"],Oe(t,s));const r=d(e,["config"]);return r!=null&&mN(r,i),i}function vN(t,e){const i={},s=d(t,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const r=d(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&h(e,["parameters","safetySetting"],r);const l=d(t,["personGeneration"]);e!==void 0&&l!=null&&h(e,["parameters","personGeneration"],l);const c=d(t,["includeRaiReason"]);e!==void 0&&c!=null&&h(e,["parameters","includeRaiReason"],c);const f=d(t,["outputMimeType"]);e!==void 0&&f!=null&&h(e,["parameters","outputOptions","mimeType"],f);const m=d(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&h(e,["parameters","outputOptions","compressionQuality"],m);const p=d(t,["enhanceInputImage"]);e!==void 0&&p!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],p);const v=d(t,["imagePreservationFactor"]);e!==void 0&&v!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const _=d(t,["labels"]);e!==void 0&&_!=null&&h(e,["labels"],_);const S=d(t,["numberOfImages"]);e!==void 0&&S!=null&&h(e,["parameters","sampleCount"],S);const T=d(t,["mode"]);return e!==void 0&&T!=null&&h(e,["parameters","mode"],T),i}function _N(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["_url","model"],Oe(t,s));const r=d(e,["image"]);r!=null&&h(i,["instances[0]","image"],xn(r));const l=d(e,["upscaleFactor"]);l!=null&&h(i,["parameters","upscaleConfig","upscaleFactor"],l);const c=d(e,["config"]);return c!=null&&vN(c,i),i}function SN(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>Rl(l))),h(e,["generatedImages"],r)}return e}function EN(t){const e={},i=d(t,["uri"]);i!=null&&h(e,["uri"],i);const s=d(t,["encodedVideo"]);s!=null&&h(e,["videoBytes"],Ui(s));const r=d(t,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function TN(t){const e={},i=d(t,["gcsUri"]);i!=null&&h(e,["uri"],i);const s=d(t,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],Ui(s));const r=d(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function wN(t){const e={},i=d(t,["image"]);i!=null&&h(e,["_self"],xn(i));const s=d(t,["maskMode"]);return s!=null&&h(e,["maskMode"],s),e}function bN(t){const e={},i=d(t,["image"]);i!=null&&h(e,["image"],Nl(i));const s=d(t,["referenceType"]);return s!=null&&h(e,["referenceType"],s),e}function AN(t){const e={},i=d(t,["image"]);i!=null&&h(e,["image"],xn(i));const s=d(t,["referenceType"]);return s!=null&&h(e,["referenceType"],s),e}function h_(t){const e={},i=d(t,["uri"]);i!=null&&h(e,["uri"],i);const s=d(t,["videoBytes"]);s!=null&&h(e,["encodedVideo"],Ui(s));const r=d(t,["mimeType"]);return r!=null&&h(e,["encoding"],r),e}function p_(t){const e={},i=d(t,["uri"]);i!=null&&h(e,["gcsUri"],i);const s=d(t,["videoBytes"]);s!=null&&h(e,["bytesBase64Encoded"],Ui(s));const r=d(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CN(t,e){const i={},s=d(t,["displayName"]);return e!==void 0&&s!=null&&h(e,["displayName"],s),i}function xN(t){const e={},i=d(t,["config"]);return i!=null&&CN(i,e),e}function RN(t,e){const i={},s=d(t,["force"]);return e!==void 0&&s!=null&&h(e,["_query","force"],s),i}function NN(t){const e={},i=d(t,["name"]);i!=null&&h(e,["_url","name"],i);const s=d(t,["config"]);return s!=null&&RN(s,e),e}function IN(t){const e={},i=d(t,["name"]);return i!=null&&h(e,["_url","name"],i),e}function MN(t,e){const i={},s=d(t,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["customMetadata"],l)}const r=d(t,["chunkingConfig"]);return e!==void 0&&r!=null&&h(e,["chunkingConfig"],r),i}function kN(t){const e={},i=d(t,["name"]);i!=null&&h(e,["name"],i);const s=d(t,["metadata"]);s!=null&&h(e,["metadata"],s);const r=d(t,["done"]);r!=null&&h(e,["done"],r);const l=d(t,["error"]);l!=null&&h(e,["error"],l);const c=d(t,["response"]);return c!=null&&h(e,["response"],UN(c)),e}function DN(t){const e={},i=d(t,["fileSearchStoreName"]);i!=null&&h(e,["_url","file_search_store_name"],i);const s=d(t,["fileName"]);s!=null&&h(e,["fileName"],s);const r=d(t,["config"]);return r!=null&&MN(r,e),e}function UN(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["parent"]);s!=null&&h(e,["parent"],s);const r=d(t,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function ON(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),i}function PN(t){const e={},i=d(t,["config"]);return i!=null&&ON(i,e),e}function LN(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=d(t,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["fileSearchStores"],l)}return e}function m_(t,e){const i={},s=d(t,["mimeType"]);e!==void 0&&s!=null&&h(e,["mimeType"],s);const r=d(t,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const l=d(t,["customMetadata"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>m)),h(e,["customMetadata"],f)}const c=d(t,["chunkingConfig"]);return e!==void 0&&c!=null&&h(e,["chunkingConfig"],c),i}function qN(t){const e={},i=d(t,["fileSearchStoreName"]);i!=null&&h(e,["_url","file_search_store_name"],i);const s=d(t,["config"]);return s!=null&&m_(s,e),e}function GN(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&h(e,["sdkHttpResponse"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BN="Content-Type",HN="X-Server-Timeout",VN="User-Agent",Ud="x-goog-api-client",zN="1.33.0",FN=`google-genai-sdk/${zN}`,$N="v1beta1",JN="v1beta";class KN{constructor(e){var i,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:$N,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:JN,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),i=new URL(e);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,i,s){const r=[this.getRequestUrlInternal(i)];return s&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,i,s);if(e.queryParams)for(const[c,f]of Object.entries(e.queryParams))r.searchParams.append(c,String(f));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,i,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,i){const s=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(i))typeof l=="object"?s[r]=Object.assign(Object.assign({},s[r]),l):l!==void 0&&(s[r]=l);return s}async requestStream(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,i,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,i,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,i,s,r){if(i&&i.timeout||r){const l=new AbortController,c=l.signal;if(i.timeout&&(i==null?void 0:i.timeout)>0){const f=setTimeout(()=>l.abort(),i.timeout);f&&typeof f.unref=="function"&&f.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=c}return i&&i.extraBody!==null&&jN(e,i.extraBody),e.headers=await this.getHeadersInternal(i,s),e}async unaryApiCall(e,i,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:s})).then(async r=>(await fv(r),new Nd(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,i,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:s})).then(async r=>(await fv(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return An(this,arguments,function*(){var s;const r=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";const f="data:",m=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:p,value:v}=yield me(r.read());if(p){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const _=l.decode(v,{stream:!0});try{const A=JSON.parse(_);if("error"in A){const x=JSON.parse(JSON.stringify(A.error)),C=x.status,R=x.code,D=`got status: ${C}. ${JSON.stringify(A)}`;if(R>=400&&R<600)throw new Cl({message:D,status:R})}}catch(A){if(A.name==="ApiError")throw A}c+=_;let S=-1,T=0;for(;;){S=-1,T=0;for(const C of m){const R=c.indexOf(C);R!==-1&&(S===-1||R<S)&&(S=R,T=C.length)}if(S===-1)break;const A=c.substring(0,S);c=c.substring(S+T);const x=A.trim();if(x.startsWith(f)){const C=x.substring(f.length).trim();try{const R=new Response(C,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield me(new Nd(R))}catch(R){throw new Error(`exception parsing stream chunk ${C}. ${R}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,i){return fetch(e,i).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},i=FN+" "+this.clientOptions.userAgentExtra;return e[VN]=i,e[Ud]=i,e[BN]="application/json",e}async getHeadersInternal(e,i){const s=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))s.append(r,l);e.timeout&&e.timeout>0&&s.append(HN,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,i),s}getFileName(e){var i;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(i=s.split(/[/\\]/).pop())!==null&&i!==void 0?i:""),s}async uploadFile(e,i){var s;const r={};i!=null&&(r.mimeType=i.mimeType,r.name=i.name,r.displayName=i.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);r.sizeBytes=String(c.size);const f=(s=i==null?void 0:i.mimeType)!==null&&s!==void 0?s:c.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=f;const m={file:r},p=this.getFileName(e),v=W("upload/v1beta/files",m._url),_=await this.fetchUploadUrl(v,r.sizeBytes,r.mimeType,p,m,i==null?void 0:i.httpOptions);return l.upload(e,_,this)}async uploadFileToFileSearchStore(e,i,s){var r;const l=this.clientOptions.uploader,c=await l.stat(i),f=String(c.size),m=(r=s==null?void 0:s.mimeType)!==null&&r!==void 0?r:c.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(i),_={};s!=null&&m_(s,_);const S=await this.fetchUploadUrl(p,f,m,v,_,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(i,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,i,s,r,l,c){var f;let m={};c?m=c:m={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i}`,"X-Goog-Upload-Header-Content-Type":`${s}`},r?{"X-Goog-Upload-File-Name":r}:{})};const p=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:m});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(f=p==null?void 0:p.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function fv(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const i=t.status;let s;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await t.json():s={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(s);throw i>=400&&i<600?new Cl({message:r,status:i}):new Error(r)}}function jN(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let i={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))i=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,c){const f=Object.assign({},l);for(const m in c)if(Object.prototype.hasOwnProperty.call(c,m)){const p=c[m],v=f[m];p&&typeof p=="object"&&!Array.isArray(p)&&v&&typeof v=="object"&&!Array.isArray(v)?f[m]=s(v,p):(v&&p&&typeof v!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof v}, New type: ${typeof p}. Overwriting.`),f[m]=p)}return f}const r=s(i,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const YN="mcp_used/unknown";let XN=!1;function g_(t){for(const e of t)if(QN(e)||typeof e=="object"&&"inputSchema"in e)return!0;return XN}function y_(t){var e;const i=(e=t[Ud])!==null&&e!==void 0?e:"";t[Ud]=(i+` ${YN}`).trimStart()}function QN(t){return t!==null&&typeof t=="object"&&t instanceof af}function WN(t){return An(this,arguments,function*(i,s=100){let r,l=0;for(;l<s;){const c=yield me(i.listTools({cursor:r}));for(const f of c.tools)yield yield me(f),l++;if(!c.nextCursor)break;r=c.nextCursor}})}class af{constructor(e=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=i}static create(e,i){return new af(e,i)}async initialize(){var e,i,s,r;if(this.mcpTools.length>0)return;const l={},c=[];for(const v of this.mcpClients)try{for(var f=!0,m=(i=void 0,Cn(WN(v))),p;p=await m.next(),e=p.done,!e;f=!0){r=p.value,f=!1;const _=r;c.push(_);const S=_.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=v}}catch(_){i={error:_}}finally{try{!f&&!e&&(s=m.return)&&await s.call(m)}finally{if(i)throw i.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),IA(this.mcpTools,this.config)}async callTool(e){await this.initialize();const i=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await r.callTool({name:s.name,arguments:s.args},void 0,l);i.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function ZN(t,e,i){const s=new TA;let r;i.data instanceof Blob?r=JSON.parse(await i.data.text()):r=JSON.parse(i.data),Object.assign(s,r),e(s)}class eI{constructor(e,i,s){this.apiClient=e,this.auth=i,this.webSocketFactory=s}async connect(e){var i,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=iI(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),m=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${f}`;let p=()=>{};const v=new Promise(I=>{p=I}),_=e.callbacks,S=function(){p({})},T=this.apiClient,A={onopen:S,onmessage:I=>{ZN(T,_.onmessage,I)},onerror:(i=_==null?void 0:_.onerror)!==null&&i!==void 0?i:function(I){},onclose:(s=_==null?void 0:_.onclose)!==null&&s!==void 0?s:function(I){}},x=this.webSocketFactory.create(m,nI(c),A);x.connect(),await v;const D={setup:{model:Oe(this.apiClient,e.model)}};return x.send(JSON.stringify(D)),new tI(x,this.apiClient)}}class tI{constructor(e,i){this.conn=e,this.apiClient=i}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=xx(e);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const i=Cx(e);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const i={playbackControl:e};this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl(rs.PLAY)}pause(){this.sendPlaybackControl(rs.PAUSE)}stop(){this.sendPlaybackControl(rs.STOP)}resetContext(){this.sendPlaybackControl(rs.RESET_CONTEXT)}close(){this.conn.close()}}function nI(t){const e={};return t.forEach((i,s)=>{e[s]=i}),e}function iI(t){const e=new Headers;for(const[i,s]of Object.entries(t))e.append(i,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oI="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function sI(t,e,i){const s=new EA;let r;i.data instanceof Blob?r=await i.data.text():i.data instanceof ArrayBuffer?r=new TextDecoder().decode(i.data):r=i.data;const l=JSON.parse(r);if(t.isVertexAI()){const c=Ix(l);Object.assign(s,c)}else Object.assign(s,l);e(s)}class rI{constructor(e,i,s){this.apiClient=e,this.auth=i,this.webSocketFactory=s,this.music=new eI(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var i,s,r,l,c,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&g_(e.config.tools)&&y_(_);const S=cI(_);if(this.apiClient.isVertexAI())v=`${m}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v);else{const X=this.apiClient.getApiKey();let ue="BidiGenerateContent",pe="key";X!=null&&X.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ue="BidiGenerateContentConstrained",pe="access_token"),v=`${m}/ws/google.ai.generativelanguage.${p}.GenerativeService.${ue}?${pe}=${X}`}let T=()=>{};const A=new Promise(X=>{T=X}),x=e.callbacks,C=function(){var X;(X=x==null?void 0:x.onopen)===null||X===void 0||X.call(x),T({})},R=this.apiClient,D={onopen:C,onmessage:X=>{sI(R,x.onmessage,X)},onerror:(i=x==null?void 0:x.onerror)!==null&&i!==void 0?i:function(X){},onclose:(s=x==null?void 0:x.onclose)!==null&&s!==void 0?s:function(X){}},I=this.webSocketFactory.create(v,uI(S),D);I.connect(),await A;let B=Oe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&B.startsWith("publishers/")){const X=this.apiClient.getProject(),ue=this.apiClient.getLocation();B=`projects/${X}/locations/${ue}/`+B}let K={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[gl.AUDIO]}:e.config.responseModalities=[gl.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Y=(f=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[],$=[];for(const X of Y)if(this.isCallableTool(X)){const ue=X;$.push(await ue.tool())}else $.push(X);$.length>0&&(e.config.tools=$);const ne={model:B,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?K=Ax(this.apiClient,ne):K=bx(this.apiClient,ne),delete K.config,I.send(JSON.stringify(K)),new lI(I,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const aI={turnComplete:!0};class lI{constructor(e,i){this.conn=e,this.apiClient=i}tLiveClientContent(e,i){if(i.turns!==null&&i.turns!==void 0){let s=[];try{s=gn(i.turns),e.isVertexAI()||(s=s.map(r=>xl(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:s,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(e,i){let s=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?s=i.functionResponses:s=[i.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(oI)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},aI),e);const i=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendRealtimeInput(e){let i={};this.apiClient.isVertexAI()?i={realtimeInput:Nx(e)}:i={realtimeInput:Rx(e)},this.conn.send(JSON.stringify(i))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function uI(t){const e={};return t.forEach((i,s)=>{e[s]=i}),e}function cI(t){const e=new Headers;for(const[i,s]of Object.entries(t))e.append(i,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hv=10;function pv(t){var e,i,s;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const c of(i=t==null?void 0:t.tools)!==null&&i!==void 0?i:[])if(ds(c)){r=!0;break}if(!r)return!0;const l=(s=t==null?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function ds(t){return"callTool"in t&&typeof t.callTool=="function"}function dI(t){var e,i,s;return(s=(i=(e=t.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(r=>ds(r)))!==null&&s!==void 0?s:!1}function mv(t){var e;const i=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((s,r)=>{if(ds(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&i.push(r)}),i}function gv(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fI extends ri{constructor(e){super(),this.apiClient=e,this.generateContent=async i=>{var s,r,l,c,f;const m=await this.processParamsMaybeAddMcpUsage(i);if(this.maybeMoveToResponseJsonSchem(i),!dI(i)||pv(i.config))return await this.generateContentInternal(m);const p=mv(i);if(p.length>0){const x=p.map(C=>`tools[${C}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${x}.`)}let v,_;const S=gn(m.contents),T=(l=(r=(s=m.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:hv;let A=0;for(;A<T&&(v=await this.generateContentInternal(m),!(!v.functionCalls||v.functionCalls.length===0));){const x=v.candidates[0].content,C=[];for(const R of(f=(c=i.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[])if(ds(R)){const I=await R.callTool(v.functionCalls);C.push(...I)}A++,_={role:"user",parts:C},m.contents=gn(m.contents),m.contents.push(x),m.contents.push(_),gv(m.config)&&(S.push(x),S.push(_))}return gv(m.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async i=>{var s,r,l,c,f;if(this.maybeMoveToResponseJsonSchem(i),pv(i.config)){const _=await this.processParamsMaybeAddMcpUsage(i);return await this.generateContentStreamInternal(_)}const m=mv(i);if(m.length>0){const _=m.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(l=(r=(s=i==null?void 0:i.config)===null||s===void 0?void 0:s.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,v=(f=(c=i==null?void 0:i.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(p&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(s=>{var r;let l;const c=[];if(s!=null&&s.generatedImages)for(const m of s.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((r=m==null?void 0:m.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=m==null?void 0:m.safetyAttributes:c.push(m);let f;return l?f={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:f={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},f}),this.list=async i=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),i==null?void 0:i.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new co(oi.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(c),c)},this.editImage=async i=>{const s={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(s.referenceImages=i.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async i=>{let s={numberOfImages:1,mode:"upscale"};i.config&&(s=Object.assign(Object.assign({},s),i.config));const r={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:s};return await this.upscaleImageInternal(r)},this.generateVideos=async i=>{var s,r,l,c,f,m;if((i.prompt||i.image||i.video)&&i.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=i.video)===null||s===void 0)&&s.uri&&(!((r=i.video)===null||r===void 0)&&r.videoBytes)?i.video={uri:i.video.uri,mimeType:i.video.mimeType}:!((c=(l=i.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((m=(f=i.source)===null||f===void 0?void 0:f.video)===null||m===void 0)&&m.videoBytes)&&(i.source.video={uri:i.source.video.uri,mimeType:i.source.video.mimeType})),await this.generateVideosInternal(i)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var i,s,r;const l=(i=e.config)===null||i===void 0?void 0:i.tools;if(!l)return e;const c=await Promise.all(l.map(async m=>ds(m)?await m.tool():m)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(f.config.tools=c,e.config&&e.config.tools&&g_(e.config.tools)){const m=(r=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let p=Object.assign({},m);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),y_(p),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return f}async initAfcToolsMap(e){var i,s,r;const l=new Map;for(const c of(s=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&s!==void 0?s:[])if(ds(c)){const f=c,m=await f.tool();for(const p of(r=m.functionDeclarations)!==null&&r!==void 0?r:[]){if(!p.name)throw new Error("Function declaration name is required.");if(l.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);l.set(p.name,f)}}return l}async processAfcStream(e){var i,s,r;const l=(r=(s=(i=e.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:hv;let c=!1,f=0;const m=await this.initAfcToolsMap(e);return(function(p,v,_){return An(this,arguments,function*(){for(var S,T,A,x,C,R;f<l;){c&&(f++,c=!1);const K=yield me(p.processParamsMaybeAddMcpUsage(_)),Y=yield me(p.generateContentStreamInternal(K)),$=[],ne=[];try{for(var D=!0,I=(T=void 0,Cn(Y)),B;B=yield me(I.next()),S=B.done,!S;D=!0){x=B.value,D=!1;const X=x;if(yield yield me(X),X.candidates&&(!((C=X.candidates[0])===null||C===void 0)&&C.content)){ne.push(X.candidates[0].content);for(const ue of(R=X.candidates[0].content.parts)!==null&&R!==void 0?R:[])if(f<l&&ue.functionCall){if(!ue.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(ue.functionCall.name)){const pe=yield me(v.get(ue.functionCall.name).callTool([ue.functionCall]));$.push(...pe)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${ue.functionCall.name}`)}}}}catch(X){T={error:X}}finally{try{!D&&!S&&(A=I.return)&&(yield me(A.call(I)))}finally{if(T)throw T.error}}if($.length>0){c=!0;const X=new gr;X.candidates=[{content:{role:"user",parts:$}}],yield yield me(X);const ue=[];ue.push(...ne),ue.push({role:"user",parts:$});const pe=gn(_.contents).concat(ue);_.contents=pe}else break}})})(this,m,e)}async generateContentInternal(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=uv(this.apiClient,e);return f=W("{model}:generateContent",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=dv(v),S=new gr;return Object.assign(S,_),S})}else{const p=lv(this.apiClient,e);return f=W("{model}:generateContent",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=cv(v),S=new gr;return Object.assign(S,_),S})}}async generateContentStreamInternal(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=uv(this.apiClient,e);return f=W("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(_){return An(this,arguments,function*(){var S,T,A,x;try{for(var C=!0,R=Cn(_),D;D=yield me(R.next()),S=D.done,!S;C=!0){x=D.value,C=!1;const I=x,B=dv(yield me(I.json()));B.sdkHttpResponse={headers:I.headers};const K=new gr;Object.assign(K,B),yield yield me(K)}}catch(I){T={error:I}}finally{try{!C&&!S&&(A=R.return)&&(yield me(A.call(R)))}finally{if(T)throw T.error}}})})}else{const p=lv(this.apiClient,e);return f=W("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(_){return An(this,arguments,function*(){var S,T,A,x;try{for(var C=!0,R=Cn(_),D;D=yield me(R.next()),S=D.done,!S;C=!0){x=D.value,C=!1;const I=x,B=cv(yield me(I.json()));B.sdkHttpResponse={headers:I.headers};const K=new gr;Object.assign(K,B),yield yield me(K)}}catch(I){T={error:I}}finally{try{!C&&!S&&(A=R.return)&&(yield me(A.call(R)))}finally{if(T)throw T.error}}})})}}async embedContent(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=rR(this.apiClient,e);return f=W("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=lR(v),S=new $y;return Object.assign(S,_),S})}else{const p=sR(this.apiClient,e);return f=W("{model}:batchEmbedContents",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=aR(v),S=new $y;return Object.assign(S,_),S})}}async generateImagesInternal(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=_R(this.apiClient,e);return f=W("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=ER(v),S=new Jy;return Object.assign(S,_),S})}else{const p=vR(this.apiClient,e);return f=W("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=SR(v),S=new Jy;return Object.assign(S,_),S})}}async editImageInternal(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const f=tR(this.apiClient,e);return l=W("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=nR(m),v=new cA;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const f=_N(this.apiClient,e);return l=W("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=SN(m),v=new dA;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const f=eN(this.apiClient,e);return l=W("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=tN(m),v=new fA;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const f=aN(this.apiClient,e);return l=W("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=lN(m),v=new hA;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=qR(this.apiClient,e);return f=W("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Dd(v))}else{const p=LR(this.apiClient,e);return f=W("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>kd(v))}}async listInternal(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=KR(this.apiClient,e);return f=W("{models_url}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=YR(v),S=new Ky;return Object.assign(S,_),S})}else{const p=JR(this.apiClient,e);return f=W("{models_url}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=jR(v),S=new Ky;return Object.assign(S,_),S})}}async update(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=yN(this.apiClient,e);return f=W("{model}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Dd(v))}else{const p=gN(this.apiClient,e);return f=W("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>kd(v))}}async delete(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=Qx(this.apiClient,e);return f=W("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=Zx(v),S=new jy;return Object.assign(S,_),S})}else{const p=Xx(this.apiClient,e);return f=W("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=Wx(v),S=new jy;return Object.assign(S,_),S})}}async countTokens(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=Kx(this.apiClient,e);return f=W("{model}:countTokens",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=Yx(v),S=new Yy;return Object.assign(S,_),S})}else{const p=Jx(this.apiClient,e);return f=W("{model}:countTokens",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=jx(v),S=new Yy;return Object.assign(S,_),S})}}async computeTokens(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const f=Gx(this.apiClient,e);return l=W("{model}:computeTokens",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=Bx(m),v=new pA;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=xR(this.apiClient,e);return f=W("{model}:predictLongRunning",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>{const _=AR(v),S=new yl;return Object.assign(S,_),S})}else{const p=CR(this.apiClient,e);return f=W("{model}:predictLongRunning",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>{const _=bR(v),S=new yl;return Object.assign(S,_),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hI extends ri{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const i=e.operation,s=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=i.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:r,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:i.name,config:s});return i._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const i=e.operation,s=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=i.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:r,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:i.name,config:s});return i._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=oA(e);return f=W("{operationName}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c}else{const p=iA(e);return f=W("{operationName}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const f=Xb(e);return l=W("{resourceName}:fetchPredictOperation",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pI(t){const e={},i=d(t,["data"]);if(i!=null&&h(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function mI(t){const e={},i=d(t,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>bI(l))),h(e,["parts"],r)}const s=d(t,["role"]);return s!=null&&h(e,["role"],s),e}function gI(t,e,i){const s={},r=d(e,["expireTime"]);i!==void 0&&r!=null&&h(i,["expireTime"],r);const l=d(e,["newSessionExpireTime"]);i!==void 0&&l!=null&&h(i,["newSessionExpireTime"],l);const c=d(e,["uses"]);i!==void 0&&c!=null&&h(i,["uses"],c);const f=d(e,["liveConnectConstraints"]);i!==void 0&&f!=null&&h(i,["bidiGenerateContentSetup"],wI(t,f));const m=d(e,["lockAdditionalFields"]);return i!==void 0&&m!=null&&h(i,["fieldMask"],m),s}function yI(t,e){const i={},s=d(e,["config"]);return s!=null&&h(i,["config"],gI(t,s,i)),i}function vI(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&h(e,["fileUri"],i);const s=d(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function _I(t){const e={},i=d(t,["id"]);i!=null&&h(e,["id"],i);const s=d(t,["args"]);s!=null&&h(e,["args"],s);const r=d(t,["name"]);if(r!=null&&h(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function SI(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&h(e,["enableWidget"],i),e}function EI(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&h(e,["timeRangeFilter"],i),e}function TI(t,e){const i={},s=d(t,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const r=d(t,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=d(t,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=d(t,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const f=d(t,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);const m=d(t,["maxOutputTokens"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","maxOutputTokens"],m);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const v=d(t,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const _=d(t,["speechConfig"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","speechConfig"],rf(_));const S=d(t,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const T=d(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],T);const A=d(t,["systemInstruction"]);e!==void 0&&A!=null&&h(e,["setup","systemInstruction"],mI(Ut(A)));const x=d(t,["tools"]);if(e!==void 0&&x!=null){let Y=ys(x);Array.isArray(Y)&&(Y=Y.map($=>CI(gs($)))),h(e,["setup","tools"],Y)}const C=d(t,["sessionResumption"]);e!==void 0&&C!=null&&h(e,["setup","sessionResumption"],AI(C));const R=d(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&h(e,["setup","inputAudioTranscription"],R);const D=d(t,["outputAudioTranscription"]);e!==void 0&&D!=null&&h(e,["setup","outputAudioTranscription"],D);const I=d(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&h(e,["setup","realtimeInputConfig"],I);const B=d(t,["contextWindowCompression"]);e!==void 0&&B!=null&&h(e,["setup","contextWindowCompression"],B);const K=d(t,["proactivity"]);if(e!==void 0&&K!=null&&h(e,["setup","proactivity"],K),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return i}function wI(t,e){const i={},s=d(e,["model"]);s!=null&&h(i,["setup","model"],Oe(t,s));const r=d(e,["config"]);return r!=null&&h(i,["config"],TI(r,i)),i}function bI(t){const e={},i=d(t,["mediaResolution"]);i!=null&&h(e,["mediaResolution"],i);const s=d(t,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=d(t,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=d(t,["fileData"]);l!=null&&h(e,["fileData"],vI(l));const c=d(t,["functionCall"]);c!=null&&h(e,["functionCall"],_I(c));const f=d(t,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(t,["inlineData"]);m!=null&&h(e,["inlineData"],pI(m));const p=d(t,["text"]);p!=null&&h(e,["text"],p);const v=d(t,["thought"]);v!=null&&h(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&h(e,["thoughtSignature"],_);const S=d(t,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function AI(t){const e={},i=d(t,["handle"]);if(i!=null&&h(e,["handle"],i),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function CI(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(_=>_)),h(e,["functionDeclarations"],v)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(t,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const r=d(t,["computerUse"]);r!=null&&h(e,["computerUse"],r);const l=d(t,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=d(t,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&h(e,["googleMaps"],SI(f));const m=d(t,["googleSearch"]);m!=null&&h(e,["googleSearch"],EI(m));const p=d(t,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xI(t){const e=[];for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const s=t[i];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(l=>`${i}.${l}`);e.push(...r)}else e.push(i)}return e.join(",")}function RI(t,e){let i=null;const s=t.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,i=l):delete t.bidiGenerateContentSetup}else s!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(i){const l=xI(i);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];r.length>0&&(f=r.map(p=>c.includes(p)?`generationConfig.${p}`:p));const m=[];l&&m.push(l),f.length>0&&m.push(...f),m.length>0?t.fieldMask=m.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class NI extends ri{constructor(e){super(),this.apiClient=e}async create(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=yI(this.apiClient,e);l=W("auth_tokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query;const m=RI(f,e.config);return r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),r.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function II(t,e){const i={},s=d(t,["force"]);return e!==void 0&&s!=null&&h(e,["_query","force"],s),i}function MI(t){const e={},i=d(t,["name"]);i!=null&&h(e,["_url","name"],i);const s=d(t,["config"]);return s!=null&&II(s,e),e}function kI(t){const e={},i=d(t,["name"]);return i!=null&&h(e,["_url","name"],i),e}function DI(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),i}function UI(t){const e={},i=d(t,["parent"]);i!=null&&h(e,["_url","parent"],i);const s=d(t,["config"]);return s!=null&&DI(s,e),e}function OI(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&h(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=d(t,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PI extends ri{constructor(e){super(),this.apiClient=e,this.list=async i=>new co(oi.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:i.parent,config:s.config}),await this.listInternal(i),i)}async get(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=kI(e);return l=W("{name}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async delete(e){var i,s;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=MI(e);r=W("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=UI(e);return l=W("{parent}/documents",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=OI(m),v=new mA;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LI extends ri{constructor(e,i=new PI(e)){super(),this.apiClient=e,this.documents=i,this.list=async(s={})=>new co(oi.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=xN(e);return l=W("fileSearchStores",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async get(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=IN(e);return l=W("{name}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async delete(e){var i,s;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=NN(e);r=W("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=PN(e);return l=W("fileSearchStores",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=LN(m),v=new gA;return Object.assign(v,p),v})}}async uploadToFileSearchStoreInternal(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=qN(e);return l=W("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=GN(m),v=new yA;return Object.assign(v,p),v})}}async importFile(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=DN(e);return l=W("{file_search_store_name}:importFile",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=kN(m),v=new ef;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let v_=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return v_=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),i=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^i()&15>>+s/4).toString(16))};const qI=()=>v_();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Od(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Pd=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yn extends Error{}class qt extends yn{constructor(e,i,s,r){super(`${qt.makeMessage(e,i,s)}`),this.status=e,this.headers=r,this.error=i}static makeMessage(e,i,s){const r=i!=null&&i.message?typeof i.message=="string"?i.message:JSON.stringify(i.message):i?JSON.stringify(i):s;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,i,s,r){if(!e||!r)return new Il({message:s,cause:Pd(i)});const l=i;return e===400?new S_(e,l,s,r):e===401?new E_(e,l,s,r):e===403?new T_(e,l,s,r):e===404?new w_(e,l,s,r):e===409?new b_(e,l,s,r):e===422?new A_(e,l,s,r):e===429?new C_(e,l,s,r):e>=500?new x_(e,l,s,r):new qt(e,l,s,r)}}class Ld extends qt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Il extends qt{constructor({message:e,cause:i}){super(void 0,void 0,e||"Connection error.",void 0),i&&(this.cause=i)}}class __ extends Il{constructor({message:e}={}){super({message:e??"Request timed out."})}}class S_ extends qt{}class E_ extends qt{}class T_ extends qt{}class w_ extends qt{}class b_ extends qt{}class A_ extends qt{}class C_ extends qt{}class x_ extends qt{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GI=/^[a-z][a-z0-9+.-]*:/i,BI=t=>GI.test(t);let qd=t=>(qd=Array.isArray,qd(t));const HI=qd;let VI=HI;const yv=VI;function zI(t){if(!t)return!0;for(const e in t)return!1;return!0}function FI(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const $I=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new yn(`${t} must be an integer`);if(e<0)throw new yn(`${t} must be a positive integer`);return e},JI=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const KI=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ss="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jI(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const YI=()=>{var t,e,i,s,r;const l=jI();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ss,"X-Stainless-OS":_v(Deno.build.os),"X-Stainless-Arch":vv(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ss,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ss,"X-Stainless-OS":_v((i=globalThis.process.platform)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Arch":vv((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const c=XI();return c?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ss,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${c.browser}`,"X-Stainless-Runtime-Version":c.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ss,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function XI(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:i}of t){const s=i.exec(navigator.userAgent);if(s){const r=s[1]||0,l=s[2]||0,c=s[3]||0;return{browser:e,version:`${r}.${l}.${c}`}}}return null}const vv=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",_v=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Ya;const QI=()=>Ya??(Ya=YI());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WI(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function R_(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function ZI(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return R_({start(){},async pull(i){const{done:s,value:r}=await e.next();s?i.close():i.enqueue(r)},async cancel(){var i;await((i=e.return)===null||i===void 0?void 0:i.call(e))}})}function N_(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const i=await e.read();return i!=null&&i.done&&e.releaseLock(),i}catch(i){throw e.releaseLock(),i}},async return(){const i=e.cancel();return e.releaseLock(),await i,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function eM(t){var e,i;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((i=(e=t[Symbol.asyncIterator]()).return)===null||i===void 0?void 0:i.call(e));return}const s=t.getReader(),r=s.cancel();s.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tM=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const I_=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,i=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(i?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function ad(t,e,i){return I_(),new File(t,e??"unknown_file",i)}function nM(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const iM=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const M_=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",oM=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&M_(t),sM=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function rM(t,e,i){if(I_(),t=await t,oM(t))return t instanceof File?t:ad([await t.arrayBuffer()],t.name);if(sM(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),ad(await Gd(r),e,i)}const s=await Gd(t);if(e||(e=nM(t)),!(i!=null&&i.type)){const r=s.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof r=="string"&&(i=Object.assign(Object.assign({},i),{type:r}))}return ad(s,e,i)}async function Gd(t){var e,i,s,r,l;let c=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)c.push(t);else if(M_(t))c.push(t instanceof Blob?t:await t.arrayBuffer());else if(iM(t))try{for(var f=!0,m=Cn(t),p;p=await m.next(),e=p.done,!e;f=!0){r=p.value,f=!1;const v=r;c.push(...await Gd(v))}}catch(v){i={error:v}}finally{try{!f&&!e&&(s=m.return)&&await s.call(m)}finally{if(i)throw i.error}}else{const v=(l=t==null?void 0:t.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof t}${v?`; constructor: ${v}`:""}${aM(t)}`)}return c}function aM(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(i=>`"${i}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class k_{constructor(e){this._client=e}}k_._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function D_(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Sv=Object.freeze(Object.create(null)),lM=(t=D_)=>(function(i,...s){if(i.length===1)return i[0];let r=!1;const l=[],c=i.reduce((v,_,S)=>{var T,A,x;/[?#]/.test(_)&&(r=!0);const C=s[S];let R=(r?encodeURIComponent:t)(""+C);return S!==s.length&&(C==null||typeof C=="object"&&C.toString===((x=Object.getPrototypeOf((A=Object.getPrototypeOf((T=C.hasOwnProperty)!==null&&T!==void 0?T:Sv))!==null&&A!==void 0?A:Sv))===null||x===void 0?void 0:x.toString))&&(R=C+"",l.push({start:v.length+_.length,length:R.length,error:`Value of type ${Object.prototype.toString.call(C).slice(8,-1)} is not a valid path parameter`})),v+_+(S===s.length?"":R)},""),f=c.split(/[?#]/,1)[0],m=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=m.exec(f))!==null;)l.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(l.sort((v,_)=>v.start-_.start),l.length>0){let v=0;const _=l.reduce((S,T)=>{const A=" ".repeat(T.start-v),x="^".repeat(T.length);return v=T.start+T.length,S+A+x},"");throw new yn(`Path parameters result in path with invalid segments:
${l.map(S=>S.error).join(`
`)}
${c}
${_}`)}return c}),Xa=lM(D_);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class U_ extends k_{create(e,i){var s;const{api_version:r=this._client.apiVersion}=e,l=_l(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new yn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new yn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Xa`/${r}/interactions`,Object.assign(Object.assign({body:l},i),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,i={},s){const{api_version:r=this._client.apiVersion}=i??{};return this._client.delete(Xa`/${r}/interactions/${e}`,s)}cancel(e,i={},s){const{api_version:r=this._client.apiVersion}=i??{};return this._client.post(Xa`/${r}/interactions/${e}/cancel`,s)}get(e,i={},s){var r;const l=i??{},{api_version:c=this._client.apiVersion}=l,f=_l(l,["api_version"]);return this._client.get(Xa`/${c}/interactions/${e}`,Object.assign(Object.assign({query:f},s),{stream:(r=i==null?void 0:i.stream)!==null&&r!==void 0?r:!1}))}}U_._key=Object.freeze(["interactions"]);class O_ extends U_{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uM(t){let e=0;for(const r of t)e+=r.length;const i=new Uint8Array(e);let s=0;for(const r of t)i.set(r,s),s+=r.length;return i}let Qa;function lf(t){let e;return(Qa??(e=new globalThis.TextEncoder,Qa=e.encode.bind(e)))(t)}let Wa;function Ev(t){let e;return(Wa??(e=new globalThis.TextDecoder,Wa=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ml{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const i=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?lf(e):e;this.buffer=uM([this.buffer,i]);const s=[];let r;for(;(r=cM(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){s.push(Ev(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,c=Ev(this.buffer.subarray(0,l));s.push(c),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}Ml.NEWLINE_CHARS=new Set([`
`,"\r"]);Ml.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function cM(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function dM(t){for(let s=0;s<t.length-1;s++){if(t[s]===10&&t[s+1]===10||t[s]===13&&t[s+1]===13)return s+2;if(t[s]===13&&t[s+1]===10&&s+3<t.length&&t[s+2]===13&&t[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sl={off:0,error:200,warn:300,info:400,debug:500},Tv=(t,e,i)=>{if(t){if(FI(Sl,t))return t;Lt(i).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Sl))}`)}};function Sr(){}function Za(t,e,i){return!e||Sl[t]>Sl[i]?Sr:e[t].bind(e)}const fM={error:Sr,warn:Sr,info:Sr,debug:Sr};let wv=new WeakMap;function Lt(t){var e;const i=t.logger,s=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!i)return fM;const r=wv.get(i);if(r&&r[0]===s)return r[1];const l={error:Za("error",i,s),warn:Za("warn",i,s),info:Za("info",i,s),debug:Za("debug",i,s)};return wv.set(i,[s,l]),l}const ro=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,i])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":i]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class as{constructor(e,i,s){this.iterator=e,this.controller=i,this.client=s}static fromSSEResponse(e,i,s){let r=!1;const l=s?Lt(s):console;function c(){return An(this,arguments,function*(){var m,p,v,_;if(r)throw new yn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var T=!0,A=Cn(hM(e,i)),x;x=yield me(A.next()),m=x.done,!m;T=!0){_=x.value,T=!1;const C=_;if(!S)if(C.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield me(JSON.parse(C.data))}catch(R){throw l.error("Could not parse message into JSON:",C.data),l.error("From chunk:",C.raw),R}}}catch(C){p={error:C}}finally{try{!T&&!m&&(v=A.return)&&(yield me(v.call(A)))}finally{if(p)throw p.error}}S=!0}catch(C){if(Od(C))return yield me(void 0);throw C}finally{S||i.abort()}})}return new as(c,i,s)}static fromReadableStream(e,i,s){let r=!1;function l(){return An(this,arguments,function*(){var m,p,v,_;const S=new Ml,T=N_(e);try{for(var A=!0,x=Cn(T),C;C=yield me(x.next()),m=C.done,!m;A=!0){_=C.value,A=!1;const R=_;for(const D of S.decode(R))yield yield me(D)}}catch(R){p={error:R}}finally{try{!A&&!m&&(v=x.return)&&(yield me(v.call(x)))}finally{if(p)throw p.error}}for(const R of S.flush())yield yield me(R)})}function c(){return An(this,arguments,function*(){var m,p,v,_;if(r)throw new yn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var T=!0,A=Cn(l()),x;x=yield me(A.next()),m=x.done,!m;T=!0){_=x.value,T=!1;const C=_;S||C&&(yield yield me(JSON.parse(C)))}}catch(C){p={error:C}}finally{try{!T&&!m&&(v=A.return)&&(yield me(v.call(A)))}finally{if(p)throw p.error}}S=!0}catch(C){if(Od(C))return yield me(void 0);throw C}finally{S||i.abort()}})}return new as(c,i,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],i=[],s=this.iterator(),r=l=>({next:()=>{if(l.length===0){const c=s.next();e.push(c),i.push(c)}return l.shift()}});return[new as(()=>r(e),this.controller,this.client),new as(()=>r(i),this.controller,this.client)]}toReadableStream(){const e=this;let i;return R_({async start(){i=e[Symbol.asyncIterator]()},async pull(s){try{const{value:r,done:l}=await i.next();if(l)return s.close();const c=lf(JSON.stringify(r)+`
`);s.enqueue(c)}catch(r){s.error(r)}},async cancel(){var s;await((s=i.return)===null||s===void 0?void 0:s.call(i))}})}}function hM(t,e){return An(this,arguments,function*(){var s,r,l,c;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new yn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new yn("Attempted to iterate over a response with no body");const f=new mM,m=new Ml,p=N_(t.body);try{for(var v=!0,_=Cn(pM(p)),S;S=yield me(_.next()),s=S.done,!s;v=!0){c=S.value,v=!1;const T=c;for(const A of m.decode(T)){const x=f.decode(A);x&&(yield yield me(x))}}}catch(T){r={error:T}}finally{try{!v&&!s&&(l=_.return)&&(yield me(l.call(_)))}finally{if(r)throw r.error}}for(const T of m.flush()){const A=f.decode(T);A&&(yield yield me(A))}})}function pM(t){return An(this,arguments,function*(){var i,s,r,l;let c=new Uint8Array;try{for(var f=!0,m=Cn(t),p;p=yield me(m.next()),i=p.done,!i;f=!0){l=p.value,f=!1;const v=l;if(v==null)continue;const _=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?lf(v):v;let S=new Uint8Array(c.length+_.length);S.set(c),S.set(_,c.length),c=S;let T;for(;(T=dM(c))!==-1;)yield yield me(c.slice(0,T)),c=c.slice(T)}}catch(v){s={error:v}}finally{try{!f&&!i&&(r=m.return)&&(yield me(r.call(m)))}finally{if(s)throw s.error}}c.length>0&&(yield yield me(c))})}class mM{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[i,s,r]=gM(e,":");return r.startsWith(" ")&&(r=r.substring(1)),i==="event"?this.event=r:i==="data"&&this.data.push(r),null}}function gM(t,e){const i=t.indexOf(e);return i!==-1?[t.substring(0,i),e,t.substring(i+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function yM(t,e){const{response:i,requestLogID:s,retryOfRequestLogID:r,startTime:l}=e,c=await(async()=>{var f;if(e.options.stream)return Lt(t).debug("response",i.status,i.url,i.headers,i.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(i,e.controller,t):as.fromSSEResponse(i,e.controller,t);if(i.status===204)return null;if(e.options.__binaryResponse)return i;const m=i.headers.get("content-type"),p=(f=m==null?void 0:m.split(";")[0])===null||f===void 0?void 0:f.trim();return(p==null?void 0:p.includes("application/json"))||(p==null?void 0:p.endsWith("+json"))?await i.json():await i.text()})();return Lt(t).debug(`[${s}] response parsed`,ro({retryOfRequestLogID:r,url:i.url,status:i.status,body:c,durationMs:Date.now()-l})),c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uf extends Promise{constructor(e,i,s=yM){super(r=>{r(null)}),this.responsePromise=i,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new uf(this.client,this.responsePromise,async(i,s)=>e(await this.parseResponse(i,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,i]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:i}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,i){return this.parse().then(e,i)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const P_=Symbol("brand.privateNullableHeaders");function*vM(t){if(!t)return;if(P_ in t){const{values:s,nulls:r}=t;yield*s.entries();for(const l of r)yield[l,null];return}let e=!1,i;t instanceof Headers?i=t.entries():yv(t)?i=t:(e=!0,i=Object.entries(t??{}));for(let s of i){const r=s[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const l=yv(s[1])?s[1]:[s[1]];let c=!1;for(const f of l)f!==void 0&&(e&&!c&&(c=!0,yield[r,null]),yield[r,f])}}const ld=t=>{const e=new Headers,i=new Set;for(const s of t){const r=new Set;for(const[l,c]of vM(s)){const f=l.toLowerCase();r.has(f)||(e.delete(l),r.add(f)),c===null?(e.delete(l),i.add(f)):(e.append(l,c),i.delete(f))}}return{[P_]:!0,values:e,nulls:i}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ud=t=>{var e,i,s,r,l,c;if(typeof globalThis.process<"u")return(s=(i=(e=Fb)===null||e===void 0?void 0:e[t])===null||i===void 0?void 0:i.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(c=(l=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||l===void 0?void 0:l.call(r,t))===null||c===void 0?void 0:c.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var L_;class kl{constructor(e){var i,s,r,l,c,f,m,p=e===void 0?{}:e,{baseURL:v=ud("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(i=ud("GEMINI_API_KEY"))!==null&&i!==void 0?i:null,apiVersion:S="v1beta"}=p,T=_l(p,["baseURL","apiKey","apiVersion"]);const A=Object.assign(Object.assign({apiKey:_,apiVersion:S},T),{baseURL:v||"https://generativelanguage.googleapis.com"});this.baseURL=A.baseURL,this.timeout=(s=A.timeout)!==null&&s!==void 0?s:kl.DEFAULT_TIMEOUT,this.logger=(r=A.logger)!==null&&r!==void 0?r:console;const x="warn";this.logLevel=x,this.logLevel=(c=(l=Tv(A.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:Tv(ud("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&c!==void 0?c:x,this.fetchOptions=A.fetchOptions,this.maxRetries=(f=A.maxRetries)!==null&&f!==void 0?f:2,this.fetch=(m=A.fetch)!==null&&m!==void 0?m:WI(),this.encoder=tM,this._options=A,this.apiKey=_,this.apiVersion=S}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:i}){if(!(this.apiKey&&e.get("x-goog-api-key"))&&!i.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){if(this.apiKey!=null)return ld([{"x-goog-api-key":this.apiKey}])}stringifyQuery(e){return Object.entries(e).filter(([i,s])=>typeof s<"u").map(([i,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(i)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(i)}=`;throw new yn(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${ss}`}defaultIdempotencyKey(){return`stainless-node-retry-${qI()}`}makeStatusError(e,i,s,r){return qt.generate(e,i,s,r)}buildURL(e,i,s){const r=!this.baseURLOverridden()&&s||this.baseURL,l=BI(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return zI(c)||(i=Object.assign(Object.assign({},c),i)),typeof i=="object"&&i&&!Array.isArray(i)&&(l.search=this.stringifyQuery(i)),l.toString()}async prepareOptions(e){}async prepareRequest(e,{url:i,options:s}){}get(e,i){return this.methodRequest("get",e,i)}post(e,i){return this.methodRequest("post",e,i)}patch(e,i){return this.methodRequest("patch",e,i)}put(e,i){return this.methodRequest("put",e,i)}delete(e,i){return this.methodRequest("delete",e,i)}methodRequest(e,i,s){return this.request(Promise.resolve(s).then(r=>Object.assign({method:e,path:i},r)))}request(e,i=null){return new uf(this,this.makeRequest(e,i,void 0))}async makeRequest(e,i,s){var r,l,c;const f=await e,m=(r=f.maxRetries)!==null&&r!==void 0?r:this.maxRetries;i==null&&(i=m),await this.prepareOptions(f);const{req:p,url:v,timeout:_}=await this.buildRequest(f,{retryCount:m-i});await this.prepareRequest(p,{url:v,options:f});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),T=s===void 0?"":`, retryOf: ${s}`,A=Date.now();if(Lt(this).debug(`[${S}] sending request`,ro({retryOfRequestLogID:s,method:f.method,url:v,options:f,headers:p.headers})),!((l=f.signal)===null||l===void 0)&&l.aborted)throw new Ld;const x=new AbortController,C=await this.fetchWithTimeout(v,p,_,x).catch(Pd),R=Date.now();if(C instanceof globalThis.Error){const I=`retrying, ${i} attempts remaining`;if(!((c=f.signal)===null||c===void 0)&&c.aborted)throw new Ld;const B=Od(C)||/timed? ?out/i.test(String(C)+("cause"in C?String(C.cause):""));if(i)return Lt(this).info(`[${S}] connection ${B?"timed out":"failed"} - ${I}`),Lt(this).debug(`[${S}] connection ${B?"timed out":"failed"} (${I})`,ro({retryOfRequestLogID:s,url:v,durationMs:R-A,message:C.message})),this.retryRequest(f,i,s??S);throw Lt(this).info(`[${S}] connection ${B?"timed out":"failed"} - error; no more retries left`),Lt(this).debug(`[${S}] connection ${B?"timed out":"failed"} (error; no more retries left)`,ro({retryOfRequestLogID:s,url:v,durationMs:R-A,message:C.message})),B?new __:new Il({cause:C})}const D=`[${S}${T}] ${p.method} ${v} ${C.ok?"succeeded":"failed"} with status ${C.status} in ${R-A}ms`;if(!C.ok){const I=await this.shouldRetry(C);if(i&&I){const X=`retrying, ${i} attempts remaining`;return await eM(C.body),Lt(this).info(`${D} - ${X}`),Lt(this).debug(`[${S}] response error (${X})`,ro({retryOfRequestLogID:s,url:C.url,status:C.status,headers:C.headers,durationMs:R-A})),this.retryRequest(f,i,s??S,C.headers)}const B=I?"error; no more retries left":"error; not retryable";Lt(this).info(`${D} - ${B}`);const K=await C.text().catch(X=>Pd(X).message),Y=JI(K),$=Y?void 0:K;throw Lt(this).debug(`[${S}] response error (${B})`,ro({retryOfRequestLogID:s,url:C.url,status:C.status,headers:C.headers,message:$,durationMs:Date.now()-A})),this.makeStatusError(C.status,Y,$,C.headers)}return Lt(this).info(D),Lt(this).debug(`[${S}] response start`,ro({retryOfRequestLogID:s,url:C.url,status:C.status,headers:C.headers,durationMs:R-A})),{response:C,options:f,controller:x,requestLogID:S,retryOfRequestLogID:s,startTime:A}}async fetchWithTimeout(e,i,s,r){const l=i||{},{signal:c,method:f}=l,m=_l(l,["signal","method"]);c&&c.addEventListener("abort",()=>r.abort());const p=setTimeout(()=>r.abort(),s),v=globalThis.ReadableStream&&m.body instanceof globalThis.ReadableStream||typeof m.body=="object"&&m.body!==null&&Symbol.asyncIterator in m.body,_=Object.assign(Object.assign(Object.assign({signal:r.signal},v?{duplex:"half"}:{}),{method:"GET"}),m);f&&(_.method=f.toUpperCase());try{return await this.fetch.call(void 0,e,_)}finally{clearTimeout(p)}}async shouldRetry(e){const i=e.headers.get("x-should-retry");return i==="true"?!0:i==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,i,s,r){var l;let c;const f=r==null?void 0:r.get("retry-after-ms");if(f){const p=parseFloat(f);Number.isNaN(p)||(c=p)}const m=r==null?void 0:r.get("retry-after");if(m&&!c){const p=parseFloat(m);Number.isNaN(p)?c=Date.parse(m)-Date.now():c=p*1e3}if(!(c&&0<=c&&c<60*1e3)){const p=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(i,p)}return await KI(c),this.makeRequest(e,i-1,s)}calculateDefaultRetryTimeoutMillis(e,i){const l=i-e,c=Math.min(.5*Math.pow(2,l),8),f=1-Math.random()*.25;return c*f*1e3}async buildRequest(e,{retryCount:i=0}={}){var s,r,l;const c=Object.assign({},e),{method:f,path:m,query:p,defaultBaseURL:v}=c,_=this.buildURL(m,p,v);"timeout"in c&&$I("timeout",c.timeout),c.timeout=(s=c.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:S,body:T}=this.buildBody({options:c}),A=await this.buildHeaders({options:e,method:f,bodyHeaders:S,retryCount:i});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:f,headers:A},c.signal&&{signal:c.signal}),globalThis.ReadableStream&&T instanceof globalThis.ReadableStream&&{duplex:"half"}),T&&{body:T}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(l=c.fetchOptions)!==null&&l!==void 0?l:{}),url:_,timeout:c.timeout}}async buildHeaders({options:e,method:i,bodyHeaders:s,retryCount:r}){let l={};this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const c=ld([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),QI()),await this.authHeaders(e),this._options.defaultHeaders,s,e.headers]);return this.validateHeaders(c),c.values}buildBody({options:{body:e,headers:i}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=ld([i]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:ZI(e)}:this.encoder({body:e,headers:s})}}kl.DEFAULT_TIMEOUT=6e4;class Tt extends kl{constructor(){super(...arguments),this.interactions=new O_(this)}}L_=Tt;Tt.GeminiNextGenAPIClient=L_;Tt.GeminiNextGenAPIClientError=yn;Tt.APIError=qt;Tt.APIConnectionError=Il;Tt.APIConnectionTimeoutError=__;Tt.APIUserAbortError=Ld;Tt.NotFoundError=w_;Tt.ConflictError=b_;Tt.RateLimitError=C_;Tt.BadRequestError=S_;Tt.AuthenticationError=E_;Tt.InternalServerError=x_;Tt.PermissionDeniedError=T_;Tt.UnprocessableEntityError=A_;Tt.toFile=rM;Tt.Interactions=O_;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _M(t,e){const i={},s=d(t,["name"]);return s!=null&&h(i,["_url","name"],s),i}function SM(t,e){const i={},s=d(t,["name"]);return s!=null&&h(i,["_url","name"],s),i}function EM(t,e){const i={},s=d(t,["sdkHttpResponse"]);return s!=null&&h(i,["sdkHttpResponse"],s),i}function TM(t,e){const i={},s=d(t,["sdkHttpResponse"]);return s!=null&&h(i,["sdkHttpResponse"],s),i}function wM(t,e,i){const s={};if(d(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=d(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&h(e,["displayName"],r),d(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=d(t,["epochCount"]);e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","epochCount"],l);const c=d(t,["learningRateMultiplier"]);if(c!=null&&h(s,["tuningTask","hyperparameters","learningRateMultiplier"],c),d(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=d(t,["batchSize"]);e!==void 0&&f!=null&&h(e,["tuningTask","hyperparameters","batchSize"],f);const m=d(t,["learningRate"]);if(e!==void 0&&m!=null&&h(e,["tuningTask","hyperparameters","learningRate"],m),d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function bM(t,e,i){const s={};let r=d(i,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const T=d(t,["validationDataset"]);e!==void 0&&T!=null&&h(e,["supervisedTuningSpec"],bv(T))}else if(r==="PREFERENCE_TUNING"){const T=d(t,["validationDataset"]);e!==void 0&&T!=null&&h(e,["preferenceOptimizationSpec"],bv(T))}const l=d(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&h(e,["tunedModelDisplayName"],l);const c=d(t,["description"]);e!==void 0&&c!=null&&h(e,["description"],c);let f=d(i,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const T=d(t,["epochCount"]);e!==void 0&&T!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],T)}else if(f==="PREFERENCE_TUNING"){const T=d(t,["epochCount"]);e!==void 0&&T!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],T)}let m=d(i,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const T=d(t,["learningRateMultiplier"]);e!==void 0&&T!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],T)}else if(m==="PREFERENCE_TUNING"){const T=d(t,["learningRateMultiplier"]);e!==void 0&&T!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],T)}let p=d(i,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const T=d(t,["exportLastCheckpointOnly"]);e!==void 0&&T!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],T)}else if(p==="PREFERENCE_TUNING"){const T=d(t,["exportLastCheckpointOnly"]);e!==void 0&&T!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],T)}let v=d(i,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const T=d(t,["adapterSize"]);e!==void 0&&T!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],T)}else if(v==="PREFERENCE_TUNING"){const T=d(t,["adapterSize"]);e!==void 0&&T!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],T)}if(d(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=d(t,["labels"]);e!==void 0&&_!=null&&h(e,["labels"],_);const S=d(t,["beta"]);return e!==void 0&&S!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),s}function AM(t,e){const i={},s=d(t,["baseModel"]);s!=null&&h(i,["baseModel"],s);const r=d(t,["preTunedModel"]);r!=null&&h(i,["preTunedModel"],r);const l=d(t,["trainingDataset"]);l!=null&&PM(l);const c=d(t,["config"]);return c!=null&&wM(c,i),i}function CM(t,e){const i={},s=d(t,["baseModel"]);s!=null&&h(i,["baseModel"],s);const r=d(t,["preTunedModel"]);r!=null&&h(i,["preTunedModel"],r);const l=d(t,["trainingDataset"]);l!=null&&LM(l,i,e);const c=d(t,["config"]);return c!=null&&bM(c,i,e),i}function xM(t,e){const i={},s=d(t,["name"]);return s!=null&&h(i,["_url","name"],s),i}function RM(t,e){const i={},s=d(t,["name"]);return s!=null&&h(i,["_url","name"],s),i}function NM(t,e,i){const s={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const l=d(t,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const c=d(t,["filter"]);return e!==void 0&&c!=null&&h(e,["_query","filter"],c),s}function IM(t,e,i){const s={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const l=d(t,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const c=d(t,["filter"]);return e!==void 0&&c!=null&&h(e,["_query","filter"],c),s}function MM(t,e){const i={},s=d(t,["config"]);return s!=null&&NM(s,i),i}function kM(t,e){const i={},s=d(t,["config"]);return s!=null&&IM(s,i),i}function DM(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&h(i,["sdkHttpResponse"],s);const r=d(t,["nextPageToken"]);r!=null&&h(i,["nextPageToken"],r);const l=d(t,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>q_(f))),h(i,["tuningJobs"],c)}return i}function UM(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&h(i,["sdkHttpResponse"],s);const r=d(t,["nextPageToken"]);r!=null&&h(i,["nextPageToken"],r);const l=d(t,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>Bd(f))),h(i,["tuningJobs"],c)}return i}function OM(t,e){const i={},s=d(t,["name"]);s!=null&&h(i,["model"],s);const r=d(t,["name"]);return r!=null&&h(i,["endpoint"],r),i}function PM(t,e){const i={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=d(t,["examples"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),h(i,["examples","examples"],r)}return i}function LM(t,e,i){const s={};let r=d(i,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const c=d(t,["gcsUri"]);e!==void 0&&c!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(r==="PREFERENCE_TUNING"){const c=d(t,["gcsUri"]);e!==void 0&&c!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=d(i,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=d(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=d(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(d(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function q_(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&h(i,["sdkHttpResponse"],s);const r=d(t,["name"]);r!=null&&h(i,["name"],r);const l=d(t,["state"]);l!=null&&h(i,["state"],W0(l));const c=d(t,["createTime"]);c!=null&&h(i,["createTime"],c);const f=d(t,["tuningTask","startTime"]);f!=null&&h(i,["startTime"],f);const m=d(t,["tuningTask","completeTime"]);m!=null&&h(i,["endTime"],m);const p=d(t,["updateTime"]);p!=null&&h(i,["updateTime"],p);const v=d(t,["description"]);v!=null&&h(i,["description"],v);const _=d(t,["baseModel"]);_!=null&&h(i,["baseModel"],_);const S=d(t,["_self"]);return S!=null&&h(i,["tunedModel"],OM(S)),i}function Bd(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&h(i,["sdkHttpResponse"],s);const r=d(t,["name"]);r!=null&&h(i,["name"],r);const l=d(t,["state"]);l!=null&&h(i,["state"],W0(l));const c=d(t,["createTime"]);c!=null&&h(i,["createTime"],c);const f=d(t,["startTime"]);f!=null&&h(i,["startTime"],f);const m=d(t,["endTime"]);m!=null&&h(i,["endTime"],m);const p=d(t,["updateTime"]);p!=null&&h(i,["updateTime"],p);const v=d(t,["error"]);v!=null&&h(i,["error"],v);const _=d(t,["description"]);_!=null&&h(i,["description"],_);const S=d(t,["baseModel"]);S!=null&&h(i,["baseModel"],S);const T=d(t,["tunedModel"]);T!=null&&h(i,["tunedModel"],T);const A=d(t,["preTunedModel"]);A!=null&&h(i,["preTunedModel"],A);const x=d(t,["supervisedTuningSpec"]);x!=null&&h(i,["supervisedTuningSpec"],x);const C=d(t,["preferenceOptimizationSpec"]);C!=null&&h(i,["preferenceOptimizationSpec"],C);const R=d(t,["tuningDataStats"]);R!=null&&h(i,["tuningDataStats"],R);const D=d(t,["encryptionSpec"]);D!=null&&h(i,["encryptionSpec"],D);const I=d(t,["partnerModelTuningSpec"]);I!=null&&h(i,["partnerModelTuningSpec"],I);const B=d(t,["customBaseModel"]);B!=null&&h(i,["customBaseModel"],B);const K=d(t,["experiment"]);K!=null&&h(i,["experiment"],K);const Y=d(t,["labels"]);Y!=null&&h(i,["labels"],Y);const $=d(t,["outputUri"]);$!=null&&h(i,["outputUri"],$);const ne=d(t,["pipelineJob"]);ne!=null&&h(i,["pipelineJob"],ne);const X=d(t,["serviceAccount"]);X!=null&&h(i,["serviceAccount"],X);const ue=d(t,["tunedModelDisplayName"]);ue!=null&&h(i,["tunedModelDisplayName"],ue);const pe=d(t,["veoTuningSpec"]);return pe!=null&&h(i,["veoTuningSpec"],pe),i}function qM(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&h(i,["sdkHttpResponse"],s);const r=d(t,["name"]);r!=null&&h(i,["name"],r);const l=d(t,["metadata"]);l!=null&&h(i,["metadata"],l);const c=d(t,["done"]);c!=null&&h(i,["done"],c);const f=d(t,["error"]);return f!=null&&h(i,["error"],f),i}function bv(t,e){const i={},s=d(t,["gcsUri"]);s!=null&&h(i,["validationDatasetUri"],s);const r=d(t,["vertexDatasetResource"]);return r!=null&&h(i,["validationDatasetUri"],r),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GM extends ri{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new co(oi.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(i),i),this.get=async i=>await this.getInternal(i),this.tune=async i=>{var s;if(this.apiClient.isVertexAI())if(i.baseModel.startsWith("projects/")){const r={tunedModelName:i.baseModel};!((s=i.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(r.checkpointId=i.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},i),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},i);return await this.tuneInternal(r)}else{const r=Object.assign({},i),l=await this.tuneMldevInternal(r);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:Rd.JOB_STATE_QUEUED}}}}async getInternal(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=RM(e);return f=W("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>Bd(v))}else{const p=xM(e);return f=W("{name}",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>q_(v))}}async listInternal(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=kM(e);return f=W("tuningJobs",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=UM(v),S=new Xy;return Object.assign(S,_),S})}else{const p=MM(e);return f=W("tunedModels",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=DM(v),S=new Xy;return Object.assign(S,_),S})}}async cancel(e){var i,s,r,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const p=SM(e);return f=W("{name}:cancel",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=TM(v),S=new Qy;return Object.assign(S,_),S})}else{const p=_M(e);return f=W("{name}:cancel",p._url),m=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=EM(v),S=new Qy;return Object.assign(S,_),S})}}async tuneInternal(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const f=CM(e,e);return l=W("tuningJobs",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>Bd(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var i,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=AM(e);return l=W("tunedModels",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>qM(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BM{async download(e,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const HM=1024*1024*8,VM=3,zM=1e3,FM=2,El="x-goog-upload-status";async function $M(t,e,i){var s;const r=await G_(t,e,i),l=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[El])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function JM(t,e,i){var s;const r=await G_(t,e,i),l=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[El])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=J0(l),f=new tf;return Object.assign(f,c),f}async function G_(t,e,i){var s,r;let l=0,c=0,f=new Nd(new Response),m="upload";for(l=t.size;c<l;){const p=Math.min(HM,l-c),v=t.slice(c,c+p);c+p>=l&&(m+=", finalize");let _=0,S=zM;for(;_<VM&&(f=await i.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(c),"Content-Length":String(p)}}}),!(!((s=f==null?void 0:f.headers)===null||s===void 0)&&s[El]));)_++,await jM(S),S=S*FM;if(c+=p,((r=f==null?void 0:f.headers)===null||r===void 0?void 0:r[El])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function KM(t){return{size:t.size,type:t.type}}function jM(t){return new Promise(e=>setTimeout(e,t))}class YM{async upload(e,i,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await $M(e,i,s)}async uploadToFileSearchStore(e,i,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await JM(e,i,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await KM(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XM{create(e,i,s){return new QM(e,i,s)}}class QM{constructor(e,i,s){this.url=e,this.headers=i,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Av="x-goog-api-key";class WM{constructor(e){this.apiKey=e}async addAuthHeaders(e,i){if(e.get(Av)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Av,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ZM="gl-node/";class ek{get interactions(){if(this._interactions!==void 0)return this._interactions;if(console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions."),this.vertexai)throw new Error("This version of the GenAI SDK does not support Vertex AI API for interactions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const i=new Tt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=i.interactions,this._interactions}constructor(e){var i;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=e.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=e.apiKey;const s=jb(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new WM(this.apiKey);this.apiClient=new KN({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:ZM+"web",uploader:new YM,downloader:new BM}),this.models=new fI(this.apiClient),this.live=new rI(this.apiClient,r,new XM),this.batches=new wC(this.apiClient),this.chats=new ox(this.models,this.apiClient),this.caches=new tx(this.apiClient),this.files=new px(this.apiClient),this.operations=new hI(this.apiClient),this.authTokens=new NI(this.apiClient),this.tunings=new GM(this.apiClient),this.fileSearchStores=new LI(this.apiClient)}}const tk={type:Dt.OBJECT,properties:{title:{type:Dt.STRING},description:{type:Dt.STRING},keywords:{type:Dt.ARRAY,items:{type:Dt.STRING}},category:{type:Dt.STRING}},required:["title","description","keywords","category"]},nk={type:Dt.OBJECT,properties:{description:{type:Dt.STRING}},required:["description"]},Cv=(t,e)=>{const{customPromptSelect:i,customPromptEntry:s,promptSwitches:r,customPromptEntryPrompt:l,descWords:c}=t;if(e==="prompt"&&r.customPrompt&&l.trim())return`Analyze this image based on the following instructions:
${l.trim()}

Provide JSON object with only 'description'.`;if(e==="metadata"&&i==="set_custom"&&s.trim())return`Analyze this image based on the following instructions:
${s.trim()}

Provide JSON object with 'title', 'description', 'keywords', and a relevant 'category'.`;if(e==="prompt"){let f=`Act as an expert metadata generator specializing in stock media requirements.
Analyze this image.
IMPORTANT: If the subject is isolated, assume it's on a white or transparent background. Do NOT mention "black background", "dark background", or similar phrases.
`;return f+=`Generate only a compelling description.
Target Description Length: MUST BE EXACTLY ${c} words. Provide the exact word count requested.
`,r.silhouette&&(f+=`Style: Silhouette. Emphasize this.
`),r.whiteBg&&(f+=`Background: Plain white. Mention 'white background', 'isolated'.
`),r.transparentBg&&(f+=`Background: Transparent. Mention 'transparent background', 'isolated'.
`),f+=`Focus on facts and concepts, avoiding subjective words (e.g., beautiful, amazing).

Provide JSON object with only 'description'.`,f}else return`I will give you images. You have to:
1. Write title for each images as per instructions and guide(Instructions and Guide will given below)
2. Write detailed description for each images.
3. Write keywords for each images as per instructions and guide(Instructions and Guide will given below)
4. Select a relevant Category.

Instructions: Analyze this image and generate content based on the following exact and strict requirements. Please give keywords separated by comma also give single word keyword and prefer singular keyword. please give single word keyword and give at maximum 30 keywords also give a title and title character will be around 70 -100 character, also give title in sentence case means only first letter will be in capital.

Provide JSON object with 'title', 'description', 'keywords', and 'category'.`},cf=async(t,e={},i=6e4)=>{const s=new AbortController,r=setTimeout(()=>s.abort(),i);try{const l=await fetch(t,{...e,signal:s.signal});return clearTimeout(r),l}catch(l){throw clearTimeout(r),l.name==="AbortError"?new Error("Request timed out. The server took too long to respond."):l}},ik=async(t,e,i,s)=>{var f;const r=[{role:"system",content:"You are a helpful AI assistant that generates metadata for images in JSON format."},{role:"user",content:[{type:"text",text:i},{type:"image_url",image_url:{url:`data:${s.mimeType};base64,${s.base64Data}`,detail:"high"}}]}],l=await cf("https://api.x.ai/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({messages:r,model:e,stream:!1,temperature:0})});if(!l.ok){const m=await l.json().catch(()=>({}));throw l.status===401||l.status===403?new Error("Unauthorized: Invalid API Key. Please check your settings."):new Error(((f=m.error)==null?void 0:f.message)||`Grok API Error: ${l.status} ${l.statusText}`)}return(await l.json()).choices[0].message.content},ok=async(t,e,i,s)=>{var m;const r="pixtral-12b-2409",l=[{role:"system",content:i},{role:"user",content:[{type:"text",text:"Analyze this image and provide the requested metadata in JSON format."},{type:"image_url",image_url:{url:`data:${s.mimeType};base64,${s.base64Data}`}}]}],c=await cf("https://api.mistral.ai/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:r,messages:l,temperature:.7,max_tokens:2048,top_p:1,stream:!1})});if(!c.ok){const p=await c.json().catch(()=>({}));if(c.status===401||c.status===403)throw new Error("Unauthorized: Invalid Mistral API Key.");const v=p.message||((m=p.error)==null?void 0:m.message)||`Mistral API Error: ${c.status} ${c.statusText}`;throw console.error("Mistral API Failure:",v,p),new Error(v)}const f=await c.json();if(!f.choices||!f.choices[0]||!f.choices[0].message)throw new Error("Invalid response structure from Mistral API");return f.choices[0].message.content},sk=async(t,e,i,s)=>{var m;const l=[{role:"system",content:`You are an expert stock photography metadata assistant. Respond ONLY in valid JSON.
JSON Structure: { "title": "string", "description": "string", "keywords": ["string", "string", ...], "category": "string" }`},{role:"user",content:[{type:"text",text:i},{type:"image_url",image_url:{url:`data:${s.mimeType};base64,${s.base64Data}`}}]}],c=await cf("https://api.groq.com/openai/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({model:e,messages:l,temperature:.5,max_completion_tokens:1024,response_format:{type:"json_object"},stream:!1})});if(!c.ok){const p=await c.json().catch(()=>({}));throw c.status===401||c.status===403?new Error("Unauthorized: Invalid Groq API Key."):new Error(((m=p.error)==null?void 0:m.message)||`Groq API Error: ${c.status} ${c.statusText}`)}return(await c.json()).choices[0].message.content},xv=async(t,e,i,s,r,l,c,f)=>{var T,A,x;if(!r)throw new Error("API data is missing.");const m=c==="prompt"?nk:tk;let p=1e3;const v=1e4,_=5;let S=0;for(;S<_;)try{let C;if(t==="gemini"){const K=await new ek({apiKey:e}).models.generateContent({model:i,contents:{parts:[{text:s},{inlineData:{mimeType:r.mimeType,data:r.base64Data}}]},config:{responseMimeType:"application/json",responseSchema:m}});if(C=K.text,!C)throw((A=(T=K.candidates)==null?void 0:T[0])==null?void 0:A.finishReason)==="SAFETY"?new Error("Blocked by safety settings."):new Error("Invalid Gemini API response structure.")}else t==="grok"?C=await ik(e,i,s,r):t==="mistral"?C=await ok(e,i,s,r):t==="groq"&&(C=await sk(e,i,s,r));if(!C)throw new Error("Empty response from API");let R=C;const D=C.match(/```json\n([\s\S]*?)\n```/)||C.match(/```\n([\s\S]*?)\n```/);if(D)R=D[1];else{const B=C.indexOf("{"),K=C.lastIndexOf("}");B!==-1&&K!==-1&&K>B&&(R=C.substring(B,K+1))}let I;try{I=JSON.parse(R)}catch(B){throw console.error("JSON Parse Error:",B,"Cleaned Text:",R,"Original Text:",C),new Error("Failed to parse AI response as JSON. The model might have returned unstructured text.")}if(c==="metadata"){const{advanceTitle:B,keywordsCount:K}=l;let Y=I.title?I.title.charAt(0).toUpperCase()+I.title.slice(1).toLowerCase():"";const $=[];B.transparentBg&&$.push("isolated on transparent background"),B.whiteBg&&$.push("isolated on white background"),B.vector&&$.push("Vector"),B.illustration&&$.push("illustration");const ne=$.length>0?" "+$.join(", "):"";I.title=Y+ne;let X=I.keywords;typeof X=="string"?X=X.split(","):Array.isArray(X)||(X=[]);let ue=X.map(be=>String(be).trim().toLowerCase()).filter(Boolean);$.map(be=>be.toLowerCase()).forEach(be=>{ue.includes(be)||ue.push(be)}),I.keywords=[...new Set(ue)].slice(0,K)}return I}catch(C){const R=((x=C.message)==null?void 0:x.toLowerCase())||"";if(R.includes("401")||R.includes("403")||R.includes("unauthorized")||R.includes("api key")||R.includes("400")||R.includes("invalid")||R.includes("not support"))throw C;if(S++,S>=_)throw new Error(`Failed after ${_} attempts. Last error: ${C.message}`);console.warn(`API call failed (Attempt ${S}/${_}). Retrying in ${p/1e3}s...`,C.message),f(p),await new Promise(D=>setTimeout(D,p)),p=Math.min(p*2,v)}throw new Error("Unknown error: Retry loop exited without result.")},rk=()=>{const[t,e]=ye.useState(hr),[i,s]=ye.useState([]),[r,l]=ye.useState([]),[c,f]=ye.useState(!1),[m,p]=ye.useState(!1),v=ye.useRef(!1),_=ye.useRef(r),S=ye.useRef(t);ye.useEffect(()=>{_.current=r,S.current=t},[r,t]);const[T,A]=ye.useState("gemini"),[x,C]=ye.useState([]),[R,D]=ye.useState([]),[I,B]=ye.useState([]),[K,Y]=ye.useState([]),[$,ne]=ye.useState("gemini-2.5-flash"),[X,ue]=ye.useState({percent:0,status:"Ready.",currentFile:0,totalFiles:0}),[pe,be]=ye.useState(!1),[Re,ze]=ye.useState(!1),[st,O]=ye.useState(!1),[J,re]=ye.useState(!1),[Z,Ee]=ye.useState(null),[M,V]=ye.useState({success:0,total:0}),[j,Q]=ye.useState(null),ee=ye.useCallback((he,we)=>{Q({id:Date.now(),message:he,type:we})},[]);ye.useEffect(()=>{(async()=>{var te;try{const{data:Ne,error:Ke}=await ol.auth.getSession();Ke?console.warn("Supabase Auth Error (Check your keys):",Ke.message):Ee(((te=Ne.session)==null?void 0:te.user)??null)}catch(Ne){console.warn("Failed to initialize Supabase:",Ne)}})();const{data:{subscription:we}}=ol.auth.onAuthStateChange((te,Ne)=>{Ee((Ne==null?void 0:Ne.user)??null)}),Ae=localStorage.getItem("aiProvider");if(Ae==="gemini"||Ae==="grok"||Ae==="mistral"||Ae==="groq"){if(A(Ae),Ae==="gemini"){const te=localStorage.getItem("geminiModel");ne(te||"gemini-2.5-flash")}else if(Ae==="grok"){const te=localStorage.getItem("grokModel");ne(te||"grok-2-vision-1212")}else if(Ae==="mistral"){const te=localStorage.getItem("mistralModel");ne(te||"pixtral-12b-2409")}else if(Ae==="groq"){const te=localStorage.getItem("groqModel");ne(te||"meta-llama/llama-4-maverick-17b")}}else{const te=localStorage.getItem("geminiModel");te&&ne(te)}try{const te=localStorage.getItem("geminiApiKeys");te&&C(JSON.parse(te))}catch(te){console.error("Failed to parse Gemini API keys",te)}try{const te=localStorage.getItem("grokApiKeys");te&&D(JSON.parse(te))}catch(te){console.error("Failed to parse Grok API keys",te)}try{const te=localStorage.getItem("mistralApiKeys");te&&B(JSON.parse(te))}catch(te){console.error("Failed to parse Mistral API keys",te)}try{const te=localStorage.getItem("groqCloudApiKeys");te&&Y(JSON.parse(te))}catch(te){console.error("Failed to parse Groq Cloud API keys",te)}try{const te=localStorage.getItem("appSettings");if(te){const Ne=JSON.parse(te),Ke={...hr.controls,...Ne.controls||{}};e(rt=>({...rt,...Ne,controls:Ke})),_e(Ne.themeColor||hr.themeColor)}else _e(hr.themeColor)}catch(te){console.error("Failed to parse settings from localStorage",te),_e(hr.themeColor)}return()=>we.unsubscribe()},[]);const ve=async()=>{try{await ol.auth.signOut(),Ee(null),ee("Logged out successfully","info")}catch(he){console.error("Logout error:",he)}},_e=he=>{document.documentElement.style.setProperty("--theme-color",he);const we=Je(he,20);document.documentElement.style.setProperty("--theme-color-hover",we),document.documentElement.style.setProperty("--theme-color-active-bg",he+"1a"),document.documentElement.style.setProperty("--theme-color-shadow",he+"33"),e(Ae=>({...Ae,themeColor:he}))},Je=(he,we)=>{let Ae=!1;he[0]==="#"&&(he=he.slice(1),Ae=!0);const te=parseInt(he,16);let Ne=(te>>16)+we;Ne>255?Ne=255:Ne<0&&(Ne=0);let Ke=(te>>8&255)+we;Ke>255?Ke=255:Ke<0&&(Ke=0);let rt=(te&255)+we;return rt>255?rt=255:rt<0&&(rt=0),(Ae?"#":"")+(rt|Ke<<8|Ne<<16).toString(16).padStart(6,"0")},Ze=he=>{e(we=>({...we,controls:he}))},Oi=()=>{try{localStorage.setItem("appSettings",JSON.stringify(t)),ee("Settings saved successfully!","success")}catch(he){console.error("Error saving settings:",he),ee("Could not save settings.","error")}},fo=()=>{v.current=!0,f(!1),s([]),l([]),ue({percent:0,status:"Ready.",currentFile:0,totalFiles:0}),p(!1),ee("All files and results have been cleared.","info")},ho=()=>{const he=_.current,we=S.current;if(he.length===0){ee("No metadata available to export.","warning");return}const Ae=Xe=>`"${String(Xe??"").replace(/"/g,'""')}"`,te=Xe=>{if(we.fileExtension==="default"||!we.fileExtension)return Xe;const at=Xe.lastIndexOf(".");return at===-1?`${Xe}.${we.fileExtension}`:`${Xe.substring(0,at)}.${we.fileExtension}`};let Ne="";const Ke=he.length>0?he[0].mode:"metadata";if(Ke==="prompt"){const Xe=["serial number","Description"],at=he.filter(gt=>gt.mode==="prompt").map((gt,ie)=>[ie+1,gt.description].map(Ae).join(","));Ne=Xe.join(",")+`
`+at.join(`
`)}else{let Xe=[],at=[];const gt=he.filter(ie=>ie.mode==="metadata");switch(we.selectedStockSite){case"adobe-stock":Xe=["Filename","Title","Keywords","Category"],at=gt.map(ie=>{var Le;return[te(ie.filename),ie.title,(Le=ie.keywords)==null?void 0:Le.join(", "),ie.category].map(Ae).join(",")});break;case"shutterstock":Xe=["Filename","Description","Keywords","Categorie"],at=gt.map(ie=>{var Le;return[te(ie.filename),ie.title,(Le=ie.keywords)==null?void 0:Le.slice(0,50).join(","),ie.category].map(Ae).join(",")});break;case"freepik":Xe=["File name","Title","Keywords","Prompt","Category"],at=gt.map(ie=>{var Le;return[te(ie.filename),ie.title,(Le=ie.keywords)==null?void 0:Le.join(", "),"",ie.category].map(Ae).join(",")});break;case"getty":Xe=["Filename","Title","Description","Keywords","Category"],at=gt.map(ie=>{var Le;return[te(ie.filename),ie.title,ie.description,(Le=ie.keywords)==null?void 0:Le.join(", "),ie.category].map(Ae).join(",")});break;case"istock":Xe=["filename","title","keywords","category","release"],at=gt.map(ie=>{var Le;return[te(ie.filename),ie.title,(Le=ie.keywords)==null?void 0:Le.join(", "),ie.category,""].map(Ae).join(",")});break;case"dreamstime":Xe=["filename","title","keywords","category","exclusive","editorial","model_releases","property_releases","image_id","mr_ids"],at=gt.map(ie=>{var Le;return[te(ie.filename),ie.title,(Le=ie.keywords)==null?void 0:Le.join(", "),ie.category,"","","","","",""].map(Ae).join(",")});break;case"vecteezy":Xe=["Filename","Title","Description","Keywords"],at=gt.map(ie=>{var Le;return[te(ie.filename),ie.title,ie.description,(Le=ie.keywords)==null?void 0:Le.join(", ")].map(Ae).join(",")});break;case"General":default:Xe=["Filename","Title","Description","Keywords","Category"],at=gt.map(ie=>{var Le;return[te(ie.filename),ie.title,ie.description,(Le=ie.keywords)==null?void 0:Le.join(", "),ie.category].map(Ae).join(",")});break}at.length>0&&(Ne=Xe.join(",")+`
`+at.join(`
`))}if(!Ne.trim()){ee("No data to export for the selected mode.","warning");return}const rt=new Blob([Ne],{type:"text/csv;charset=utf-8;"}),wt=document.createElement("a"),Gt=URL.createObjectURL(rt);wt.setAttribute("href",Gt);const nt=Ke==="prompt"?`${we.selectedStockSite}_prompts.csv`:`${we.selectedStockSite}_metadata.csv`;wt.setAttribute("download",nt),wt.style.visibility="hidden",document.body.appendChild(wt),wt.click(),document.body.removeChild(wt),ee("CSV exported successfully.","success")},Cr=async()=>{let he=[],we="";if(T==="gemini"?(he=x,we="Google Gemini"):T==="grok"?(he=R,we="xAI Grok"):T==="mistral"?(he=I,we="Mistral AI"):T==="groq"&&(he=K,we="Groq Cloud"),!he[0]){ee(`No API Key found for ${we}. Please check settings.`,"error"),be(!0);return}const Ae=i.filter(ie=>ie.status==="ready");if(Ae.length===0){ee(i.length>0?"Files are not ready for processing.":"No files uploaded to generate.","info");return}v.current=!1,f(!0),p(!1);const te=Ae.length;let Ne=0,Ke=0;const rt=[],wt=t.controls.activeTab;let Gt=0;const nt=new Array(he.length).fill(0);let Xe=Date.now();const at=async({fileState:ie,keyIndex:Le})=>{s(Ln=>Ln.map(Rn=>Rn.id===ie.id?{...Rn,status:"processing"}:Rn));try{const Ln=Cv(t.controls,wt),Rn=vn=>{console.log(`Retrying ${ie.file.name} in ${Math.ceil(vn/1e3)}s...`)};return{status:"success",metadata:await xv(T,he[Le],$,Ln,ie.apiData,t.controls,wt,Rn),fileState:ie}}catch(Ln){return{status:"error",error:Ln,fileState:ie}}},gt=async(ie,Le)=>{let Rn=t.controls.batchSize||_T;for(let Pi=0;Pi<ie.length&&!v.current;Pi+=Rn){for(;m&&(f(!1),ee("Generation paused.","info"),await new Promise(lt=>{const ut=setInterval(()=>{(!m||v.current)&&(clearInterval(ut),lt(null))},100)}),!v.current);)f(!0);if(v.current)break;const vn=ie.slice(Pi,Pi+Rn);let vt=-1,sn=!1;for(;!sn;){Date.now()-Xe>6e4&&(Xe=Date.now(),nt.fill(0));const lt=Gt;do{if(nt[Gt]+vn.length<=vT){vt=Gt,sn=!0;break}Gt=(Gt+1)%he.length}while(Gt!==lt);if(!sn){const ut=Xe+61e3;let _t;await new Promise(Bt=>{const Li=()=>{const Nn=Math.max(0,ut-Date.now());ue(po=>({...po,status:`All keys rate-limited. Waiting ${Math.ceil(Nn/1e3)}s...`})),Nn<=0&&(_t&&clearInterval(_t),Bt(null))};Li(),_t=setInterval(Li,1e3)})}}nt[vt]+=vn.length;const Ot=vn.map(lt=>({fileState:lt,keyIndex:vt}));Gt=(vt+1)%he.length;const Dl=await Promise.all(Ot.map(lt=>at(lt)));for(const lt of Dl){if(v.current)break;const{fileState:ut}=lt;lt.status==="success"?(l(_t=>[..._t,{...lt.metadata,thumbnailUrl:ut.thumbnailDataUrl,filename:ut.file.name,mode:wt,apiData:ut.apiData}]),Ke++,s(_t=>_t.filter(Bt=>Bt.id!==ut.id))):lt.status==="error"&&(Le?(console.error(`Failed to generate metadata for ${ut.file.name} on retry:`,lt.error),ee(`Retry failed for ${ut.file.name}: ${lt.error.message}`,"error"),l(_t=>[..._t,{title:"Error",description:`Failed: ${lt.error.message}`,keywords:[],category:"Error",thumbnailUrl:ut.thumbnailDataUrl,filename:ut.file.name,mode:wt,apiData:ut.apiData}]),s(_t=>_t.filter(Bt=>Bt.id!==ut.id))):(console.error(`Failed to generate metadata for ${ut.file.name}:`,lt.error),ee(`Error for ${ut.file.name}. It will be retried later.`,"warning"),rt.push(ut),s(_t=>_t.map(Bt=>Bt.id===ut.id?{...Bt,status:"error"}:Bt)))),Le||(Ne++,ue({percent:Ne/te*100,status:`Generated ${Ne}/${te} | ${Ke} successful`,currentFile:Ne,totalFiles:te}))}T!=="gemini"&&await new Promise(lt=>setTimeout(lt,200))}};if(await gt(Ae,!1),rt.length>0&&!v.current&&(ue(ie=>({...ie,status:`Retrying ${rt.length} failed files...`})),await new Promise(ie=>setTimeout(ie,2e3)),await gt(rt,!0)),v.current){ee("Generation stopped.","info"),ue(ie=>({...ie,status:"Stopped."}));return}f(!1),ue({percent:100,status:`Complete. ${Ke} of ${te} successful.`,currentFile:te,totalFiles:te}),V({success:Ke,total:te}),ze(!0),S.current.controls.autoDownloadCsv&&Ke>0&&setTimeout(()=>{ho()},500)},Pn=async he=>{let we=[];if(T==="gemini"?we=x:T==="grok"?we=R:T==="mistral"?we=I:T==="groq"&&(we=K),!we[0]){ee("API Key Missing.","error");return}const Ae=r[he];if(!Ae||!Ae.apiData){ee("Cannot regenerate. Missing data.","error");return}const te=t.controls.activeTab;try{const Ne=Cv(t.controls,te),Ke=wt=>{console.log(`Regeneration for ${Ae.filename} failed. Retrying in ${wt}ms...`),ee("Regeneration failed, retrying...","warning")},rt=await xv(T,we[0],$,Ne,Ae.apiData,t.controls,te,Ke);l(wt=>wt.map((Gt,nt)=>nt===he?{...Gt,...rt,mode:te}:Gt)),ee(`${Ae.filename} regenerated.`,"success")}catch(Ne){console.error(`Failed to regenerate metadata for ${Ae.filename}:`,Ne),ee(`Regeneration failed: ${Ne.message}`,"error")}};return w.jsxs("div",{className:"flex flex-col min-h-screen text-gray-200",children:[w.jsx(hT,{onTutorialClick:()=>O(!0),user:Z,onLogout:ve,onLogin:()=>re(!0)}),w.jsx("main",{className:"flex-grow container mx-auto px-4 lg:px-6 py-6 sm:py-8",children:w.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[w.jsx("div",{className:"lg:col-span-1",children:w.jsx(pT,{settings:t.controls,onSettingsChange:Ze,onSave:Oi,onApiKeyClick:()=>be(!0),themeColor:t.themeColor,onThemeColorChange:_e,fileExtension:t.fileExtension,onFileExtensionChange:he=>e(we=>({...we,fileExtension:he}))})}),w.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[w.jsx(wT,{user:Z,onLogin:()=>re(!0),stagedFiles:i,setStagedFiles:s,progress:X,isGenerating:c,isPaused:m,setIsPaused:p,startGeneration:Cr,generatedMetadata:r,setProgress:ue,showToast:ee,selectedStockSite:t.selectedStockSite,onStockSiteChange:he=>e(we=>({...we,selectedStockSite:he})),fileExtension:t.fileExtension,clearAll:fo,onExportCsv:ho}),w.jsx(AT,{metadata:r,setMetadata:l,onRegenerate:Pn})]})]})}),w.jsx(CT,{}),w.jsx(xT,{isOpen:pe,onClose:()=>be(!1),apiKeys:x,setApiKeys:C,grokApiKeys:R,setGrokApiKeys:D,mistralApiKeys:I,setMistralApiKeys:B,groqCloudApiKeys:K,setGroqCloudApiKeys:Y,selectedProvider:T,setSelectedProvider:A,selectedModel:$,setSelectedModel:ne,showToast:ee,themeColor:t.themeColor}),w.jsx(RT,{isOpen:Re,onClose:()=>ze(!1),stats:M,generatedMetadata:r,selectedStockSite:t.selectedStockSite,fileExtension:t.fileExtension}),w.jsx(NT,{isOpen:st,onClose:()=>O(!1)}),w.jsx(Vb,{isOpen:J,onClose:()=>re(!1),onSignIn:()=>{}}),j&&w.jsx(zb,{message:j.message,type:j.type,onDismiss:()=>Q(null)})]})},B_=document.getElementById("root");if(!B_)throw new Error("Could not find root element to mount to");const ak=fT.createRoot(B_);ak.render(w.jsx(oT.StrictMode,{children:w.jsx(rk,{})}));
